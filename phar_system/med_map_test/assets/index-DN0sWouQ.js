(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();function Ih(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yf={exports:{}},us={},wf={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=Symbol.for("react.element"),Dh=Symbol.for("react.portal"),Th=Symbol.for("react.fragment"),Oh=Symbol.for("react.strict_mode"),Mh=Symbol.for("react.profiler"),Rh=Symbol.for("react.provider"),Ph=Symbol.for("react.context"),jh=Symbol.for("react.forward_ref"),kh=Symbol.for("react.suspense"),Bh=Symbol.for("react.memo"),Lh=Symbol.for("react.lazy"),Nu=Symbol.iterator;function Fh(t){return t===null||typeof t!="object"?null:(t=Nu&&t[Nu]||t["@@iterator"],typeof t=="function"?t:null)}var _f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cf=Object.assign,bf={};function Wo(t,e,r){this.props=t,this.context=e,this.refs=bf,this.updater=r||_f}Wo.prototype.isReactComponent={};Wo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sf(){}Sf.prototype=Wo.prototype;function wc(t,e,r){this.props=t,this.context=e,this.refs=bf,this.updater=r||_f}var _c=wc.prototype=new Sf;_c.constructor=wc;Cf(_c,Wo.prototype);_c.isPureReactComponent=!0;var Eu=Array.isArray,Nf=Object.prototype.hasOwnProperty,Cc={current:null},Ef={key:!0,ref:!0,__self:!0,__source:!0};function Af(t,e,r){var n,o={},a=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(a=""+e.key),e)Nf.call(e,n)&&!Ef.hasOwnProperty(n)&&(o[n]=e[n]);var s=arguments.length-2;if(s===1)o.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];o.children=l}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)o[n]===void 0&&(o[n]=s[n]);return{$$typeof:Va,type:t,key:a,ref:i,props:o,_owner:Cc.current}}function Uh(t,e){return{$$typeof:Va,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Va}function Gh(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Au=/\/+/g;function Ms(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Gh(""+t.key):e.toString(36)}function Ci(t,e,r,n,o){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Va:case Dh:i=!0}}if(i)return i=t,o=o(i),t=n===""?"."+Ms(i,0):n,Eu(o)?(r="",t!=null&&(r=t.replace(Au,"$&/")+"/"),Ci(o,e,r,"",function(u){return u})):o!=null&&(bc(o)&&(o=Uh(o,r+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(Au,"$&/")+"/")+t)),e.push(o)),1;if(i=0,n=n===""?".":n+":",Eu(t))for(var s=0;s<t.length;s++){a=t[s];var l=n+Ms(a,s);i+=Ci(a,e,r,l,o)}else if(l=Fh(t),typeof l=="function")for(t=l.call(t),s=0;!(a=t.next()).done;)a=a.value,l=n+Ms(a,s++),i+=Ci(a,e,r,l,o);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Qa(t,e,r){if(t==null)return t;var n=[],o=0;return Ci(t,n,"","",function(a){return e.call(r,a,o++)}),n}function $h(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tr={current:null},bi={transition:null},zh={ReactCurrentDispatcher:tr,ReactCurrentBatchConfig:bi,ReactCurrentOwner:Cc};function If(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:Qa,forEach:function(t,e,r){Qa(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Qa(t,function(){e++}),e},toArray:function(t){return Qa(t,function(e){return e})||[]},only:function(t){if(!bc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=Wo;ze.Fragment=Th;ze.Profiler=Mh;ze.PureComponent=wc;ze.StrictMode=Oh;ze.Suspense=kh;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zh;ze.act=If;ze.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Cf({},t.props),o=t.key,a=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,i=Cc.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)Nf.call(e,l)&&!Ef.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:Va,type:t.type,key:o,ref:a,props:n,_owner:i}};ze.createContext=function(t){return t={$$typeof:Ph,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Rh,_context:t},t.Consumer=t};ze.createElement=Af;ze.createFactory=function(t){var e=Af.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:jh,render:t}};ze.isValidElement=bc;ze.lazy=function(t){return{$$typeof:Lh,_payload:{_status:-1,_result:t},_init:$h}};ze.memo=function(t,e){return{$$typeof:Bh,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=bi.transition;bi.transition={};try{t()}finally{bi.transition=e}};ze.unstable_act=If;ze.useCallback=function(t,e){return tr.current.useCallback(t,e)};ze.useContext=function(t){return tr.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return tr.current.useDeferredValue(t)};ze.useEffect=function(t,e){return tr.current.useEffect(t,e)};ze.useId=function(){return tr.current.useId()};ze.useImperativeHandle=function(t,e,r){return tr.current.useImperativeHandle(t,e,r)};ze.useInsertionEffect=function(t,e){return tr.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return tr.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return tr.current.useMemo(t,e)};ze.useReducer=function(t,e,r){return tr.current.useReducer(t,e,r)};ze.useRef=function(t){return tr.current.useRef(t)};ze.useState=function(t){return tr.current.useState(t)};ze.useSyncExternalStore=function(t,e,r){return tr.current.useSyncExternalStore(t,e,r)};ze.useTransition=function(){return tr.current.useTransition()};ze.version="18.3.1";wf.exports=ze;var _=wf.exports;const Bi=Ih(_);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hh=_,Vh=Symbol.for("react.element"),Xh=Symbol.for("react.fragment"),Wh=Object.prototype.hasOwnProperty,Yh=Hh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kh={key:!0,ref:!0,__self:!0,__source:!0};function Df(t,e,r){var n,o={},a=null,i=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)Wh.call(e,n)&&!Kh.hasOwnProperty(n)&&(o[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)o[n]===void 0&&(o[n]=e[n]);return{$$typeof:Vh,type:t,key:a,ref:i,props:o,_owner:Yh.current}}us.Fragment=Xh;us.jsx=Df;us.jsxs=Df;yf.exports=us;var c=yf.exports,Tf={exports:{}},_r={},Of={exports:{}},Mf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,P){var te=M.length;M.push(P);e:for(;0<te;){var X=te-1>>>1,ee=M[X];if(0<o(ee,P))M[X]=P,M[te]=ee,te=X;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var P=M[0],te=M.pop();if(te!==P){M[0]=te;e:for(var X=0,ee=M.length,Ne=ee>>>1;X<Ne;){var me=2*(X+1)-1,H=M[me],Ce=me+1,Y=M[Ce];if(0>o(H,te))Ce<ee&&0>o(Y,H)?(M[X]=Y,M[Ce]=te,X=Ce):(M[X]=H,M[me]=te,X=me);else if(Ce<ee&&0>o(Y,te))M[X]=Y,M[Ce]=te,X=Ce;else break e}}return P}function o(M,P){var te=M.sortIndex-P.sortIndex;return te!==0?te:M.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,s=i.now();t.unstable_now=function(){return i.now()-s}}var l=[],u=[],d=1,f=null,h=3,p=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(M){for(var P=r(u);P!==null;){if(P.callback===null)n(u);else if(P.startTime<=M)n(u),P.sortIndex=P.expirationTime,e(l,P);else break;P=r(u)}}function C(M){if(y=!1,m(M),!v)if(r(l)!==null)v=!0,T(N);else{var P=r(u);P!==null&&O(C,P.startTime-M)}}function N(M,P){v=!1,y&&(y=!1,g(R),R=-1),p=!0;var te=h;try{for(m(P),f=r(l);f!==null&&(!(f.expirationTime>P)||M&&!oe());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var ee=X(f.expirationTime<=P);P=t.unstable_now(),typeof ee=="function"?f.callback=ee:f===r(l)&&n(l),m(P)}else n(l);f=r(l)}if(f!==null)var Ne=!0;else{var me=r(u);me!==null&&O(C,me.startTime-P),Ne=!1}return Ne}finally{f=null,h=te,p=!1}}var S=!1,I=null,R=-1,z=5,k=-1;function oe(){return!(t.unstable_now()-k<z)}function se(){if(I!==null){var M=t.unstable_now();k=M;var P=!0;try{P=I(!0,M)}finally{P?A():(S=!1,I=null)}}else S=!1}var A;if(typeof x=="function")A=function(){x(se)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,F=D.port2;D.port1.onmessage=se,A=function(){F.postMessage(null)}}else A=function(){w(se,0)};function T(M){I=M,S||(S=!0,A())}function O(M,P){R=w(function(){M(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,T(N))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(M){switch(h){case 1:case 2:case 3:var P=3;break;default:P=h}var te=h;h=P;try{return M()}finally{h=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,P){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var te=h;h=M;try{return P()}finally{h=te}},t.unstable_scheduleCallback=function(M,P,te){var X=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?X+te:X):te=X,M){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=te+ee,M={id:d++,callback:P,priorityLevel:M,startTime:te,expirationTime:ee,sortIndex:-1},te>X?(M.sortIndex=te,e(u,M),r(l)===null&&M===r(u)&&(y?(g(R),R=-1):y=!0,O(C,te-X))):(M.sortIndex=ee,e(l,M),v||p||(v=!0,T(N))),M},t.unstable_shouldYield=oe,t.unstable_wrapCallback=function(M){var P=h;return function(){var te=h;h=P;try{return M.apply(this,arguments)}finally{h=te}}}})(Mf);Of.exports=Mf;var Zh=Of.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qh=_,wr=Zh;function fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rf=new Set,Ia={};function io(t,e){Lo(t,e),Lo(t+"Capture",e)}function Lo(t,e){for(Ia[t]=e,t=0;t<e.length;t++)Rf.add(e[t])}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hl=Object.prototype.hasOwnProperty,Qh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Iu={},Du={};function Jh(t){return hl.call(Du,t)?!0:hl.call(Iu,t)?!1:Qh.test(t)?Du[t]=!0:(Iu[t]=!0,!1)}function ep(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tp(t,e,r,n){if(e===null||typeof e>"u"||ep(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rr(t,e,r,n,o,a,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=i}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new rr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new rr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new rr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new rr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new rr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new rr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new rr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new rr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new rr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sc=/[\-:]([a-z])/g;function Nc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sc,Nc);$t[e]=new rr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sc,Nc);$t[e]=new rr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sc,Nc);$t[e]=new rr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new rr(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new rr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ec(t,e,r,n){var o=$t.hasOwnProperty(e)?$t[e]:null;(o!==null?o.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tp(e,r,o,n)&&(r=null),n||o===null?Jh(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):o.mustUseProperty?t[o.propertyName]=r===null?o.type===3?!1:"":r:(e=o.attributeName,n=o.attributeNamespace,r===null?t.removeAttribute(e):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var fn=qh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ja=Symbol.for("react.element"),xo=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),Ac=Symbol.for("react.strict_mode"),pl=Symbol.for("react.profiler"),Pf=Symbol.for("react.provider"),jf=Symbol.for("react.context"),Ic=Symbol.for("react.forward_ref"),gl=Symbol.for("react.suspense"),xl=Symbol.for("react.suspense_list"),Dc=Symbol.for("react.memo"),vn=Symbol.for("react.lazy"),kf=Symbol.for("react.offscreen"),Tu=Symbol.iterator;function Jo(t){return t===null||typeof t!="object"?null:(t=Tu&&t[Tu]||t["@@iterator"],typeof t=="function"?t:null)}var pt=Object.assign,Rs;function ua(t){if(Rs===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Rs=e&&e[1]||""}return`
`+Rs+t}var Ps=!1;function js(t,e){if(!t||Ps)return"";Ps=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),a=n.stack.split(`
`),i=o.length-1,s=a.length-1;1<=i&&0<=s&&o[i]!==a[s];)s--;for(;1<=i&&0<=s;i--,s--)if(o[i]!==a[s]){if(i!==1||s!==1)do if(i--,s--,0>s||o[i]!==a[s]){var l=`
`+o[i].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=i&&0<=s);break}}}finally{Ps=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ua(t):""}function rp(t){switch(t.tag){case 5:return ua(t.type);case 16:return ua("Lazy");case 13:return ua("Suspense");case 19:return ua("SuspenseList");case 0:case 2:case 15:return t=js(t.type,!1),t;case 11:return t=js(t.type.render,!1),t;case 1:return t=js(t.type,!0),t;default:return""}}function vl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vo:return"Fragment";case xo:return"Portal";case pl:return"Profiler";case Ac:return"StrictMode";case gl:return"Suspense";case xl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jf:return(t.displayName||"Context")+".Consumer";case Pf:return(t._context.displayName||"Context")+".Provider";case Ic:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dc:return e=t.displayName||null,e!==null?e:vl(t.type)||"Memo";case vn:e=t._payload,t=t._init;try{return vl(t(e))}catch{}}return null}function np(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vl(e);case 8:return e===Ac?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function op(t){var e=Bf(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){n=""+i,a.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ei(t){t._valueTracker||(t._valueTracker=op(t))}function Lf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Bf(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Li(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ml(t,e){var r=e.checked;return pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ou(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=jn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ff(t,e){e=e.checked,e!=null&&Ec(t,"checked",e,!1)}function yl(t,e){Ff(t,e);var r=jn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wl(t,e.type,r):e.hasOwnProperty("defaultValue")&&wl(t,e.type,jn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Mu(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function wl(t,e,r){(e!=="number"||Li(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var da=Array.isArray;function Mo(t,e,r,n){if(t=t.options,e){e={};for(var o=0;o<r.length;o++)e["$"+r[o]]=!0;for(r=0;r<t.length;r++)o=e.hasOwnProperty("$"+t[r].value),t[r].selected!==o&&(t[r].selected=o),o&&n&&(t[r].defaultSelected=!0)}else{for(r=""+jn(r),e=null,o=0;o<t.length;o++){if(t[o].value===r){t[o].selected=!0,n&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function _l(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(fe(91));return pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ru(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(fe(92));if(da(r)){if(1<r.length)throw Error(fe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:jn(r)}}function Uf(t,e){var r=jn(e.value),n=jn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Pu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Gf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Gf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ti,$f=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,o){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ti=ti||document.createElement("div"),ti.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ti.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Da(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ma={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ap=["Webkit","ms","Moz","O"];Object.keys(ma).forEach(function(t){ap.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ma[e]=ma[t]})});function zf(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ma.hasOwnProperty(t)&&ma[t]?(""+e).trim():e+"px"}function Hf(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=zf(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,o):t[r]=o}}var ip=pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bl(t,e){if(e){if(ip[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(fe(62))}}function Sl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nl=null;function Tc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var El=null,Ro=null,Po=null;function ju(t){if(t=Ya(t)){if(typeof El!="function")throw Error(fe(280));var e=t.stateNode;e&&(e=gs(e),El(t.stateNode,t.type,e))}}function Vf(t){Ro?Po?Po.push(t):Po=[t]:Ro=t}function Xf(){if(Ro){var t=Ro,e=Po;if(Po=Ro=null,ju(t),e)for(t=0;t<e.length;t++)ju(e[t])}}function Wf(t,e){return t(e)}function Yf(){}var ks=!1;function Kf(t,e,r){if(ks)return t(e,r);ks=!0;try{return Wf(t,e,r)}finally{ks=!1,(Ro!==null||Po!==null)&&(Yf(),Xf())}}function Ta(t,e){var r=t.stateNode;if(r===null)return null;var n=gs(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(fe(231,e,typeof r));return r}var Al=!1;if(ln)try{var ea={};Object.defineProperty(ea,"passive",{get:function(){Al=!0}}),window.addEventListener("test",ea,ea),window.removeEventListener("test",ea,ea)}catch{Al=!1}function sp(t,e,r,n,o,a,i,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var ya=!1,Fi=null,Ui=!1,Il=null,lp={onError:function(t){ya=!0,Fi=t}};function cp(t,e,r,n,o,a,i,s,l){ya=!1,Fi=null,sp.apply(lp,arguments)}function up(t,e,r,n,o,a,i,s,l){if(cp.apply(this,arguments),ya){if(ya){var u=Fi;ya=!1,Fi=null}else throw Error(fe(198));Ui||(Ui=!0,Il=u)}}function so(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Zf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ku(t){if(so(t)!==t)throw Error(fe(188))}function dp(t){var e=t.alternate;if(!e){if(e=so(t),e===null)throw Error(fe(188));return e!==t?null:t}for(var r=t,n=e;;){var o=r.return;if(o===null)break;var a=o.alternate;if(a===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===r)return ku(o),t;if(a===n)return ku(o),e;a=a.sibling}throw Error(fe(188))}if(r.return!==n.return)r=o,n=a;else{for(var i=!1,s=o.child;s;){if(s===r){i=!0,r=o,n=a;break}if(s===n){i=!0,n=o,r=a;break}s=s.sibling}if(!i){for(s=a.child;s;){if(s===r){i=!0,r=a,n=o;break}if(s===n){i=!0,n=a,r=o;break}s=s.sibling}if(!i)throw Error(fe(189))}}if(r.alternate!==n)throw Error(fe(190))}if(r.tag!==3)throw Error(fe(188));return r.stateNode.current===r?t:e}function qf(t){return t=dp(t),t!==null?Qf(t):null}function Qf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Qf(t);if(e!==null)return e;t=t.sibling}return null}var Jf=wr.unstable_scheduleCallback,Bu=wr.unstable_cancelCallback,fp=wr.unstable_shouldYield,hp=wr.unstable_requestPaint,mt=wr.unstable_now,pp=wr.unstable_getCurrentPriorityLevel,Oc=wr.unstable_ImmediatePriority,e0=wr.unstable_UserBlockingPriority,Gi=wr.unstable_NormalPriority,gp=wr.unstable_LowPriority,t0=wr.unstable_IdlePriority,ds=null,Qr=null;function xp(t){if(Qr&&typeof Qr.onCommitFiberRoot=="function")try{Qr.onCommitFiberRoot(ds,t,void 0,(t.current.flags&128)===128)}catch{}}var Hr=Math.clz32?Math.clz32:yp,vp=Math.log,mp=Math.LN2;function yp(t){return t>>>=0,t===0?32:31-(vp(t)/mp|0)|0}var ri=64,ni=4194304;function fa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $i(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,o=t.suspendedLanes,a=t.pingedLanes,i=r&268435455;if(i!==0){var s=i&~o;s!==0?n=fa(s):(a&=i,a!==0&&(n=fa(a)))}else i=r&~o,i!==0?n=fa(i):a!==0&&(n=fa(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&o)&&(o=n&-n,a=e&-e,o>=a||o===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Hr(e),o=1<<r,n|=t[r],e&=~o;return n}function wp(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _p(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,o=t.expirationTimes,a=t.pendingLanes;0<a;){var i=31-Hr(a),s=1<<i,l=o[i];l===-1?(!(s&r)||s&n)&&(o[i]=wp(s,e)):l<=e&&(t.expiredLanes|=s),a&=~s}}function Dl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function r0(){var t=ri;return ri<<=1,!(ri&4194240)&&(ri=64),t}function Bs(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Xa(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hr(e),t[e]=r}function Cp(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var o=31-Hr(r),a=1<<o;e[o]=0,n[o]=-1,t[o]=-1,r&=~a}}function Mc(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Hr(r),o=1<<n;o&e|t[n]&e&&(t[n]|=e),r&=~o}}var et=0;function n0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var o0,Rc,a0,i0,s0,Tl=!1,oi=[],Nn=null,En=null,An=null,Oa=new Map,Ma=new Map,wn=[],bp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lu(t,e){switch(t){case"focusin":case"focusout":Nn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":Oa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ma.delete(e.pointerId)}}function ta(t,e,r,n,o,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[o]},e!==null&&(e=Ya(e),e!==null&&Rc(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function Sp(t,e,r,n,o){switch(e){case"focusin":return Nn=ta(Nn,t,e,r,n,o),!0;case"dragenter":return En=ta(En,t,e,r,n,o),!0;case"mouseover":return An=ta(An,t,e,r,n,o),!0;case"pointerover":var a=o.pointerId;return Oa.set(a,ta(Oa.get(a)||null,t,e,r,n,o)),!0;case"gotpointercapture":return a=o.pointerId,Ma.set(a,ta(Ma.get(a)||null,t,e,r,n,o)),!0}return!1}function l0(t){var e=Yn(t.target);if(e!==null){var r=so(e);if(r!==null){if(e=r.tag,e===13){if(e=Zf(r),e!==null){t.blockedOn=e,s0(t.priority,function(){a0(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Si(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Ol(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Nl=n,r.target.dispatchEvent(n),Nl=null}else return e=Ya(r),e!==null&&Rc(e),t.blockedOn=r,!1;e.shift()}return!0}function Fu(t,e,r){Si(t)&&r.delete(e)}function Np(){Tl=!1,Nn!==null&&Si(Nn)&&(Nn=null),En!==null&&Si(En)&&(En=null),An!==null&&Si(An)&&(An=null),Oa.forEach(Fu),Ma.forEach(Fu)}function ra(t,e){t.blockedOn===e&&(t.blockedOn=null,Tl||(Tl=!0,wr.unstable_scheduleCallback(wr.unstable_NormalPriority,Np)))}function Ra(t){function e(o){return ra(o,t)}if(0<oi.length){ra(oi[0],t);for(var r=1;r<oi.length;r++){var n=oi[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Nn!==null&&ra(Nn,t),En!==null&&ra(En,t),An!==null&&ra(An,t),Oa.forEach(e),Ma.forEach(e),r=0;r<wn.length;r++)n=wn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<wn.length&&(r=wn[0],r.blockedOn===null);)l0(r),r.blockedOn===null&&wn.shift()}var jo=fn.ReactCurrentBatchConfig,zi=!0;function Ep(t,e,r,n){var o=et,a=jo.transition;jo.transition=null;try{et=1,Pc(t,e,r,n)}finally{et=o,jo.transition=a}}function Ap(t,e,r,n){var o=et,a=jo.transition;jo.transition=null;try{et=4,Pc(t,e,r,n)}finally{et=o,jo.transition=a}}function Pc(t,e,r,n){if(zi){var o=Ol(t,e,r,n);if(o===null)Ws(t,e,n,Hi,r),Lu(t,n);else if(Sp(o,t,e,r,n))n.stopPropagation();else if(Lu(t,n),e&4&&-1<bp.indexOf(t)){for(;o!==null;){var a=Ya(o);if(a!==null&&o0(a),a=Ol(t,e,r,n),a===null&&Ws(t,e,n,Hi,r),a===o)break;o=a}o!==null&&n.stopPropagation()}else Ws(t,e,n,null,r)}}var Hi=null;function Ol(t,e,r,n){if(Hi=null,t=Tc(n),t=Yn(t),t!==null)if(e=so(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Zf(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hi=t,null}function c0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pp()){case Oc:return 1;case e0:return 4;case Gi:case gp:return 16;case t0:return 536870912;default:return 16}default:return 16}}var Cn=null,jc=null,Ni=null;function u0(){if(Ni)return Ni;var t,e=jc,r=e.length,n,o="value"in Cn?Cn.value:Cn.textContent,a=o.length;for(t=0;t<r&&e[t]===o[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===o[a-n];n++);return Ni=o.slice(t,1<n?1-n:void 0)}function Ei(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ai(){return!0}function Uu(){return!1}function Cr(t){function e(r,n,o,a,i){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ai:Uu,this.isPropagationStopped=Uu,this}return pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),e}var Yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kc=Cr(Yo),Wa=pt({},Yo,{view:0,detail:0}),Ip=Cr(Wa),Ls,Fs,na,fs=pt({},Wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==na&&(na&&t.type==="mousemove"?(Ls=t.screenX-na.screenX,Fs=t.screenY-na.screenY):Fs=Ls=0,na=t),Ls)},movementY:function(t){return"movementY"in t?t.movementY:Fs}}),Gu=Cr(fs),Dp=pt({},fs,{dataTransfer:0}),Tp=Cr(Dp),Op=pt({},Wa,{relatedTarget:0}),Us=Cr(Op),Mp=pt({},Yo,{animationName:0,elapsedTime:0,pseudoElement:0}),Rp=Cr(Mp),Pp=pt({},Yo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jp=Cr(Pp),kp=pt({},Yo,{data:0}),$u=Cr(kp),Bp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Up(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Fp[t])?!!e[t]:!1}function Bc(){return Up}var Gp=pt({},Wa,{key:function(t){if(t.key){var e=Bp[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ei(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lp[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bc,charCode:function(t){return t.type==="keypress"?Ei(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ei(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$p=Cr(Gp),zp=pt({},fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zu=Cr(zp),Hp=pt({},Wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bc}),Vp=Cr(Hp),Xp=pt({},Yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wp=Cr(Xp),Yp=pt({},fs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Kp=Cr(Yp),Zp=[9,13,27,32],Lc=ln&&"CompositionEvent"in window,wa=null;ln&&"documentMode"in document&&(wa=document.documentMode);var qp=ln&&"TextEvent"in window&&!wa,d0=ln&&(!Lc||wa&&8<wa&&11>=wa),Hu=" ",Vu=!1;function f0(t,e){switch(t){case"keyup":return Zp.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mo=!1;function Qp(t,e){switch(t){case"compositionend":return h0(e);case"keypress":return e.which!==32?null:(Vu=!0,Hu);case"textInput":return t=e.data,t===Hu&&Vu?null:t;default:return null}}function Jp(t,e){if(mo)return t==="compositionend"||!Lc&&f0(t,e)?(t=u0(),Ni=jc=Cn=null,mo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return d0&&e.locale!=="ko"?null:e.data;default:return null}}var eg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eg[t.type]:e==="textarea"}function p0(t,e,r,n){Vf(n),e=Vi(e,"onChange"),0<e.length&&(r=new kc("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var _a=null,Pa=null;function tg(t){N0(t,0)}function hs(t){var e=_o(t);if(Lf(e))return t}function rg(t,e){if(t==="change")return e}var g0=!1;if(ln){var Gs;if(ln){var $s="oninput"in document;if(!$s){var Wu=document.createElement("div");Wu.setAttribute("oninput","return;"),$s=typeof Wu.oninput=="function"}Gs=$s}else Gs=!1;g0=Gs&&(!document.documentMode||9<document.documentMode)}function Yu(){_a&&(_a.detachEvent("onpropertychange",x0),Pa=_a=null)}function x0(t){if(t.propertyName==="value"&&hs(Pa)){var e=[];p0(e,Pa,t,Tc(t)),Kf(tg,e)}}function ng(t,e,r){t==="focusin"?(Yu(),_a=e,Pa=r,_a.attachEvent("onpropertychange",x0)):t==="focusout"&&Yu()}function og(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hs(Pa)}function ag(t,e){if(t==="click")return hs(e)}function ig(t,e){if(t==="input"||t==="change")return hs(e)}function sg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xr=typeof Object.is=="function"?Object.is:sg;function ja(t,e){if(Xr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!hl.call(e,o)||!Xr(t[o],e[o]))return!1}return!0}function Ku(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zu(t,e){var r=Ku(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ku(r)}}function v0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?v0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function m0(){for(var t=window,e=Li();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Li(t.document)}return e}function Fc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lg(t){var e=m0(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&v0(r.ownerDocument.documentElement,r)){if(n!==null&&Fc(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=r.textContent.length,a=Math.min(n.start,o);n=n.end===void 0?a:Math.min(n.end,o),!t.extend&&a>n&&(o=n,n=a,a=o),o=Zu(r,a);var i=Zu(r,n);o&&i&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cg=ln&&"documentMode"in document&&11>=document.documentMode,yo=null,Ml=null,Ca=null,Rl=!1;function qu(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Rl||yo==null||yo!==Li(n)||(n=yo,"selectionStart"in n&&Fc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ca&&ja(Ca,n)||(Ca=n,n=Vi(Ml,"onSelect"),0<n.length&&(e=new kc("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=yo)))}function ii(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var wo={animationend:ii("Animation","AnimationEnd"),animationiteration:ii("Animation","AnimationIteration"),animationstart:ii("Animation","AnimationStart"),transitionend:ii("Transition","TransitionEnd")},zs={},y0={};ln&&(y0=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function ps(t){if(zs[t])return zs[t];if(!wo[t])return t;var e=wo[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in y0)return zs[t]=e[r];return t}var w0=ps("animationend"),_0=ps("animationiteration"),C0=ps("animationstart"),b0=ps("transitionend"),S0=new Map,Qu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bn(t,e){S0.set(t,e),io(e,[t])}for(var Hs=0;Hs<Qu.length;Hs++){var Vs=Qu[Hs],ug=Vs.toLowerCase(),dg=Vs[0].toUpperCase()+Vs.slice(1);Bn(ug,"on"+dg)}Bn(w0,"onAnimationEnd");Bn(_0,"onAnimationIteration");Bn(C0,"onAnimationStart");Bn("dblclick","onDoubleClick");Bn("focusin","onFocus");Bn("focusout","onBlur");Bn(b0,"onTransitionEnd");Lo("onMouseEnter",["mouseout","mouseover"]);Lo("onMouseLeave",["mouseout","mouseover"]);Lo("onPointerEnter",["pointerout","pointerover"]);Lo("onPointerLeave",["pointerout","pointerover"]);io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));io("onBeforeInput",["compositionend","keypress","textInput","paste"]);io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fg=new Set("cancel close invalid load scroll toggle".split(" ").concat(ha));function Ju(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,up(n,e,void 0,t),t.currentTarget=null}function N0(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],o=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var i=n.length-1;0<=i;i--){var s=n[i],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&o.isPropagationStopped())break e;Ju(o,s,u),a=l}else for(i=0;i<n.length;i++){if(s=n[i],l=s.instance,u=s.currentTarget,s=s.listener,l!==a&&o.isPropagationStopped())break e;Ju(o,s,u),a=l}}}if(Ui)throw t=Il,Ui=!1,Il=null,t}function at(t,e){var r=e[Ll];r===void 0&&(r=e[Ll]=new Set);var n=t+"__bubble";r.has(n)||(E0(e,t,2,!1),r.add(n))}function Xs(t,e,r){var n=0;e&&(n|=4),E0(r,t,n,e)}var si="_reactListening"+Math.random().toString(36).slice(2);function ka(t){if(!t[si]){t[si]=!0,Rf.forEach(function(r){r!=="selectionchange"&&(fg.has(r)||Xs(r,!1,t),Xs(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[si]||(e[si]=!0,Xs("selectionchange",!1,e))}}function E0(t,e,r,n){switch(c0(e)){case 1:var o=Ep;break;case 4:o=Ap;break;default:o=Pc}r=o.bind(null,e,r,t),o=void 0,!Al||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),n?o!==void 0?t.addEventListener(e,r,{capture:!0,passive:o}):t.addEventListener(e,r,!0):o!==void 0?t.addEventListener(e,r,{passive:o}):t.addEventListener(e,r,!1)}function Ws(t,e,r,n,o){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var s=n.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(i===4)for(i=n.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;i=i.return}for(;s!==null;){if(i=Yn(s),i===null)return;if(l=i.tag,l===5||l===6){n=a=i;continue e}s=s.parentNode}}n=n.return}Kf(function(){var u=a,d=Tc(r),f=[];e:{var h=S0.get(t);if(h!==void 0){var p=kc,v=t;switch(t){case"keypress":if(Ei(r)===0)break e;case"keydown":case"keyup":p=$p;break;case"focusin":v="focus",p=Us;break;case"focusout":v="blur",p=Us;break;case"beforeblur":case"afterblur":p=Us;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Gu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Tp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Vp;break;case w0:case _0:case C0:p=Rp;break;case b0:p=Wp;break;case"scroll":p=Ip;break;case"wheel":p=Kp;break;case"copy":case"cut":case"paste":p=jp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=zu}var y=(e&4)!==0,w=!y&&t==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var x=u,m;x!==null;){m=x;var C=m.stateNode;if(m.tag===5&&C!==null&&(m=C,g!==null&&(C=Ta(x,g),C!=null&&y.push(Ba(x,C,m)))),w)break;x=x.return}0<y.length&&(h=new p(h,v,null,r,d),f.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&r!==Nl&&(v=r.relatedTarget||r.fromElement)&&(Yn(v)||v[cn]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=u,v=v?Yn(v):null,v!==null&&(w=so(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(y=Gu,C="onMouseLeave",g="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=zu,C="onPointerLeave",g="onPointerEnter",x="pointer"),w=p==null?h:_o(p),m=v==null?h:_o(v),h=new y(C,x+"leave",p,r,d),h.target=w,h.relatedTarget=m,C=null,Yn(d)===u&&(y=new y(g,x+"enter",v,r,d),y.target=m,y.relatedTarget=w,C=y),w=C,p&&v)t:{for(y=p,g=v,x=0,m=y;m;m=po(m))x++;for(m=0,C=g;C;C=po(C))m++;for(;0<x-m;)y=po(y),x--;for(;0<m-x;)g=po(g),m--;for(;x--;){if(y===g||g!==null&&y===g.alternate)break t;y=po(y),g=po(g)}y=null}else y=null;p!==null&&ed(f,h,p,y,!1),v!==null&&w!==null&&ed(f,w,v,y,!0)}}e:{if(h=u?_o(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var N=rg;else if(Xu(h))if(g0)N=ig;else{N=og;var S=ng}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=ag);if(N&&(N=N(t,u))){p0(f,N,r,d);break e}S&&S(t,h,u),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&wl(h,"number",h.value)}switch(S=u?_o(u):window,t){case"focusin":(Xu(S)||S.contentEditable==="true")&&(yo=S,Ml=u,Ca=null);break;case"focusout":Ca=Ml=yo=null;break;case"mousedown":Rl=!0;break;case"contextmenu":case"mouseup":case"dragend":Rl=!1,qu(f,r,d);break;case"selectionchange":if(cg)break;case"keydown":case"keyup":qu(f,r,d)}var I;if(Lc)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else mo?f0(t,r)&&(R="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(R="onCompositionStart");R&&(d0&&r.locale!=="ko"&&(mo||R!=="onCompositionStart"?R==="onCompositionEnd"&&mo&&(I=u0()):(Cn=d,jc="value"in Cn?Cn.value:Cn.textContent,mo=!0)),S=Vi(u,R),0<S.length&&(R=new $u(R,t,null,r,d),f.push({event:R,listeners:S}),I?R.data=I:(I=h0(r),I!==null&&(R.data=I)))),(I=qp?Qp(t,r):Jp(t,r))&&(u=Vi(u,"onBeforeInput"),0<u.length&&(d=new $u("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=I))}N0(f,e)})}function Ba(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Vi(t,e){for(var r=e+"Capture",n=[];t!==null;){var o=t,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=Ta(t,r),a!=null&&n.unshift(Ba(t,a,o)),a=Ta(t,e),a!=null&&n.push(Ba(t,a,o))),t=t.return}return n}function po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ed(t,e,r,n,o){for(var a=e._reactName,i=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,o?(l=Ta(r,a),l!=null&&i.unshift(Ba(r,l,s))):o||(l=Ta(r,a),l!=null&&i.push(Ba(r,l,s)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var hg=/\r\n?/g,pg=/\u0000|\uFFFD/g;function td(t){return(typeof t=="string"?t:""+t).replace(hg,`
`).replace(pg,"")}function li(t,e,r){if(e=td(e),td(t)!==e&&r)throw Error(fe(425))}function Xi(){}var Pl=null,jl=null;function kl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bl=typeof setTimeout=="function"?setTimeout:void 0,gg=typeof clearTimeout=="function"?clearTimeout:void 0,rd=typeof Promise=="function"?Promise:void 0,xg=typeof queueMicrotask=="function"?queueMicrotask:typeof rd<"u"?function(t){return rd.resolve(null).then(t).catch(vg)}:Bl;function vg(t){setTimeout(function(){throw t})}function Ys(t,e){var r=e,n=0;do{var o=r.nextSibling;if(t.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(n===0){t.removeChild(o),Ra(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=o}while(r);Ra(e)}function In(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ko=Math.random().toString(36).slice(2),Zr="__reactFiber$"+Ko,La="__reactProps$"+Ko,cn="__reactContainer$"+Ko,Ll="__reactEvents$"+Ko,mg="__reactListeners$"+Ko,yg="__reactHandles$"+Ko;function Yn(t){var e=t[Zr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[cn]||r[Zr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=nd(t);t!==null;){if(r=t[Zr])return r;t=nd(t)}return e}t=r,r=t.parentNode}return null}function Ya(t){return t=t[Zr]||t[cn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _o(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(fe(33))}function gs(t){return t[La]||null}var Fl=[],Co=-1;function Ln(t){return{current:t}}function lt(t){0>Co||(t.current=Fl[Co],Fl[Co]=null,Co--)}function nt(t,e){Co++,Fl[Co]=t.current,t.current=e}var kn={},Yt=Ln(kn),ur=Ln(!1),to=kn;function Fo(t,e){var r=t.type.contextTypes;if(!r)return kn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in r)o[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function dr(t){return t=t.childContextTypes,t!=null}function Wi(){lt(ur),lt(Yt)}function od(t,e,r){if(Yt.current!==kn)throw Error(fe(168));nt(Yt,e),nt(ur,r)}function A0(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in e))throw Error(fe(108,np(t)||"Unknown",o));return pt({},r,n)}function Yi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kn,to=Yt.current,nt(Yt,t),nt(ur,ur.current),!0}function ad(t,e,r){var n=t.stateNode;if(!n)throw Error(fe(169));r?(t=A0(t,e,to),n.__reactInternalMemoizedMergedChildContext=t,lt(ur),lt(Yt),nt(Yt,t)):lt(ur),nt(ur,r)}var nn=null,xs=!1,Ks=!1;function I0(t){nn===null?nn=[t]:nn.push(t)}function wg(t){xs=!0,I0(t)}function Fn(){if(!Ks&&nn!==null){Ks=!0;var t=0,e=et;try{var r=nn;for(et=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}nn=null,xs=!1}catch(o){throw nn!==null&&(nn=nn.slice(t+1)),Jf(Oc,Fn),o}finally{et=e,Ks=!1}}return null}var bo=[],So=0,Ki=null,Zi=0,Er=[],Ar=0,ro=null,on=1,an="";function Vn(t,e){bo[So++]=Zi,bo[So++]=Ki,Ki=t,Zi=e}function D0(t,e,r){Er[Ar++]=on,Er[Ar++]=an,Er[Ar++]=ro,ro=t;var n=on;t=an;var o=32-Hr(n)-1;n&=~(1<<o),r+=1;var a=32-Hr(e)+o;if(30<a){var i=o-o%5;a=(n&(1<<i)-1).toString(32),n>>=i,o-=i,on=1<<32-Hr(e)+o|r<<o|n,an=a+t}else on=1<<a|r<<o|n,an=t}function Uc(t){t.return!==null&&(Vn(t,1),D0(t,1,0))}function Gc(t){for(;t===Ki;)Ki=bo[--So],bo[So]=null,Zi=bo[--So],bo[So]=null;for(;t===ro;)ro=Er[--Ar],Er[Ar]=null,an=Er[--Ar],Er[Ar]=null,on=Er[--Ar],Er[Ar]=null}var yr=null,mr=null,ct=!1,Gr=null;function T0(t,e){var r=Ir(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function id(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yr=t,mr=In(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yr=t,mr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ro!==null?{id:on,overflow:an}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ir(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,yr=t,mr=null,!0):!1;default:return!1}}function Ul(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gl(t){if(ct){var e=mr;if(e){var r=e;if(!id(t,e)){if(Ul(t))throw Error(fe(418));e=In(r.nextSibling);var n=yr;e&&id(t,e)?T0(n,r):(t.flags=t.flags&-4097|2,ct=!1,yr=t)}}else{if(Ul(t))throw Error(fe(418));t.flags=t.flags&-4097|2,ct=!1,yr=t}}}function sd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yr=t}function ci(t){if(t!==yr)return!1;if(!ct)return sd(t),ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kl(t.type,t.memoizedProps)),e&&(e=mr)){if(Ul(t))throw O0(),Error(fe(418));for(;e;)T0(t,e),e=In(e.nextSibling)}if(sd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){mr=In(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}mr=null}}else mr=yr?In(t.stateNode.nextSibling):null;return!0}function O0(){for(var t=mr;t;)t=In(t.nextSibling)}function Uo(){mr=yr=null,ct=!1}function $c(t){Gr===null?Gr=[t]:Gr.push(t)}var _g=fn.ReactCurrentBatchConfig;function oa(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(fe(309));var n=r.stateNode}if(!n)throw Error(fe(147,t));var o=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(i){var s=o.refs;i===null?delete s[a]:s[a]=i},e._stringRef=a,e)}if(typeof t!="string")throw Error(fe(284));if(!r._owner)throw Error(fe(290,t))}return t}function ui(t,e){throw t=Object.prototype.toString.call(e),Error(fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ld(t){var e=t._init;return e(t._payload)}function M0(t){function e(g,x){if(t){var m=g.deletions;m===null?(g.deletions=[x],g.flags|=16):m.push(x)}}function r(g,x){if(!t)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function n(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function o(g,x){return g=Mn(g,x),g.index=0,g.sibling=null,g}function a(g,x,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<x?(g.flags|=2,x):m):(g.flags|=2,x)):(g.flags|=1048576,x)}function i(g){return t&&g.alternate===null&&(g.flags|=2),g}function s(g,x,m,C){return x===null||x.tag!==6?(x=rl(m,g.mode,C),x.return=g,x):(x=o(x,m),x.return=g,x)}function l(g,x,m,C){var N=m.type;return N===vo?d(g,x,m.props.children,C,m.key):x!==null&&(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===vn&&ld(N)===x.type)?(C=o(x,m.props),C.ref=oa(g,x,m),C.return=g,C):(C=Ri(m.type,m.key,m.props,null,g.mode,C),C.ref=oa(g,x,m),C.return=g,C)}function u(g,x,m,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==m.containerInfo||x.stateNode.implementation!==m.implementation?(x=nl(m,g.mode,C),x.return=g,x):(x=o(x,m.children||[]),x.return=g,x)}function d(g,x,m,C,N){return x===null||x.tag!==7?(x=Jn(m,g.mode,C,N),x.return=g,x):(x=o(x,m),x.return=g,x)}function f(g,x,m){if(typeof x=="string"&&x!==""||typeof x=="number")return x=rl(""+x,g.mode,m),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ja:return m=Ri(x.type,x.key,x.props,null,g.mode,m),m.ref=oa(g,null,x),m.return=g,m;case xo:return x=nl(x,g.mode,m),x.return=g,x;case vn:var C=x._init;return f(g,C(x._payload),m)}if(da(x)||Jo(x))return x=Jn(x,g.mode,m,null),x.return=g,x;ui(g,x)}return null}function h(g,x,m,C){var N=x!==null?x.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return N!==null?null:s(g,x,""+m,C);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ja:return m.key===N?l(g,x,m,C):null;case xo:return m.key===N?u(g,x,m,C):null;case vn:return N=m._init,h(g,x,N(m._payload),C)}if(da(m)||Jo(m))return N!==null?null:d(g,x,m,C,null);ui(g,m)}return null}function p(g,x,m,C,N){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(m)||null,s(x,g,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ja:return g=g.get(C.key===null?m:C.key)||null,l(x,g,C,N);case xo:return g=g.get(C.key===null?m:C.key)||null,u(x,g,C,N);case vn:var S=C._init;return p(g,x,m,S(C._payload),N)}if(da(C)||Jo(C))return g=g.get(m)||null,d(x,g,C,N,null);ui(x,C)}return null}function v(g,x,m,C){for(var N=null,S=null,I=x,R=x=0,z=null;I!==null&&R<m.length;R++){I.index>R?(z=I,I=null):z=I.sibling;var k=h(g,I,m[R],C);if(k===null){I===null&&(I=z);break}t&&I&&k.alternate===null&&e(g,I),x=a(k,x,R),S===null?N=k:S.sibling=k,S=k,I=z}if(R===m.length)return r(g,I),ct&&Vn(g,R),N;if(I===null){for(;R<m.length;R++)I=f(g,m[R],C),I!==null&&(x=a(I,x,R),S===null?N=I:S.sibling=I,S=I);return ct&&Vn(g,R),N}for(I=n(g,I);R<m.length;R++)z=p(I,g,R,m[R],C),z!==null&&(t&&z.alternate!==null&&I.delete(z.key===null?R:z.key),x=a(z,x,R),S===null?N=z:S.sibling=z,S=z);return t&&I.forEach(function(oe){return e(g,oe)}),ct&&Vn(g,R),N}function y(g,x,m,C){var N=Jo(m);if(typeof N!="function")throw Error(fe(150));if(m=N.call(m),m==null)throw Error(fe(151));for(var S=N=null,I=x,R=x=0,z=null,k=m.next();I!==null&&!k.done;R++,k=m.next()){I.index>R?(z=I,I=null):z=I.sibling;var oe=h(g,I,k.value,C);if(oe===null){I===null&&(I=z);break}t&&I&&oe.alternate===null&&e(g,I),x=a(oe,x,R),S===null?N=oe:S.sibling=oe,S=oe,I=z}if(k.done)return r(g,I),ct&&Vn(g,R),N;if(I===null){for(;!k.done;R++,k=m.next())k=f(g,k.value,C),k!==null&&(x=a(k,x,R),S===null?N=k:S.sibling=k,S=k);return ct&&Vn(g,R),N}for(I=n(g,I);!k.done;R++,k=m.next())k=p(I,g,R,k.value,C),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?R:k.key),x=a(k,x,R),S===null?N=k:S.sibling=k,S=k);return t&&I.forEach(function(se){return e(g,se)}),ct&&Vn(g,R),N}function w(g,x,m,C){if(typeof m=="object"&&m!==null&&m.type===vo&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Ja:e:{for(var N=m.key,S=x;S!==null;){if(S.key===N){if(N=m.type,N===vo){if(S.tag===7){r(g,S.sibling),x=o(S,m.props.children),x.return=g,g=x;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===vn&&ld(N)===S.type){r(g,S.sibling),x=o(S,m.props),x.ref=oa(g,S,m),x.return=g,g=x;break e}r(g,S);break}else e(g,S);S=S.sibling}m.type===vo?(x=Jn(m.props.children,g.mode,C,m.key),x.return=g,g=x):(C=Ri(m.type,m.key,m.props,null,g.mode,C),C.ref=oa(g,x,m),C.return=g,g=C)}return i(g);case xo:e:{for(S=m.key;x!==null;){if(x.key===S)if(x.tag===4&&x.stateNode.containerInfo===m.containerInfo&&x.stateNode.implementation===m.implementation){r(g,x.sibling),x=o(x,m.children||[]),x.return=g,g=x;break e}else{r(g,x);break}else e(g,x);x=x.sibling}x=nl(m,g.mode,C),x.return=g,g=x}return i(g);case vn:return S=m._init,w(g,x,S(m._payload),C)}if(da(m))return v(g,x,m,C);if(Jo(m))return y(g,x,m,C);ui(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,x!==null&&x.tag===6?(r(g,x.sibling),x=o(x,m),x.return=g,g=x):(r(g,x),x=rl(m,g.mode,C),x.return=g,g=x),i(g)):r(g,x)}return w}var Go=M0(!0),R0=M0(!1),qi=Ln(null),Qi=null,No=null,zc=null;function Hc(){zc=No=Qi=null}function Vc(t){var e=qi.current;lt(qi),t._currentValue=e}function $l(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ko(t,e){Qi=t,zc=No=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(lr=!0),t.firstContext=null)}function Mr(t){var e=t._currentValue;if(zc!==t)if(t={context:t,memoizedValue:e,next:null},No===null){if(Qi===null)throw Error(fe(308));No=t,Qi.dependencies={lanes:0,firstContext:t}}else No=No.next=t;return e}var Kn=null;function Xc(t){Kn===null?Kn=[t]:Kn.push(t)}function P0(t,e,r,n){var o=e.interleaved;return o===null?(r.next=r,Xc(e)):(r.next=o.next,o.next=r),e.interleaved=r,un(t,n)}function un(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var mn=!1;function Wc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function j0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dn(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Xe&2){var o=n.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),n.pending=e,un(t,r)}return o=n.interleaved,o===null?(e.next=e,Xc(n)):(e.next=o.next,o.next=e),n.interleaved=e,un(t,r)}function Ai(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Mc(t,r)}}function cd(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?o=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?o=a=e:a=a.next=e}else o=a=e;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ji(t,e,r,n){var o=t.updateQueue;mn=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var l=s,u=l.next;l.next=null,i===null?a=u:i.next=u,i=l;var d=t.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==i&&(s===null?d.firstBaseUpdate=u:s.next=u,d.lastBaseUpdate=l))}if(a!==null){var f=o.baseState;i=0,d=u=l=null,s=a;do{var h=s.lane,p=s.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=t,y=s;switch(h=e,p=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){f=v.call(p,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,h=typeof v=="function"?v.call(p,f,h):v,h==null)break e;f=pt({},f,h);break e;case 2:mn=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=o.effects,h===null?o.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(u=d=p,l=f):d=d.next=p,i|=h;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;h=s,s=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(d===null&&(l=f),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=d,e=o.shared.interleaved,e!==null){o=e;do i|=o.lane,o=o.next;while(o!==e)}else a===null&&(o.shared.lanes=0);oo|=i,t.lanes=i,t.memoizedState=f}}function ud(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(fe(191,o));o.call(n)}}}var Ka={},Jr=Ln(Ka),Fa=Ln(Ka),Ua=Ln(Ka);function Zn(t){if(t===Ka)throw Error(fe(174));return t}function Yc(t,e){switch(nt(Ua,e),nt(Fa,t),nt(Jr,Ka),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cl(e,t)}lt(Jr),nt(Jr,e)}function $o(){lt(Jr),lt(Fa),lt(Ua)}function k0(t){Zn(Ua.current);var e=Zn(Jr.current),r=Cl(e,t.type);e!==r&&(nt(Fa,t),nt(Jr,r))}function Kc(t){Fa.current===t&&(lt(Jr),lt(Fa))}var ft=Ln(0);function es(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zs=[];function Zc(){for(var t=0;t<Zs.length;t++)Zs[t]._workInProgressVersionPrimary=null;Zs.length=0}var Ii=fn.ReactCurrentDispatcher,qs=fn.ReactCurrentBatchConfig,no=0,ht=null,St=null,Rt=null,ts=!1,ba=!1,Ga=0,Cg=0;function zt(){throw Error(fe(321))}function qc(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Xr(t[r],e[r]))return!1;return!0}function Qc(t,e,r,n,o,a){if(no=a,ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ii.current=t===null||t.memoizedState===null?Eg:Ag,t=r(n,o),ba){a=0;do{if(ba=!1,Ga=0,25<=a)throw Error(fe(301));a+=1,Rt=St=null,e.updateQueue=null,Ii.current=Ig,t=r(n,o)}while(ba)}if(Ii.current=rs,e=St!==null&&St.next!==null,no=0,Rt=St=ht=null,ts=!1,e)throw Error(fe(300));return t}function Jc(){var t=Ga!==0;return Ga=0,t}function Kr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?ht.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function Rr(){if(St===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var e=Rt===null?ht.memoizedState:Rt.next;if(e!==null)Rt=e,St=t;else{if(t===null)throw Error(fe(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Rt===null?ht.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function $a(t,e){return typeof e=="function"?e(t):e}function Qs(t){var e=Rr(),r=e.queue;if(r===null)throw Error(fe(311));r.lastRenderedReducer=t;var n=St,o=n.baseQueue,a=r.pending;if(a!==null){if(o!==null){var i=o.next;o.next=a.next,a.next=i}n.baseQueue=o=a,r.pending=null}if(o!==null){a=o.next,n=n.baseState;var s=i=null,l=null,u=a;do{var d=u.lane;if((no&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=f,i=n):l=l.next=f,ht.lanes|=d,oo|=d}u=u.next}while(u!==null&&u!==a);l===null?i=n:l.next=s,Xr(n,e.memoizedState)||(lr=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){o=t;do a=o.lane,ht.lanes|=a,oo|=a,o=o.next;while(o!==t)}else o===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Js(t){var e=Rr(),r=e.queue;if(r===null)throw Error(fe(311));r.lastRenderedReducer=t;var n=r.dispatch,o=r.pending,a=e.memoizedState;if(o!==null){r.pending=null;var i=o=o.next;do a=t(a,i.action),i=i.next;while(i!==o);Xr(a,e.memoizedState)||(lr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function B0(){}function L0(t,e){var r=ht,n=Rr(),o=e(),a=!Xr(n.memoizedState,o);if(a&&(n.memoizedState=o,lr=!0),n=n.queue,eu(G0.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Rt!==null&&Rt.memoizedState.tag&1){if(r.flags|=2048,za(9,U0.bind(null,r,n,o,e),void 0,null),kt===null)throw Error(fe(349));no&30||F0(r,e,o)}return o}function F0(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function U0(t,e,r,n){e.value=r,e.getSnapshot=n,$0(e)&&z0(t)}function G0(t,e,r){return r(function(){$0(e)&&z0(t)})}function $0(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Xr(t,r)}catch{return!0}}function z0(t){var e=un(t,1);e!==null&&Vr(e,t,1,-1)}function dd(t){var e=Kr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:t},e.queue=t,t=t.dispatch=Ng.bind(null,ht,t),[e.memoizedState,t]}function za(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function H0(){return Rr().memoizedState}function Di(t,e,r,n){var o=Kr();ht.flags|=t,o.memoizedState=za(1|e,r,void 0,n===void 0?null:n)}function vs(t,e,r,n){var o=Rr();n=n===void 0?null:n;var a=void 0;if(St!==null){var i=St.memoizedState;if(a=i.destroy,n!==null&&qc(n,i.deps)){o.memoizedState=za(e,r,a,n);return}}ht.flags|=t,o.memoizedState=za(1|e,r,a,n)}function fd(t,e){return Di(8390656,8,t,e)}function eu(t,e){return vs(2048,8,t,e)}function V0(t,e){return vs(4,2,t,e)}function X0(t,e){return vs(4,4,t,e)}function W0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Y0(t,e,r){return r=r!=null?r.concat([t]):null,vs(4,4,W0.bind(null,e,t),r)}function tu(){}function K0(t,e){var r=Rr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&qc(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Z0(t,e){var r=Rr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&qc(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function q0(t,e,r){return no&21?(Xr(r,e)||(r=r0(),ht.lanes|=r,oo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,lr=!0),t.memoizedState=r)}function bg(t,e){var r=et;et=r!==0&&4>r?r:4,t(!0);var n=qs.transition;qs.transition={};try{t(!1),e()}finally{et=r,qs.transition=n}}function Q0(){return Rr().memoizedState}function Sg(t,e,r){var n=On(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},J0(t))e1(e,r);else if(r=P0(t,e,r,n),r!==null){var o=er();Vr(r,t,n,o),t1(r,e,n)}}function Ng(t,e,r){var n=On(t),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(J0(t))e1(e,o);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var i=e.lastRenderedState,s=a(i,r);if(o.hasEagerState=!0,o.eagerState=s,Xr(s,i)){var l=e.interleaved;l===null?(o.next=o,Xc(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch{}finally{}r=P0(t,e,o,n),r!==null&&(o=er(),Vr(r,t,n,o),t1(r,e,n))}}function J0(t){var e=t.alternate;return t===ht||e!==null&&e===ht}function e1(t,e){ba=ts=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function t1(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Mc(t,r)}}var rs={readContext:Mr,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},Eg={readContext:Mr,useCallback:function(t,e){return Kr().memoizedState=[t,e===void 0?null:e],t},useContext:Mr,useEffect:fd,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Di(4194308,4,W0.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Di(4194308,4,t,e)},useInsertionEffect:function(t,e){return Di(4,2,t,e)},useMemo:function(t,e){var r=Kr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Kr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Sg.bind(null,ht,t),[n.memoizedState,t]},useRef:function(t){var e=Kr();return t={current:t},e.memoizedState=t},useState:dd,useDebugValue:tu,useDeferredValue:function(t){return Kr().memoizedState=t},useTransition:function(){var t=dd(!1),e=t[0];return t=bg.bind(null,t[1]),Kr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ht,o=Kr();if(ct){if(r===void 0)throw Error(fe(407));r=r()}else{if(r=e(),kt===null)throw Error(fe(349));no&30||F0(n,e,r)}o.memoizedState=r;var a={value:r,getSnapshot:e};return o.queue=a,fd(G0.bind(null,n,a,t),[t]),n.flags|=2048,za(9,U0.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Kr(),e=kt.identifierPrefix;if(ct){var r=an,n=on;r=(n&~(1<<32-Hr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ga++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Cg++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ag={readContext:Mr,useCallback:K0,useContext:Mr,useEffect:eu,useImperativeHandle:Y0,useInsertionEffect:V0,useLayoutEffect:X0,useMemo:Z0,useReducer:Qs,useRef:H0,useState:function(){return Qs($a)},useDebugValue:tu,useDeferredValue:function(t){var e=Rr();return q0(e,St.memoizedState,t)},useTransition:function(){var t=Qs($a)[0],e=Rr().memoizedState;return[t,e]},useMutableSource:B0,useSyncExternalStore:L0,useId:Q0,unstable_isNewReconciler:!1},Ig={readContext:Mr,useCallback:K0,useContext:Mr,useEffect:eu,useImperativeHandle:Y0,useInsertionEffect:V0,useLayoutEffect:X0,useMemo:Z0,useReducer:Js,useRef:H0,useState:function(){return Js($a)},useDebugValue:tu,useDeferredValue:function(t){var e=Rr();return St===null?e.memoizedState=t:q0(e,St.memoizedState,t)},useTransition:function(){var t=Js($a)[0],e=Rr().memoizedState;return[t,e]},useMutableSource:B0,useSyncExternalStore:L0,useId:Q0,unstable_isNewReconciler:!1};function Fr(t,e){if(t&&t.defaultProps){e=pt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function zl(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:pt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ms={isMounted:function(t){return(t=t._reactInternals)?so(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=er(),o=On(t),a=sn(n,o);a.payload=e,r!=null&&(a.callback=r),e=Dn(t,a,o),e!==null&&(Vr(e,t,o,n),Ai(e,t,o))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=er(),o=On(t),a=sn(n,o);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=Dn(t,a,o),e!==null&&(Vr(e,t,o,n),Ai(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=er(),n=On(t),o=sn(r,n);o.tag=2,e!=null&&(o.callback=e),e=Dn(t,o,n),e!==null&&(Vr(e,t,n,r),Ai(e,t,n))}};function hd(t,e,r,n,o,a,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,i):e.prototype&&e.prototype.isPureReactComponent?!ja(r,n)||!ja(o,a):!0}function r1(t,e,r){var n=!1,o=kn,a=e.contextType;return typeof a=="object"&&a!==null?a=Mr(a):(o=dr(e)?to:Yt.current,n=e.contextTypes,a=(n=n!=null)?Fo(t,o):kn),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ms,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=a),e}function pd(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&ms.enqueueReplaceState(e,e.state,null)}function Hl(t,e,r,n){var o=t.stateNode;o.props=r,o.state=t.memoizedState,o.refs={},Wc(t);var a=e.contextType;typeof a=="object"&&a!==null?o.context=Mr(a):(a=dr(e)?to:Yt.current,o.context=Fo(t,a)),o.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(zl(t,e,a,r),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&ms.enqueueReplaceState(o,o.state,null),Ji(t,r,o,n),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function zo(t,e){try{var r="",n=e;do r+=rp(n),n=n.return;while(n);var o=r}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:o,digest:null}}function el(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Vl(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Dg=typeof WeakMap=="function"?WeakMap:Map;function n1(t,e,r){r=sn(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){os||(os=!0,tc=n),Vl(t,e)},r}function o1(t,e,r){r=sn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var o=e.value;r.payload=function(){return n(o)},r.callback=function(){Vl(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Vl(t,e),typeof n!="function"&&(Tn===null?Tn=new Set([this]):Tn.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function gd(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Dg;var o=new Set;n.set(e,o)}else o=n.get(e),o===void 0&&(o=new Set,n.set(e,o));o.has(r)||(o.add(r),t=zg.bind(null,t,e,r),e.then(t,t))}function xd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vd(t,e,r,n,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=sn(-1,1),e.tag=2,Dn(r,e,1))),r.lanes|=1),t)}var Tg=fn.ReactCurrentOwner,lr=!1;function Jt(t,e,r,n){e.child=t===null?R0(e,null,r,n):Go(e,t.child,r,n)}function md(t,e,r,n,o){r=r.render;var a=e.ref;return ko(e,o),n=Qc(t,e,r,n,a,o),r=Jc(),t!==null&&!lr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,dn(t,e,o)):(ct&&r&&Uc(e),e.flags|=1,Jt(t,e,n,o),e.child)}function yd(t,e,r,n,o){if(t===null){var a=r.type;return typeof a=="function"&&!cu(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,a1(t,e,a,n,o)):(t=Ri(r.type,null,n,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&o)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:ja,r(i,n)&&t.ref===e.ref)return dn(t,e,o)}return e.flags|=1,t=Mn(a,n),t.ref=e.ref,t.return=e,e.child=t}function a1(t,e,r,n,o){if(t!==null){var a=t.memoizedProps;if(ja(a,n)&&t.ref===e.ref)if(lr=!1,e.pendingProps=n=a,(t.lanes&o)!==0)t.flags&131072&&(lr=!0);else return e.lanes=t.lanes,dn(t,e,o)}return Xl(t,e,r,n,o)}function i1(t,e,r){var n=e.pendingProps,o=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Ao,vr),vr|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nt(Ao,vr),vr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,nt(Ao,vr),vr|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,nt(Ao,vr),vr|=n;return Jt(t,e,o,r),e.child}function s1(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Xl(t,e,r,n,o){var a=dr(r)?to:Yt.current;return a=Fo(e,a),ko(e,o),r=Qc(t,e,r,n,a,o),n=Jc(),t!==null&&!lr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,dn(t,e,o)):(ct&&n&&Uc(e),e.flags|=1,Jt(t,e,r,o),e.child)}function wd(t,e,r,n,o){if(dr(r)){var a=!0;Yi(e)}else a=!1;if(ko(e,o),e.stateNode===null)Ti(t,e),r1(e,r,n),Hl(e,r,n,o),n=!0;else if(t===null){var i=e.stateNode,s=e.memoizedProps;i.props=s;var l=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=Mr(u):(u=dr(r)?to:Yt.current,u=Fo(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==n||l!==u)&&pd(e,i,n,u),mn=!1;var h=e.memoizedState;i.state=h,Ji(e,n,i,o),l=e.memoizedState,s!==n||h!==l||ur.current||mn?(typeof d=="function"&&(zl(e,r,d,n),l=e.memoizedState),(s=mn||hd(e,r,s,n,h,l,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),i.props=n,i.state=l,i.context=u,n=s):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,j0(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:Fr(e.type,s),i.props=u,f=e.pendingProps,h=i.context,l=r.contextType,typeof l=="object"&&l!==null?l=Mr(l):(l=dr(r)?to:Yt.current,l=Fo(e,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==f||h!==l)&&pd(e,i,n,l),mn=!1,h=e.memoizedState,i.state=h,Ji(e,n,i,o);var v=e.memoizedState;s!==f||h!==v||ur.current||mn?(typeof p=="function"&&(zl(e,r,p,n),v=e.memoizedState),(u=mn||hd(e,r,u,n,h,v,l)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,v,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,v,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),i.props=n,i.state=v,i.context=l,n=u):(typeof i.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return Wl(t,e,r,n,a,o)}function Wl(t,e,r,n,o,a){s1(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return o&&ad(e,r,!1),dn(t,e,a);n=e.stateNode,Tg.current=e;var s=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=Go(e,t.child,null,a),e.child=Go(e,null,s,a)):Jt(t,e,s,a),e.memoizedState=n.state,o&&ad(e,r,!0),e.child}function l1(t){var e=t.stateNode;e.pendingContext?od(t,e.pendingContext,e.pendingContext!==e.context):e.context&&od(t,e.context,!1),Yc(t,e.containerInfo)}function _d(t,e,r,n,o){return Uo(),$c(o),e.flags|=256,Jt(t,e,r,n),e.child}var Yl={dehydrated:null,treeContext:null,retryLane:0};function Kl(t){return{baseLanes:t,cachePool:null,transitions:null}}function c1(t,e,r){var n=e.pendingProps,o=ft.current,a=!1,i=(e.flags&128)!==0,s;if((s=i)||(s=t!==null&&t.memoizedState===null?!1:(o&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),nt(ft,o&1),t===null)return Gl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,a?(n=e.mode,a=e.child,i={mode:"hidden",children:i},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=_s(i,n,0,null),t=Jn(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Kl(r),e.memoizedState=Yl,t):ru(e,i));if(o=t.memoizedState,o!==null&&(s=o.dehydrated,s!==null))return Og(t,e,i,n,s,o,r);if(a){a=n.fallback,i=e.mode,o=t.child,s=o.sibling;var l={mode:"hidden",children:n.children};return!(i&1)&&e.child!==o?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Mn(o,l),n.subtreeFlags=o.subtreeFlags&14680064),s!==null?a=Mn(s,a):(a=Jn(a,i,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,i=t.child.memoizedState,i=i===null?Kl(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=t.childLanes&~r,e.memoizedState=Yl,n}return a=t.child,t=a.sibling,n=Mn(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function ru(t,e){return e=_s({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function di(t,e,r,n){return n!==null&&$c(n),Go(e,t.child,null,r),t=ru(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Og(t,e,r,n,o,a,i){if(r)return e.flags&256?(e.flags&=-257,n=el(Error(fe(422))),di(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,o=e.mode,n=_s({mode:"visible",children:n.children},o,0,null),a=Jn(a,o,i,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Go(e,t.child,null,i),e.child.memoizedState=Kl(i),e.memoizedState=Yl,a);if(!(e.mode&1))return di(t,e,i,null);if(o.data==="$!"){if(n=o.nextSibling&&o.nextSibling.dataset,n)var s=n.dgst;return n=s,a=Error(fe(419)),n=el(a,n,void 0),di(t,e,i,n)}if(s=(i&t.childLanes)!==0,lr||s){if(n=kt,n!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(n.suspendedLanes|i)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,un(t,o),Vr(n,t,o,-1))}return lu(),n=el(Error(fe(421))),di(t,e,i,n)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=Hg.bind(null,t),o._reactRetry=e,null):(t=a.treeContext,mr=In(o.nextSibling),yr=e,ct=!0,Gr=null,t!==null&&(Er[Ar++]=on,Er[Ar++]=an,Er[Ar++]=ro,on=t.id,an=t.overflow,ro=e),e=ru(e,n.children),e.flags|=4096,e)}function Cd(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),$l(t.return,e,r)}function tl(t,e,r,n,o){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=o)}function u1(t,e,r){var n=e.pendingProps,o=n.revealOrder,a=n.tail;if(Jt(t,e,n.children,r),n=ft.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cd(t,r,e);else if(t.tag===19)Cd(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(nt(ft,n),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(r=e.child,o=null;r!==null;)t=r.alternate,t!==null&&es(t)===null&&(o=r),r=r.sibling;r=o,r===null?(o=e.child,e.child=null):(o=r.sibling,r.sibling=null),tl(e,!1,o,r,a);break;case"backwards":for(r=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&es(t)===null){e.child=o;break}t=o.sibling,o.sibling=r,r=o,o=t}tl(e,!0,r,null,a);break;case"together":tl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ti(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),oo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(fe(153));if(e.child!==null){for(t=e.child,r=Mn(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Mn(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Mg(t,e,r){switch(e.tag){case 3:l1(e),Uo();break;case 5:k0(e);break;case 1:dr(e.type)&&Yi(e);break;case 4:Yc(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,o=e.memoizedProps.value;nt(qi,n._currentValue),n._currentValue=o;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(nt(ft,ft.current&1),e.flags|=128,null):r&e.child.childLanes?c1(t,e,r):(nt(ft,ft.current&1),t=dn(t,e,r),t!==null?t.sibling:null);nt(ft,ft.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return u1(t,e,r);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),nt(ft,ft.current),n)break;return null;case 22:case 23:return e.lanes=0,i1(t,e,r)}return dn(t,e,r)}var d1,Zl,f1,h1;d1=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Zl=function(){};f1=function(t,e,r,n){var o=t.memoizedProps;if(o!==n){t=e.stateNode,Zn(Jr.current);var a=null;switch(r){case"input":o=ml(t,o),n=ml(t,n),a=[];break;case"select":o=pt({},o,{value:void 0}),n=pt({},n,{value:void 0}),a=[];break;case"textarea":o=_l(t,o),n=_l(t,n),a=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Xi)}bl(r,n);var i;r=null;for(u in o)if(!n.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var s=o[u];for(i in s)s.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ia.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var l=n[u];if(s=o!=null?o[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(i in s)!s.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in l)l.hasOwnProperty(i)&&s[i]!==l[i]&&(r||(r={}),r[i]=l[i])}else r||(a||(a=[]),a.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ia.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&at("scroll",t),a||s===l||(a=[])):(a=a||[]).push(u,l))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};h1=function(t,e,r,n){r!==n&&(e.flags|=4)};function aa(t,e){if(!ct)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var o=t.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags&14680064,n|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Rg(t,e,r){var n=e.pendingProps;switch(Gc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return dr(e.type)&&Wi(),Ht(e),null;case 3:return n=e.stateNode,$o(),lt(ur),lt(Yt),Zc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ci(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gr!==null&&(oc(Gr),Gr=null))),Zl(t,e),Ht(e),null;case 5:Kc(e);var o=Zn(Ua.current);if(r=e.type,t!==null&&e.stateNode!=null)f1(t,e,r,n,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(fe(166));return Ht(e),null}if(t=Zn(Jr.current),ci(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Zr]=e,n[La]=a,t=(e.mode&1)!==0,r){case"dialog":at("cancel",n),at("close",n);break;case"iframe":case"object":case"embed":at("load",n);break;case"video":case"audio":for(o=0;o<ha.length;o++)at(ha[o],n);break;case"source":at("error",n);break;case"img":case"image":case"link":at("error",n),at("load",n);break;case"details":at("toggle",n);break;case"input":Ou(n,a),at("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},at("invalid",n);break;case"textarea":Ru(n,a),at("invalid",n)}bl(r,a),o=null;for(var i in a)if(a.hasOwnProperty(i)){var s=a[i];i==="children"?typeof s=="string"?n.textContent!==s&&(a.suppressHydrationWarning!==!0&&li(n.textContent,s,t),o=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&li(n.textContent,s,t),o=["children",""+s]):Ia.hasOwnProperty(i)&&s!=null&&i==="onScroll"&&at("scroll",n)}switch(r){case"input":ei(n),Mu(n,a,!0);break;case"textarea":ei(n),Pu(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Xi)}n=o,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Gf(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[Zr]=e,t[La]=n,d1(t,e,!1,!1),e.stateNode=t;e:{switch(i=Sl(r,n),r){case"dialog":at("cancel",t),at("close",t),o=n;break;case"iframe":case"object":case"embed":at("load",t),o=n;break;case"video":case"audio":for(o=0;o<ha.length;o++)at(ha[o],t);o=n;break;case"source":at("error",t),o=n;break;case"img":case"image":case"link":at("error",t),at("load",t),o=n;break;case"details":at("toggle",t),o=n;break;case"input":Ou(t,n),o=ml(t,n),at("invalid",t);break;case"option":o=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},o=pt({},n,{value:void 0}),at("invalid",t);break;case"textarea":Ru(t,n),o=_l(t,n),at("invalid",t);break;default:o=n}bl(r,o),s=o;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?Hf(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&$f(t,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Da(t,l):typeof l=="number"&&Da(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ia.hasOwnProperty(a)?l!=null&&a==="onScroll"&&at("scroll",t):l!=null&&Ec(t,a,l,i))}switch(r){case"input":ei(t),Mu(t,n,!1);break;case"textarea":ei(t),Pu(t);break;case"option":n.value!=null&&t.setAttribute("value",""+jn(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Mo(t,!!n.multiple,a,!1):n.defaultValue!=null&&Mo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Xi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)h1(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(fe(166));if(r=Zn(Ua.current),Zn(Jr.current),ci(e)){if(n=e.stateNode,r=e.memoizedProps,n[Zr]=e,(a=n.nodeValue!==r)&&(t=yr,t!==null))switch(t.tag){case 3:li(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&li(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Zr]=e,e.stateNode=n}return Ht(e),null;case 13:if(lt(ft),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ct&&mr!==null&&e.mode&1&&!(e.flags&128))O0(),Uo(),e.flags|=98560,a=!1;else if(a=ci(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(fe(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(fe(317));a[Zr]=e}else Uo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),a=!1}else Gr!==null&&(oc(Gr),Gr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ft.current&1?It===0&&(It=3):lu())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return $o(),Zl(t,e),t===null&&ka(e.stateNode.containerInfo),Ht(e),null;case 10:return Vc(e.type._context),Ht(e),null;case 17:return dr(e.type)&&Wi(),Ht(e),null;case 19:if(lt(ft),a=e.memoizedState,a===null)return Ht(e),null;if(n=(e.flags&128)!==0,i=a.rendering,i===null)if(n)aa(a,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=es(t),i!==null){for(e.flags|=128,aa(a,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,t=i.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return nt(ft,ft.current&1|2),e.child}t=t.sibling}a.tail!==null&&mt()>Ho&&(e.flags|=128,n=!0,aa(a,!1),e.lanes=4194304)}else{if(!n)if(t=es(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),aa(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!ct)return Ht(e),null}else 2*mt()-a.renderingStartTime>Ho&&r!==1073741824&&(e.flags|=128,n=!0,aa(a,!1),e.lanes=4194304);a.isBackwards?(i.sibling=e.child,e.child=i):(r=a.last,r!==null?r.sibling=i:e.child=i,a.last=i)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=mt(),e.sibling=null,r=ft.current,nt(ft,n?r&1|2:r&1),e):(Ht(e),null);case 22:case 23:return su(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?vr&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(fe(156,e.tag))}function Pg(t,e){switch(Gc(e),e.tag){case 1:return dr(e.type)&&Wi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $o(),lt(ur),lt(Yt),Zc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Kc(e),null;case 13:if(lt(ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(fe(340));Uo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lt(ft),null;case 4:return $o(),null;case 10:return Vc(e.type._context),null;case 22:case 23:return su(),null;case 24:return null;default:return null}}var fi=!1,Xt=!1,jg=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Eo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){xt(t,e,n)}else r.current=null}function ql(t,e,r){try{r()}catch(n){xt(t,e,n)}}var bd=!1;function kg(t,e){if(Pl=zi,t=m0(),Fc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var o=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,s=-1,l=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var p;f!==r||o!==0&&f.nodeType!==3||(s=i+o),f!==a||n!==0&&f.nodeType!==3||(l=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===t)break t;if(h===r&&++u===o&&(s=i),h===a&&++d===n&&(l=i),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(jl={focusedElem:t,selectionRange:r},zi=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,w=v.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:Fr(e.type,y),w);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(C){xt(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return v=bd,bd=!1,v}function Sa(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&t)===t){var a=o.destroy;o.destroy=void 0,a!==void 0&&ql(e,r,a)}o=o.next}while(o!==n)}}function ys(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Ql(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function p1(t){var e=t.alternate;e!==null&&(t.alternate=null,p1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zr],delete e[La],delete e[Ll],delete e[mg],delete e[yg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function g1(t){return t.tag===5||t.tag===3||t.tag===4}function Sd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||g1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jl(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Xi));else if(n!==4&&(t=t.child,t!==null))for(Jl(t,e,r),t=t.sibling;t!==null;)Jl(t,e,r),t=t.sibling}function ec(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(ec(t,e,r),t=t.sibling;t!==null;)ec(t,e,r),t=t.sibling}var Ft=null,Ur=!1;function pn(t,e,r){for(r=r.child;r!==null;)x1(t,e,r),r=r.sibling}function x1(t,e,r){if(Qr&&typeof Qr.onCommitFiberUnmount=="function")try{Qr.onCommitFiberUnmount(ds,r)}catch{}switch(r.tag){case 5:Xt||Eo(r,e);case 6:var n=Ft,o=Ur;Ft=null,pn(t,e,r),Ft=n,Ur=o,Ft!==null&&(Ur?(t=Ft,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ft.removeChild(r.stateNode));break;case 18:Ft!==null&&(Ur?(t=Ft,r=r.stateNode,t.nodeType===8?Ys(t.parentNode,r):t.nodeType===1&&Ys(t,r),Ra(t)):Ys(Ft,r.stateNode));break;case 4:n=Ft,o=Ur,Ft=r.stateNode.containerInfo,Ur=!0,pn(t,e,r),Ft=n,Ur=o;break;case 0:case 11:case 14:case 15:if(!Xt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){o=n=n.next;do{var a=o,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&ql(r,e,i),o=o.next}while(o!==n)}pn(t,e,r);break;case 1:if(!Xt&&(Eo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){xt(r,e,s)}pn(t,e,r);break;case 21:pn(t,e,r);break;case 22:r.mode&1?(Xt=(n=Xt)||r.memoizedState!==null,pn(t,e,r),Xt=n):pn(t,e,r);break;default:pn(t,e,r)}}function Nd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new jg),e.forEach(function(n){var o=Vg.bind(null,t,n);r.has(n)||(r.add(n),n.then(o,o))})}}function kr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var o=r[n];try{var a=t,i=e,s=i;e:for(;s!==null;){switch(s.tag){case 5:Ft=s.stateNode,Ur=!1;break e;case 3:Ft=s.stateNode.containerInfo,Ur=!0;break e;case 4:Ft=s.stateNode.containerInfo,Ur=!0;break e}s=s.return}if(Ft===null)throw Error(fe(160));x1(a,i,o),Ft=null,Ur=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(u){xt(o,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)v1(e,t),e=e.sibling}function v1(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kr(e,t),Wr(t),n&4){try{Sa(3,t,t.return),ys(3,t)}catch(y){xt(t,t.return,y)}try{Sa(5,t,t.return)}catch(y){xt(t,t.return,y)}}break;case 1:kr(e,t),Wr(t),n&512&&r!==null&&Eo(r,r.return);break;case 5:if(kr(e,t),Wr(t),n&512&&r!==null&&Eo(r,r.return),t.flags&32){var o=t.stateNode;try{Da(o,"")}catch(y){xt(t,t.return,y)}}if(n&4&&(o=t.stateNode,o!=null)){var a=t.memoizedProps,i=r!==null?r.memoizedProps:a,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&Ff(o,a),Sl(s,i);var u=Sl(s,a);for(i=0;i<l.length;i+=2){var d=l[i],f=l[i+1];d==="style"?Hf(o,f):d==="dangerouslySetInnerHTML"?$f(o,f):d==="children"?Da(o,f):Ec(o,d,f,u)}switch(s){case"input":yl(o,a);break;case"textarea":Uf(o,a);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Mo(o,!!a.multiple,p,!1):h!==!!a.multiple&&(a.defaultValue!=null?Mo(o,!!a.multiple,a.defaultValue,!0):Mo(o,!!a.multiple,a.multiple?[]:"",!1))}o[La]=a}catch(y){xt(t,t.return,y)}}break;case 6:if(kr(e,t),Wr(t),n&4){if(t.stateNode===null)throw Error(fe(162));o=t.stateNode,a=t.memoizedProps;try{o.nodeValue=a}catch(y){xt(t,t.return,y)}}break;case 3:if(kr(e,t),Wr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ra(e.containerInfo)}catch(y){xt(t,t.return,y)}break;case 4:kr(e,t),Wr(t);break;case 13:kr(e,t),Wr(t),o=t.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(au=mt())),n&4&&Nd(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Xt=(u=Xt)||d,kr(e,t),Xt=u):kr(e,t),Wr(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Ie=t,d=t.child;d!==null;){for(f=Ie=d;Ie!==null;){switch(h=Ie,p=h.child,h.tag){case 0:case 11:case 14:case 15:Sa(4,h,h.return);break;case 1:Eo(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){xt(n,r,y)}}break;case 5:Eo(h,h.return);break;case 22:if(h.memoizedState!==null){Ad(f);continue}}p!==null?(p.return=h,Ie=p):Ad(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{o=f.stateNode,u?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=f.stateNode,l=f.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=zf("display",i))}catch(y){xt(t,t.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){xt(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:kr(e,t),Wr(t),n&4&&Nd(t);break;case 21:break;default:kr(e,t),Wr(t)}}function Wr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(g1(r)){var n=r;break e}r=r.return}throw Error(fe(160))}switch(n.tag){case 5:var o=n.stateNode;n.flags&32&&(Da(o,""),n.flags&=-33);var a=Sd(t);ec(t,a,o);break;case 3:case 4:var i=n.stateNode.containerInfo,s=Sd(t);Jl(t,s,i);break;default:throw Error(fe(161))}}catch(l){xt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Bg(t,e,r){Ie=t,m1(t)}function m1(t,e,r){for(var n=(t.mode&1)!==0;Ie!==null;){var o=Ie,a=o.child;if(o.tag===22&&n){var i=o.memoizedState!==null||fi;if(!i){var s=o.alternate,l=s!==null&&s.memoizedState!==null||Xt;s=fi;var u=Xt;if(fi=i,(Xt=l)&&!u)for(Ie=o;Ie!==null;)i=Ie,l=i.child,i.tag===22&&i.memoizedState!==null?Id(o):l!==null?(l.return=i,Ie=l):Id(o);for(;a!==null;)Ie=a,m1(a),a=a.sibling;Ie=o,fi=s,Xt=u}Ed(t)}else o.subtreeFlags&8772&&a!==null?(a.return=o,Ie=a):Ed(t)}}function Ed(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xt||ys(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Xt)if(r===null)n.componentDidMount();else{var o=e.elementType===e.type?r.memoizedProps:Fr(e.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&ud(e,a,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ud(e,i,r)}break;case 5:var s=e.stateNode;if(r===null&&e.flags&4){r=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ra(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}Xt||e.flags&512&&Ql(e)}catch(h){xt(e,e.return,h)}}if(e===t){Ie=null;break}if(r=e.sibling,r!==null){r.return=e.return,Ie=r;break}Ie=e.return}}function Ad(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Ie=r;break}Ie=e.return}}function Id(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ys(4,e)}catch(l){xt(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var o=e.return;try{n.componentDidMount()}catch(l){xt(e,o,l)}}var a=e.return;try{Ql(e)}catch(l){xt(e,a,l)}break;case 5:var i=e.return;try{Ql(e)}catch(l){xt(e,i,l)}}}catch(l){xt(e,e.return,l)}if(e===t){Ie=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Ie=s;break}Ie=e.return}}var Lg=Math.ceil,ns=fn.ReactCurrentDispatcher,nu=fn.ReactCurrentOwner,Tr=fn.ReactCurrentBatchConfig,Xe=0,kt=null,wt=null,Gt=0,vr=0,Ao=Ln(0),It=0,Ha=null,oo=0,ws=0,ou=0,Na=null,ir=null,au=0,Ho=1/0,rn=null,os=!1,tc=null,Tn=null,hi=!1,bn=null,as=0,Ea=0,rc=null,Oi=-1,Mi=0;function er(){return Xe&6?mt():Oi!==-1?Oi:Oi=mt()}function On(t){return t.mode&1?Xe&2&&Gt!==0?Gt&-Gt:_g.transition!==null?(Mi===0&&(Mi=r0()),Mi):(t=et,t!==0||(t=window.event,t=t===void 0?16:c0(t.type)),t):1}function Vr(t,e,r,n){if(50<Ea)throw Ea=0,rc=null,Error(fe(185));Xa(t,r,n),(!(Xe&2)||t!==kt)&&(t===kt&&(!(Xe&2)&&(ws|=r),It===4&&_n(t,Gt)),fr(t,n),r===1&&Xe===0&&!(e.mode&1)&&(Ho=mt()+500,xs&&Fn()))}function fr(t,e){var r=t.callbackNode;_p(t,e);var n=$i(t,t===kt?Gt:0);if(n===0)r!==null&&Bu(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Bu(r),e===1)t.tag===0?wg(Dd.bind(null,t)):I0(Dd.bind(null,t)),xg(function(){!(Xe&6)&&Fn()}),r=null;else{switch(n0(n)){case 1:r=Oc;break;case 4:r=e0;break;case 16:r=Gi;break;case 536870912:r=t0;break;default:r=Gi}r=E1(r,y1.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function y1(t,e){if(Oi=-1,Mi=0,Xe&6)throw Error(fe(327));var r=t.callbackNode;if(Bo()&&t.callbackNode!==r)return null;var n=$i(t,t===kt?Gt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=is(t,n);else{e=n;var o=Xe;Xe|=2;var a=_1();(kt!==t||Gt!==e)&&(rn=null,Ho=mt()+500,Qn(t,e));do try{Gg();break}catch(s){w1(t,s)}while(!0);Hc(),ns.current=a,Xe=o,wt!==null?e=0:(kt=null,Gt=0,e=It)}if(e!==0){if(e===2&&(o=Dl(t),o!==0&&(n=o,e=nc(t,o))),e===1)throw r=Ha,Qn(t,0),_n(t,n),fr(t,mt()),r;if(e===6)_n(t,n);else{if(o=t.current.alternate,!(n&30)&&!Fg(o)&&(e=is(t,n),e===2&&(a=Dl(t),a!==0&&(n=a,e=nc(t,a))),e===1))throw r=Ha,Qn(t,0),_n(t,n),fr(t,mt()),r;switch(t.finishedWork=o,t.finishedLanes=n,e){case 0:case 1:throw Error(fe(345));case 2:Xn(t,ir,rn);break;case 3:if(_n(t,n),(n&130023424)===n&&(e=au+500-mt(),10<e)){if($i(t,0)!==0)break;if(o=t.suspendedLanes,(o&n)!==n){er(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Bl(Xn.bind(null,t,ir,rn),e);break}Xn(t,ir,rn);break;case 4:if(_n(t,n),(n&4194240)===n)break;for(e=t.eventTimes,o=-1;0<n;){var i=31-Hr(n);a=1<<i,i=e[i],i>o&&(o=i),n&=~a}if(n=o,n=mt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Lg(n/1960))-n,10<n){t.timeoutHandle=Bl(Xn.bind(null,t,ir,rn),n);break}Xn(t,ir,rn);break;case 5:Xn(t,ir,rn);break;default:throw Error(fe(329))}}}return fr(t,mt()),t.callbackNode===r?y1.bind(null,t):null}function nc(t,e){var r=Na;return t.current.memoizedState.isDehydrated&&(Qn(t,e).flags|=256),t=is(t,e),t!==2&&(e=ir,ir=r,e!==null&&oc(e)),t}function oc(t){ir===null?ir=t:ir.push.apply(ir,t)}function Fg(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var o=r[n],a=o.getSnapshot;o=o.value;try{if(!Xr(a(),o))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _n(t,e){for(e&=~ou,e&=~ws,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Hr(e),n=1<<r;t[r]=-1,e&=~n}}function Dd(t){if(Xe&6)throw Error(fe(327));Bo();var e=$i(t,0);if(!(e&1))return fr(t,mt()),null;var r=is(t,e);if(t.tag!==0&&r===2){var n=Dl(t);n!==0&&(e=n,r=nc(t,n))}if(r===1)throw r=Ha,Qn(t,0),_n(t,e),fr(t,mt()),r;if(r===6)throw Error(fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xn(t,ir,rn),fr(t,mt()),null}function iu(t,e){var r=Xe;Xe|=1;try{return t(e)}finally{Xe=r,Xe===0&&(Ho=mt()+500,xs&&Fn())}}function ao(t){bn!==null&&bn.tag===0&&!(Xe&6)&&Bo();var e=Xe;Xe|=1;var r=Tr.transition,n=et;try{if(Tr.transition=null,et=1,t)return t()}finally{et=n,Tr.transition=r,Xe=e,!(Xe&6)&&Fn()}}function su(){vr=Ao.current,lt(Ao)}function Qn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,gg(r)),wt!==null)for(r=wt.return;r!==null;){var n=r;switch(Gc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Wi();break;case 3:$o(),lt(ur),lt(Yt),Zc();break;case 5:Kc(n);break;case 4:$o();break;case 13:lt(ft);break;case 19:lt(ft);break;case 10:Vc(n.type._context);break;case 22:case 23:su()}r=r.return}if(kt=t,wt=t=Mn(t.current,null),Gt=vr=e,It=0,Ha=null,ou=ws=oo=0,ir=Na=null,Kn!==null){for(e=0;e<Kn.length;e++)if(r=Kn[e],n=r.interleaved,n!==null){r.interleaved=null;var o=n.next,a=r.pending;if(a!==null){var i=a.next;a.next=o,n.next=i}r.pending=n}Kn=null}return t}function w1(t,e){do{var r=wt;try{if(Hc(),Ii.current=rs,ts){for(var n=ht.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}ts=!1}if(no=0,Rt=St=ht=null,ba=!1,Ga=0,nu.current=null,r===null||r.return===null){It=1,Ha=e,wt=null;break}e:{var a=t,i=r.return,s=r,l=e;if(e=Gt,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=s,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=xd(i);if(p!==null){p.flags&=-257,vd(p,i,s,a,e),p.mode&1&&gd(a,u,e),e=p,l=u;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){gd(a,u,e),lu();break e}l=Error(fe(426))}}else if(ct&&s.mode&1){var w=xd(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),vd(w,i,s,a,e),$c(zo(l,s));break e}}a=l=zo(l,s),It!==4&&(It=2),Na===null?Na=[a]:Na.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var g=n1(a,l,e);cd(a,g);break e;case 1:s=l;var x=a.type,m=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Tn===null||!Tn.has(m)))){a.flags|=65536,e&=-e,a.lanes|=e;var C=o1(a,s,e);cd(a,C);break e}}a=a.return}while(a!==null)}b1(r)}catch(N){e=N,wt===r&&r!==null&&(wt=r=r.return);continue}break}while(!0)}function _1(){var t=ns.current;return ns.current=rs,t===null?rs:t}function lu(){(It===0||It===3||It===2)&&(It=4),kt===null||!(oo&268435455)&&!(ws&268435455)||_n(kt,Gt)}function is(t,e){var r=Xe;Xe|=2;var n=_1();(kt!==t||Gt!==e)&&(rn=null,Qn(t,e));do try{Ug();break}catch(o){w1(t,o)}while(!0);if(Hc(),Xe=r,ns.current=n,wt!==null)throw Error(fe(261));return kt=null,Gt=0,It}function Ug(){for(;wt!==null;)C1(wt)}function Gg(){for(;wt!==null&&!fp();)C1(wt)}function C1(t){var e=N1(t.alternate,t,vr);t.memoizedProps=t.pendingProps,e===null?b1(t):wt=e,nu.current=null}function b1(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Pg(r,e),r!==null){r.flags&=32767,wt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,wt=null;return}}else if(r=Rg(r,e,vr),r!==null){wt=r;return}if(e=e.sibling,e!==null){wt=e;return}wt=e=t}while(e!==null);It===0&&(It=5)}function Xn(t,e,r){var n=et,o=Tr.transition;try{Tr.transition=null,et=1,$g(t,e,r,n)}finally{Tr.transition=o,et=n}return null}function $g(t,e,r,n){do Bo();while(bn!==null);if(Xe&6)throw Error(fe(327));r=t.finishedWork;var o=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(fe(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(Cp(t,a),t===kt&&(wt=kt=null,Gt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||hi||(hi=!0,E1(Gi,function(){return Bo(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Tr.transition,Tr.transition=null;var i=et;et=1;var s=Xe;Xe|=4,nu.current=null,kg(t,r),v1(r,t),lg(jl),zi=!!Pl,jl=Pl=null,t.current=r,Bg(r),hp(),Xe=s,et=i,Tr.transition=a}else t.current=r;if(hi&&(hi=!1,bn=t,as=o),a=t.pendingLanes,a===0&&(Tn=null),xp(r.stateNode),fr(t,mt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)o=e[r],n(o.value,{componentStack:o.stack,digest:o.digest});if(os)throw os=!1,t=tc,tc=null,t;return as&1&&t.tag!==0&&Bo(),a=t.pendingLanes,a&1?t===rc?Ea++:(Ea=0,rc=t):Ea=0,Fn(),null}function Bo(){if(bn!==null){var t=n0(as),e=Tr.transition,r=et;try{if(Tr.transition=null,et=16>t?16:t,bn===null)var n=!1;else{if(t=bn,bn=null,as=0,Xe&6)throw Error(fe(331));var o=Xe;for(Xe|=4,Ie=t.current;Ie!==null;){var a=Ie,i=a.child;if(Ie.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Ie=u;Ie!==null;){var d=Ie;switch(d.tag){case 0:case 11:case 15:Sa(8,d,a)}var f=d.child;if(f!==null)f.return=d,Ie=f;else for(;Ie!==null;){d=Ie;var h=d.sibling,p=d.return;if(p1(d),d===u){Ie=null;break}if(h!==null){h.return=p,Ie=h;break}Ie=p}}}var v=a.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}Ie=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,Ie=i;else e:for(;Ie!==null;){if(a=Ie,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Sa(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,Ie=g;break e}Ie=a.return}}var x=t.current;for(Ie=x;Ie!==null;){i=Ie;var m=i.child;if(i.subtreeFlags&2064&&m!==null)m.return=i,Ie=m;else e:for(i=x;Ie!==null;){if(s=Ie,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:ys(9,s)}}catch(N){xt(s,s.return,N)}if(s===i){Ie=null;break e}var C=s.sibling;if(C!==null){C.return=s.return,Ie=C;break e}Ie=s.return}}if(Xe=o,Fn(),Qr&&typeof Qr.onPostCommitFiberRoot=="function")try{Qr.onPostCommitFiberRoot(ds,t)}catch{}n=!0}return n}finally{et=r,Tr.transition=e}}return!1}function Td(t,e,r){e=zo(r,e),e=n1(t,e,1),t=Dn(t,e,1),e=er(),t!==null&&(Xa(t,1,e),fr(t,e))}function xt(t,e,r){if(t.tag===3)Td(t,t,r);else for(;e!==null;){if(e.tag===3){Td(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Tn===null||!Tn.has(n))){t=zo(r,t),t=o1(e,t,1),e=Dn(e,t,1),t=er(),e!==null&&(Xa(e,1,t),fr(e,t));break}}e=e.return}}function zg(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=er(),t.pingedLanes|=t.suspendedLanes&r,kt===t&&(Gt&r)===r&&(It===4||It===3&&(Gt&130023424)===Gt&&500>mt()-au?Qn(t,0):ou|=r),fr(t,e)}function S1(t,e){e===0&&(t.mode&1?(e=ni,ni<<=1,!(ni&130023424)&&(ni=4194304)):e=1);var r=er();t=un(t,e),t!==null&&(Xa(t,e,r),fr(t,r))}function Hg(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),S1(t,r)}function Vg(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,o=t.memoizedState;o!==null&&(r=o.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(fe(314))}n!==null&&n.delete(e),S1(t,r)}var N1;N1=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ur.current)lr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return lr=!1,Mg(t,e,r);lr=!!(t.flags&131072)}else lr=!1,ct&&e.flags&1048576&&D0(e,Zi,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ti(t,e),t=e.pendingProps;var o=Fo(e,Yt.current);ko(e,r),o=Qc(null,e,n,t,o,r);var a=Jc();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dr(n)?(a=!0,Yi(e)):a=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Wc(e),o.updater=ms,e.stateNode=o,o._reactInternals=e,Hl(e,n,t,r),e=Wl(null,e,n,!0,a,r)):(e.tag=0,ct&&a&&Uc(e),Jt(null,e,o,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ti(t,e),t=e.pendingProps,o=n._init,n=o(n._payload),e.type=n,o=e.tag=Wg(n),t=Fr(n,t),o){case 0:e=Xl(null,e,n,t,r);break e;case 1:e=wd(null,e,n,t,r);break e;case 11:e=md(null,e,n,t,r);break e;case 14:e=yd(null,e,n,Fr(n.type,t),r);break e}throw Error(fe(306,n,""))}return e;case 0:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Fr(n,o),Xl(t,e,n,o,r);case 1:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Fr(n,o),wd(t,e,n,o,r);case 3:e:{if(l1(e),t===null)throw Error(fe(387));n=e.pendingProps,a=e.memoizedState,o=a.element,j0(t,e),Ji(e,n,null,r);var i=e.memoizedState;if(n=i.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){o=zo(Error(fe(423)),e),e=_d(t,e,n,r,o);break e}else if(n!==o){o=zo(Error(fe(424)),e),e=_d(t,e,n,r,o);break e}else for(mr=In(e.stateNode.containerInfo.firstChild),yr=e,ct=!0,Gr=null,r=R0(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Uo(),n===o){e=dn(t,e,r);break e}Jt(t,e,n,r)}e=e.child}return e;case 5:return k0(e),t===null&&Gl(e),n=e.type,o=e.pendingProps,a=t!==null?t.memoizedProps:null,i=o.children,kl(n,o)?i=null:a!==null&&kl(n,a)&&(e.flags|=32),s1(t,e),Jt(t,e,i,r),e.child;case 6:return t===null&&Gl(e),null;case 13:return c1(t,e,r);case 4:return Yc(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Go(e,null,n,r):Jt(t,e,n,r),e.child;case 11:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Fr(n,o),md(t,e,n,o,r);case 7:return Jt(t,e,e.pendingProps,r),e.child;case 8:return Jt(t,e,e.pendingProps.children,r),e.child;case 12:return Jt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,o=e.pendingProps,a=e.memoizedProps,i=o.value,nt(qi,n._currentValue),n._currentValue=i,a!==null)if(Xr(a.value,i)){if(a.children===o.children&&!ur.current){e=dn(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){i=a.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=sn(-1,r&-r),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),$l(a.return,r,e),s.lanes|=r;break}l=l.next}}else if(a.tag===10)i=a.type===e.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(fe(341));i.lanes|=r,s=i.alternate,s!==null&&(s.lanes|=r),$l(i,r,e),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===e){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Jt(t,e,o.children,r),e=e.child}return e;case 9:return o=e.type,n=e.pendingProps.children,ko(e,r),o=Mr(o),n=n(o),e.flags|=1,Jt(t,e,n,r),e.child;case 14:return n=e.type,o=Fr(n,e.pendingProps),o=Fr(n.type,o),yd(t,e,n,o,r);case 15:return a1(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Fr(n,o),Ti(t,e),e.tag=1,dr(n)?(t=!0,Yi(e)):t=!1,ko(e,r),r1(e,n,o),Hl(e,n,o,r),Wl(null,e,n,!0,t,r);case 19:return u1(t,e,r);case 22:return i1(t,e,r)}throw Error(fe(156,e.tag))};function E1(t,e){return Jf(t,e)}function Xg(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(t,e,r,n){return new Xg(t,e,r,n)}function cu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wg(t){if(typeof t=="function")return cu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ic)return 11;if(t===Dc)return 14}return 2}function Mn(t,e){var r=t.alternate;return r===null?(r=Ir(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ri(t,e,r,n,o,a){var i=2;if(n=t,typeof t=="function")cu(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case vo:return Jn(r.children,o,a,e);case Ac:i=8,o|=8;break;case pl:return t=Ir(12,r,e,o|2),t.elementType=pl,t.lanes=a,t;case gl:return t=Ir(13,r,e,o),t.elementType=gl,t.lanes=a,t;case xl:return t=Ir(19,r,e,o),t.elementType=xl,t.lanes=a,t;case kf:return _s(r,o,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Pf:i=10;break e;case jf:i=9;break e;case Ic:i=11;break e;case Dc:i=14;break e;case vn:i=16,n=null;break e}throw Error(fe(130,t==null?t:typeof t,""))}return e=Ir(i,r,e,o),e.elementType=t,e.type=n,e.lanes=a,e}function Jn(t,e,r,n){return t=Ir(7,t,n,e),t.lanes=r,t}function _s(t,e,r,n){return t=Ir(22,t,n,e),t.elementType=kf,t.lanes=r,t.stateNode={isHidden:!1},t}function rl(t,e,r){return t=Ir(6,t,null,e),t.lanes=r,t}function nl(t,e,r){return e=Ir(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Yg(t,e,r,n,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bs(0),this.expirationTimes=Bs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bs(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function uu(t,e,r,n,o,a,i,s,l){return t=new Yg(t,e,r,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Ir(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wc(a),t}function Kg(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function A1(t){if(!t)return kn;t=t._reactInternals;e:{if(so(t)!==t||t.tag!==1)throw Error(fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(fe(171))}if(t.tag===1){var r=t.type;if(dr(r))return A0(t,r,e)}return e}function I1(t,e,r,n,o,a,i,s,l){return t=uu(r,n,!0,t,o,a,i,s,l),t.context=A1(null),r=t.current,n=er(),o=On(r),a=sn(n,o),a.callback=e??null,Dn(r,a,o),t.current.lanes=o,Xa(t,o,n),fr(t,n),t}function Cs(t,e,r,n){var o=e.current,a=er(),i=On(o);return r=A1(r),e.context===null?e.context=r:e.pendingContext=r,e=sn(a,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Dn(o,e,i),t!==null&&(Vr(t,o,i,a),Ai(t,o,i)),i}function ss(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Od(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function du(t,e){Od(t,e),(t=t.alternate)&&Od(t,e)}function Zg(){return null}var D1=typeof reportError=="function"?reportError:function(t){console.error(t)};function fu(t){this._internalRoot=t}bs.prototype.render=fu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(fe(409));Cs(t,e,null,null)};bs.prototype.unmount=fu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ao(function(){Cs(null,t,null,null)}),e[cn]=null}};function bs(t){this._internalRoot=t}bs.prototype.unstable_scheduleHydration=function(t){if(t){var e=i0();t={blockedOn:null,target:t,priority:e};for(var r=0;r<wn.length&&e!==0&&e<wn[r].priority;r++);wn.splice(r,0,t),r===0&&l0(t)}};function hu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ss(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Md(){}function qg(t,e,r,n,o){if(o){if(typeof n=="function"){var a=n;n=function(){var u=ss(i);a.call(u)}}var i=I1(e,n,t,0,null,!1,!1,"",Md);return t._reactRootContainer=i,t[cn]=i.current,ka(t.nodeType===8?t.parentNode:t),ao(),i}for(;o=t.lastChild;)t.removeChild(o);if(typeof n=="function"){var s=n;n=function(){var u=ss(l);s.call(u)}}var l=uu(t,0,!1,null,null,!1,!1,"",Md);return t._reactRootContainer=l,t[cn]=l.current,ka(t.nodeType===8?t.parentNode:t),ao(function(){Cs(e,l,r,n)}),l}function Ns(t,e,r,n,o){var a=r._reactRootContainer;if(a){var i=a;if(typeof o=="function"){var s=o;o=function(){var l=ss(i);s.call(l)}}Cs(e,i,t,o)}else i=qg(r,e,t,o,n);return ss(i)}o0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=fa(e.pendingLanes);r!==0&&(Mc(e,r|1),fr(e,mt()),!(Xe&6)&&(Ho=mt()+500,Fn()))}break;case 13:ao(function(){var n=un(t,1);if(n!==null){var o=er();Vr(n,t,1,o)}}),du(t,1)}};Rc=function(t){if(t.tag===13){var e=un(t,134217728);if(e!==null){var r=er();Vr(e,t,134217728,r)}du(t,134217728)}};a0=function(t){if(t.tag===13){var e=On(t),r=un(t,e);if(r!==null){var n=er();Vr(r,t,e,n)}du(t,e)}};i0=function(){return et};s0=function(t,e){var r=et;try{return et=t,e()}finally{et=r}};El=function(t,e,r){switch(e){case"input":if(yl(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var o=gs(n);if(!o)throw Error(fe(90));Lf(n),yl(n,o)}}}break;case"textarea":Uf(t,r);break;case"select":e=r.value,e!=null&&Mo(t,!!r.multiple,e,!1)}};Wf=iu;Yf=ao;var Qg={usingClientEntryPoint:!1,Events:[Ya,_o,gs,Vf,Xf,iu]},ia={findFiberByHostInstance:Yn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jg={bundleType:ia.bundleType,version:ia.version,rendererPackageName:ia.rendererPackageName,rendererConfig:ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qf(t),t===null?null:t.stateNode},findFiberByHostInstance:ia.findFiberByHostInstance||Zg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pi.isDisabled&&pi.supportsFiber)try{ds=pi.inject(Jg),Qr=pi}catch{}}_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qg;_r.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hu(e))throw Error(fe(200));return Kg(t,e,null,r)};_r.createRoot=function(t,e){if(!hu(t))throw Error(fe(299));var r=!1,n="",o=D1;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=uu(t,1,!1,null,null,r,!1,n,o),t[cn]=e.current,ka(t.nodeType===8?t.parentNode:t),new fu(e)};_r.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(fe(188)):(t=Object.keys(t).join(","),Error(fe(268,t)));return t=qf(e),t=t===null?null:t.stateNode,t};_r.flushSync=function(t){return ao(t)};_r.hydrate=function(t,e,r){if(!Ss(e))throw Error(fe(200));return Ns(null,t,e,!0,r)};_r.hydrateRoot=function(t,e,r){if(!hu(t))throw Error(fe(405));var n=r!=null&&r.hydratedSources||null,o=!1,a="",i=D1;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=I1(e,null,t,1,r??null,o,!1,a,i),t[cn]=e.current,ka(t),n)for(t=0;t<n.length;t++)r=n[t],o=r._getVersion,o=o(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,o]:e.mutableSourceEagerHydrationData.push(r,o);return new bs(e)};_r.render=function(t,e,r){if(!Ss(e))throw Error(fe(200));return Ns(null,t,e,!1,r)};_r.unmountComponentAtNode=function(t){if(!Ss(t))throw Error(fe(40));return t._reactRootContainer?(ao(function(){Ns(null,null,t,!1,function(){t._reactRootContainer=null,t[cn]=null})}),!0):!1};_r.unstable_batchedUpdates=iu;_r.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Ss(r))throw Error(fe(200));if(t==null||t._reactInternals===void 0)throw Error(fe(38));return Ns(t,e,r,!1,n)};_r.version="18.3.1-next-f1338f8080-20240426";function T1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(T1)}catch(t){console.error(t)}}T1(),Tf.exports=_r;var ex=Tf.exports,O1,Rd=ex;O1=Rd.createRoot,Rd.hydrateRoot;class tx{constructor(){this.config=null,this.isConfigLoaded=!1}async loadConfig(){var e;if(this.config&&this.isConfigLoaded)return this.config;try{const r=await fetch("../config.txt");if(!r.ok)throw new Error(`Failed to load config: ${r.status}`);const n=await r.text();if(this.config=JSON.parse(n),this.isConfigLoaded=!0,!((e=this.config)!=null&&e.domain))throw new Error("Invalid config: missing domain");return this.config}catch(r){throw console.error("Failed to load API config:",r),new Error("API configuration not available")}}async request(e,r={}){const o=`${(await this.loadConfig()).domain}${e}`,a={method:"POST",headers:{"Content-Type":"application/json",...r.headers},...r},i=new Date().toISOString();if(console.log(""),console.log(` API Request [${i}]`),console.log(" Endpoint:",e),console.log(" Full URL:",o),console.log(" Method:",a.method),console.log(" Headers:",a.headers),a.body){console.log(" Request Body:",a.body);try{const s=JSON.parse(a.body);console.log(" Parsed Body:",s)}catch{console.log(" Body (raw):",a.body)}}console.log("");try{const s=await fetch(o,a);if(console.log(""),console.log(` API Response [${new Date().toISOString()}]`),console.log(" Endpoint:",e),console.log(" Status:",s.status,s.statusText),console.log(" Response Headers:",Object.fromEntries(s.headers.entries())),!s.ok)throw console.log(" HTTP Error:",s.status),console.log(""),new Error(`HTTP error! status: ${s.status}`);const l=await s.json();return console.log(" Response Data:",l),console.log(""),l}catch(s){throw console.log(""),console.log(" API Request Failed"),console.log(" Endpoint:",e),console.log(" Error:",s),console.log(""),s}}async login(e){const r={Data:{ID:e.ID.trim(),Password:e.Password}};return this.request("/api/session/login",{method:"POST",body:JSON.stringify(r)})}async getDepartments(e={}){return this.request("/api/ServerSetting/get_name",{method:"POST",body:JSON.stringify(e)})}async getMedicineCloud(e={}){return this.request("/api/MED_page/get_med_cloud",{method:"POST",body:JSON.stringify({})})}async searchMedicine(e="",r="N"){try{const n=await this.getMedicineCloud();if(n.Code!==200||!n.Data)return console.error("API returned error:",n),[];let o=n.Data;if(o=o.filter(a=>a.DRUGKIND===r),o=o.filter(a=>a.FILE_STATUS!==""),e.trim()){const a=e.toLowerCase();o=o.filter(i=>i.CODE&&i.CODE.toLowerCase().includes(a)||i.CHT_NAME&&i.CHT_NAME.toLowerCase().includes(a)||i.NAME&&i.NAME.toLowerCase().includes(a))}return o}catch(n){return console.error("Medicine search failed:",n),[]}}async getMedMapByDepartment(e){const r={Data:{},ValueAry:[e]};return this.request("/api/medMap/get_medMap_by_department",{method:"POST",body:JSON.stringify(r)})}async updateContainerPosition(e){const r={Data:[e]};return this.request("/api/medMap/update_medMap_section",{method:"POST",body:JSON.stringify(r)})}async addMedMapBox(e){const r={Data:e};return this.request("/api/medMap/add_medMap_box",{method:"POST",body:JSON.stringify(r)})}async updateMedMapBox(e){const r={Data:e};return this.request("/api/medMap/update_medMap_box",{method:"POST",body:JSON.stringify(r)})}async updateEpd266Storages(e,r,n){const o={ServerName:e,ServerType:r,Data:n};return this.request("/api/device/update_epd266_storages",{method:"POST",body:JSON.stringify(o)})}async updateMedMapDrawer(e){const r={Data:e};return this.request("/api/medMap/update_medMap_drawer",{method:"POST",body:JSON.stringify(r)})}async updateMedMapShelf(e){const r={Data:e};return this.request("/api/medMap/update_medMap_shelf",{method:"POST",body:JSON.stringify(r)})}async addMedMapSection(e,r){const n={ValueAry:[e,r]};return this.request("/api/medMap/add_medMap_section",{method:"POST",body:JSON.stringify(n)})}async addMedMapShelf(e){const r={Data:e};return this.request("/api/medMap/add_medMap_shelf",{method:"POST",body:JSON.stringify(r)})}async addMedMapDrawer(e){const r={Data:e};return this.request("/api/medMap/add_medMap_drawer",{method:"POST",body:JSON.stringify(r)})}async addSubSection(e,r){const n={ValueAry:[e,r]};return this.request("/api/medMap/add_sub_section",{method:"POST",body:JSON.stringify(n)})}async updateSubSection(e){const r={Data:e};return this.request("/api/medMap/update_sub_section",{method:"POST",body:JSON.stringify(r)})}async updateMedMapSection(e){const r={Data:e};return this.request("/api/medMap/update_medMap_section",{method:"POST",body:JSON.stringify(r)})}async updateEpd266Medcode(e,r,n,o){const a={ServerName:e,ServerType:r,ValueAry:[`code=${n}`],Data:o};return this.request("/api/device/update_epd266_medcode",{method:"POST",body:JSON.stringify(a)})}async getConfig(){return this.loadConfig()}async checkConnection(){try{return await this.loadConfig(),!0}catch(e){return console.error("API connection check failed:",e),!1}}async addStock(e){const r={Data:e};return console.log(r),this.request("/api/medMap/add_stock",{method:"POST",body:JSON.stringify(r)})}async updateStock(e){const r={Data:e};return this.request("/api/medMap/update_stock",{method:"POST",body:JSON.stringify(r)})}async deleteStockByGUID(e){const r={ValueAry:e};return this.request("/api/medMap/delete_stock_by_GUID",{method:"POST",body:JSON.stringify(r)})}async addMedMap(e,r,n){const o={ValueAry:[e,r,n,"0,0"]};return this.request("/api/medMap/add_medMap",{method:"POST",body:JSON.stringify(o)})}async scanBarcode(e){const o=`${(await this.loadConfig()).ai||"https://www.kutech.tw:3000"}/barcode`,a=new FormData;a.append("file",e),console.log(""),console.log(` AI Barcode Scan Request [${new Date().toISOString()}]`),console.log(" URL:",o),console.log(" Image File:",e.name,e.size,"bytes"),console.log("");try{const i=await fetch(o,{method:"POST",body:a}),s=await i.json();return console.log(""),console.log(` AI Barcode Scan Response [${new Date().toISOString()}]`),console.log(" Status:",i.status),console.log(" Response Data:",s),console.log(""),s}catch(i){return console.error(" AI Barcode Scan Error:",i),{results:[]}}}async searchByBarCode(e){const r={Value:e};return this.request("/api/MED_page/serch_by_BarCode",{method:"POST",body:JSON.stringify(r)})}async lightByCodeNameType(e,r,n,o,a){const i={Method:"light_by_code_name_type",ValueAry:[`ServerName=${e}`,`ServerType=${r}`,`code=${n}`,`color=${o}`,`lightness=${a}`],Data:{}};return this.request("/api/medMap/light_by_code_name_type",{method:"POST",body:JSON.stringify(i)})}async addMedClouds(e,r,n,o){let a=o;a.push(e);const i={Data:[{BARCODE:a,CODE:r,BARCODE2:n||JSON.stringify([e])}]};return this.request("/api/MED_page/add_med_clouds",{method:"POST",body:JSON.stringify(i)})}async stockDeleteValidityPeriod(e,r){const n={ValueAry:[e,r]};return this.request("/api/medMap/stock_delete_Validity_period",{method:"POST",body:JSON.stringify(n)})}resetConfig(){this.config=null,this.isConfigLoaded=!1}async getRequisitionByTime(e,r){const n={ValueAry:[e,r]};return this.request("/api/materialRequisition/get_by_requestTime",{method:"POST",body:JSON.stringify(n)})}async getDistributionByTime(e,r){const n={ValueAry:[e,r]};return this.request("/api/drugStotreDistribution/get_by_addedTime",{method:"POST",body:JSON.stringify(n)})}async updateRequisitionNotice(e,r){const n={Data:{GUID:e,notice:r}};return this.request("/api/materialRequisition/update_notice",{method:"POST",body:JSON.stringify(n)})}async updateDistributionNotice(e,r){const n={ValueAry:[e,r]};return console.log(n),this.request("/api/drugStotreDistribution/update_notice",{method:"POST",body:JSON.stringify(n)})}async updateRequisitionActualQuantity(e,r){const n={Data:{GUID:e,actualQuantity:r}};return this.request("/api/materialRequisition/update_actual_quantity",{method:"POST",body:JSON.stringify(n)})}async updateRequisitionByGuid(e){const r={Data:[e]};return this.request("/api/materialRequisition/update_by_guid",{method:"POST",body:JSON.stringify(r)})}async updateDistributionActualQuantity(e,r){const n={ValueAry:[e,r]};return this.request("/api/drugStotreDistribution/update_actqty_by_guid",{method:"POST",body:JSON.stringify(n)})}async updateDistributionByGuid(e){const r={Data:[e]};return this.request("/api/drugStotreDistribution/update_by_guid",{method:"POST",body:JSON.stringify(r)})}async getAllStaffInfo(){return this.request("/api/person_page/get_all",{method:"POST",body:JSON.stringify({})})}async deleteParentContainer(e){const r={Data:[{GUID:e}]};return this.request("/api/medMap/delete_section",{method:"POST",body:JSON.stringify(r)})}async deleteSubContainer(e){const r={Data:[{GUID:e}]};return this.request("/api/medMap/delete_sub_section",{method:"POST",body:JSON.stringify(r)})}async deleteShelfContainer(e){const r={Data:[{GUID:e}]};return this.request("/api/medMap/delete_shelf",{method:"POST",body:JSON.stringify(r)})}}const Me=new tx;class rx{convertMedMapApiToFakeData(e){console.log("  MedMap API "),console.log("  API :",e);try{Array.isArray(e)||(console.warn(" API "),e=[e]);const n=e.map((o,a)=>this.convertSingleDepartment(o,a)).filter(o=>{if(Object.keys(o).length!==0)return o});return console.log(" MedMap :",n),n}catch(r){return console.error(" MedMap :",r),[]}}convertSingleDepartment(e,r){if(Object.keys(e).length!==0){let n;e.absolute_position?n=e.absolute_position.split(","):n=[0,0];const o={GUID:e.GUID||e.guid||`dept_${r}_${Date.now()}`,Master_GUID:e.Master_GUID,type:e.sys_ServerSetting.type||"",name:e.sys_ServerSetting.name||"",gird_position:e.position,position:{x:n[0],y:n[1]},contents:e.medMap_Section,department_type:e.sys_ServerSetting["department_type "],class:0};return Array.isArray(e.medMap_Section)&&e.medMap_Section.forEach((a,i)=>{let s;a.absolute_position?s=a.absolute_position.split(","):s=[0,0],o.contents[i]={GUID:a.GUID,Master_GUID:a.Master_GUID,name:a.name,type:"parent_container",class:1,gird_position:a.position,position:{x:s[0],y:s[1]},serverName:e.sys_ServerSetting.name,serverType:e.sys_ServerSetting.type,device_type:e.sys_ServerSetting.device_type,ip_light:a.ip_light,contents:[],med_list:[]},Array.isArray(a.sub_section)&&a.sub_section.forEach((l,u)=>{let d={GUID:l.GUID,Master_GUID:l.Master_GUID,name:l.name,type:"sub_container",class:2,gird_position:l.position,contents:[],serverName:e.sys_ServerSetting.name,serverType:e.sys_ServerSetting.type,oriMaxCol:0};o.contents[i].contents[u]=d;let f=0;Array.isArray(l.shelf)&&l.shelf.forEach((h,p)=>{let v={GUID:h.GUID,Master_GUID:h.Master_GUID,name:h.name,class:3,gird_position:h.position,serverName:h.serverName||"",serverType:h.serverType||"",device_type:h.device_type||"",type:h.type,contents:[],ip:h.ip_light,width:h.width,height:h.height};if(v.serverName&&(v.serverName=e.sys_ServerSetting.name),v.serverType&&(v.serverType=e.sys_ServerSetting.type),h.type=="dispensing_shelves"||h.type=="shelf")h.type=="shelf"&&(v.type="dispensing_shelves"),Array.isArray(h.medMapBox)&&h.medMapBox.forEach((w,g)=>{let x={GUID:w.GUID,Master_GUID:w.Master_GUID,name:"",class:4,gird_position:w.position,ip:w.ip_box,box_type:"",width:w.width,height:w.height,serverType:w.serverType,serverName:w.serverName,med_info:[],type:"med_box"},m={},C=h.position.split(","),N=w.position.split(",");if(w.storage){switch(x.device_type=w.storage.DeviceType,x.storage=w.storage,+x.device_type){case 10:x.box_type="2.9";break;case 118:x.box_type="2.13";break;case 13:x.box_type="4.2";break}m.name=w.storage.Name,m.code=w.storage.Code,m.cht_name=w.storage.ChineseName,m.SKDIACODE=w.storage.SKDIACODE,m.device_type=w.storage.device_type,m.qty=w.storage.StorageName,m.stockCol=`${+C[0]+1}`,m.stockRow="",m.stock=`${+N[1]+1}`}else x.device_type=10,x.box_type="2.9",m.name="",m.code="",m.cht_name="",m.stockCol=`${+C[0]+1}`,m.stockRow="",m.stock=`${+N[1]+1}`;o.contents[i].med_list.push(m),x.med_info[0]=m,v.contents.push(x)});else{v.type="store_shelves";const w=h.medMapStock.sort((g,x)=>{const[m]=g.location.split(",").map(Number),[C]=x.location.split(",").map(Number);return m-C});v.medMapStock=w,v.name=h.name,w.forEach((g,x)=>{let m=h.position.split(","),C=l.position.split(",");if(g.code){let N={};N.name=g.name,N.code=g.code,N.cht_name="",N.SKDIACODE=g.material_no,N.qty=g.qty,N.stockCol=`${+m[0]+1}`,N.stockRow=`${+C[1]+1}`,N.stock=`${x+1}`,o.contents[i].med_list.push(N)}})}let y=h.position.split(",")[1];f<+y&&(f=+y,o.contents[i].contents[u].oriMaxCol=+f),o.contents[i].contents[u].contents.push(v)}),Array.isArray(l.drawer)&&l.drawer.forEach((h,p)=>{let v={GUID:h.GUID,Master_GUID:h.Master_GUID,name:` ${p}`,class:3,gird_position:h.position,ip:h.ip_drawer,serverName:h.serverName,serverType:h.serverType};v.serverName&&(v.serverName=e.sys_ServerSetting.name),v.serverType&&(v.serverType=e.sys_ServerSetting.type),h.drawer?(v.drawer=h.drawer,h.drawer.Boxes&&(v.type="grid_draw",v.name=h.drawer.Name,v.Boxes=[],Array.isArray(h.drawer.Boxes)?h.drawer.Boxes.forEach((g,x)=>{let m=[];Array.isArray(g)&&g.forEach((C,N)=>{let S={Row:C.Row,Column:C.Column,Width:1,Height:1,Slave:C.Slave,SlaveBox_Row:C.SlaveBox_Row,SlaveBox_Column:C.SlaveBox_Column,MasterBox_Column:C.MasterBox_Column,MasterBox_Row:C.MasterBox_Row,Name:C.Name,Code:C.Code,ChineseName:C.ChineseName,GUID:C.GUID};m.push(S),C.Code&&o.contents[i].med_list.push(C.Code)}),v.Boxes.push(m)}):v.Boxes=h.drawer.Boxes)):(v.type="list_draw",v.name=` ${p}`);let y=h.position.split(",")[1];f<+y&&(f=+y,o.contents[i].contents[u].oriMaxCol=+f),o.contents[i].contents[u].contents.push(v)})})}),o}else return{}}convertSingleComponent(e,r,n){var a,i,s,l,u;const o={GUID:e.GUID||e.guid||`comp_${r}_${Date.now()}`,type:this.mapComponentType(e.type||e.component_type||"unknown"),name:e.name||e.component_name||`_${r}`,position:{x:((a=e.position)==null?void 0:a.x)||e.x||50+r*200,y:((i=e.position)==null?void 0:i.y)||e.y||50+r*150},dimensions:{width:((s=e.dimensions)==null?void 0:s.width)||e.width||180,height:((l=e.dimensions)==null?void 0:l.height)||e.height||120,depth:((u=e.dimensions)==null?void 0:u.depth)||e.depth||30},med_box:e.med_box||e.medBox||e.medicine_boxes||[],Master_GUID:n};return e.components&&Array.isArray(e.components)&&(o.components=e.components.map((d,f)=>this.convertSingleComponent(d,f,o.GUID))),Object.keys(e).forEach(d=>{["GUID","type","name","position","dimensions","med_box","components"].includes(d)||(o[d]=e[d])}),o}mapDepartmentType(e){return{dispensing_station:"",warehouse:"",pharmacy:"",storage:""}[e]||e}mapComponentType(e){return{medicine_box_shelf:"med_box_shelf",medicine_shelf:"normal_shelf",grid_drawer:"grid_draw",list_drawer:"list_draw",medicine_box:"med_box",parent_container:"parent_container",sub_container:"sub_container",dispensing_shelves:"dispensing_shelves",store_shelves:"store_shelves"}[e]||e}validateConvertedData(e){try{if(!Array.isArray(e))return console.error(" "),!1;for(const r of e){if(!r.GUID||!r.type||!r.name)return console.error(" :",r),!1;if(!r.gird_position||typeof r.gird_position!="string")return console.error(" :",r.gird_position),!1;if(r.components&&Array.isArray(r.components)){for(const n of r.components)if(!n.GUID||!n.type)return console.error(" :",n),!1}}return console.log(" "),!0}catch(r){return console.error(" :",r),!1}}generateConversionReport(e,r){const n={timestamp:new Date().toISOString(),originalDataCount:Array.isArray(e)?e.length:0,convertedDataCount:r.length,conversionSuccess:r.length>0,totalComponents:r.reduce((o,a)=>{var i;return o+(((i=a.components)==null?void 0:i.length)||0)},0),departmentTypes:[...new Set(r.map(o=>o.type))],componentTypes:[...new Set(r.flatMap(o=>{var a;return((a=o.components)==null?void 0:a.map(i=>i.type))||[]}))]};return console.log(" :",n),n}}const Wt=new rx,nx=Object.freeze(Object.defineProperty({__proto__:null,default:Wt},Symbol.toStringTag,{value:"Module"})),M1=_.createContext(void 0),ox=({children:t})=>{const[e,r]=_.useState(!1),[n,o]=_.useState(null),[a,i]=_.useState(!1),[s,l]=_.useState(null),[u,d]=_.useState(null),[f,h]=_.useState("medicine"),[p,v]=_.useState(!1),[y,w]=_.useState(0),[g,x]=_.useState({message:"",type:"success",isVisible:!1}),[m,C]=_.useState(!1),[N,S]=_.useState(null),[I,R]=_.useState("edit"),[z,k]=_.useState(!1),[oe,se]=_.useState(null),[A,D]=_.useState(!1),[F,T]=_.useState(null),[O,M]=_.useState(!1),[P,te]=_.useState(!1),[X,ee]=_.useState(null),[Ne,me]=_.useState(!1),[H,Ce]=_.useState(null),[Y,be]=_.useState(!1),[ye,B]=_.useState(null),[xe,W]=_.useState(!1),[j,ce]=_.useState(null),[de,V]=_.useState(null),[re,he]=_.useState("add"),[U,Z]=_.useState(!1),[Q,ue]=_.useState([]),[ge,Ee]=_.useState([]),[pe,Se]=_.useState(!1),[Te,Le]=_.useState(!1),[gt,Ue]=_.useState(""),[yt,rt]=_.useState(!1),[gr,br]=_.useState(""),[Un,Pr]=_.useState(!1),[lo,qo]=_.useState(null),[qa,Qo]=_.useState(null),[Ts,E]=_.useState(!1),[ae,J]=_.useState(null),[G,q]=_.useState(!1),[$,ne]=_.useState(null),[le,we]=_.useState(null),ie=()=>{sessionStorage.removeItem("user_session"),r(!1),o(null)},_e=_.useCallback(()=>{w(Fe=>Fe+1)},[]),Ae=_.useCallback((Fe,Tt)=>{x({message:Fe,type:Tt,isVisible:!0})},[]),Re=_.useCallback(()=>{x(Fe=>({...Fe,isVisible:!1}))},[]),De=Fe=>{S(Fe),R("edit"),C(!0)},Pe=()=>{const Fe={GUID:`new_medbox_${Date.now()}`,name:"",box_type:"",width:[],width_index:0,med_info:[],parentShelf:null};S(Fe),R("add"),C(!0)},je=()=>{C(!1),S(null),R("edit")},_t=Fe=>{se(Fe),k(!0)},Gn=()=>{k(!1),se(null)},$n=Fe=>{T(Fe),D(!0)},th=()=>{D(!1),T(null)},rh=Fe=>{ee(Fe),te(!0)},nh=()=>{te(!1),ee(null)},oh=Fe=>{Ce(Fe),me(!0)},ah=()=>{me(!1),Ce(null)},ih=Fe=>{B(Fe),be(!0)},sh=()=>{be(!1),B(null)},lh=Fe=>{ce(Fe),V(null),he("add"),W(!0)},ch=(Fe,Tt)=>{ce(Fe),V(Tt),he("edit"),W(!0)},uh=()=>{W(!1),ce(null),V(null),he("add")},dh=()=>{Z(!0)},fh=()=>{Z(!1)},hh=(Fe="")=>{Ue(Fe),Le(!0)},ph=()=>{Le(!1)},gh=Fe=>{br(Fe),rt(!0)},xh=()=>{rt(!1),br("")},vh=(Fe,Tt)=>{qo(Fe),Qo(Tt||null),Pr(!0)},mh=()=>{Pr(!1),qo(null),Qo(null)},yh=Fe=>{J(Fe),E(!0)},wh=()=>{E(!1),J(null)},_h=Fe=>{ne(Fe),q(!0)},Ch=()=>{q(!1),ne(null)},bh=_.useCallback(async()=>{if(!s){console.warn("");return}console.log(" :",s),M(!0);try{const Fe=await Me.getMedMapByDepartment(s);if(Fe.Code===200&&Fe.Data){console.log(" :",Fe.Data);const Tt=Wt.convertMedMapApiToFakeData(Fe.Data);if(!Wt.validateConvertedData(Tt)){console.error(" "),d(null);return}d(Tt),console.log(" ")}else console.error(" API :",Fe),d(null)}catch(Fe){console.error(" :",Fe),d(null)}finally{M(!1)}},[s,M,d]),Sh=_.useCallback((Fe,Tt)=>{d(xr=>xr&&xr.map(Sr=>{const or={...Sr};return or.contents&&(or.contents=or.contents.map(co=>{const uo={...co};return uo.contents&&(uo.contents=uo.contents.map(fo=>{const ho={...fo};return ho.contents&&(ho.contents=ho.contents.map(hn=>{if(hn.GUID===Fe){const jr={...hn};return jr.medMapStock||(jr.medMapStock=[]),jr.medMapStock=[...jr.medMapStock,Tt],jr}return hn})),ho})),uo})),or}))},[]),Nh=_.useCallback((Fe,Tt,xr)=>{d(tn=>tn&&tn.map(or=>{const co={...or};return co.contents&&(co.contents=co.contents.map(uo=>{const fo={...uo};return fo.contents&&(fo.contents=fo.contents.map(ho=>{const hn={...ho};return hn.contents&&(hn.contents=hn.contents.map(jr=>{if(jr.GUID===Fe&&jr.medMapStock){const Su={...jr};return Su.medMapStock=jr.medMapStock.map(Os=>Os.GUID===Tt?{...Os,...xr}:Os),Su}return jr})),hn})),fo})),co}))},[]),Eh=_.useCallback((Fe,Tt)=>{d(xr=>{if(!xr)return xr;const tn=Sr=>Sr.map(or=>or.GUID===Fe?{...or,...Tt}:or.contents&&Array.isArray(or.contents)?{...or,contents:tn(or.contents)}:or);return tn(xr)})},[]),Ah=_.useCallback(Fe=>{d(Tt=>{if(!Tt)return Tt;const xr=tn=>tn.filter(Sr=>Sr.GUID!==Fe).map(Sr=>Sr.contents&&Array.isArray(Sr.contents)?{...Sr,contents:xr(Sr.contents)}:Sr);return xr(Tt)})},[]);return c.jsx(M1.Provider,{value:{isAuthenticated:e,setIsAuthenticated:r,currentUser:n,setCurrentUser:o,logout:ie,sidebarOpen:a,setSidebarOpen:i,selectedDepartmentType:s,setSelectedDepartmentType:l,isAdminMode:p,setIsAdminMode:v,apiDepartmentData:u,setApiDepartmentData:d,viewMode:f,setViewMode:h,refreshTrigger:y,triggerRefresh:_e,addStockToShelf:Sh,notification:g,showNotification:Ae,hideNotification:Re,medBoxModalOpen:m,setMedBoxModalOpen:C,selectedMedBox:N,setSelectedMedBox:S,openMedBoxModal:De,closeMedBoxModal:je,modalMode:I,setModalMode:R,openAddMedBoxModal:Pe,listDrawModalOpen:z,setListDrawModalOpen:k,selectedListDraw:oe,setSelectedListDraw:se,openListDrawModal:_t,closeListDrawModal:Gn,gridDrawModalOpen:A,setGridDrawModalOpen:D,selectedGridDraw:F,setSelectedGridDraw:T,openGridDrawModal:$n,closeGridDrawModal:th,isLoadingMedMap:O,setIsLoadingMedMap:M,addParentContainerModalOpen:P,setAddParentContainerModalOpen:te,selectedDepartmentForAdd:X,setSelectedDepartmentForAdd:ee,openAddParentContainerModal:rh,closeAddParentContainerModal:nh,addShelfDrawContainerModalOpen:Ne,setAddShelfDrawContainerModalOpen:me,selectedSubContainerForAdd:H,setSelectedSubContainerForAdd:Ce,openAddShelfDrawContainerModal:oh,closeAddShelfDrawContainerModal:ah,addSubContainerModalOpen:Y,setAddSubContainerModalOpen:be,selectedParentContainerForAdd:ye,setSelectedParentContainerForAdd:B,openAddSubContainerModal:ih,closeAddSubContainerModal:sh,addStoreItemModalOpen:xe,setAddStoreItemModalOpen:W,selectedStoreShelfForAdd:j,setSelectedStoreShelfForAdd:ce,selectedStockItemForEdit:de,setSelectedStockItemForEdit:V,storeItemModalMode:re,setStoreItemModalMode:he,openAddStoreItemModal:lh,openEditStoreItemModal:ch,closeAddStoreItemModal:uh,updateStockInShelf:Nh,updateContainerInLocalData:Eh,removeContainerFromLocalData:Ah,addDepartmentModalOpen:U,setAddDepartmentModalOpen:Z,allDepartmentsList:Q,setAllDepartmentsList:ue,openAddDepartmentModal:dh,closeAddDepartmentModal:fh,reloadMedMapData:bh,qrCodeScannerModalOpen:Te,qrCodeScannerMode:gt,setQRCodeScannerModalOpen:Le,openQRCodeScannerModal:hh,closeQRCodeScannerModal:ph,addBarcodeModalOpen:yt,setAddBarcodeModalOpen:rt,openAddBarcodeModal:gh,closeAddBarcodeModal:xh,initialBarcodeValue:gr,containerDetailModalOpen:Un,setContainerDetailModalOpen:Pr,selectedContainerForDetail:lo,setSelectedContainerForDetail:qo,highlightedMedicineCode:qa,setHighlightedMedicineCode:Qo,openContainerDetailModal:vh,closeContainerDetailModal:mh,editStoreShelfModalOpen:Ts,setEditStoreShelfModalOpen:E,selectedStoreShelfForEdit:ae,setSelectedStoreShelfForEdit:J,openEditStoreShelfModal:yh,closeEditStoreShelfModal:wh,activeCanvas:le,setActiveCanvas:we,editParentContainerModalOpen:G,setEditParentContainerModalOpen:q,selectedParentContainerForEdit:$,setSelectedParentContainerForEdit:ne,openEditParentContainerModal:_h,closeEditParentContainerModal:Ch,medicineList:ge,setMedicineList:Ee,isLoadingMedicines:pe,setIsLoadingMedicines:Se},children:t})},vt=()=>{const t=_.useContext(M1);if(t===void 0)throw new Error("useDrugMap must be used within a DrugMapProvider");return t},ax={"zh-TW":{"nav.title":"","nav.home":"","nav.expandSidebar":"","nav.collapseSidebar":"","topbar.medicine":"","topbar.department":"","topbar.language":"","topbar.logout":"","sidebar.drugMap":"","sidebar.closeSidebar":"","sidebar.departmentCategories":"","sidebar.departments":"","canvas.lockCanvas":"","canvas.unlockCanvas":"","type.dispensingStation":"","type.warehouse":"","type.medBoxShelf":"","type.storeShelf":"","type.parentContainer":"","type.subContainer":"","type.gridDraw":"","type.listDraw":"","type.medBox":"","type.containers":"","modal.medBoxSettings":"","modal.addMedBox":"","modal.listDrawSettings":"","modal.gridDrawSettings":"","modal.settings":"","modal.add":"","form.medBoxName":"","form.medBoxType":"","form.widthSelection":"","form.ipAddress":"IP ","form.drugInfo":"","form.drawerName":"","form.drugList":"","form.drugCode":"","form.drugName":"","form.chineseName":"","form.drugSearch":"","placeholder.medBoxName":"  ","placeholder.ipAddress":" IP ","placeholder.drawerName":"","placeholder.gridDrawName":"","placeholder.drugSearch":" //","button.cancel":"","button.save":"","button.add":"","button.edit":"","button.change":"","button.remove":"","button.search":"","button.merge":"","button.unmerge":"","status.noDrugData":"","status.newMedBoxNoDrug":"","status.drawerNoDrug":"","status.gridDrawNotConfigured":"","status.noDrugInfo":"","status.drugListEmpty":"","status.noContent":"No content available","status.notSet":"","status.notAdded":"","status.searchResults":"","status.selectCellsForDrug":"","status.selectedCellsNoDrug":"","status.loadingMedMapData":"...","status.loadingMedMapHint":"","footer.copyright":"Copyright 2025 ","login.title":"","login.subtitle":"","login.userId":"","login.userIdPlaceholder":"","login.password":"","login.passwordPlaceholder":"","login.loginButton":"","login.loggingIn":"..."},en:{"nav.title":"Drug Map","nav.home":"Back to Home","nav.expandSidebar":"Expand Sidebar","nav.collapseSidebar":"Collapse Sidebar","topbar.medicine":"Medicine","topbar.department":"Department","topbar.language":"English","topbar.logout":"Logout","sidebar.drugMap":"Drug Map","sidebar.closeSidebar":"Close Sidebar","sidebar.departmentCategories":"Department Categories","sidebar.departments":"Departments","canvas.lockCanvas":"Lock Canvas","canvas.unlockCanvas":"Unlock Canvas","type.dispensingStation":"Dispensing Station","type.warehouse":"Warehouse","type.medBoxShelf":"Medicine Box Shelf","type.parentContainer":"Cabinet","type.subContainer":"sub container","type.gridDraw":"Grid Drawer","type.listDraw":"List Drawer","type.medBox":"Medicine Box","type.containers":"Containers","modal.medBoxSettings":"Medicine Box Settings","modal.addMedBox":"Add Medicine Box","modal.listDrawSettings":"Drawer Settings","modal.gridDrawSettings":"Grid Drawer Settings","modal.settings":"Edit Settings","modal.add":"Add Medicine Box","form.medBoxName":"Medicine Box Name","form.medBoxType":"Medicine Box Type","form.widthSelection":"Width Selection","form.ipAddress":"IP Address","form.drugInfo":"Drug Information","form.drawerName":"Drawer Name","form.drugList":"Drug List","form.drugCode":"Drug Code","form.drugName":"Drug Name","form.chineseName":"Chinese Name","form.drugSearch":"Drug Search","placeholder.medBoxName":"Enter medicine box name","placeholder.ipAddress":"Enter IP address","placeholder.drawerName":"Enter drawer name","placeholder.gridDrawName":"Enter grid drawer name","placeholder.drugSearch":"Enter drug code/name/Chinese name","button.cancel":"Cancel","button.save":"Save","button.add":"Add","button.edit":"Edit","button.change":"Change","button.remove":"Remove Drug","button.search":"Search","button.merge":"Merge","button.unmerge":"Unmerge","status.noDrugData":"This medicine box has no drug data configured","status.newMedBoxNoDrug":"New medicine box has no drug data configured","status.drawerNoDrug":"This drawer has no drugs configured","status.gridDrawNotConfigured":"This grid drawer is not configured","status.noDrugInfo":"No drug information","status.drugListEmpty":"Drug list is empty","status.noContent":"No content available","status.notSet":"Not set","status.notAdded":"No drugs added","status.searchResults":"Search results will be displayed here","status.selectCellsForDrug":"Select merged cells to display drug information","status.selectedCellsNoDrug":"Selected cells have no drug data","status.searching":"Searching...","status.noSearchResults":"No search results found","status.loadingMedMapData":"Loading medicine map data...","status.loadingMedMapHint":"Please wait while we process department data","footer.copyright":"Copyright 2025 Hongsen Intelligent Technology","login.title":"Drug Map System","login.subtitle":"Please login to continue","login.userId":"ID","login.userIdPlaceholder":"Enter your user ID","login.password":"Password","login.passwordPlaceholder":"Enter your password","login.loginButton":"Login","login.loggingIn":"Logging in..."}},R1=_.createContext(void 0),ix=({children:t})=>{const[e,r]=_.useState("zh-TW"),n=o=>ax[e][o]||o;return c.jsx(R1.Provider,{value:{language:e,setLanguage:r,t:n},children:t})},nr=()=>{const t=_.useContext(R1);if(t===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),qe=(t,e)=>{const r=_.forwardRef(({color:n="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:s="",children:l,...u},d)=>_.createElement("svg",{ref:d,...sx,width:o,height:o,stroke:n,strokeWidth:i?Number(a)*24/Number(o):a,className:["lucide",`lucide-${lx(t)}`,s].join(" "),...u},[...e.map(([f,h])=>_.createElement(f,h)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=qe("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=qe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=qe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=qe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=qe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=qe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=qe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=qe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=qe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=qe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=qe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=qe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=qe("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=qe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=qe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=qe("ListX",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"m19 10-4 4",key:"1tz659"}],["path",{d:"m15 10 4 4",key:"1n7nei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=qe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=qe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=qe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=qe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=qe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=qe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=qe("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=qe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=qe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=qe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=qe("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=qe("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=qe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=qe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_x=()=>{const{sidebarOpen:t,setSidebarOpen:e}=vt(),{t:r}=nr();return c.jsx("div",{className:"fixed top-4 left-4 z-30",children:c.jsx("nav",{className:"bg-white/95 backdrop-blur-sm border border-gray-200/50 rounded-xl shadow-lg px-2 py-1",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("a",{href:"../frontpage",className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg transition-colors",title:r("nav.home"),children:c.jsx(pu,{className:"w-5 h-5"})}),c.jsx("div",{className:"ml-2 text-lg font-semibold text-gray-900",children:r("nav.title")}),c.jsx("button",{onClick:()=>e(!t),className:"ml-8 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg transition-colors",title:r(t?"nav.collapseSidebar":"nav.expandSidebar"),children:t?c.jsx(ac,{className:"w-6 h-6"}):c.jsx(ac,{className:"w-6 h-6"})})]})})})},Cx=()=>{const{viewMode:t,setViewMode:e,logout:r,currentUser:n,selectedDepartmentType:o,openAddDepartmentModal:a,apiDepartmentData:i,allDepartmentsList:s}=vt(),{language:l,setLanguage:u,t:d}=nr(),[f,h]=Bi.useState(!1),p=()=>{u(l==="zh-TW"?"en":"zh-TW")},v=Bi.useMemo(()=>{if(!o||!s||!i)return!1;const y=i.map(x=>x.name);return s.filter(x=>x["department_type "]===o).filter(x=>!y.includes(x.name)).length>0},[o,s,i]);return c.jsx("div",{className:"fixed top-20 left-4 right-auto sm:top-4 sm:left-auto sm:right-4 z-30",children:c.jsx("div",{className:"bg-white/95 backdrop-blur-sm border border-gray-200/50 rounded-xl shadow-lg px-2 py-1 sm:px-3 sm:py-2",children:c.jsxs("div",{className:"flex items-center gap-2 lg:gap-0 lg:space-x-2 flex-col lg:flex-row relative",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[c.jsxs("button",{onClick:()=>e("medicine"),className:`flex items-center space-x-2 px-3 py-1.5 rounded-md transition-all duration-300 ease-in-out transform ${t==="medicine"?"bg-white text-green-600 shadow-sm scale-105":"text-gray-600 hover:text-gray-900 hover:bg-gray-50 hover:scale-102"}`,children:[c.jsx(mx,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:d("topbar.medicine")})]}),c.jsxs("button",{onClick:()=>e("department"),className:`flex items-center space-x-2 px-3 py-1.5 rounded-md transition-all duration-300 ease-in-out transform ${t==="department"?"bg-white text-blue-600 shadow-sm scale-105":"text-gray-600 hover:text-gray-900 hover:bg-gray-50 hover:scale-102"}`,children:[c.jsx(P1,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:d("topbar.department")})]})]}),c.jsx("button",{onClick:()=>h(!f),className:"lg:hidden flex items-center justify-center p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg transition-colors",children:f?c.jsx(fx,{className:"w-4 h-4"}):c.jsx(j1,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:`
            flex items-center gap-2 lg:gap-0 lg:space-x-2 flex-col lg:flex-row
            lg:flex lg:opacity-100 lg:max-h-none
            transition-all duration-300 ease-in-out overflow-hidden
            ${f?"flex opacity-100 max-h-96":"hidden opacity-0 max-h-0 lg:flex lg:opacity-100 lg:max-h-none"}
          `,children:[c.jsx("div",{className:"mx-1 w-full lg:w-px lg:h-6 h-px bg-gray-300"}),o&&v&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>a(),className:"w-full lg:w-auto flex justify-center items-center space-x-2 px-3 py-1.5 text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors border border-green-700",children:[c.jsx(cr,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:""})]}),c.jsx("div",{className:"w-full lg:w-px lg:h-6 h-px bg-gray-300"})]}),c.jsxs("button",{onClick:p,className:"w-full lg:w-auto flex justify-center items-center space-x-2 px-3 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg transition-colors border",children:[c.jsx(hx,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:d("topbar.language")})]}),c.jsx("div",{className:"w-full lg:w-px lg:h-6 h-px bg-gray-300"}),n&&c.jsx("div",{className:"w-full lg:w-auto flex justify-center items-center space-x-2 px-3 py-1.5 bg-gray-50 border border-gray-200 rounded-lg",children:c.jsx("span",{className:"text-sm font-medium text-gray-700",children:n.Name})}),c.jsxs("button",{onClick:r,className:"w-full lg:w-auto flex items-center space-x-2 px-3 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 hover:text-red-700 border border-red-200 rounded-lg transition-colors justify-center",children:[c.jsx(xx,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:d("topbar.logout")})]})]})]})})})},bx=[{name:"",value:"blue",bgr:"255,0,0",bgColor:"white",textColor:"text-black"},{name:"",value:"green",bgr:"0,255,0",bgColor:"white",textColor:"text-black"},{name:"",value:"red",bgr:"0,0,255",bgColor:"white",textColor:"text-black"},{name:"",value:"yellow",bgr:"0,255,255",bgColor:"white",textColor:"text-black"},{name:"",value:"purple",bgr:"255,0,255",bgColor:"white",textColor:"text-black"},{name:"",value:"cyan",bgr:"255,255,0",bgColor:"white",textColor:"text-black"}],Sx=({isOpen:t,onClose:e})=>{const[r,n]=_.useState("blue"),[o,a]=_.useState(1),[i,s]=_.useState(60),[l,u]=_.useState(""),[d,f]=_.useState(""),[h,p]=_.useState([]),[v,y]=_.useState([]),[w,g]=_.useState([]),[x,m]=_.useState(!1),[C,N]=_.useState(!1),S=_.useRef(null),I=_.useRef(null),R=_.useRef(null),z=_.useRef(null);_.useEffect(()=>{if(t){const T=localStorage.getItem("medMap_setting");if(T)try{const O=JSON.parse(T);n(O.light_color||"blue"),a(O.brightness!==void 0?O.brightness:1),s(O.light_sec!==void 0?O.light_sec:60),u(O.default_person||""),f(O.default_person_id||"")}catch(O){console.error(":",O),n("blue"),a(1),s(60),u(""),f("")}else n("blue"),a(1),s(60),u(""),f("");k()}},[t]),_.useEffect(()=>{const T=O=>{R.current&&!R.current.contains(O.target)&&S.current&&!S.current.contains(O.target)&&m(!1),z.current&&!z.current.contains(O.target)&&I.current&&!I.current.contains(O.target)&&N(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]);const k=async()=>{try{const T=await Me.getAllStaffInfo();T.Code===200&&T.Data&&p(T.Data)}catch(T){console.error(":",T)}},oe=T=>{if(u(T),T.trim()===""){y([]),m(!1);return}const O=h.filter(M=>M.name&&M.name.toLowerCase().includes(T.toLowerCase()));y(O),m(O.length>0)},se=T=>{if(f(T),T.trim()===""){g([]),N(!1);return}const O=h.filter(M=>M.ID&&M.ID.toLowerCase().includes(T.toLowerCase()));g(O),N(O.length>0)},A=T=>{u(T.name),f(T.ID),m(!1)},D=T=>{u(T.name),f(T.ID),N(!1)},F=()=>{const T={light_color:r,brightness:o,light_sec:i,default_person:l,default_person_id:d};localStorage.setItem("medMap_setting",JSON.stringify(T)),console.log(":",T),e()};return t?c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),c.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 sticky top-0 bg-white z-10",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:""}),c.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(ut,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"/"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:""}),c.jsx("input",{ref:S,type:"text",value:l,onChange:T=>oe(T.target.value),onFocus:()=>{l.trim()&&oe(l)},placeholder:"",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"}),x&&c.jsx("div",{ref:R,className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:v.map((T,O)=>c.jsxs("div",{onClick:()=>A(T),className:"px-4 py-2 hover:bg-blue-50 cursor-pointer transition-colors",children:[c.jsx("div",{className:"font-medium text-gray-900",children:T.name}),c.jsx("div",{className:"text-xs text-gray-500",children:T.ID})]},O))})]}),c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:" ID"}),c.jsx("input",{ref:I,type:"text",value:d,onChange:T=>se(T.target.value),onFocus:()=>{d.trim()&&se(d)},placeholder:" ID",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"}),C&&c.jsx("div",{ref:z,className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:w.map((T,O)=>c.jsxs("div",{onClick:()=>D(T),className:"px-4 py-2 hover:bg-blue-50 cursor-pointer transition-colors",children:[c.jsx("div",{className:"font-medium text-gray-900",children:T.ID}),c.jsx("div",{className:"text-xs text-gray-500",children:T.name})]},O))})]})]}),c.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"/"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:" (BGR)"}),c.jsx("div",{className:"grid grid-cols-3 gap-3",children:bx.map(T=>c.jsxs("button",{onClick:()=>n(T.value),className:`
                    relative p-3 rounded-lg border-2 transition-all
                    ${T.bgColor} ${T.textColor}
                    ${r===T.value?"border-gray-900 shadow-lg scale-105":"border-gray-300 hover:border-gray-400 hover:shadow-md"}
                  `,children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"font-semibold text-sm mb-1",children:T.name}),c.jsx("div",{className:"text-xs opacity-90",children:T.bgr})]}),r===T.value&&c.jsx("div",{className:"absolute top-1 right-1 w-3 h-3 bg-white rounded-full border-2 border-gray-900"})]},T.value))})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[": ",o.toFixed(1)]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:o,onChange:T=>a(parseFloat(T.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600",style:{background:`linear-gradient(to right, #3b82f6 0%, #3b82f6 ${o*100}%, #e5e7eb ${o*100}%, #e5e7eb 100%)`}}),c.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[c.jsx("span",{children:"0"}),c.jsx("span",{children:"0.5"}),c.jsx("span",{children:"1"})]})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" (): ",i]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"range",min:"1",max:"120",step:"1",value:i,onChange:T=>s(parseInt(T.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600",style:{background:`linear-gradient(to right, #3b82f6 0%, #3b82f6 ${(i-1)/119*100}%, #e5e7eb ${(i-1)/119*100}%, #e5e7eb 100%)`}}),c.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[c.jsx("span",{children:"5"}),c.jsx("span",{children:"60"}),c.jsx("span",{children:"120"})]})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-gray-200 bg-gray-50 rounded-b-xl sticky bottom-0",children:[c.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:""}),c.jsx("button",{onClick:F,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:""})]})]})]}):null},Nx=({isOpen:t,onClose:e,onConfirm:r})=>{const[n,o]=_.useState(""),[a,i]=_.useState(!1);_.useEffect(()=>{t&&(o(""),i(!1))},[t]);const s=u=>{u.preventDefault(),n.trim()&&r(n)},l=u=>{u.key==="Escape"&&e()};return t?c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),c.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200 w-[400px]",onClick:u=>u.stopPropagation(),onKeyDown:l,children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:c.jsx(gu,{className:"w-5 h-5 text-blue-600"})}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:""})]}),c.jsx("button",{type:"button",onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(ut,{className:"w-6 h-6"})})]}),c.jsx("form",{onSubmit:s,className:"flex-1 px-6 py-6",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-gray-600",children:""}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:n,onChange:u=>o(u.target.value),className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",placeholder:"",autoFocus:!0}),c.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 transition-colors",children:a?c.jsx(k1,{className:"w-5 h-5"}):c.jsx(B1,{className:"w-5 h-5"})})]})]})}),c.jsxs("div",{className:"flex items-center justify-end space-x-3 py-4 px-6 border-t border-gray-200",children:[c.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:""}),c.jsx("button",{type:"button",onClick:s,disabled:!n.trim(),className:"px-6 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:""})]})]})]}):null},Ex=()=>{const{sidebarOpen:t,setSidebarOpen:e,selectedDepartmentType:r,setSelectedDepartmentType:n,setApiDepartmentData:o,isLoadingMedMap:a,setIsLoadingMedMap:i,setAllDepartmentsList:s,isAdminMode:l,setIsAdminMode:u}=vt(),{t:d}=nr(),[f,h]=_.useState(new Set),[p,v]=_.useState([]),[y,w]=_.useState(!0),[g,x]=_.useState([]),[m,C]=_.useState(!1),[N,S]=_.useState(!1),I=()=>{l?u(!1):S(!0)},R=A=>{A==="66437068"?(u(!0),S(!1)):alert("")};_.useEffect(()=>{(async()=>{w(!0);try{const D=await Me.getDepartments();D.Code===200&&D.Data?(console.log(D.Data),v(D.Data),s(D.Data)):(console.error("API returned error:",D),v([]),s([]))}catch(D){console.error("Failed to fetch department data:",D),v([]),s([])}finally{w(!1)}})()},[]);const z=p.reduce((A,D)=>{const F=D["department_type "];return A[F]||(A[F]=[]),A[F].push(D),A},{}),k=A=>{const D=new Set(f);D.has(A)?D.delete(A):D.add(A),h(D)},oe=async A=>{console.log(" :",A),n(A),await se(A),e(!1)},se=async A=>{console.log(" :",A),i(!0);try{const D=await Me.getMedMapByDepartment(A);if(D.Code===200&&D.Data){console.log(" API :",D.Data);const F=Wt.convertMedMapApiToFakeData(D.Data);if(!Wt.validateConvertedData(F)){console.error(" "),x([]);return}const O=Wt.generateConversionReport(D.Data,F);x(F),o(F),console.log(" "),console.log(" :",F),console.log(" :",O)}else console.error(" API :",D),x([]),o(null)}catch(D){console.error(" :",D),x([]),o(null)}finally{i(!1)}};return c.jsxs(c.Fragment,{children:[t&&c.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:()=>e(!1)}),c.jsx("div",{className:`fixed w-80 bg-white/95 backdrop-blur-sm shadow-xl border border-gray-200/50 z-50 transform transition-all duration-300 ease-in-out h-screen h-svh ${t?"translate-x-0 opacity-100":"-translate-x-full opacity-0"}`,children:c.jsxs("div",{className:"flex flex-col h-screen h-svh",children:[c.jsx("div",{className:"flex-shrink-0 px-4 py-2 border-b border-gray-200/50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("a",{href:"../frontpage",className:"text-gray-600 hover:text-gray-900 transition-colors p-2 rounded-lg hover:bg-gray-100/50",title:d("nav.home"),children:c.jsx(pu,{className:"w-5 h-5"})}),c.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:d("sidebar.drugMap")})]}),c.jsx("button",{type:"button",onClick:()=>e(!t),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg transition-colors",title:d("sidebar.closeSidebar"),children:c.jsx(gx,{className:"w-6 h-6"})})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:y?c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsx("div",{className:"text-gray-500",children:"Loading departments..."})}):c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-base font-semibold text-gray-700 mb-4",children:d("sidebar.departmentCategories")}),Object.entries(z).map(([A,D])=>c.jsxs("div",{className:"space-y-1",children:[c.jsxs("button",{type:"button",onClick:()=>oe(A),disabled:a,className:`w-full flex items-center justify-between p-3 rounded-lg transition-all duration-200 border ${r===A?"bg-blue-50 text-blue-700 border-blue-200 shadow-sm":"text-gray-700 hover:bg-gray-50 hover:shadow-sm border-transparent"} ${a?"opacity-50 cursor-not-allowed":""}`,children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[A==="B1F"?c.jsx(P1,{className:"w-4 h-4"}):c.jsx(yx,{className:"w-4 h-4"}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"font-medium",children:A}),c.jsxs("div",{className:"text-xs text-gray-500",children:[D.length," ",d("sidebar.departments")]})]})]}),c.jsx("div",{onClick:F=>{F.stopPropagation(),k(A)},className:"p-1 hover:bg-gray-200/50 rounded transition-colors",children:f.has(A)?c.jsx(j1,{className:"w-4 h-4"}):c.jsx(dx,{className:"w-4 h-4"})})]}),f.has(A)&&c.jsx("div",{className:"ml-6 space-y-2",children:D.map(F=>c.jsx("div",{className:"p-3 text-base text-gray-600 bg-gray-50 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"font-medium text-gray-800",children:F.name}),c.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${F.type===""?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:F.type})]})},F.GUID))})]},A))]})}),c.jsx("div",{className:"flex-shrink-0 px-4 py-3 border-t border-gray-200/50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("label",{htmlFor:"admin-mode-toggle",className:"text-sm font-medium text-gray-700 cursor-pointer select-none",children:""}),c.jsx("button",{type:"button",id:"admin-mode-toggle",role:"switch","aria-checked":l,onClick:I,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${l?"bg-blue-600":"bg-gray-300"}`,children:c.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l?"translate-x-6":"translate-x-1"}`})})]}),c.jsx("button",{type:"button",onClick:()=>C(!0),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg transition-colors",title:"",children:c.jsx(Sn,{className:"w-5 h-5"})})]})})]})}),c.jsx(Sx,{isOpen:m,onClose:()=>C(!1)}),c.jsx(Nx,{isOpen:N,onClose:()=>S(!1),onConfirm:R})]})},Ax=()=>{const{t}=nr();return c.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-30",children:c.jsx("div",{className:"bg-white/95 backdrop-blur-sm border border-gray-200/50 rounded-xl shadow-lg px-4 py-2",children:c.jsx("p",{className:"text-sm text-gray-600 font-medium whitespace-nowrap",children:t("footer.copyright")})})})},Ix=({component:t,scale:e,isLocked:r,isHighlighted:n=!1,onContainerClick:o})=>{const a=_.useRef(null),{t:i}=nr(),{apiDepartmentData:s,setApiDepartmentData:l,showNotification:u}=vt(),[d,f]=_.useState(!1),[h,p]=_.useState({x:0,y:0}),[v,y]=_.useState(t.position),[w,g]=_.useState(!1),[x,m]=_.useState(null),[C,N]=_.useState({x:0,y:0}),[S,I]=_.useState({x:0,y:0});_.useEffect(()=>{console.log(" CanvasComponent: position prop changed",{GUID:t.GUID,newPosition:t.position,currentPosition:v}),y(t.position)},[t.position]);const R=()=>{try{const Y=localStorage.getItem("medMap_setting");if(Y)return JSON.parse(Y).light_color||"red"}catch(Y){console.error(":",Y)}return"red"},z=_.useCallback(async(Y,be)=>{if(!s)return;console.log(" :",Y,be);const ye=JSON.parse(JSON.stringify(s)),B=W=>{for(const j of W){if(j.GUID===Y)return j.position={x:be.x.toFixed(3),y:be.y.toFixed(3)},console.log(" :",j.name,be.x.toFixed(3),be.y.toFixed(3)),!0;if(j.components&&Array.isArray(j.components)&&B(j.components)||j.contents&&Array.isArray(j.contents)&&B(j.contents))return!0}return!1};if(B(ye)){l(ye),console.log(" ");try{console.log(" ...");const W=await Me.updateContainerPosition({GUID:Y,absolute_position:`${be.x.toFixed(3)},${be.y.toFixed(3)}`});W.Code===200?(console.log(" ",W),u("","success")):(console.error(" :",W),u(`: ${W.Result||""}`,"error"))}catch(W){console.error(" :",W),u(": ","error")}}else console.warn(" :",Y)},[s,l,u]),{position:k,dimensions:oe,name:se,type:A}=t,D=_.useCallback(Y=>{const be=a.current;if(be)if(I({x:Y.clientX,y:Y.clientY}),r){Y.preventDefault(),Y.stopPropagation(),be.setPointerCapture(Y.pointerId);const ye=be.getBoundingClientRect(),B=Y.clientX-ye.left,xe=Y.clientY-ye.top;p({x:B,y:xe}),f(!0),g(!1)}else g(!1)},[r]),F=_.useCallback(()=>{if(!s)return[];const Y=[],be=ye=>{for(const B of ye)B.GUID!==t.GUID&&B.position&&Y.push({GUID:B.GUID,position:B.position,dimensions:B.dimensions}),B.components&&Array.isArray(B.components)&&be(B.components),B.contents&&Array.isArray(B.contents)&&be(B.contents)};return be(s),Y},[s,t.GUID]),T=_.useCallback((Y,be)=>{const B=F();let xe=Y,W=be;for(const j of B){const ce=parseFloat(j.position.x),de=parseFloat(j.position.y);if(Math.abs(Y-ce)<20&&(xe=ce),Math.abs(be-de)<20&&(W=de),j.dimensions&&t.dimensions){const V=ce+parseFloat(j.dimensions.width),re=Y+parseFloat(t.dimensions.width);Math.abs(re-V)<20&&(xe=V-parseFloat(t.dimensions.width));const he=de+parseFloat(j.dimensions.depth),U=be+parseFloat(t.dimensions.depth);Math.abs(U-he)<20&&(W=he-parseFloat(t.dimensions.depth))}}return{x:xe,y:W}},[F,t.dimensions]),O=_.useCallback(Y=>{const be=Math.abs(Y.clientX-S.x),ye=Math.abs(Y.clientY-S.y);if((be>5||ye>5)&&g(!0),!d||!r)return;Y.preventDefault(),Y.stopPropagation();const B=a.current;if(!B)return;const xe=B.closest("[data-canvas-content]");if(!xe)return;const W=xe.getBoundingClientRect(),j=(Y.clientX-W.left-h.x)/e,ce=(Y.clientY-W.top-h.y)/e,de=T(j,ce);y(de)},[d,h,e,r,T,S]),M=_.useCallback(Y=>{const be=Math.abs(Y.clientX-S.x),ye=Math.abs(Y.clientY-S.y),B=be>5||ye>5;if(r){if(!d)return;Y.preventDefault(),Y.stopPropagation();const xe=a.current;xe&&xe.releasePointerCapture(Y.pointerId),f(!1),B?z(t.GUID,v):o&&o(t),g(!1)}else!B&&o&&(Y.preventDefault(),Y.stopPropagation(),o(t)),g(!1)},[d,r,o,t,z,v,S]),P=_.useCallback(Y=>{const be=a.current;if(!be)return;const ye=Y.touches[0];if(ye&&(N({x:ye.clientX,y:ye.clientY}),r)){Y.preventDefault(),Y.stopPropagation(),m(ye.identifier);const B=be.getBoundingClientRect(),xe=ye.clientX-B.left,W=ye.clientY-B.top;p({x:xe,y:W}),f(!0)}},[r]),te=_.useCallback(Y=>{if(!d||!r||x===null)return;Y.preventDefault(),Y.stopPropagation();const be=a.current;if(!be)return;const ye=Array.from(Y.touches).find(de=>de.identifier===x);if(!ye)return;const B=be.closest("[data-canvas-content]");if(!B)return;const xe=B.getBoundingClientRect(),W=(ye.clientX-xe.left-h.x)/e,j=(ye.clientY-xe.top-h.y)/e,ce=T(W,j);y(ce)},[d,h,e,r,x,T]),X=_.useCallback(Y=>{const be=Array.from(Y.changedTouches)[0];if(!be)return;const ye=Math.abs(be.clientX-C.x),B=Math.abs(be.clientY-C.y),xe=ye>10||B>10;if(r){if(!d||x===null||!Array.from(Y.changedTouches).some(j=>j.identifier===x))return;Y.preventDefault(),Y.stopPropagation(),f(!1),m(null),N({x:0,y:0}),xe?z(t.GUID,v):o&&o(t)}else!xe&&o&&(Y.preventDefault(),Y.stopPropagation(),o(t)),N({x:0,y:0})},[d,r,x,z,t,v,C,o]),ee=_.useCallback(Y=>{!d||!r||x===null||!Array.from(Y.changedTouches).some(ye=>ye.identifier===x)||(Y.preventDefault(),Y.stopPropagation(),y(t.position),f(!1),m(null),N({x:0,y:0}))},[d,r,x,t.position]),Ne=Y=>{if(n)return`highlight-breathe-${R()}`;switch(Y){case"":return"bg-gray-100 border-gray-400";case"":return"bg-gray-100 border-gray-400";case"parent_container":return"bg-gray-100 border-gray-400";default:return"bg-gray-50 border-gray-400"}},me=Y=>{if(n)return`highlight-breathe-${R()}`;switch(Y){case"":return"bg-gray-200 text-gray-900";case"":return"bg-gray-200 text-gray-900";case"parent_container":return"bg-gray-200 text-gray-900";default:return"bg-gray-200 text-gray-800"}},H=Y=>{if(n)return`highlight-tag-${R()}`;switch(Y){case"":return"bg-gray-700 text-gray-900";case"":return"bg-gray-700 text-gray-900";case"parent_container":return"bg-gray-700 text-gray-900";default:return"bg-gray-700 text-gray-900"}},Ce=Y=>{const be=Y===""?"type.dispensingStation":Y===""?"type.warehouse":Y==="parent_container"?"":"type."+Y;return i(be)||Y};return c.jsx("div",{ref:a,className:`flex flex-col absolute border-2 rounded-lg shadow-lg hover:shadow-xl ${Ne(A)} overflow-hidden ${r?"cursor-move":"cursor-default"} ${d?"shadow-2xl z-50":""}`,style:{left:`${v.x}px`,top:`${v.y}px`,minWidth:A===""||A===""?"120px":"180px",minHeight:A===""||A===""?"60px":"120px",userSelect:"none",touchAction:"none",transition:d?"none":"transform 0.2s ease-out, box-shadow 0.2s ease-out"},onPointerDown:D,onPointerMove:O,onPointerUp:M,onTouchStart:P,onTouchMove:te,onTouchEnd:X,onTouchCancel:ee,children:c.jsx("div",{className:`w-full min-w-[400px] h-auto flex items-start flex-1 justify-between p-2 border-gray-600 ${me(A)}`,children:c.jsx("div",{className:"flex space-x-2 flex-1 min-w-0",children:c.jsxs("div",{className:"min-w-0 flex gap-4",children:[c.jsx("div",{className:"font-semibold text-lg truncate",children:se}),c.jsx("div",{className:`text-sm truncate py-1 px-3 text-white rounded-2xl ${H(A)}`,children:Ce(A)})]})})})})};function Dx(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function Tx(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var Ox=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(o[i]=a[i])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mx=function(t){Ox(e,t);function e(r,n){var o=this.constructor,a=t.call(this,r,n)||this;return Object.defineProperty(a,"name",{value:o.name,enumerable:!1,configurable:!0}),Dx(a,o.prototype),Tx(a),a}return e}(Error),Rx=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pr=function(t){Rx(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(Mx),Px=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lr=function(t){Px(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(pr),jx=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Be=function(t){jx(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(pr),kx=function(){function t(e){if(this.binarizer=e,e===null)throw new Be("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,o){var a=this.binarizer.getLuminanceSource().crop(e,r,n,o);return new t(this.binarizer.createBinarizer(a))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),Bx=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pt=function(t){Bx(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(pr),Lx=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),ot=function(){function t(){}return t.arraycopy=function(e,r,n,o,a){for(;a--;)n[o++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),Fx=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xu=function(t){Fx(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(pr),Ux=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jd=function(t){Ux(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var o=t.call(this,n)||this;return o.index=r,o.message=n,o}return e.kind="ArrayIndexOutOfBoundsException",e}(xu),Gx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},At=function(){function t(){}return t.fill=function(e,r){for(var n=0,o=e.length;n<o;n++)e[n]=r},t.fillWithin=function(e,r,n,o){t.rangeCheck(e.length,r,n);for(var a=r;a<n;a++)e[a]=o},t.rangeCheck=function(e,r,n){if(r>n)throw new Be("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new jd(r);if(n>e)throw new jd(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var o=Array.from({length:e});return o.map(function(a){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var o=Array.from({length:e});return o.map(function(a){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,o=e.length;n<o;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var o=1;try{for(var a=Gx(e),i=a.next();!i.done;i=a.next()){var s=i.value;o=31*o+s}}catch(l){r={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var o=n-r,a=new Int32Array(o);return ot.arraycopy(e,r,a,0,o),a},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var o=0,a=e.length-1;o<=a;){var i=a+o>>1,s=n(r,e[i]);if(s>0)o=i+1;else if(s<0)a=i-1;else return i}return-o-1},t.numberComparator=function(e,r){return e-r},t}(),$e=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),jt=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);ot.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,o=Math.floor(e/32),a=n[o];a&=~((1<<(e&31))-1);for(var i=n.length;a===0;){if(++o===i)return r;a=n[o]}var s=o*32+$e.numberOfTrailingZeros(a);return s>r?r:s},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,o=Math.floor(e/32),a=~n[o];a&=~((1<<(e&31))-1);for(var i=n.length;a===0;){if(++o===i)return r;a=~n[o]}var s=o*32+$e.numberOfTrailingZeros(a);return s>r?r:s},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new Be;if(r!==e){r--;for(var n=Math.floor(e/32),o=Math.floor(r/32),a=this.bits,i=n;i<=o;i++){var s=i>n?0:e&31,l=i<o?31:r&31,u=(2<<l)-(1<<s);a[i]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new Be;if(r===e)return!0;r--;for(var o=Math.floor(e/32),a=Math.floor(r/32),i=this.bits,s=o;s<=a;s++){var l=s>o?0:e&31,u=s<a?31:r&31,d=(2<<u)-(1<<l)&4294967295;if((i[s]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new Be("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new Be("Sizes don't match");for(var r=this.bits,n=0,o=r.length;n<o;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,o){for(var a=0;a<o;a++){for(var i=0,s=0;s<8;s++)this.get(e)&&(i|=1<<7-s),e++;r[n+a]=i}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,o=this.bits,a=0;a<n;a++){var i=o[a];i=i>>1&1431655765|(i&1431655765)<<1,i=i>>2&858993459|(i&858993459)<<2,i=i>>4&252645135|(i&252645135)<<4,i=i>>8&16711935|(i&16711935)<<8,i=i>>16&65535|(i&65535)<<16,e[r-a]=i}if(this.size!==n*32){for(var s=n*32-this.size,l=e[0]>>>s,a=1;a<n;a++){var u=e[a];l|=u<<32-s,e[a-1]=l,l=u>>>s}e[n-1]=l}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&At.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+At.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),ic;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(ic||(ic={}));const dt=ic;var $x=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ve=function(t){$x(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(pr),zx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qe;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(Qe||(Qe={}));var Et=function(){function t(e,r,n){for(var o,a,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=i,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var l=this.values,u=0,d=l.length;u!==d;u++){var f=l[u];t.VALUES_TO_ECI.set(f,this)}try{for(var h=zx(i),p=h.next();!p.done;p=h.next()){var v=p.value;t.NAME_TO_ECI.set(v,this)}}catch(y){o={error:y}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new ve("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new ve("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new ve("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(Qe.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(Qe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(Qe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(Qe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(Qe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(Qe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(Qe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(Qe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(Qe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(Qe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(Qe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(Qe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(Qe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(Qe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(Qe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(Qe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(Qe.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(Qe.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(Qe.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(Qe.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(Qe.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(Qe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(Qe.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(Qe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(Qe.Big5,28,"Big5"),t.GB18030=new t(Qe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(Qe.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),Hx=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pi=function(t){Hx(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(pr),Or=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Et?e:Et.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var o="",a=0,i=e.length;a<i;a++){var s=e[a].toString(16);s.length<2&&(s="0"+s),o+="%"+s}return decodeURIComponent(o)}if(n.equals(Et.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Pi("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Et.UTF8)||e.equals(Et.ISO8859_1)||e.equals(Et.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),o=[],a=0;a<n.length;a++)o.push(n[a].charCodeAt(0));return new Uint8Array(o)},t}(),He=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return Or.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(dt.CHARACTER_SET)!==void 0)return r.get(dt.CHARACTER_SET).toString();for(var n=e.length,o=!0,a=!0,i=!0,s=0,l=0,u=0,d=0,f=0,h=0,p=0,v=0,y=0,w=0,g=0,x=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,m=0;m<n&&(o||a||i);m++){var C=e[m]&255;i&&(s>0?C&128?s--:i=!1:C&128&&(C&64?(s++,C&32?(s++,C&16?(s++,C&8?i=!1:d++):u++):l++):i=!1)),o&&(C>127&&C<160?o=!1:C>159&&(C<192||C===215||C===247)&&g++),a&&(f>0?C<64||C===127||C>252?a=!1:f--:C===128||C===160||C>239?a=!1:C>160&&C<224?(h++,v=0,p++,p>y&&(y=p)):C>127?(f++,p=0,v++,v>w&&(w=v)):(p=0,v=0))}return i&&s>0&&(i=!1),a&&f>0&&(a=!1),i&&(x||l+u+d>0)?t.UTF8:a&&(t.ASSUME_SHIFT_JIS||y>=3||w>=3)?t.SHIFT_JIS:o&&a?y===2&&h===2||g*10>=n?t.SHIFT_JIS:t.ISO88591:o?t.ISO88591:a?t.SHIFT_JIS:i?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=-1;function a(s,l,u,d,f,h){if(s==="%%")return"%";if(r[++o]!==void 0){s=d?parseInt(d.substr(1)):void 0;var p=f?parseInt(f.substr(1)):void 0,v;switch(h){case"s":v=r[o];break;case"c":v=r[o][0];break;case"f":v=parseFloat(r[o]).toFixed(s);break;case"p":v=parseFloat(r[o]).toPrecision(s);break;case"e":v=parseFloat(r[o]).toExponential(s);break;case"x":v=parseInt(r[o]).toString(p||16);break;case"d":v=parseFloat(parseInt(r[o],p||10).toPrecision(s)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(p);for(var y=parseInt(u),w=u&&u[0]+""=="0"?"0":" ";v.length<y;)v=l!==void 0?v+w:w+v;return v}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,a)},t.getBytes=function(e,r){return Or.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Et.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Et.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Et.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),Ge=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=He.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var o=r;r<r+n;o++)this.append(e[o]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),en=function(){function t(e,r,n,o){if(this.width=e,this.height=r,this.rowSize=n,this.bits=o,r==null&&(r=e),this.height=r,e<1||r<1)throw new Be("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,o==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,o=new t(n,r),a=0;a<r;a++)for(var i=e[a],s=0;s<n;s++)i[s]&&o.set(s,a);return o},t.parseFromString=function(e,r,n){if(e===null)throw new Be("stringRepresentation cannot be null");for(var o=new Array(e.length),a=0,i=0,s=-1,l=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(a>i){if(s===-1)s=a-i;else if(a-i!==s)throw new Be("row lengths do not match");i=a,l++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,o[a]=!0,a++;else if(e.substring(u,u+n.length)===n)u+=n.length,o[a]=!1,a++;else throw new Be("illegal character encountered: "+e.substring(u));if(a>i){if(s===-1)s=a-i;else if(a-i!==s)throw new Be("row lengths do not match");l++}for(var d=new t(s,l),f=0;f<a;f++)o[f]&&d.set(Math.floor(f%s),Math.floor(f/s));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Be("input matrix dimensions do not match");for(var r=new jt(Math.floor(this.width/32)+1),n=this.rowSize,o=this.bits,a=0,i=this.height;a<i;a++)for(var s=a*n,l=e.getRow(a,r).getBitArray(),u=0;u<n;u++)o[s+u]^=l[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,o){if(r<0||e<0)throw new Be("Left and top must be nonnegative");if(o<1||n<1)throw new Be("Height and width must be at least 1");var a=e+n,i=r+o;if(i>this.height||a>this.width)throw new Be("The region must fit inside the matrix");for(var s=this.rowSize,l=this.bits,u=r;u<i;u++)for(var d=u*s,f=e;f<a;f++)l[d+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new jt(this.width):r.clear();for(var n=this.rowSize,o=this.bits,a=e*n,i=0;i<n;i++)r.setBulk(i*32,o[a+i]);return r},t.prototype.setRow=function(e,r){ot.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new jt(e),o=new jt(e),a=0,i=Math.floor((r+1)/2);a<i;a++)n=this.getRow(a,n),o=this.getRow(r-1-a,o),n.reverse(),o.reverse(),this.setRow(a,o),this.setRow(r-1-a,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,o=this.bits,a=e,i=r,s=-1,l=-1,u=0;u<r;u++)for(var d=0;d<n;d++){var f=o[u*n+d];if(f!==0){if(u<i&&(i=u),u>l&&(l=u),d*32<a){for(var h=0;!(f<<31-h&4294967295);)h++;d*32+h<a&&(a=d*32+h)}if(d*32+31>s){for(var h=31;!(f>>>h);)h--;d*32+h>s&&(s=d*32+h)}}}return s<a||l<i?null:Int32Array.from([a,i,s-a+1,l-i+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var o=n/e,a=n%e*32,i=r[n],s=0;!(i<<31-s&4294967295);)s++;return a+=s,Int32Array.from([a,o])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var o=Math.floor(n/e),a=Math.floor(n%e)*32,i=r[n],s=31;!(i>>>s);)s--;return a+=s,Int32Array.from([a,o])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&At.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+At.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var o=new Ge,a=0,i=this.height;a<i;a++){for(var s=0,l=this.width;s<l;s++)o.append(this.get(s,a)?e:r);o.append(n)}return o.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),Vx=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K=function(t){Vx(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(pr),Xx=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wx=function(t){Xx(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var o=this.getLuminanceSource(),a=o.getWidth();n==null||n.getSize()<a?n=new jt(a):n.clear(),this.initArrays(a);for(var i=o.getRow(r,this.luminances),s=this.buckets,l=0;l<a;l++)s[(i[l]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(s);if(a<3)for(var l=0;l<a;l++)(i[l]&255)<u&&n.set(l);else for(var d=i[0]&255,f=i[1]&255,l=1;l<a-1;l++){var h=i[l+1]&255;(f*4-d-h)/2<u&&n.set(l),d=f,f=h}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),o=r.getHeight(),a=new en(n,o);this.initArrays(n);for(var i=this.buckets,s=1;s<5;s++)for(var l=Math.floor(o*s/5),u=r.getRow(l,this.luminances),d=Math.floor(n*4/5),f=Math.floor(n/5);f<d;f++){var h=u[f]&255;i[h>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(i),v=r.getMatrix(),s=0;s<o;s++)for(var y=s*n,f=0;f<n;f++){var h=v[y+f]&255;h<p&&a.set(f,s)}return a},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,o=0;o<e.LUMINANCE_BUCKETS;o++)n[o]=0},e.estimateBlackPoint=function(r){for(var n=r.length,o=0,a=0,i=0,s=0;s<n;s++)r[s]>i&&(a=s,i=r[s]),r[s]>o&&(o=r[s]);for(var l=0,u=0,s=0;s<n;s++){var d=s-a,f=r[s]*d*d;f>u&&(l=s,u=f)}if(a>l){var h=a;a=l,l=h}if(l-a<=n/16)throw new K;for(var p=l-1,v=-1,s=l-1;s>a;s--){var y=s-a,f=y*y*(l-s)*(o-r[s]);f>v&&(p=s,v=f)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(Lx),Yx=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kx=function(t){Yx(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),o=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&o>=e.MINIMUM_DIMENSION){var a=r.getMatrix(),i=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&i++;var s=o>>e.BLOCK_SIZE_POWER;o&e.BLOCK_SIZE_MASK&&s++;var l=e.calculateBlackPoints(a,i,s,n,o),u=new en(n,o);e.calculateThresholdForBlock(a,i,s,n,o,l,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,o,a,i,s,l){for(var u=i-e.BLOCK_SIZE,d=a-e.BLOCK_SIZE,f=0;f<o;f++){var h=f<<e.BLOCK_SIZE_POWER;h>u&&(h=u);for(var p=e.cap(f,2,o-3),v=0;v<n;v++){var y=v<<e.BLOCK_SIZE_POWER;y>d&&(y=d);for(var w=e.cap(v,2,n-3),g=0,x=-2;x<=2;x++){var m=s[p+x];g+=m[w-2]+m[w-1]+m[w]+m[w+1]+m[w+2]}var C=g/25;e.thresholdBlock(r,y,h,C,a,l)}}},e.cap=function(r,n,o){return r<n?n:r>o?o:r},e.thresholdBlock=function(r,n,o,a,i,s){for(var l=0,u=o*i+n;l<e.BLOCK_SIZE;l++,u+=i)for(var d=0;d<e.BLOCK_SIZE;d++)(r[u+d]&255)<=a&&s.set(n+d,o+l)},e.calculateBlackPoints=function(r,n,o,a,i){for(var s=i-e.BLOCK_SIZE,l=a-e.BLOCK_SIZE,u=new Array(o),d=0;d<o;d++){u[d]=new Int32Array(n);var f=d<<e.BLOCK_SIZE_POWER;f>s&&(f=s);for(var h=0;h<n;h++){var p=h<<e.BLOCK_SIZE_POWER;p>l&&(p=l);for(var v=0,y=255,w=0,g=0,x=f*a+p;g<e.BLOCK_SIZE;g++,x+=a){for(var m=0;m<e.BLOCK_SIZE;m++){var C=r[x+m]&255;v+=C,C<y&&(y=C),C>w&&(w=C)}if(w-y>e.MIN_DYNAMIC_RANGE)for(g++,x+=a;g<e.BLOCK_SIZE;g++,x+=a)for(var m=0;m<e.BLOCK_SIZE;m++)v+=r[x+m]&255}var N=v>>e.BLOCK_SIZE_POWER*2;if(w-y<=e.MIN_DYNAMIC_RANGE&&(N=y/2,d>0&&h>0)){var S=(u[d-1][h]+2*u[d][h-1]+u[d-1][h-1])/4;y<S&&(N=S)}u[d][h]=N}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(Wx),Es=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,o){throw new Pi("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new Pi("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new Pi("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new Ge,n=0;n<this.height;n++){for(var o=this.getRow(n,e),a=0;a<this.width;a++){var i=o[a]&255,s=void 0;i<64?s="#":i<128?s="+":i<192?s=".":s=" ",r.append(s)}r.append(`
`)}return r.toString()},t}(),Zx=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vu=function(t){Zx(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var o=this.delegate.getRow(r,n),a=this.getWidth(),i=0;i<a;i++)o[i]=255-(o[i]&255);return o},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(n),a=0;a<n;a++)o[a]=255-(r[a]&255);return o},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,o,a){return new e(this.delegate.crop(r,n,o,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Es),qx=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qx=function(t){qx(e,t);function e(r,n){n===void 0&&(n=!1);var o=t.call(this,r.width,r.height)||this;return o.canvas=r,o.tempCanvasElement=null,o.buffer=e.makeBufferFromCanvasImageData(r,n),o}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var o=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(o.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,o,a){a===void 0&&(a=!1);var i=new Uint8ClampedArray(n*o);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var s=0,l=0,u=r.length;s<u;s+=4,l++){var d=void 0,f=r[s+3];if(f===0)d=255;else{var h=r[s],p=r[s+1],v=r[s+2];d=306*h+601*p+117*v+512>>10}i[l]=d}else for(var s=0,l=0,y=r.length;s<y;s+=4,l++){var d=void 0,f=r[s+3];if(f===0)d=255;else{var h=r[s],p=r[s+1],v=r[s+2];d=306*h+601*p+117*v+512>>10}i[l]=255-d}return i},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Be("Requested row is outside the image: "+r);var o=this.getWidth(),a=r*o;return n===null?n=this.buffer.slice(a,a+o):(n.length<o&&(n=new Uint8ClampedArray(o)),n.set(this.buffer.slice(a,a+o))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,o,a){return t.prototype.crop.call(this,r,n,o,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),o=n.getContext("2d"),a=r*e.DEGREE_TO_RADIANS,i=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*i+Math.abs(Math.sin(a))*s),u=Math.ceil(Math.abs(Math.sin(a))*i+Math.abs(Math.cos(a))*s);return n.width=l,n.height=u,o.translate(l/2,u/2),o.rotate(a),o.drawImage(this.canvas,i/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new vu(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Es),Jx=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Zt=function(t,e,r,n){function o(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function s(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?a(d.value):o(d.value).then(s,l)}u((n=n.apply(t,e||[])).next())})},qt=function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=u[0]&2?o.return:u[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,u[1])).done)return a;switch(o=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],o=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ev=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zo=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Zt(this,void 0,void 0,function(){var e,r,n,o,a,i,s,l,u,d,f,h;return qt(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),r=[];try{for(n=ev(e),o=n.next();!o.done;o=n.next())a=o.value,i=a.kind==="video"?"videoinput":a.kind,i==="videoinput"&&(s=a.deviceId||a.id,l=a.label||"Video device "+(r.length+1),u=a.groupId,d={deviceId:s,label:l,kind:i,groupId:u},r.push(d))}catch(v){f={error:v}}finally{try{o&&!o.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Zt(this,void 0,void 0,function(){var e;return qt(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new Jx(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Zt(this,void 0,void 0,function(){var r;return qt(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(o){return o.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Zt(this,void 0,void 0,function(){return qt(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Zt(this,void 0,void 0,function(){var n,o;return qt(this,function(a){switch(a.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},o={video:n},[4,this.decodeOnceFromConstraints(o,r)];case 1:return[2,a.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Zt(this,void 0,void 0,function(){var n;return qt(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=o.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,o.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Zt(this,void 0,void 0,function(){var n,o;return qt(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=a.sent(),[4,this.decodeOnce(n)];case 2:return o=a.sent(),[2,o]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Zt(this,void 0,void 0,function(){return qt(this,function(o){switch(o.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Zt(this,void 0,void 0,function(){var o,a;return qt(this,function(i){switch(i.label){case 0:return e?o={deviceId:{exact:e}}:o={facingMode:"environment"},a={video:o},[4,this.decodeFromConstraints(a,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Zt(this,void 0,void 0,function(){var o;return qt(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return o=a.sent(),[4,this.decodeFromStream(o,r,n)];case 2:return[2,a.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Zt(this,void 0,void 0,function(){var o;return qt(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return o=a.sent(),[4,this.decodeContinuously(o,n)];case 2:return[2,a.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Zt(this,void 0,void 0,function(){var n;return qt(this,function(o){switch(o.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return o.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,o){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Zt(this,void 0,void 0,function(){return qt(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Lr("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Lr("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new Lr("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new Lr("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new Lr("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Lr("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Lr("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Lr("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Lr("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new Lr("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),o=this.decodeFromVideoElementContinuously(n,r);return n.src=e,o},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,o){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,o)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Zt(this,void 0,void 0,function(){return qt(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Zt(this,void 0,void 0,function(){return qt(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var o=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var a=function(i,s){if(o._stopAsyncDecode){s(new K("Video stream has ended before any code could be detected.")),o._stopAsyncDecode=void 0;return}try{var l=o.decode(e);i(l)}catch(h){var u=r&&h instanceof K,d=h instanceof Pt||h instanceof ve,f=d&&n;if(u||f)return setTimeout(a,o._timeBetweenDecodingAttempts,i,s);s(h)}};return new Promise(function(i,s){return a(i,s)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var o=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var a=n.decode(e);r(a,null),setTimeout(o,n.timeBetweenScansMillis)}catch(l){r(null,l);var i=l instanceof Pt||l instanceof ve,s=l instanceof K;(i||s)&&setTimeout(o,n._timeBetweenDecodingAttempts)}};o()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),o=new Qx(n,r),a=new Kx(o);return new kx(a)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,o;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,o=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,o=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=o+"px",r.width=n,r.height=o,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),Kt=function(){function t(e,r,n,o,a,i){n===void 0&&(n=r==null?0:8*r.length),i===void 0&&(i=ot.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=o,this.format=a,this.timestamp=i,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=o,this.format=a,this.resultMetadata=null,i==null?this.timestamp=ot.currentTimeMillis():this.timestamp=i}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);ot.arraycopy(r,0,n,0,r.length),ot.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),sc;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(sc||(sc={}));const ke=sc;var lc;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(lc||(lc={}));const Ut=lc;var As=function(){function t(e,r,n,o,a,i){a===void 0&&(a=-1),i===void 0&&(i=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=o,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=i,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),pa=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Be;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),Rn=function(){function t(e,r){if(r.length===0)throw new Be;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var o=1;o<n&&r[o]===0;)o++;o===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-o),ot.arraycopy(r,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var o=0,a=r.length;o!==a;o++){var i=r[o];n=pa.addOrSubtract(n,i)}return n}n=r[0];for(var s=r.length,l=this.field,o=1;o<s;o++)n=pa.addOrSubtract(l.multiply(e,n),r[o]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Be("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var o=r;r=n,n=o}var a=new Int32Array(n.length),i=n.length-r.length;ot.arraycopy(n,0,a,0,i);for(var s=i;s<n.length;s++)a[s]=pa.addOrSubtract(r[s-i],n[s]);return new t(this.field,a)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Be("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,o=e.coefficients,a=o.length,i=new Int32Array(n+a-1),s=this.field,l=0;l<n;l++)for(var u=r[l],d=0;d<a;d++)i[l+d]=pa.addOrSubtract(i[l+d],s.multiply(u,o[d]));return new t(s,i)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,o=new Int32Array(r),a=this.coefficients,i=0;i<r;i++)o[i]=n.multiply(a[i],e);return new t(n,o)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Be;if(r===0)return this.field.getZero();for(var n=this.coefficients,o=n.length,a=new Int32Array(o+e),i=this.field,s=0;s<o;s++)a[s]=i.multiply(n[s],r);return new t(i,a)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Be("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Be("Divide by 0");for(var r=this.field,n=r.getZero(),o=this,a=e.getCoefficient(e.getDegree()),i=r.inverse(a);o.getDegree()>=e.getDegree()&&!o.isZero();){var s=o.getDegree()-e.getDegree(),l=r.multiply(o.getCoefficient(o.getDegree()),i),u=e.multiplyByMonomial(s,l),d=r.buildMonomial(s,l);n=n.addOrSubtract(d),o=o.addOrSubtract(u)}return[n,o]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var o=this.field.log(n);o===0?e+="1":o===1?e+="a":(e+="a^",e+=o)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),tv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U1=function(t){tv(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(pr),rv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sr=function(t){rv(e,t);function e(r,n,o){var a=t.call(this)||this;a.primitive=r,a.size=n,a.generatorBase=o;for(var i=new Int32Array(n),s=1,l=0;l<n;l++)i[l]=s,s*=2,s>=n&&(s^=r,s&=n-1);a.expTable=i;for(var u=new Int32Array(n),l=0;l<n-1;l++)u[i[l]]=l;return a.logTable=u,a.zero=new Rn(a,Int32Array.from([0])),a.one=new Rn(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Be;if(n===0)return this.zero;var o=new Int32Array(r+1);return o[0]=n,new Rn(this,o)},e.prototype.inverse=function(r){if(r===0)throw new U1;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+$e.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(pa),nv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xi=function(t){nv(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(pr),ov=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Za=function(t){ov(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(pr),Is=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,o=new Rn(n,e),a=new Int32Array(r),i=!0,s=0;s<r;s++){var l=o.evaluateAt(n.exp(s+n.getGeneratorBase()));a[a.length-1-s]=l,l!==0&&(i=!1)}if(!i)for(var u=new Rn(n,a),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),f=d[0],h=d[1],p=this.findErrorLocations(f),v=this.findErrorMagnitudes(h,p),s=0;s<p.length;s++){var y=e.length-1-n.log(p[s]);if(y<0)throw new xi("Bad error location");e[y]=sr.addOrSubtract(e[y],v[s])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var o=e;e=r,r=o}for(var a=this.field,i=e,s=r,l=a.getZero(),u=a.getOne();s.getDegree()>=(n/2|0);){var d=i,f=l;if(i=s,l=u,i.isZero())throw new xi("r_{i-1} was zero");s=d;for(var h=a.getZero(),p=i.getCoefficient(i.getDegree()),v=a.inverse(p);s.getDegree()>=i.getDegree()&&!s.isZero();){var y=s.getDegree()-i.getDegree(),w=a.multiply(s.getCoefficient(s.getDegree()),v);h=h.addOrSubtract(a.buildMonomial(y,w)),s=s.addOrSubtract(i.multiplyByMonomial(y,w))}if(u=h.multiply(l).addOrSubtract(f),s.getDegree()>=i.getDegree())throw new Za("Division algorithm failed to reduce polynomial?")}var g=u.getCoefficient(0);if(g===0)throw new xi("sigmaTilde(0) was zero");var x=a.inverse(g),m=u.multiplyScalar(x),C=s.multiplyScalar(x);return[m,C]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),o=0,a=this.field,i=1;i<a.getSize()&&o<r;i++)e.evaluateAt(i)===0&&(n[o]=a.inverse(i),o++);if(o!==r)throw new xi("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,o=new Int32Array(n),a=this.field,i=0;i<n;i++){for(var s=a.inverse(r[i]),l=1,u=0;u<n;u++)if(i!==u){var d=a.multiply(r[u],s),f=d&1?d&-2:d|1;l=a.multiply(l,f)}o[i]=a.multiply(e.evaluateAt(s),a.inverse(l)),a.getGeneratorBase()!==0&&(o[i]=a.multiply(o[i],s))}return o},t}(),Bt;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(Bt||(Bt={}));var kd=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),o=this.correctBits(n),a=t.convertBoolArrayToByteArray(o),i=t.getEncodedData(o),s=new As(a,i,null,null);return s.setNumBits(o.length),s},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=Bt.UPPER,o=Bt.UPPER,a="",i=0;i<r;)if(o===Bt.BINARY){if(r-i<5)break;var s=t.readCode(e,i,5);if(i+=5,s===0){if(r-i<11)break;s=t.readCode(e,i,11)+31,i+=11}for(var l=0;l<s;l++){if(r-i<8){i=r;break}var u=t.readCode(e,i,8);a+=He.castAsNonUtf8Char(u),i+=8}o=n}else{var d=o===Bt.DIGIT?4:5;if(r-i<d)break;var u=t.readCode(e,i,d);i+=d;var f=t.getCharacter(o,u);f.startsWith("CTRL_")?(n=o,o=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=o)):(a+=f,o=n)}return a},t.getTable=function(e){switch(e){case"L":return Bt.LOWER;case"P":return Bt.PUNCT;case"M":return Bt.MIXED;case"D":return Bt.DIGIT;case"B":return Bt.BINARY;case"U":default:return Bt.UPPER}},t.getCharacter=function(e,r){switch(e){case Bt.UPPER:return t.UPPER_TABLE[r];case Bt.LOWER:return t.LOWER_TABLE[r];case Bt.MIXED:return t.MIXED_TABLE[r];case Bt.PUNCT:return t.PUNCT_TABLE[r];case Bt.DIGIT:return t.DIGIT_TABLE[r];default:throw new Za("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=sr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=sr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=sr.AZTEC_DATA_10):(n=12,r=sr.AZTEC_DATA_12);var o=this.ddata.getNbDatablocks(),a=e.length/n;if(a<o)throw new ve;for(var i=e.length%n,s=new Int32Array(a),l=0;l<a;l++,i+=n)s[l]=t.readCode(e,i,n);try{var u=new Is(r);u.decode(s,a-o)}catch(w){throw new ve(w)}for(var d=(1<<n)-1,f=0,l=0;l<o;l++){var h=s[l];if(h===0||h===d)throw new ve;(h===1||h===d-1)&&f++}for(var p=new Array(o*n-f),v=0,l=0;l<o;l++){var h=s[l];if(h===1||h===d-1)p.fill(h>1,v,v+n-1),v+=n-1;else for(var y=n-1;y>=0;--y)p[v++]=(h&1<<y)!==0}return p},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),o=(r?11:14)+n*4,a=new Int32Array(o),i=new Array(this.totalBitsInLayer(n,r));if(r)for(var s=0;s<a.length;s++)a[s]=s;else for(var l=o+1+2*$e.truncDivision($e.truncDivision(o,2)-1,15),u=o/2,d=$e.truncDivision(l,2),s=0;s<u;s++){var f=s+$e.truncDivision(s,15);a[u-s-1]=d-f-1,a[u+s]=d+f+1}for(var s=0,h=0;s<n;s++){for(var p=(n-s)*4+(r?9:12),v=s*2,y=o-1-v,w=0;w<p;w++)for(var g=w*2,x=0;x<2;x++)i[h+g+x]=e.get(a[v+x],a[v+w]),i[h+2*p+g+x]=e.get(a[v+w],a[y-x]),i[h+4*p+g+x]=e.get(a[y-x],a[y-w]),i[h+6*p+g+x]=e.get(a[y-w],a[v+x]);h+=p*8}return i},t.readCode=function(e,r,n){for(var o=0,a=r;a<r+n;a++)o<<=1,e[a]&&(o|=1);return o},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),We=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,o){var a=e-n,i=r-o;return Math.sqrt(a*a+i*i)},t.sum=function(e){for(var r=0,n=0,o=e.length;n!==o;n++){var a=e[n];r+=a}return r},t}(),cc=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Oe=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*cc.floatToIntBits(this.x)+cc.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),o=this.distance(e[0],e[2]),a,i,s;if(n>=r&&n>=o?(i=e[0],a=e[1],s=e[2]):o>=n&&o>=r?(i=e[1],a=e[0],s=e[2]):(i=e[2],a=e[0],s=e[1]),this.crossProductZ(a,i,s)<0){var l=a;a=s,s=l}e[0]=a,e[1]=i,e[2]=s},t.distance=function(e,r){return We.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var o=r.x,a=r.y;return(n.x-o)*(e.y-a)-(n.y-a)*(e.x-o)},t}(),mu=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),av=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iv=function(t){av(e,t);function e(r,n,o,a,i){var s=t.call(this,r,n)||this;return s.compact=o,s.nbDatablocks=a,s.nbLayers=i,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(mu),uc=function(){function t(e,r,n,o){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),o==null&&(o=e.getHeight()/2|0);var a=r/2|0;if(this.leftInit=n-a,this.rightInit=n+a,this.upInit=o-a,this.downInit=o+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new K}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,o=this.downInit,a=!1,i=!0,s=!1,l=!1,u=!1,d=!1,f=!1,h=this.width,p=this.height;i;){i=!1;for(var v=!0;(v||!l)&&r<h;)v=this.containsBlackPoint(n,o,r,!1),v?(r++,i=!0,l=!0):l||r++;if(r>=h){a=!0;break}for(var y=!0;(y||!u)&&o<p;)y=this.containsBlackPoint(e,r,o,!0),y?(o++,i=!0,u=!0):u||o++;if(o>=p){a=!0;break}for(var w=!0;(w||!d)&&e>=0;)w=this.containsBlackPoint(n,o,e,!1),w?(e--,i=!0,d=!0):d||e--;if(e<0){a=!0;break}for(var g=!0;(g||!f)&&n>=0;)g=this.containsBlackPoint(e,r,n,!0),g?(n--,i=!0,f=!0):f||n--;if(n<0){a=!0;break}i&&(s=!0)}if(!a&&s){for(var x=r-e,m=null,C=1;m===null&&C<x;C++)m=this.getBlackPointOnSegment(e,o-C,e+C,o);if(m==null)throw new K;for(var N=null,C=1;N===null&&C<x;C++)N=this.getBlackPointOnSegment(e,n+C,e+C,n);if(N==null)throw new K;for(var S=null,C=1;S===null&&C<x;C++)S=this.getBlackPointOnSegment(r,n+C,r-C,n);if(S==null)throw new K;for(var I=null,C=1;I===null&&C<x;C++)I=this.getBlackPointOnSegment(r,o-C,r-C,o);if(I==null)throw new K;return this.centerEdges(I,m,S,N)}else throw new K},t.prototype.getBlackPointOnSegment=function(e,r,n,o){for(var a=We.round(We.distance(e,r,n,o)),i=(n-e)/a,s=(o-r)/a,l=this.image,u=0;u<a;u++){var d=We.round(e+u*i),f=We.round(r+u*s);if(l.get(d,f))return new Oe(d,f)}return null},t.prototype.centerEdges=function(e,r,n,o){var a=e.getX(),i=e.getY(),s=r.getX(),l=r.getY(),u=n.getX(),d=n.getY(),f=o.getX(),h=o.getY(),p=t.CORR;return a<this.width/2?[new Oe(f-p,h+p),new Oe(s+p,l+p),new Oe(u-p,d-p),new Oe(a+p,i-p)]:[new Oe(f+p,h+p),new Oe(s+p,l-p),new Oe(u-p,d+p),new Oe(a-p,i-p)]},t.prototype.containsBlackPoint=function(e,r,n,o){var a=this.image;if(o){for(var i=e;i<=r;i++)if(a.get(i,n))return!0}else for(var s=e;s<=r;s++)if(a.get(n,s))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),Bd=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),o=e.getHeight(),a=!0,i=0;i<r.length&&a;i+=2){var s=Math.floor(r[i]),l=Math.floor(r[i+1]);if(s<-1||s>n||l<-1||l>o)throw new K;a=!1,s===-1?(r[i]=0,a=!0):s===n&&(r[i]=n-1,a=!0),l===-1?(r[i+1]=0,a=!0):l===o&&(r[i+1]=o-1,a=!0)}a=!0;for(var i=r.length-2;i>=0&&a;i-=2){var s=Math.floor(r[i]),l=Math.floor(r[i+1]);if(s<-1||s>n||l<-1||l>o)throw new K;a=!1,s===-1?(r[i]=0,a=!0):s===n&&(r[i]=n-1,a=!0),l===-1?(r[i+1]=0,a=!0):l===o&&(r[i+1]=o-1,a=!0)}},t}(),G1=function(){function t(e,r,n,o,a,i,s,l,u){this.a11=e,this.a21=r,this.a31=n,this.a12=o,this.a22=a,this.a32=i,this.a13=s,this.a23=l,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,o,a,i,s,l,u,d,f,h,p,v,y,w){var g=t.quadrilateralToSquare(e,r,n,o,a,i,s,l),x=t.squareToQuadrilateral(u,d,f,h,p,v,y,w);return x.times(g)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,o=this.a12,a=this.a13,i=this.a21,s=this.a22,l=this.a23,u=this.a31,d=this.a32,f=this.a33,h=0;h<r;h+=2){var p=e[h],v=e[h+1],y=a*p+l*v+f;e[h]=(n*p+i*v+u)/y,e[h+1]=(o*p+s*v+d)/y}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,o=this.a12,a=this.a13,i=this.a21,s=this.a22,l=this.a23,u=this.a31,d=this.a32,f=this.a33,h=e.length,p=0;p<h;p++){var v=e[p],y=r[p],w=a*v+l*y+f;e[p]=(n*v+i*y+u)/w,r[p]=(o*v+s*y+d)/w}},t.squareToQuadrilateral=function(e,r,n,o,a,i,s,l){var u=e-n+a-s,d=r-o+i-l;if(u===0&&d===0)return new t(n-e,a-n,e,o-r,i-o,r,0,0,1);var f=n-a,h=s-a,p=o-i,v=l-i,y=f*v-h*p,w=(u*v-h*d)/y,g=(f*d-u*p)/y;return new t(n-e+w*n,s-e+g*s,e,o-r+w*o,l-r+g*l,r,w,g,1)},t.quadrilateralToSquare=function(e,r,n,o,a,i,s,l){return t.squareToQuadrilateral(e,r,n,o,a,i,s,l).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),sv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lv=function(t){sv(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,o,a,i,s,l,u,d,f,h,p,v,y,w,g,x,m,C){var N=G1.quadrilateralToQuadrilateral(a,i,s,l,u,d,f,h,p,v,y,w,g,x,m,C);return this.sampleGridWithTransform(r,n,o,N)},e.prototype.sampleGridWithTransform=function(r,n,o,a){if(n<=0||o<=0)throw new K;for(var i=new en(n,o),s=new Float32Array(2*n),l=0;l<o;l++){for(var u=s.length,d=l+.5,f=0;f<u;f+=2)s[f]=f/2+.5,s[f+1]=d;a.transformPoints(s),Bd.checkAndNudgePoints(r,s);try{for(var f=0;f<u;f+=2)r.get(Math.floor(s[f]),Math.floor(s[f+1]))&&i.set(f/2,l)}catch{throw new K}}return i},e}(Bd),yu=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new lv,t}(),ar=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new Oe(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),cv=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var o=n[0];n[0]=n[2],n[2]=o}this.extractParameters(n);var a=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new iv(a,i,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new K;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var o=0,a=0;a<4;a++){var i=n[(this.shift+a)%4];this.compact?(o<<=7,o+=i>>1&127):(o<<=10,o+=(i>>2&992)+(i>>1&31))}var s=this.getCorrectedParameterData(o,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(a,i,s){var l=(a>>r-2<<1)+(a&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(var o=0;o<4;o++)if($e.bitCount(n^this.EXPECTED_CORNER_BITS[o])<=2)return o;throw new K},t.prototype.getCorrectedParameterData=function(e,r){var n,o;r?(n=7,o=2):(n=10,o=4);for(var a=n-o,i=new Int32Array(n),s=n-1;s>=0;--s)i[s]=e&15,e>>=4;try{var l=new Is(sr.AZTEC_PARAM);l.decode(i,a)}catch{throw new K}for(var u=0,s=0;s<o;s++)u=(u<<4)+i[s];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,o=e,a=e,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(r,i,1,-1),l=this.getFirstDifferent(n,i,1,1),u=this.getFirstDifferent(o,i,-1,1),d=this.getFirstDifferent(a,i,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(d,s)*this.nbCenterLayers/(this.distancePoint(a,r)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(s,l,u,d))break}r=s,n=l,o=u,a=d,i=!i}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new K;this.compact=this.nbCenterLayers===5;var h=new Oe(r.getX()+.5,r.getY()-.5),p=new Oe(n.getX()+.5,n.getY()+.5),v=new Oe(o.getX()-.5,o.getY()+.5),y=new Oe(a.getX()-.5,a.getY()-.5);return this.expandSquare([h,p,v,y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,o;try{var a=new uc(this.image).detect();e=a[0],r=a[1],n=a[2],o=a[3]}catch{var i=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new ar(i+7,s-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new ar(i+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ar(i-7,s+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new ar(i-7,s-7),!1,-1,-1).toResultPoint()}var l=We.round((e.getX()+o.getX()+r.getX()+n.getX())/4),u=We.round((e.getY()+o.getY()+r.getY()+n.getY())/4);try{var a=new uc(this.image,15,l,u).detect();e=a[0],r=a[1],n=a[2],o=a[3]}catch{e=this.getFirstDifferent(new ar(l+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new ar(l+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ar(l-7,u+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new ar(l-7,u-7),!1,-1,-1).toResultPoint()}return l=We.round((e.getX()+o.getX()+r.getX()+n.getX())/4),u=We.round((e.getY()+o.getY()+r.getY()+n.getY())/4),new ar(l,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,o,a){var i=yu.getInstance(),s=this.getDimension(),l=s/2-this.nbCenterLayers,u=s/2+this.nbCenterLayers;return i.sampleGrid(e,s,s,l,l,u,l,u,u,l,u,r.getX(),r.getY(),n.getX(),n.getY(),o.getX(),o.getY(),a.getX(),a.getY())},t.prototype.sampleLine=function(e,r,n){for(var o=0,a=this.distanceResultPoint(e,r),i=a/n,s=e.getX(),l=e.getY(),u=i*(r.getX()-e.getX())/a,d=i*(r.getY()-e.getY())/a,f=0;f<n;f++)this.image.get(We.round(s+f*u),We.round(l+f*d))&&(o|=1<<n-f-1);return o},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,o){var a=3;e=new ar(e.getX()-a,e.getY()+a),r=new ar(r.getX()-a,r.getY()-a),n=new ar(n.getX()+a,n.getY()-a),o=new ar(o.getX()+a,o.getY()+a);var i=this.getColor(o,e);if(i===0)return!1;var s=this.getColor(e,r);return s!==i||(s=this.getColor(r,n),s!==i)?!1:(s=this.getColor(n,o),s===i)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),o=(r.getX()-e.getX())/n,a=(r.getY()-e.getY())/n,i=0,s=e.getX(),l=e.getY(),u=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),f=0;f<d;f++)s+=o,l+=a,this.image.get(We.round(s),We.round(l))!==u&&i++;var h=i/n;return h>.1&&h<.9?0:h<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,o){for(var a=e.getX()+n,i=e.getY()+o;this.isValid(a,i)&&this.image.get(a,i)===r;)a+=n,i+=o;for(a-=n,i-=o;this.isValid(a,i)&&this.image.get(a,i)===r;)a+=n;for(a-=n;this.isValid(a,i)&&this.image.get(a,i)===r;)i+=o;return i-=o,new ar(a,i)},t.prototype.expandSquare=function(e,r,n){var o=n/(2*r),a=e[0].getX()-e[2].getX(),i=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,u=new Oe(s+o*a,l+o*i),d=new Oe(s-o*a,l-o*i);a=e[1].getX()-e[3].getX(),i=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var f=new Oe(s+o*a,l+o*i),h=new Oe(s-o*a,l-o*i),p=[u,f,d,h];return p},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=We.round(e.getX()),n=We.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return We.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return We.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*($e.truncDivision(this.nbLayers-4,8)+1)+15},t}(),dc=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,o=new cv(e.getBlackMatrix()),a=null,i=null;try{var s=o.detectMirror(!1);a=s.getPoints(),this.reportFoundResultPoints(r,a),i=new kd().decode(s)}catch(f){n=f}if(i==null)try{var s=o.detectMirror(!0);a=s.getPoints(),this.reportFoundResultPoints(r,a),i=new kd().decode(s)}catch(f){throw n??f}var l=new Kt(i.getText(),i.getRawBytes(),i.getNumBits(),a,ke.AZTEC,ot.currentTimeMillis()),u=i.getByteSegments();u!=null&&l.putMetadata(Ut.BYTE_SEGMENTS,u);var d=i.getECLevel();return d!=null&&l.putMetadata(Ut.ERROR_CORRECTION_LEVEL,d),l},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(dt.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(o,a,i){n.foundPossibleResultPoint(o)})}},t.prototype.reset=function(){},t}(),uv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){uv(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new dc,r)||this}return e})(Zo);var Dt=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(dt.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var o=e.rotateCounterClockwise(),a=this.doDecode(o,r),i=a.getResultMetadata(),s=270;i!==null&&i.get(Ut.ORIENTATION)===!0&&(s=s+i.get(Ut.ORIENTATION)%360),a.putMetadata(Ut.ORIENTATION,s);var l=a.getResultPoints();if(l!==null)for(var u=o.getHeight(),d=0;d<l.length;d++)l[d]=new Oe(u-l[d].getY()-1,l[d].getX());return a}else throw new K}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),o=e.getHeight(),a=new jt(n),i=r&&r.get(dt.TRY_HARDER)===!0,s=Math.max(1,o>>(i?8:5)),l;i?l=o:l=15;for(var u=Math.trunc(o/2),d=0;d<l;d++){var f=Math.trunc((d+1)/2),h=(d&1)===0,p=u+s*(h?f:-f);if(p<0||p>=o)break;try{a=e.getBlackRow(p,a)}catch{continue}for(var v=function(x){if(x===1&&(a.reverse(),r&&r.get(dt.NEED_RESULT_POINT_CALLBACK)===!0)){var m=new Map;r.forEach(function(S,I){return m.set(I,S)}),m.delete(dt.NEED_RESULT_POINT_CALLBACK),r=m}try{var C=y.decodeRow(p,a,r);if(x===1){C.putMetadata(Ut.ORIENTATION,180);var N=C.getResultPoints();N!==null&&(N[0]=new Oe(n-N[0].getX()-1,N[0].getY()),N[1]=new Oe(n-N[1].getX()-1,N[1].getY()))}return{value:C}}catch{}},y=this,w=0;w<2;w++){var g=v(w);if(typeof g=="object")return g.value}}throw new K},t.recordPattern=function(e,r,n){for(var o=n.length,a=0;a<o;a++)n[a]=0;var i=e.getSize();if(r>=i)throw new K;for(var s=!e.get(r),l=0,u=r;u<i;){if(e.get(u)!==s)n[l]++;else{if(++l===o)break;n[l]=1,s=!s}u++}if(!(l===o||l===o-1&&u===i))throw new K},t.recordPatternInReverse=function(e,r,n){for(var o=n.length,a=e.get(r);r>0&&o>=0;)e.get(--r)!==a&&(o--,a=!a);if(o>=0)throw new K;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var o=e.length,a=0,i=0,s=0;s<o;s++)a+=e[s],i+=r[s];if(a<i)return Number.POSITIVE_INFINITY;var l=a/i;n*=l;for(var u=0,d=0;d<o;d++){var f=e[d],h=r[d]*l,p=f>h?f-h:h-f;if(p>n)return Number.POSITIVE_INFINITY;u+=p}return u/a},t}(),dv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ld=function(t){dv(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),o=r.getNextSet(0),a=0,i=Int32Array.from([0,0,0,0,0,0]),s=o,l=!1,u=6,d=o;d<n;d++)if(r.get(d)!==l)i[a]++;else{if(a===u-1){for(var f=e.MAX_AVG_VARIANCE,h=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var v=Dt.patternMatchVariance(i,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);v<f&&(f=v,h=p)}if(h>=0&&r.isRange(Math.max(0,s-(d-s)/2),s,!1))return Int32Array.from([s,d,h]);s+=i[0]+i[1],i=i.slice(2,i.length),i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,l=!l}throw new K},e.decodeCode=function(r,n,o){Dt.recordPattern(r,o,n);for(var a=e.MAX_AVG_VARIANCE,i=-1,s=0;s<e.CODE_PATTERNS.length;s++){var l=e.CODE_PATTERNS[s],u=this.patternMatchVariance(n,l,e.MAX_INDIVIDUAL_VARIANCE);u<a&&(a=u,i=s)}if(i>=0)return i;throw new K},e.prototype.decodeRow=function(r,n,o){var a=o&&o.get(dt.ASSUME_GS1)===!0,i=e.findStartPattern(n),s=i[2],l=0,u=new Uint8Array(20);u[l++]=s;var d;switch(s){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new ve}for(var f=!1,h=!1,p="",v=i[0],y=i[1],w=Int32Array.from([0,0,0,0,0,0]),g=0,x=0,m=s,C=0,N=!0,S=!1,I=!1;!f;){var R=h;switch(h=!1,g=x,x=e.decodeCode(n,w,y),u[l++]=x,x!==e.CODE_STOP&&(N=!0),x!==e.CODE_STOP&&(C++,m+=C*x),v=y,y+=w.reduce(function(O,M){return O+M},0),x){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new ve}switch(d){case e.CODE_CODE_A:if(x<64)I===S?p+=String.fromCharCode(32+x):p+=String.fromCharCode(32+x+128),I=!1;else if(x<96)I===S?p+=String.fromCharCode(x-64):p+=String.fromCharCode(x+64),I=!1;else switch(x!==e.CODE_STOP&&(N=!1),x){case e.CODE_FNC_1:a&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!S&&I?(S=!0,I=!1):S&&I?(S=!1,I=!1):I=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(x<96)I===S?p+=String.fromCharCode(32+x):p+=String.fromCharCode(32+x+128),I=!1;else switch(x!==e.CODE_STOP&&(N=!1),x){case e.CODE_FNC_1:a&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!S&&I?(S=!0,I=!1):S&&I?(S=!1,I=!1):I=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(x<100)x<10&&(p+="0"),p+=x;else switch(x!==e.CODE_STOP&&(N=!1),x){case e.CODE_FNC_1:a&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}R&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var z=y-v;if(y=n.getNextUnset(y),!n.isRange(y,Math.min(n.getSize(),y+(y-v)/2),!1))throw new K;if(m-=C*g,m%103!==g)throw new Pt;var k=p.length;if(k===0)throw new K;k>0&&N&&(d===e.CODE_CODE_C?p=p.substring(0,k-2):p=p.substring(0,k-1));for(var oe=(i[1]+i[0])/2,se=v+z/2,A=u.length,D=new Uint8Array(A),F=0;F<A;F++)D[F]=u[F];var T=[new Oe(oe,r),new Oe(se,r)];return new Kt(p,D,0,T,ke.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Dt),fv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ol=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fd=function(t){fv(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var o=t.call(this)||this;return o.usingCheckDigit=r,o.extendedMode=n,o.decodeRowResult="",o.counters=new Int32Array(9),o}return e.prototype.decodeRow=function(r,n,o){var a,i,s,l,u=this.counters;u.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,u),f=n.getNextSet(d[1]),h=n.getSize(),p,v;do{e.recordPattern(n,f,u);var y=e.toNarrowWidePattern(u);if(y<0)throw new K;p=e.patternToChar(y),this.decodeRowResult+=p,v=f;try{for(var w=(a=void 0,ol(u)),g=w.next();!g.done;g=w.next()){var x=g.value;f+=x}}catch(A){a={error:A}}finally{try{g&&!g.done&&(i=w.return)&&i.call(w)}finally{if(a)throw a.error}}f=n.getNextSet(f)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var m=0;try{for(var C=ol(u),N=C.next();!N.done;N=C.next()){var x=N.value;m+=x}}catch(A){s={error:A}}finally{try{N&&!N.done&&(l=C.return)&&l.call(C)}finally{if(s)throw s.error}}var S=f-v-m;if(f!==h&&S*2<m)throw new K;if(this.usingCheckDigit){for(var I=this.decodeRowResult.length-1,R=0,z=0;z<I;z++)R+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(z));if(this.decodeRowResult.charAt(I)!==e.ALPHABET_STRING.charAt(R%43))throw new Pt;this.decodeRowResult=this.decodeRowResult.substring(0,I)}if(this.decodeRowResult.length===0)throw new K;var k;this.extendedMode?k=e.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;var oe=(d[1]+d[0])/2,se=v+m/2;return new Kt(k,null,0,[new Oe(oe,r),new Oe(se,r)],ke.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var o=r.getSize(),a=r.getNextSet(0),i=0,s=a,l=!1,u=n.length,d=a;d<o;d++)if(r.get(d)!==l)n[i]++;else{if(i===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,s-Math.floor((d-s)/2)),s,!1))return[s,d];s+=n[0]+n[1],n.copyWithin(0,2,2+i-1),n[i-1]=0,n[i]=0,i--}else i++;n[i]=1,l=!l}throw new K},e.toNarrowWidePattern=function(r){var n,o,a=r.length,i=0,s;do{var l=2147483647;try{for(var u=(n=void 0,ol(r)),d=u.next();!d.done;d=u.next()){var f=d.value;f<l&&f>i&&(l=f)}}catch(y){n={error:y}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}i=l,s=0;for(var h=0,p=0,v=0;v<a;v++){var f=r[v];f>i&&(p|=1<<a-1-v,s++,h+=f)}if(s===3){for(var v=0;v<a&&s>0;v++){var f=r[v];if(f>i&&(s--,f*2>=h))return-1}return p}}while(s>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new K},e.decodeExtended=function(r){for(var n=r.length,o="",a=0;a<n;a++){var i=r.charAt(a);if(i==="+"||i==="$"||i==="%"||i==="/"){var s=r.charAt(a+1),l="\0";switch(i){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new ve;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new ve;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="";else throw new ve;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new ve;break}o+=l,a++}else o+=i}return o},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Dt),hv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),al=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ud=function(t){hv(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,o){var a,i,s,l,u=this.findAsteriskPattern(n),d=n.getNextSet(u[1]),f=n.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var p,v;do{e.recordPattern(n,d,h);var y=this.toPattern(h);if(y<0)throw new K;p=this.patternToChar(y),this.decodeRowResult+=p,v=d;try{for(var w=(a=void 0,al(h)),g=w.next();!g.done;g=w.next()){var x=g.value;d+=x}}catch(z){a={error:z}}finally{try{g&&!g.done&&(i=w.return)&&i.call(w)}finally{if(a)throw a.error}}d=n.getNextSet(d)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var m=0;try{for(var C=al(h),N=C.next();!N.done;N=C.next()){var x=N.value;m+=x}}catch(z){s={error:z}}finally{try{N&&!N.done&&(l=C.return)&&l.call(C)}finally{if(s)throw s.error}}if(d===f||!n.get(d))throw new K;if(this.decodeRowResult.length<2)throw new K;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var S=this.decodeExtended(this.decodeRowResult),I=(u[1]+u[0])/2,R=v+m/2;return new Kt(S,null,0,[new Oe(I,r),new Oe(R,r)],ke.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),o=r.getNextSet(0);this.counters.fill(0);for(var a=this.counters,i=o,s=!1,l=a.length,u=0,d=o;d<n;d++)if(r.get(d)!==s)a[u]++;else{if(u===l-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([i,d]);i+=a[0]+a[1],a.copyWithin(0,2,2+u-1),a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,s=!s}throw new K},e.prototype.toPattern=function(r){var n,o,a=0;try{for(var i=al(r),s=i.next();!s.done;s=i.next()){var l=s.value;a+=l}}catch(v){n={error:v}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}for(var u=0,d=r.length,f=0;f<d;f++){var h=Math.round(r[f]*9/a);if(h<1||h>4)return-1;if(f&1)u<<=h;else for(var p=0;p<h;p++)u=u<<1|1}return u},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new K},e.prototype.decodeExtended=function(r){for(var n=r.length,o="",a=0;a<n;a++){var i=r.charAt(a);if(i>="a"&&i<="d"){if(a>=n-1)throw new ve;var s=r.charAt(a+1),l="\0";switch(i){case"d":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new ve;break;case"a":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new ve;break;case"b":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s>="X"&&s<="Z")l="";else throw new ve;break;case"c":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new ve;break}o+=l,a++}else o+=i}return o},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,o){for(var a=1,i=0,s=n-1;s>=0;s--)i+=a*e.ALPHABET_STRING.indexOf(r.charAt(s)),++a>o&&(a=1);if(r.charAt(n)!==e.ALPHABET_STRING[i%47])throw new Pt},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Dt),pv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gd=function(t){pv(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,o){var a,i,s=this.decodeStart(n),l=this.decodeEnd(n),u=new Ge;e.decodeMiddle(n,s[1],l[0],u);var d=u.toString(),f=null;o!=null&&(f=o.get(dt.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var h=d.length,p=!1,v=0;try{for(var y=gv(f),w=y.next();!w.done;w=y.next()){var g=w.value;if(h===g){p=!0;break}g>v&&(v=g)}}catch(C){a={error:C}}finally{try{w&&!w.done&&(i=y.return)&&i.call(y)}finally{if(a)throw a.error}}if(!p&&h>v&&(p=!0),!p)throw new ve;var x=[new Oe(s[1],r),new Oe(l[0],r)],m=new Kt(d,null,0,x,ke.ITF,new Date().getTime());return m},e.decodeMiddle=function(r,n,o,a){var i=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(i.fill(0),s.fill(0),l.fill(0);n<o;){Dt.recordPattern(r,n,i);for(var u=0;u<5;u++){var d=2*u;s[u]=i[d],l[u]=i[d+1]}var f=e.decodeDigit(s);a.append(f.toString()),f=this.decodeDigit(l),a.append(f.toString()),i.forEach(function(h){n+=h})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),o=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(r,o[0]),o},e.prototype.validateQuietZone=function(r,n){var o=this.narrowLineWidth*10;o=o<n?o:n;for(var a=n-1;o>0&&a>=0&&!r.get(a);a--)o--;if(o!==0)throw new K},e.skipWhiteSpace=function(r){var n=r.getSize(),o=r.getNextSet(0);if(o===n)throw new K;return o},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),o=void 0;try{o=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(i){i instanceof K&&(o=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,o[0]);var a=o[0];return o[0]=r.getSize()-o[1],o[1]=r.getSize()-a,o}finally{r.reverse()}},e.findGuardPattern=function(r,n,o){var a=o.length,i=new Int32Array(a),s=r.getSize(),l=!1,u=0,d=n;i.fill(0);for(var f=n;f<s;f++)if(r.get(f)!==l)i[u]++;else{if(u===a-1){if(Dt.patternMatchVariance(i,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,f];d+=i[0]+i[1],ot.arraycopy(i,2,i,0,u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,l=!l}throw new K},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,o=-1,a=e.PATTERNS.length,i=0;i<a;i++){var s=e.PATTERNS[i],l=Dt.patternMatchVariance(r,s,e.MAX_INDIVIDUAL_VARIANCE);l<n?(n=l,o=i):l===n&&(o=-1)}if(o>=0)return o%10;throw new K},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Dt),xv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xo=function(t){xv(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,o,a=0,i=Int32Array.from([0,0,0]);!n;){i=Int32Array.from([0,0,0]),o=e.findGuardPattern(r,a,!1,this.START_END_PATTERN,i);var s=o[0];a=o[1];var l=s-(a-s);l>=0&&(n=r.isRange(l,s,!1))}return o},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var o=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===o},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,o=0,a=n-1;a>=0;a-=2){var i=r.charAt(a).charCodeAt(0)-48;if(i<0||i>9)throw new ve;o+=i}o*=3;for(var a=n-2;a>=0;a-=2){var i=r.charAt(a).charCodeAt(0)-48;if(i<0||i>9)throw new ve;o+=i}return(1e3-o)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,o,a){return this.findGuardPattern(r,n,o,a,new Int32Array(a.length))},e.findGuardPattern=function(r,n,o,a,i){var s=r.getSize();n=o?r.getNextUnset(n):r.getNextSet(n);for(var l=0,u=n,d=a.length,f=o,h=n;h<s;h++)if(r.get(h)!==f)i[l]++;else{if(l===d-1){if(Dt.patternMatchVariance(i,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,h]);u+=i[0]+i[1];for(var p=i.slice(2,i.length),v=0;v<l-1;v++)i[v]=p[v];i[l-1]=0,i[l]=0,l--}else l++;i[l]=1,f=!f}throw new K},e.decodeDigit=function(r,n,o,a){this.recordPattern(r,o,n);for(var i=this.MAX_AVG_VARIANCE,s=-1,l=a.length,u=0;u<l;u++){var d=a[u],f=Dt.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);f<i&&(i=f,s=u)}if(s>=0)return s;throw new K},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Dt),vv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mv=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var o=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,o),i=o.toString(),s=t.parseExtensionString(i),l=[new Oe((n[0]+n[1])/2,e),new Oe(a,e)],u=new Kt(i,null,0,l,ke.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&u.putAllMetadata(s),u},t.prototype.decodeMiddle=function(e,r,n){var o,a,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var s=e.getSize(),l=r[1],u=0,d=0;d<5&&l<s;d++){var f=Xo.decodeDigit(e,i,l,Xo.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(o=void 0,vv(i)),p=h.next();!p.done;p=h.next()){var v=p.value;l+=v}}catch(w){o={error:w}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}f>=10&&(u|=1<<4-d),d!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==5)throw new K;var y=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==y)throw new K;return l},t.extensionChecksum=function(e){for(var r=e.length,n=0,o=r-2;o>=0;o-=2)n+=e.charAt(o).charCodeAt(0)-48;n*=3;for(var o=r-1;o>=0;o-=2)n+=e.charAt(o).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new K},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[Ut.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),o=(n/100).toString(),a=n%100,i=a<10?"0"+a:a.toString();return r+o+"."+i},t}(),yv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wv=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var o=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,o),i=o.toString(),s=t.parseExtensionString(i),l=[new Oe((n[0]+n[1])/2,e),new Oe(a,e)],u=new Kt(i,null,0,l,ke.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&u.putAllMetadata(s),u},t.prototype.decodeMiddle=function(e,r,n){var o,a,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var s=e.getSize(),l=r[1],u=0,d=0;d<2&&l<s;d++){var f=Xo.decodeDigit(e,i,l,Xo.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(o=void 0,yv(i)),p=h.next();!p.done;p=h.next()){var v=p.value;l+=v}}catch(y){o={error:y}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}f>=10&&(u|=1<<1-d),d!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==2)throw new K;if(parseInt(n.toString())%4!==u)throw new K;return l},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Ut.ISSUE_NUMBER,parseInt(e)]])},t}(),_v=function(){function t(){}return t.decodeRow=function(e,r,n){var o=Xo.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new mv;return a.decodeRow(e,r,o)}catch{var i=new wv;return i.decodeRow(e,r,o)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),Cv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nt=function(t){Cv(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var o=e.L_PATTERNS[n-10],a=new Int32Array(o.length),i=0;i<o.length;i++)a[i]=o[o.length-i-1];e.L_AND_G_PATTERNS[n]=a}return r}return e.prototype.decodeRow=function(r,n,o){var a=e.findStartGuardPattern(n),i=o==null?null:o.get(dt.NEED_RESULT_POINT_CALLBACK);if(i!=null){var s=new Oe((a[0]+a[1])/2,r);i.foundPossibleResultPoint(s)}var l=this.decodeMiddle(n,a,this.decodeRowStringBuffer),u=l.rowOffset,d=l.resultString;if(i!=null){var f=new Oe(u,r);i.foundPossibleResultPoint(f)}var h=e.decodeEnd(n,u);if(i!=null){var p=new Oe((h[0]+h[1])/2,r);i.foundPossibleResultPoint(p)}var v=h[1],y=v+(v-h[0]);if(y>=n.getSize()||!n.isRange(v,y,!1))throw new K;var w=d.toString();if(w.length<8)throw new ve;if(!e.checkChecksum(w))throw new Pt;var g=(a[1]+a[0])/2,x=(h[1]+h[0])/2,m=this.getBarcodeFormat(),C=[new Oe(g,r),new Oe(x,r)],N=new Kt(w,null,0,C,m,new Date().getTime()),S=0;try{var I=_v.decodeRow(r,n,h[1]);N.putMetadata(Ut.UPC_EAN_EXTENSION,I.getText()),N.putAllMetadata(I.getResultMetadata()),N.addResultPoints(I.getResultPoints()),S=I.getText().length}catch{}var R=o==null?null:o.get(dt.ALLOWED_EAN_EXTENSIONS);if(R!=null){var z=!1;for(var k in R)if(S.toString()===k){z=!0;break}if(!z)throw new K}return m===ke.EAN_13||ke.UPC_A,N},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var o=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===o},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,o=0,a=n-1;a>=0;a-=2){var i=r.charAt(a).charCodeAt(0)-48;if(i<0||i>9)throw new ve;o+=i}o*=3;for(var a=n-2;a>=0;a-=2){var i=r.charAt(a).charCodeAt(0)-48;if(i<0||i>9)throw new ve;o+=i}return(1e3-o)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Xo),bv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$d=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fc=function(t){bv(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,o){var a,i,s,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],h=0,p=0;p<6&&f<d;p++){var v=Nt.decodeDigit(r,u,f,Nt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+v%10);try{for(var y=(a=void 0,$d(u)),w=y.next();!w.done;w=y.next()){var g=w.value;f+=g}}catch(N){a={error:N}}finally{try{w&&!w.done&&(i=y.return)&&i.call(y)}finally{if(a)throw a.error}}v>=10&&(h|=1<<5-p)}o=e.determineFirstDigit(o,h);var x=Nt.findGuardPattern(r,f,!0,Nt.MIDDLE_PATTERN,new Int32Array(Nt.MIDDLE_PATTERN.length).fill(0));f=x[1];for(var p=0;p<6&&f<d;p++){var v=Nt.decodeDigit(r,u,f,Nt.L_PATTERNS);o+=String.fromCharCode(48+v);try{for(var m=(s=void 0,$d(u)),C=m.next();!C.done;C=m.next()){var g=C.value;f+=g}}catch(I){s={error:I}}finally{try{C&&!C.done&&(l=m.return)&&l.call(m)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:o}},e.prototype.getBarcodeFormat=function(){return ke.EAN_13},e.determineFirstDigit=function(r,n){for(var o=0;o<10;o++)if(n===this.FIRST_DIGIT_ENCODINGS[o])return r=String.fromCharCode(48+o)+r,r;throw new K},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Nt),Sv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zd=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hd=function(t){Sv(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,o){var a,i,s,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],h=0;h<4&&f<d;h++){var p=Nt.decodeDigit(r,u,f,Nt.L_PATTERNS);o+=String.fromCharCode(48+p);try{for(var v=(a=void 0,zd(u)),y=v.next();!y.done;y=v.next()){var w=y.value;f+=w}}catch(C){a={error:C}}finally{try{y&&!y.done&&(i=v.return)&&i.call(v)}finally{if(a)throw a.error}}}var g=Nt.findGuardPattern(r,f,!0,Nt.MIDDLE_PATTERN,new Int32Array(Nt.MIDDLE_PATTERN.length).fill(0));f=g[1];for(var h=0;h<4&&f<d;h++){var p=Nt.decodeDigit(r,u,f,Nt.L_PATTERNS);o+=String.fromCharCode(48+p);try{for(var x=(s=void 0,zd(u)),m=x.next();!m.done;m=x.next()){var w=m.value;f+=w}}catch(S){s={error:S}}finally{try{m&&!m.done&&(l=x.return)&&l.call(x)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:o}},e.prototype.getBarcodeFormat=function(){return ke.EAN_8},e}(Nt),Nv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vd=function(t){Nv(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new fc,r}return e.prototype.getBarcodeFormat=function(){return ke.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,o))},e.prototype.decodeMiddle=function(r,n,o){return this.ean13Reader.decodeMiddle(r,n,o)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var o=new Kt(n.substring(1),null,null,r.getResultPoints(),ke.UPC_A);return r.getResultMetadata()!=null&&o.putAllMetadata(r.getResultMetadata()),o}else throw new K},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Nt),Ev=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Av=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xd=function(t){Ev(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,o){var a,i,s=this.decodeMiddleCounters.map(function(w){return w});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=r.getSize(),u=n[1],d=0,f=0;f<6&&u<l;f++){var h=e.decodeDigit(r,s,u,e.L_AND_G_PATTERNS);o+=String.fromCharCode(48+h%10);try{for(var p=(a=void 0,Av(s)),v=p.next();!v.done;v=p.next()){var y=v.value;u+=y}}catch(w){a={error:w}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}h>=10&&(d|=1<<5-f)}return e.determineNumSysAndCheckDigit(new Ge(o),d),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return Nt.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var o=0;o<=1;o++)for(var a=0;a<10;a++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][a]){r.insert(0,"0"+o),r.append("0"+a);return}throw K.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return ke.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(i){return i.charCodeAt(0)}),o=new Ge;o.append(r.charAt(0));var a=n[5];switch(a){case 0:case 1:case 2:o.appendChars(n,0,2),o.append(a),o.append("0000"),o.appendChars(n,2,3);break;case 3:o.appendChars(n,0,3),o.append("00000"),o.appendChars(n,3,2);break;case 4:o.appendChars(n,0,4),o.append("00000"),o.append(n[4]);break;default:o.appendChars(n,0,5),o.append("0000"),o.append(a);break}return r.length>=8&&o.append(r.charAt(7)),o.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Nt),Iv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wd=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},il=function(t){Iv(e,t);function e(r){var n=t.call(this)||this,o=r==null?null:r.get(dt.POSSIBLE_FORMATS),a=[];return o!=null&&(o.indexOf(ke.EAN_13)>-1&&a.push(new fc),o.indexOf(ke.UPC_A)>-1&&a.push(new Vd),o.indexOf(ke.EAN_8)>-1&&a.push(new Hd),o.indexOf(ke.UPC_E)>-1&&a.push(new Xd)),a.length===0&&(a.push(new fc),a.push(new Vd),a.push(new Hd),a.push(new Xd)),n.readers=a,n}return e.prototype.decodeRow=function(r,n,o){var a,i;try{for(var s=Wd(this.readers),l=s.next();!l.done;l=s.next()){var u=l.value;try{var d=u.decodeRow(r,n,o),f=d.getBarcodeFormat()===ke.EAN_13&&d.getText().charAt(0)==="0",h=o==null?null:o.get(dt.POSSIBLE_FORMATS),p=h==null||h.includes(ke.UPC_A);if(f&&p){var v=d.getRawBytes(),y=new Kt(d.getText().substring(1),v,v?v.length:null,d.getResultPoints(),ke.UPC_A);return y.putAllMetadata(d.getResultMetadata()),y}return d}catch{}}}catch(w){a={error:w}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}throw new K},e.prototype.reset=function(){var r,n;try{for(var o=Wd(this.readers),a=o.next();!a.done;a=o.next()){var i=a.value;i.reset()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},e}(Dt),Dv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tv=function(t){Dv(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,o){var a=this.getValidRowData(n);if(!a)throw new K;var i=this.codaBarDecodeRow(a.row);if(!i)throw new K;return new Kt(i,null,0,[new Oe(a.left,r),new Oe(a.right,r)],ke.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),o=n.indexOf(!0);if(o===-1)return null;var a=n.lastIndexOf(!0);if(a<=o)return null;n=n.slice(o,a+1);for(var i=[],s=n[0],l=1,u=1;u<n.length;u++)n[u]===s?l++:(s=n[u],i.push(l),l=1);return i.push(l),i.length<23&&(i.length+1)%8!==0?null:{row:i,left:o,right:a}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],o=Math.ceil(r.reduce(function(l,u){return(l+u)/2},0));r.length>0;){var a=r.splice(0,8).splice(0,7),i=a.map(function(l){return l<o?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[i]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[i])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(Dt),Ov=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wn=function(t){Ov(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var o=0;o<n.length;o++)if(Dt.patternMatchVariance(r,n[o],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return o;throw new K},e.count=function(r){return We.sum(new Int32Array(r))},e.increment=function(r,n){for(var o=0,a=n[0],i=1;i<r.length;i++)n[i]>a&&(a=n[i],o=i);r[o]++},e.decrement=function(r,n){for(var o=0,a=n[0],i=1;i<r.length;i++)n[i]<a&&(a=n[i],o=i);r[o]--},e.isFinderPattern=function(r){var n,o,a=r[0]+r[1],i=a+r[2]+r[3],s=a/i;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var d=Mv(r),f=d.next();!f.done;f=d.next()){var h=f.value;h>u&&(u=h),h<l&&(l=h)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}return u<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Dt),ls=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),$1=function(){function t(e,r,n,o,a){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Oe(n,a)),this.resultPoints.push(new Oe(o,a))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),Rv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},To=function(){function t(){}return t.getRSSvalue=function(e,r,n){var o,a,i=0;try{for(var s=Rv(e),l=s.next();!l.done;l=s.next()){var u=l.value;i+=u}}catch(x){o={error:x}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}for(var d=0,f=0,h=e.length,p=0;p<h-1;p++){var v=void 0;for(v=1,f|=1<<p;v<e[p];v++,f&=~(1<<p)){var y=t.combins(i-v-1,h-p-2);if(n&&f===0&&i-v-(h-p-1)>=h-p-1&&(y-=t.combins(i-v-(h-p),h-p-2)),h-p-1>1){for(var w=0,g=i-v-(h-p-2);g>r;g--)w+=t.combins(i-v-g-1,h-p-3);y-=w*(h-1-p)}else i-v>r&&y--;d+=y}i-=v}return d},t.combins=function(e,r){var n,o;e-r>r?(o=r,n=e-r):(o=e-r,n=r);for(var a=1,i=1,s=e;s>n;s--)a*=s,i<=o&&(a/=i,i++);for(;i<=o;)a/=i,i++;return a},t}(),Pv=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,o=new jt(n),a=0,i=e[0],s=i.getRightChar().getValue(),l=11;l>=0;--l)s&1<<l&&o.set(a),a++;for(var l=1;l<e.length;++l){for(var u=e[l],d=u.getLeftChar().getValue(),f=11;f>=0;--f)d&1<<f&&o.set(a),a++;if(u.getRightChar()!==null)for(var h=u.getRightChar().getValue(),f=11;f>=0;--f)h&1<<f&&o.set(a),a++}return o},t}(),zn=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),wu=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),jv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Br=function(t){jv(e,t);function e(r,n){var o=t.call(this,r)||this;return o.value=n,o}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(wu),kv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hn=function(t){kv(e,t);function e(r,n,o){var a=t.call(this,r)||this;return o?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=n,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(wu),Bv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),go=function(t){Bv(e,t);function e(r,n,o){var a=t.call(this,r)||this;if(n<0||n>10||o<0||o>10)throw new ve;return a.firstDigit=n,a.secondDigit=o,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(wu),vi=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lv=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,o,a,i,s,l,u;if(!e)return null;if(e.length<2)throw new K;var d=e.substring(0,2);try{for(var f=vi(t.TWO_DIGIT_DATA_LENGTH),h=f.next();!h.done;h=f.next()){var p=h.value;if(p[0]===d)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,p[2],e):t.processFixedAI(2,p[1],e)}}catch(S){r={error:S}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(e.length<3)throw new K;var v=e.substring(0,3);try{for(var y=vi(t.THREE_DIGIT_DATA_LENGTH),w=y.next();!w.done;w=y.next()){var p=w.value;if(p[0]===v)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,p[2],e):t.processFixedAI(3,p[1],e)}}catch(S){o={error:S}}finally{try{w&&!w.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}try{for(var g=vi(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),x=g.next();!x.done;x=g.next()){var p=x.value;if(p[0]===v)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(S){i={error:S}}finally{try{x&&!x.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}if(e.length<4)throw new K;var m=e.substring(0,4);try{for(var C=vi(t.FOUR_DIGIT_DATA_LENGTH),N=C.next();!N.done;N=C.next()){var p=N.value;if(p[0]===m)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(S){l={error:S}}finally{try{N&&!N.done&&(u=C.return)&&u.call(C)}finally{if(l)throw l.error}}throw new K},t.processFixedAI=function(e,r,n){if(n.length<e)throw new K;var o=n.substring(0,e);if(n.length<e+r)throw new K;var a=n.substring(e,e+r),i=n.substring(e+r),s="("+o+")"+a,l=t.parseFieldsInGeneralPurpose(i);return l==null?s:s+l},t.processVariableAI=function(e,r,n){var o=n.substring(0,e),a;n.length<e+r?a=n.length:a=e+r;var i=n.substring(e,a),s=n.substring(a),l="("+o+")"+i,u=t.parseFieldsInGeneralPurpose(s);return u==null?l:l+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),ji=function(){function t(e){this.buffer=new Ge,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,o=null;do{var a=this.decodeGeneralPurposeField(n,o),i=Lv.parseFieldsInGeneralPurpose(a.getNewString());if(i!=null&&e.append(i),a.isRemaining()?o=""+a.getRemainingValue():o=null,n===a.getNewPosition())break;n=a.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new go(this.information.getSize(),go.FNC1,go.FNC1):new go(this.information.getSize(),r-1,go.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),o=(n-8)/11,a=(n-8)%11;return new go(e+7,o,a)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var o=0,a=0;a<n;++a)e.get(r+a)&&(o|=1<<n-a-1);return o},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Hn(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Hn(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var o=n!==this.current.getPosition();if(!o&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new Hn(this.current.getPosition(),this.buffer.toString()):r=new Hn(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new zn(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new Hn(this.current.getPosition(),this.buffer.toString());return new zn(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new zn(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Hn(this.current.getPosition(),this.buffer.toString());return new zn(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new zn(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Hn(this.current.getPosition(),this.buffer.toString());return new zn(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new zn(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var o=this.extractNumericValueFromBitArray(e,8);return o>=232&&o<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Br(e+5,Br.FNC1);if(r>=5&&r<15)return new Br(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Br(e+7,""+(n+1));if(n>=90&&n<116)return new Br(e+7,""+(n+7));var o=this.extractNumericValueFromBitArray(e,8),a;switch(o){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new ve}return new Br(e+8,a)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Br(e+5,Br.FNC1);if(r>=5&&r<15)return new Br(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Br(e+6,""+(n+33));var o;switch(n){case 58:o="*";break;case 59:o=",";break;case 60:o="-";break;case 61:o=".";break;case 62:o="/";break;default:throw new Za("Decoding invalid alphanumeric value: "+n)}return new Br(e+6,o)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),z1=function(){function t(e){this.information=e,this.generalDecoder=new ji(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),Fv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$r=function(t){Fv(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var o=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,o)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,o){for(var a=0;a<4;++a){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*a,10);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i)}e.appendCheckDigit(r,o)},e.appendCheckDigit=function(r,n){for(var o=0,a=0;a<13;a++){var i=r.charAt(a+n).charCodeAt(0)-48;o+=a&1?i:3*i}o=10-o%10,o===10&&(o=0),r.append(o)},e.GTIN_SIZE=40,e}(z1),Uv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gv=function(t){Uv(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Ge;r.append("(01)");var n=r.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(o),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}($r),$v=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zv=function(t){$v(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Ge;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(z1),Hv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ki=function(t){Hv(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,o){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,o);this.addWeightCode(r,a);for(var i=this.checkWeight(a),s=1e5,l=0;l<5;++l)i/s===0&&r.append("0"),s/=10;r.append(i)},e}($r),Vv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),H1=function(t){Vv(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+ki.GTIN_SIZE+e.WEIGHT_SIZE)throw new K;var r=new Ge;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+ki.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(ki),Xv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wv=function(t){Xv(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(H1),Yv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kv=function(t){Yv(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(H1),Zv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qv=function(t){Zv(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+$r.GTIN_SIZE)throw new K;var r=new Ge;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+$r.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+$r.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(o.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}($r),Qv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jv=function(t){Qv(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+$r.GTIN_SIZE)throw new K;var r=new Ge;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+$r.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var o=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+$r.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+$r.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}($r),em=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gn=function(t){em(e,t);function e(r,n,o){var a=t.call(this,r)||this;return a.dateCode=o,a.firstAIdigits=n,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new K;var r=new Ge;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(o!==38400){r.append("("),r.append(this.dateCode),r.append(")");var a=o%32;o/=32;var i=o%12+1;o/=12;var s=o;s/10===0&&r.append("0"),r.append(s),i/10===0&&r.append("0"),r.append(i),a/10===0&&r.append("0"),r.append(a)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(ki);function tm(t){try{if(t.get(1))return new Gv(t);if(!t.get(2))return new zv(t);var e=ji.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new Wv(t);case 5:return new Kv(t)}var r=ji.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new qv(t);case 13:return new Jv(t)}var n=ji.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new gn(t,"310","11");case 57:return new gn(t,"320","11");case 58:return new gn(t,"310","13");case 59:return new gn(t,"320","13");case 60:return new gn(t,"310","15");case 61:return new gn(t,"320","15");case 62:return new gn(t,"310","17");case 63:return new gn(t,"320","17")}}catch(o){throw console.log(o),new Za("unknown decoder: "+t)}}var Yd=function(){function t(e,r,n,o){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=o}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),rm=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(o,a){r.forEach(function(i){o.getLeftChar().getValue()===i.getLeftChar().getValue()&&o.getRightChar().getValue()===i.getRightChar().getValue()&&o.getFinderPatter().getValue()===i.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),nm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xn=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},om=function(t){nm(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,o){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var o=!1;!o;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(s){if(s instanceof K){if(!this.pairs.length)throw new K;o=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(r,!1),a){var i=this.checkRowsBoolean(!1);if(i!=null||(i=this.checkRowsBoolean(!0),i!=null))return i}throw new K},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(o){console.log(o)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var o,a,i=n;i<this.rows.length;i++){var s=this.rows[i];this.pairs.length=0;try{for(var l=(o=void 0,xn(r)),u=l.next();!u.done;u=l.next()){var d=u.value;this.pairs.push(d.getPairs())}}catch(h){o={error:h}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(r);f.push(s);try{return this.checkRows(f,i+1)}catch(h){console.log(h)}}}throw new K},e.isValidSequence=function(r){var n,o;try{for(var a=xn(e.FINDER_PATTERN_SEQUENCES),i=a.next();!i.done;i=a.next()){var s=i.value;if(!(r.length>s.length)){for(var l=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!==s[u]){l=!1;break}if(l)return!0}}}catch(d){n={error:d}}finally{try{i&&!i.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var o=0,a=!1,i=!1;o<this.rows.length;){var s=this.rows[o];if(s.getRowNumber()>r){i=s.isEquivalent(this.pairs);break}a=s.isEquivalent(this.pairs),o++}i||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new rm(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var o,a,i,s,l,u;try{for(var d=xn(n),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.getPairs().length!==r.length){var p=!0;try{for(var v=(i=void 0,xn(h.getPairs())),y=v.next();!y.done;y=v.next()){var w=y.value,g=!1;try{for(var x=(l=void 0,xn(r)),m=x.next();!m.done;m=x.next()){var C=m.value;if(Yd.equals(w,C)){g=!0;break}}}catch(N){l={error:N}}finally{try{m&&!m.done&&(u=x.return)&&u.call(x)}finally{if(l)throw l.error}}g||(p=!1)}}catch(N){i={error:N}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(i)throw i.error}}}}}catch(N){o={error:N}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}},e.isPartialRow=function(r,n){var o,a,i,s,l,u;try{for(var d=xn(n),f=d.next();!f.done;f=d.next()){var h=f.value,p=!0;try{for(var v=(i=void 0,xn(r)),y=v.next();!y.done;y=v.next()){var w=y.value,g=!1;try{for(var x=(l=void 0,xn(h.getPairs())),m=x.next();!m.done;m=x.next()){var C=m.value;if(w.equals(C)){g=!0;break}}}catch(N){l={error:N}}finally{try{m&&!m.done&&(u=x.return)&&u.call(x)}finally{if(l)throw l.error}}if(!g){p=!1;break}}}catch(N){i={error:N}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(i)throw i.error}}if(p)return!0}}catch(N){o={error:N}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=Pv.buildBitArray(r),o=tm(n),a=o.parseInformation(),i=r[0].getFinderPattern().getResultPoints(),s=r[r.length-1].getFinderPattern().getResultPoints(),l=[i[0],i[1],s[0],s[1]];return new Kt(a,null,null,l,ke.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),o=r.getRightChar();if(o===null)return!1;for(var a=o.getChecksumPortion(),i=2,s=1;s<this.pairs.size();++s){var l=this.pairs.get(s);a+=l.getLeftChar().getChecksumPortion(),i++;var u=l.getRightChar();u!=null&&(a+=u.getChecksumPortion(),i++)}a%=211;var d=211*(i-4)+a;return d===n.getValue()},e.getNextSecondBar=function(r,n){var o;return r.get(n)?(o=r.getNextUnset(n),o=r.getNextSet(o)):(o=r.getNextSet(n),o=r.getNextUnset(o)),o},e.prototype.retrieveNextPair=function(r,n,o){var a=n.length%2===0;this.startFromEven&&(a=!a);var i,s=!0,l=-1;do this.findNextPair(r,n,l),i=this.parseFoundFinderPattern(r,o,a),i===null?l=e.getNextSecondBar(r,this.startEnd[0]):s=!1;while(s);var u=this.decodeDataCharacter(r,i,a,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new K;var d;try{d=this.decodeDataCharacter(r,i,a,!1)}catch(f){d=null,console.log(f)}return new Yd(u,d,i,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,o){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var i=r.getSize(),s;if(o>=0)s=o;else if(this.isEmptyPair(n))s=0;else{var l=n[n.length-1];s=l.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var d=!1;s<i&&(d=!r.get(s),!!d);)s++;for(var f=0,h=s,p=s;p<i;p++)if(r.get(p)!==d)a[f]++;else{if(f===3){if(u&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=h,this.startEnd[1]=p;return}u&&e.reverseCounters(a),h+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,f--}else f++;a[f]=1,d=!d}throw new K},e.reverseCounters=function(r){for(var n=r.length,o=0;o<n/2;++o){var a=r[o];r[o]=r[n-o-1],r[n-o-1]=a}},e.prototype.parseFoundFinderPattern=function(r,n,o){var a,i,s;if(o){for(var l=this.startEnd[0]-1;l>=0&&!r.get(l);)l--;l++,a=this.startEnd[0]-l,i=l,s=this.startEnd[1]}else i=this.startEnd[0],s=r.getNextUnset(this.startEnd[1]+1),a=s-this.startEnd[1];var u=this.getDecodeFinderCounters();ot.arraycopy(u,0,u,1,u.length-1),u[0]=a;var d;try{d=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new $1(d,[i,s],i,s,n)},e.prototype.decodeDataCharacter=function(r,n,o,a){for(var i=this.getDataCharacterCounters(),s=0;s<i.length;s++)i[s]=0;if(a)e.recordPatternInReverse(r,n.getStartEnd()[0],i);else{e.recordPattern(r,n.getStartEnd()[1],i);for(var l=0,u=i.length-1;l<u;l++,u--){var d=i[l];i[l]=i[u],i[u]=d}}var f=17,h=We.sum(new Int32Array(i))/f,p=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-p)/p>.3)throw new K;for(var v=this.getOddCounts(),y=this.getEvenCounts(),w=this.getOddRoundingErrors(),g=this.getEvenRoundingErrors(),l=0;l<i.length;l++){var x=1*i[l]/h,m=x+.5;if(m<1){if(x<.3)throw new K;m=1}else if(m>8){if(x>8.7)throw new K;m=8}var C=l/2;l&1?(y[C]=m,g[C]=x-m):(v[C]=m,w[C]=x-m)}this.adjustOddEvenCounts(f);for(var N=4*n.getValue()+(o?0:2)+(a?0:1)-1,S=0,I=0,l=v.length-1;l>=0;l--){if(e.isNotA1left(n,o,a)){var R=e.WEIGHTS[N][2*l];I+=v[l]*R}S+=v[l]}for(var z=0,l=y.length-1;l>=0;l--)if(e.isNotA1left(n,o,a)){var R=e.WEIGHTS[N][2*l+1];z+=y[l]*R}var k=I+z;if(S&1||S>13||S<4)throw new K;var oe=(13-S)/2,se=e.SYMBOL_WIDEST[oe],A=9-se,D=To.getRSSvalue(v,se,!0),F=To.getRSSvalue(y,A,!1),T=e.EVEN_TOTAL_SUBSET[oe],O=e.GSUM[oe],M=D*T+F+O;return new ls(M,k)},e.isNotA1left=function(r,n,o){return!(r.getValue()===0&&n&&o)},e.prototype.adjustOddEvenCounts=function(r){var n=We.sum(new Int32Array(this.getOddCounts())),o=We.sum(new Int32Array(this.getEvenCounts())),a=!1,i=!1;n>13?i=!0:n<4&&(a=!0);var s=!1,l=!1;o>13?l=!0:o<4&&(s=!0);var u=n+o-r,d=(n&1)===1,f=(o&1)===0;if(u===1)if(d){if(f)throw new K;i=!0}else{if(!f)throw new K;l=!0}else if(u===-1)if(d){if(f)throw new K;a=!0}else{if(!f)throw new K;s=!0}else if(u===0){if(d){if(!f)throw new K;n<o?(a=!0,l=!0):(i=!0,s=!0)}else if(f)throw new K}else throw new K;if(a){if(i)throw new K;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new K;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Wn),am=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),im=function(t){am(e,t);function e(r,n,o){var a=t.call(this,r,n)||this;return a.count=0,a.finderPattern=o,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(ls),sm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sl=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kd=function(t){sm(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,o){var a,i,s,l,u=this.decodePair(n,!1,r,o);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var d=this.decodePair(n,!0,r,o);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var f=sl(this.possibleLeftPairs),h=f.next();!h.done;h=f.next()){var p=h.value;if(p.getCount()>1)try{for(var v=(s=void 0,sl(this.possibleRightPairs)),y=v.next();!y.done;y=v.next()){var w=y.value;if(w.getCount()>1&&e.checkChecksum(p,w))return e.constructResult(p,w)}}catch(g){s={error:g}}finally{try{y&&!y.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}}}catch(g){a={error:g}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}throw new K},e.addOrTally=function(r,n){var o,a;if(n!=null){var i=!1;try{for(var s=sl(r),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.getValue()===n.getValue()){u.incrementCount(),i=!0;break}}}catch(d){o={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}i||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var o=4537077*r.getValue()+n.getValue(),a=new String(o).toString(),i=new Ge,s=13-a.length;s>0;s--)i.append("0");i.append(a);for(var l=0,s=0;s<13;s++){var u=i.charAt(s).charCodeAt(0)-48;l+=s&1?u:3*u}l=10-l%10,l===10&&(l=0),i.append(l.toString());var d=r.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new Kt(i.toString(),null,0,[d[0],d[1],f[0],f[1]],ke.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var o=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,a=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,o===a},e.prototype.decodePair=function(r,n,o,a){try{var i=this.findFinderPattern(r,n),s=this.parseFoundFinderPattern(r,o,n,i),l=a==null?null:a.get(dt.NEED_RESULT_POINT_CALLBACK);if(l!=null){var u=(i[0]+i[1])/2;n&&(u=r.getSize()-1-u),l.foundPossibleResultPoint(new Oe(u,o))}var d=this.decodeDataCharacter(r,s,!0),f=this.decodeDataCharacter(r,s,!1);return new im(1597*d.getValue()+f.getValue(),d.getChecksumPortion()+4*f.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,o){for(var a=this.getDataCharacterCounters(),i=0;i<a.length;i++)a[i]=0;if(o)Dt.recordPatternInReverse(r,n.getStartEnd()[0],a);else{Dt.recordPattern(r,n.getStartEnd()[1]+1,a);for(var s=0,l=a.length-1;s<l;s++,l--){var u=a[s];a[s]=a[l],a[l]=u}}for(var d=o?16:15,f=We.sum(new Int32Array(a))/d,h=this.getOddCounts(),p=this.getEvenCounts(),v=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),s=0;s<a.length;s++){var w=a[s]/f,g=Math.floor(w+.5);g<1?g=1:g>8&&(g=8);var x=Math.floor(s/2);s&1?(p[x]=g,y[x]=w-g):(h[x]=g,v[x]=w-g)}this.adjustOddEvenCounts(o,d);for(var m=0,C=0,s=h.length-1;s>=0;s--)C*=9,C+=h[s],m+=h[s];for(var N=0,S=0,s=p.length-1;s>=0;s--)N*=9,N+=p[s],S+=p[s];var I=C+3*N;if(o){if(m&1||m>12||m<4)throw new K;var R=(12-m)/2,z=e.OUTSIDE_ODD_WIDEST[R],k=9-z,oe=To.getRSSvalue(h,z,!1),se=To.getRSSvalue(p,k,!0),A=e.OUTSIDE_EVEN_TOTAL_SUBSET[R],D=e.OUTSIDE_GSUM[R];return new ls(oe*A+se+D,I)}else{if(S&1||S>10||S<4)throw new K;var R=(10-S)/2,z=e.INSIDE_ODD_WIDEST[R],k=9-z,oe=To.getRSSvalue(h,z,!0),se=To.getRSSvalue(p,k,!1),F=e.INSIDE_ODD_TOTAL_SUBSET[R],D=e.INSIDE_GSUM[R];return new ls(se*F+oe+D,I)}},e.prototype.findFinderPattern=function(r,n){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var a=r.getSize(),i=!1,s=0;s<a&&(i=!r.get(s),n!==i);)s++;for(var l=0,u=s,d=s;d<a;d++)if(r.get(d)!==i)o[l]++;else{if(l===3){if(Wn.isFinderPattern(o))return[u,d];u+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,l--}else l++;o[l]=1,i=!i}throw new K},e.prototype.parseFoundFinderPattern=function(r,n,o,a){for(var i=r.get(a[0]),s=a[0]-1;s>=0&&i!==r.get(s);)s--;s++;var l=a[0]-s,u=this.getDecodeFinderCounters(),d=new Int32Array(u.length);ot.arraycopy(u,0,d,1,u.length-1),d[0]=l;var f=this.parseFinderValue(d,e.FINDER_PATTERNS),h=s,p=a[1];return o&&(h=r.getSize()-1-h,p=r.getSize()-1-p),new $1(f,[s,a[1]],h,p,n)},e.prototype.adjustOddEvenCounts=function(r,n){var o=We.sum(new Int32Array(this.getOddCounts())),a=We.sum(new Int32Array(this.getEvenCounts())),i=!1,s=!1,l=!1,u=!1;r?(o>12?s=!0:o<4&&(i=!0),a>12?u=!0:a<4&&(l=!0)):(o>11?s=!0:o<5&&(i=!0),a>10?u=!0:a<4&&(l=!0));var d=o+a-n,f=(o&1)===(r?1:0),h=(a&1)===1;if(d===1)if(f){if(h)throw new K;s=!0}else{if(!h)throw new K;u=!0}else if(d===-1)if(f){if(h)throw new K;i=!0}else{if(!h)throw new K;l=!0}else if(d===0){if(f){if(!h)throw new K;o<a?(i=!0,u=!0):(s=!0,l=!0)}else if(h)throw new K}else throw new K;if(i){if(s)throw new K;Wn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Wn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(u)throw new K;Wn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Wn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Wn),lm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ga=function(t){lm(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var o=r?r.get(dt.POSSIBLE_FORMATS):null,a=r&&r.get(dt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,i=r&&r.get(dt.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return o&&((o.includes(ke.EAN_13)||o.includes(ke.UPC_A)||o.includes(ke.EAN_8)||o.includes(ke.UPC_E))&&n.readers.push(new il(r)),o.includes(ke.CODE_39)&&n.readers.push(new Fd(a,i)),o.includes(ke.CODE_93)&&n.readers.push(new Ud),o.includes(ke.CODE_128)&&n.readers.push(new Ld),o.includes(ke.ITF)&&n.readers.push(new Gd),o.includes(ke.CODABAR)&&n.readers.push(new Tv),o.includes(ke.RSS_14)&&n.readers.push(new Kd),o.includes(ke.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new om))),n.readers.length===0&&(n.readers.push(new il(r)),n.readers.push(new Fd),n.readers.push(new Ud),n.readers.push(new il(r)),n.readers.push(new Ld),n.readers.push(new Gd),n.readers.push(new Kd)),n}return e.prototype.decodeRow=function(r,n,o){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(r,n,o)}catch{}throw new K},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(Dt),cm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){cm(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new ga(n),r,n)||this}return e})(Zo);var Zd=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ze=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Ye=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),um=function(){function t(e,r,n,o,a,i){var s,l;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=o,this.dataRegionSizeColumns=a,this.ecBlocks=i;var u=0,d=i.getECCodewords(),f=i.getECBlocks();try{for(var h=Zd(f),p=h.next();!p.done;p=h.next()){var v=p.value;u+=v.getCount()*(v.getDataCodewords()+d)}}catch(y){s={error:y}}finally{try{p&&!p.done&&(l=h.return)&&l.call(h)}finally{if(s)throw s.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,o;if(e&1||r&1)throw new ve;try{for(var a=Zd(t.VERSIONS),i=a.next();!i.done;i=a.next()){var s=i.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s}}catch(l){n={error:l}}finally{try{i&&!i.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}throw new ve},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new Ze(5,new Ye(1,3))),new t(2,12,12,10,10,new Ze(7,new Ye(1,5))),new t(3,14,14,12,12,new Ze(10,new Ye(1,8))),new t(4,16,16,14,14,new Ze(12,new Ye(1,12))),new t(5,18,18,16,16,new Ze(14,new Ye(1,18))),new t(6,20,20,18,18,new Ze(18,new Ye(1,22))),new t(7,22,22,20,20,new Ze(20,new Ye(1,30))),new t(8,24,24,22,22,new Ze(24,new Ye(1,36))),new t(9,26,26,24,24,new Ze(28,new Ye(1,44))),new t(10,32,32,14,14,new Ze(36,new Ye(1,62))),new t(11,36,36,16,16,new Ze(42,new Ye(1,86))),new t(12,40,40,18,18,new Ze(48,new Ye(1,114))),new t(13,44,44,20,20,new Ze(56,new Ye(1,144))),new t(14,48,48,22,22,new Ze(68,new Ye(1,174))),new t(15,52,52,24,24,new Ze(42,new Ye(2,102))),new t(16,64,64,14,14,new Ze(56,new Ye(2,140))),new t(17,72,72,16,16,new Ze(36,new Ye(4,92))),new t(18,80,80,18,18,new Ze(48,new Ye(4,114))),new t(19,88,88,20,20,new Ze(56,new Ye(4,144))),new t(20,96,96,22,22,new Ze(68,new Ye(4,174))),new t(21,104,104,24,24,new Ze(56,new Ye(6,136))),new t(22,120,120,18,18,new Ze(68,new Ye(6,175))),new t(23,132,132,20,20,new Ze(62,new Ye(8,163))),new t(24,144,144,22,22,new Ze(62,new Ye(8,156),new Ye(2,155))),new t(25,8,18,6,16,new Ze(7,new Ye(1,5))),new t(26,8,32,6,14,new Ze(11,new Ye(1,10))),new t(27,12,26,10,24,new Ze(14,new Ye(1,16))),new t(28,12,36,10,16,new Ze(18,new Ye(1,22))),new t(29,16,36,14,16,new Ze(24,new Ye(1,32))),new t(30,16,48,14,22,new Ze(28,new Ye(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),dm=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new ve;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new en(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return um.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,o=0,a=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth(),s=!1,l=!1,u=!1,d=!1;do if(n===a&&o===0&&!s)e[r++]=this.readCorner1(a,i)&255,n-=2,o+=2,s=!0;else if(n===a-2&&o===0&&i&3&&!l)e[r++]=this.readCorner2(a,i)&255,n-=2,o+=2,l=!0;else if(n===a+4&&o===2&&!(i&7)&&!u)e[r++]=this.readCorner3(a,i)&255,n-=2,o+=2,u=!0;else if(n===a-2&&o===0&&(i&7)===4&&!d)e[r++]=this.readCorner4(a,i)&255,n-=2,o+=2,d=!0;else{do n<a&&o>=0&&!this.readMappingMatrix.get(o,n)&&(e[r++]=this.readUtah(n,o,a,i)&255),n-=2,o+=2;while(n>=0&&o<i);n+=1,o+=3;do n>=0&&o<i&&!this.readMappingMatrix.get(o,n)&&(e[r++]=this.readUtah(n,o,a,i)&255),n+=2,o-=2;while(n<a&&o>=0);n+=3,o+=1}while(n<a||o<i);if(r!==this.version.getTotalCodewords())throw new ve;return e},t.prototype.readModule=function(e,r,n,o){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=o,e+=4-(o+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,o){var a=0;return this.readModule(e-2,r-2,n,o)&&(a|=1),a<<=1,this.readModule(e-2,r-1,n,o)&&(a|=1),a<<=1,this.readModule(e-1,r-2,n,o)&&(a|=1),a<<=1,this.readModule(e-1,r-1,n,o)&&(a|=1),a<<=1,this.readModule(e-1,r,n,o)&&(a|=1),a<<=1,this.readModule(e,r-2,n,o)&&(a|=1),a<<=1,this.readModule(e,r-1,n,o)&&(a|=1),a<<=1,this.readModule(e,r,n,o)&&(a|=1),a},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new Be("Dimension of bitMatrix must match the version size");for(var o=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),i=r/o|0,s=n/a|0,l=i*o,u=s*a,d=new en(u,l),f=0;f<i;++f)for(var h=f*o,p=0;p<s;++p)for(var v=p*a,y=0;y<o;++y)for(var w=f*(o+2)+1+y,g=h+y,x=0;x<a;++x){var m=p*(a+2)+1+x;if(e.get(m,w)){var C=v+x;d.set(C,g)}}return d},t}(),qd=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fm=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,o,a,i,s=r.getECBlocks(),l=0,u=s.getECBlocks();try{for(var d=qd(u),f=d.next();!f.done;f=d.next()){var h=f.value;l+=h.getCount()}}catch(D){n={error:D}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}var p=new Array(l),v=0;try{for(var y=qd(u),w=y.next();!w.done;w=y.next())for(var h=w.value,g=0;g<h.getCount();g++){var x=h.getDataCodewords(),m=s.getECCodewords()+x;p[v++]=new t(x,new Uint8Array(m))}}catch(D){a={error:D}}finally{try{w&&!w.done&&(i=y.return)&&i.call(y)}finally{if(a)throw a.error}}for(var C=p[0].codewords.length,N=C-s.getECCodewords(),S=N-1,I=0,g=0;g<S;g++)for(var R=0;R<v;R++)p[R].codewords[g]=e[I++];for(var z=r.getVersionNumber()===24,k=z?8:v,R=0;R<k;R++)p[R].codewords[N-1]=e[I++];for(var oe=p[0].codewords.length,g=N;g<oe;g++)for(var R=0;R<v;R++){var se=z?(R+8)%v:R,A=z&&se>7?g-1:g;p[se].codewords[A]=e[I++]}if(I!==e.length)throw new Be;return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),V1=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Be(""+e);var r=0,n=this.bitOffset,o=this.byteOffset,a=this.bytes;if(n>0){var i=8-n,s=e<i?e:i,l=i-s,u=255>>8-s<<l;r=(a[o]&u)>>l,e-=s,n+=s,n===8&&(n=0,o++)}if(e>0){for(;e>=8;)r=r<<8|a[o]&255,o++,e-=8;if(e>0){var l=8-e,u=255>>l<<l;r=r<<e|(a[o]&u)>>l,n+=e}}return this.bitOffset=n,this.byteOffset=o,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),Ct;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ct||(Ct={}));var hm=function(){function t(){}return t.decode=function(e){var r=new V1(e),n=new Ge,o=new Ge,a=new Array,i=Ct.ASCII_ENCODE;do if(i===Ct.ASCII_ENCODE)i=this.decodeAsciiSegment(r,n,o);else{switch(i){case Ct.C40_ENCODE:this.decodeC40Segment(r,n);break;case Ct.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Ct.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Ct.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Ct.BASE256_ENCODE:this.decodeBase256Segment(r,n,a);break;default:throw new ve}i=Ct.ASCII_ENCODE}while(i!==Ct.PAD_ENCODE&&r.available()>0);return o.length()>0&&n.append(o.toString()),new As(e,n.toString(),a.length===0?null:a,null)},t.decodeAsciiSegment=function(e,r,n){var o=!1;do{var a=e.readBits(8);if(a===0)throw new ve;if(a<=128)return o&&(a+=128),r.append(String.fromCharCode(a-1)),Ct.ASCII_ENCODE;if(a===129)return Ct.PAD_ENCODE;if(a<=229){var i=a-130;i<10&&r.append("0"),r.append(""+i)}else switch(a){case 230:return Ct.C40_ENCODE;case 231:return Ct.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:o=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Ct.ANSIX12_ENCODE;case 239:return Ct.TEXT_ENCODE;case 240:return Ct.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new ve;break}}while(e.available()>0);return Ct.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,o=[],a=0;do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),o);for(var s=0;s<3;s++){var l=o[s];switch(a){case 0:if(l<3)a=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new ve;break;case 1:n?(r.append(String.fromCharCode(l+128)),n=!1):r.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(l){case 27:r.append("");break;case 30:n=!0;break;default:throw new ve}a=0;break;case 3:n?(r.append(String.fromCharCode(l+224)),n=!1):r.append(String.fromCharCode(l+96)),a=0;break;default:throw new ve}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,o=[],a=0;do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),o);for(var s=0;s<3;s++){var l=o[s];switch(a){case 0:if(l<3)a=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new ve;break;case 1:n?(r.append(String.fromCharCode(l+128)),n=!1):r.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(l){case 27:r.append("");break;case 30:n=!0;break;default:throw new ve}a=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),a=0}else throw new ve;break;default:throw new ve}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),n);for(var a=0;a<3;a++){var i=n[a];switch(i){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(i<14)r.append(String.fromCharCode(i+44));else if(i<40)r.append(String.fromCharCode(i+51));else throw new ve;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var o=(e<<8)+r-1,a=Math.floor(o/1600);n[0]=a,o-=a*1600,a=Math.floor(o/40),n[1]=a,n[2]=o-a*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var o=e.readBits(6);if(o===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}o&32||(o|=64),r.append(String.fromCharCode(o))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var o=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),o++),i;if(a===0?i=e.available()/8|0:a<250?i=a:i=250*(a-249)+this.unrandomize255State(e.readBits(8),o++),i<0)throw new ve;for(var s=new Uint8Array(i),l=0;l<i;l++){if(e.available()<8)throw new ve;s[l]=this.unrandomize255State(e.readBits(8),o++)}n.push(s);try{r.append(Or.decode(s,He.ISO88591))}catch(u){throw new Za("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,o=e-n;return o>=0?o:o+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),pm=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gm=function(){function t(){this.rsDecoder=new Is(sr.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,o=new dm(e),a=o.getVersion(),i=o.readCodewords(),s=fm.getDataBlocks(i,a),l=0;try{for(var u=pm(s),d=u.next();!d.done;d=u.next()){var f=d.value;l+=f.getNumDataCodewords()}}catch(m){r={error:m}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var h=new Uint8Array(l),p=s.length,v=0;v<p;v++){var y=s[v],w=y.getCodewords(),g=y.getNumDataCodewords();this.correctErrors(w,g);for(var x=0;x<g;x++)h[x*p+v]=w[x]}return hm.decode(h)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Pt}for(var o=0;o<r;o++)e[o]=n[o]},t}(),xm=function(){function t(e){this.image=e,this.rectangleDetector=new uc(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new K;r=this.shiftToModuleCenter(r);var n=r[0],o=r[1],a=r[2],i=r[3],s=this.transitionsBetween(n,i)+1,l=this.transitionsBetween(a,i)+1;(s&1)===1&&(s+=1),(l&1)===1&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var u=t.sampleGrid(this.image,n,o,a,i,s,l);return new mu(u,[n,o,a,i])},t.shiftPoint=function(e,r,n){var o=(r.getX()-e.getX())/(n+1),a=(r.getY()-e.getY())/(n+1);return new Oe(e.getX()+o,e.getY()+a)},t.moveAway=function(e,r,n){var o=e.getX(),a=e.getY();return o<r?o-=1:o+=1,a<n?a-=1:a+=1,new Oe(o,a)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],o=e[3],a=e[2],i=this.transitionsBetween(r,n),s=this.transitionsBetween(n,o),l=this.transitionsBetween(o,a),u=this.transitionsBetween(a,r),d=i,f=[a,r,n,o];return d>s&&(d=s,f[0]=r,f[1]=n,f[2]=o,f[3]=a),d>l&&(d=l,f[0]=n,f[1]=o,f[2]=a,f[3]=r),d>u&&(f[0]=o,f[1]=a,f[2]=r,f[3]=n),f},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],o=e[2],a=e[3],i=this.transitionsBetween(r,a),s=t.shiftPoint(n,o,(i+1)*4),l=t.shiftPoint(o,n,(i+1)*4),u=this.transitionsBetween(s,r),d=this.transitionsBetween(l,a);return u<d?(e[0]=r,e[1]=n,e[2]=o,e[3]=a):(e[0]=n,e[1]=o,e[2]=a,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],o=e[2],a=e[3],i=this.transitionsBetween(r,a),s=this.transitionsBetween(n,a),l=t.shiftPoint(r,n,(s+1)*4),u=t.shiftPoint(o,n,(i+1)*4);i=this.transitionsBetween(l,a),s=this.transitionsBetween(u,a);var d=new Oe(a.getX()+(o.getX()-n.getX())/(i+1),a.getY()+(o.getY()-n.getY())/(i+1)),f=new Oe(a.getX()+(r.getX()-n.getX())/(s+1),a.getY()+(r.getY()-n.getY())/(s+1));if(!this.isValid(d))return this.isValid(f)?f:null;if(!this.isValid(f))return d;var h=this.transitionsBetween(l,d)+this.transitionsBetween(u,d),p=this.transitionsBetween(l,f)+this.transitionsBetween(u,f);return h>p?d:f},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],o=e[2],a=e[3],i=this.transitionsBetween(r,a)+1,s=this.transitionsBetween(o,a)+1,l=t.shiftPoint(r,n,s*4),u=t.shiftPoint(o,n,i*4);i=this.transitionsBetween(l,a)+1,s=this.transitionsBetween(u,a)+1,(i&1)===1&&(i+=1),(s&1)===1&&(s+=1);var d=(r.getX()+n.getX()+o.getX()+a.getX())/4,f=(r.getY()+n.getY()+o.getY()+a.getY())/4;r=t.moveAway(r,d,f),n=t.moveAway(n,d,f),o=t.moveAway(o,d,f),a=t.moveAway(a,d,f);var h,p;return l=t.shiftPoint(r,n,s*4),l=t.shiftPoint(l,a,i*4),h=t.shiftPoint(n,r,s*4),h=t.shiftPoint(h,o,i*4),u=t.shiftPoint(o,a,s*4),u=t.shiftPoint(u,n,i*4),p=t.shiftPoint(a,o,s*4),p=t.shiftPoint(p,r,i*4),[l,h,u,p]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,o,a,i,s){var l=yu.getInstance();return l.sampleGrid(e,i,s,.5,.5,i-.5,.5,i-.5,s-.5,.5,s-.5,r.getX(),r.getY(),a.getX(),a.getY(),o.getX(),o.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),o=Math.trunc(e.getY()),a=Math.trunc(r.getX()),i=Math.trunc(r.getY()),s=Math.abs(i-o)>Math.abs(a-n);if(s){var l=n;n=o,o=l,l=a,a=i,i=l}for(var u=Math.abs(a-n),d=Math.abs(i-o),f=-u/2,h=o<i?1:-1,p=n<a?1:-1,v=0,y=this.image.get(s?o:n,s?n:o),w=n,g=o;w!==a;w+=p){var x=this.image.get(s?g:w,s?w:g);if(x!==y&&(v++,y=x),f+=d,f>0){if(g===i)break;g+=h,f-=u}}return v},t}(),hc=function(){function t(){this.decoder=new gm}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,o;if(r!=null&&r.has(dt.PURE_BARCODE)){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(a),o=t.NO_POINTS}else{var i=new xm(e.getBlackMatrix()).detect();n=this.decoder.decode(i.getBits()),o=i.getPoints()}var s=n.getRawBytes(),l=new Kt(n.getText(),s,8*s.length,o,ke.DATA_MATRIX,ot.currentTimeMillis()),u=n.getByteSegments();u!=null&&l.putMetadata(Ut.BYTE_SEGMENTS,u);var d=n.getECLevel();return d!=null&&l.putMetadata(Ut.ERROR_CORRECTION_LEVEL,d),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new K;var o=this.moduleSize(r,e),a=r[1],i=n[1],s=r[0],l=n[0],u=(l-s+1)/o,d=(i-a+1)/o;if(u<=0||d<=0)throw new K;var f=o/2;a+=f,s+=f;for(var h=new en(u,d),p=0;p<d;p++)for(var v=a+p*o,y=0;y<u;y++)e.get(s+y*o,v)&&h.set(y,p);return h},t.moduleSize=function(e,r){for(var n=r.getWidth(),o=e[0],a=e[1];o<n&&r.get(o,a);)o++;if(o===n)throw new K;var i=o-e[0];if(i===0)throw new K;return i},t.NO_POINTS=[],t}(),vm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){vm(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new hc,r)||this}return e})(Zo);var Oo;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(Oo||(Oo={}));var mm=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Lr(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new Be;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Oo.L,"L",1),t.M=new t(Oo.M,"M",0),t.Q=new t(Oo.Q,"Q",3),t.H=new t(Oo.H,"H",2),t}(),ym=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},X1=function(){function t(e){this.errorCorrectionLevel=mm.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return $e.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,o,a=Number.MAX_SAFE_INTEGER,i=0;try{for(var s=ym(t.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var u=l.value,d=u[0];if(d===e||d===r)return new t(u[1]);var f=t.numBitsDiffering(e,d);f<a&&(i=u[1],a=f),e!==r&&(f=t.numBitsDiffering(r,d),f<a&&(i=u[1],a=f))}}catch(h){n={error:h}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return a<=3?new t(i):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),wm=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,o=this.ecBlocks;try{for(var a=wm(o),i=a.next();!i.done;i=a.next()){var s=i.value;n+=s.getCount()}}catch(l){e={error:l}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),b=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),_m=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eo=function(){function t(e,r){for(var n,o,a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=a;var s=0,l=a[0].getECCodewordsPerBlock(),u=a[0].getECBlocks();try{for(var d=_m(u),f=d.next();!f.done;f=d.next()){var h=f.value;s+=h.getCount()*(h.getDataCodewords()+l)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}this.totalCodewords=s}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new ve;try{return this.getVersionForNumber((e-17)/4)}catch{throw new ve}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new Be;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,o=0;o<t.VERSION_DECODE_INFO.length;o++){var a=t.VERSION_DECODE_INFO[o];if(a===e)return t.getVersionForNumber(o+7);var i=X1.numBitsDiffering(e,a);i<r&&(n=o+7,r=i)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new en(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,o=0;o<n;o++)for(var a=this.alignmentPatternCenters[o]-2,i=0;i<n;i++)o===0&&(i===0||i===n-1)||o===n-1&&i===0||r.setRegion(this.alignmentPatternCenters[i]-2,a,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new L(7,new b(1,19)),new L(10,new b(1,16)),new L(13,new b(1,13)),new L(17,new b(1,9))),new t(2,Int32Array.from([6,18]),new L(10,new b(1,34)),new L(16,new b(1,28)),new L(22,new b(1,22)),new L(28,new b(1,16))),new t(3,Int32Array.from([6,22]),new L(15,new b(1,55)),new L(26,new b(1,44)),new L(18,new b(2,17)),new L(22,new b(2,13))),new t(4,Int32Array.from([6,26]),new L(20,new b(1,80)),new L(18,new b(2,32)),new L(26,new b(2,24)),new L(16,new b(4,9))),new t(5,Int32Array.from([6,30]),new L(26,new b(1,108)),new L(24,new b(2,43)),new L(18,new b(2,15),new b(2,16)),new L(22,new b(2,11),new b(2,12))),new t(6,Int32Array.from([6,34]),new L(18,new b(2,68)),new L(16,new b(4,27)),new L(24,new b(4,19)),new L(28,new b(4,15))),new t(7,Int32Array.from([6,22,38]),new L(20,new b(2,78)),new L(18,new b(4,31)),new L(18,new b(2,14),new b(4,15)),new L(26,new b(4,13),new b(1,14))),new t(8,Int32Array.from([6,24,42]),new L(24,new b(2,97)),new L(22,new b(2,38),new b(2,39)),new L(22,new b(4,18),new b(2,19)),new L(26,new b(4,14),new b(2,15))),new t(9,Int32Array.from([6,26,46]),new L(30,new b(2,116)),new L(22,new b(3,36),new b(2,37)),new L(20,new b(4,16),new b(4,17)),new L(24,new b(4,12),new b(4,13))),new t(10,Int32Array.from([6,28,50]),new L(18,new b(2,68),new b(2,69)),new L(26,new b(4,43),new b(1,44)),new L(24,new b(6,19),new b(2,20)),new L(28,new b(6,15),new b(2,16))),new t(11,Int32Array.from([6,30,54]),new L(20,new b(4,81)),new L(30,new b(1,50),new b(4,51)),new L(28,new b(4,22),new b(4,23)),new L(24,new b(3,12),new b(8,13))),new t(12,Int32Array.from([6,32,58]),new L(24,new b(2,92),new b(2,93)),new L(22,new b(6,36),new b(2,37)),new L(26,new b(4,20),new b(6,21)),new L(28,new b(7,14),new b(4,15))),new t(13,Int32Array.from([6,34,62]),new L(26,new b(4,107)),new L(22,new b(8,37),new b(1,38)),new L(24,new b(8,20),new b(4,21)),new L(22,new b(12,11),new b(4,12))),new t(14,Int32Array.from([6,26,46,66]),new L(30,new b(3,115),new b(1,116)),new L(24,new b(4,40),new b(5,41)),new L(20,new b(11,16),new b(5,17)),new L(24,new b(11,12),new b(5,13))),new t(15,Int32Array.from([6,26,48,70]),new L(22,new b(5,87),new b(1,88)),new L(24,new b(5,41),new b(5,42)),new L(30,new b(5,24),new b(7,25)),new L(24,new b(11,12),new b(7,13))),new t(16,Int32Array.from([6,26,50,74]),new L(24,new b(5,98),new b(1,99)),new L(28,new b(7,45),new b(3,46)),new L(24,new b(15,19),new b(2,20)),new L(30,new b(3,15),new b(13,16))),new t(17,Int32Array.from([6,30,54,78]),new L(28,new b(1,107),new b(5,108)),new L(28,new b(10,46),new b(1,47)),new L(28,new b(1,22),new b(15,23)),new L(28,new b(2,14),new b(17,15))),new t(18,Int32Array.from([6,30,56,82]),new L(30,new b(5,120),new b(1,121)),new L(26,new b(9,43),new b(4,44)),new L(28,new b(17,22),new b(1,23)),new L(28,new b(2,14),new b(19,15))),new t(19,Int32Array.from([6,30,58,86]),new L(28,new b(3,113),new b(4,114)),new L(26,new b(3,44),new b(11,45)),new L(26,new b(17,21),new b(4,22)),new L(26,new b(9,13),new b(16,14))),new t(20,Int32Array.from([6,34,62,90]),new L(28,new b(3,107),new b(5,108)),new L(26,new b(3,41),new b(13,42)),new L(30,new b(15,24),new b(5,25)),new L(28,new b(15,15),new b(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new L(28,new b(4,116),new b(4,117)),new L(26,new b(17,42)),new L(28,new b(17,22),new b(6,23)),new L(30,new b(19,16),new b(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new L(28,new b(2,111),new b(7,112)),new L(28,new b(17,46)),new L(30,new b(7,24),new b(16,25)),new L(24,new b(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new L(30,new b(4,121),new b(5,122)),new L(28,new b(4,47),new b(14,48)),new L(30,new b(11,24),new b(14,25)),new L(30,new b(16,15),new b(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new L(30,new b(6,117),new b(4,118)),new L(28,new b(6,45),new b(14,46)),new L(30,new b(11,24),new b(16,25)),new L(30,new b(30,16),new b(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new L(26,new b(8,106),new b(4,107)),new L(28,new b(8,47),new b(13,48)),new L(30,new b(7,24),new b(22,25)),new L(30,new b(22,15),new b(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new L(28,new b(10,114),new b(2,115)),new L(28,new b(19,46),new b(4,47)),new L(28,new b(28,22),new b(6,23)),new L(30,new b(33,16),new b(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new L(30,new b(8,122),new b(4,123)),new L(28,new b(22,45),new b(3,46)),new L(30,new b(8,23),new b(26,24)),new L(30,new b(12,15),new b(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new L(30,new b(3,117),new b(10,118)),new L(28,new b(3,45),new b(23,46)),new L(30,new b(4,24),new b(31,25)),new L(30,new b(11,15),new b(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new L(30,new b(7,116),new b(7,117)),new L(28,new b(21,45),new b(7,46)),new L(30,new b(1,23),new b(37,24)),new L(30,new b(19,15),new b(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new L(30,new b(5,115),new b(10,116)),new L(28,new b(19,47),new b(10,48)),new L(30,new b(15,24),new b(25,25)),new L(30,new b(23,15),new b(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new L(30,new b(13,115),new b(3,116)),new L(28,new b(2,46),new b(29,47)),new L(30,new b(42,24),new b(1,25)),new L(30,new b(23,15),new b(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new L(30,new b(17,115)),new L(28,new b(10,46),new b(23,47)),new L(30,new b(10,24),new b(35,25)),new L(30,new b(19,15),new b(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new L(30,new b(17,115),new b(1,116)),new L(28,new b(14,46),new b(21,47)),new L(30,new b(29,24),new b(19,25)),new L(30,new b(11,15),new b(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new L(30,new b(13,115),new b(6,116)),new L(28,new b(14,46),new b(23,47)),new L(30,new b(44,24),new b(7,25)),new L(30,new b(59,16),new b(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new L(30,new b(12,121),new b(7,122)),new L(28,new b(12,47),new b(26,48)),new L(30,new b(39,24),new b(14,25)),new L(30,new b(22,15),new b(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new L(30,new b(6,121),new b(14,122)),new L(28,new b(6,47),new b(34,48)),new L(30,new b(46,24),new b(10,25)),new L(30,new b(2,15),new b(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new L(30,new b(17,122),new b(4,123)),new L(28,new b(29,46),new b(14,47)),new L(30,new b(49,24),new b(10,25)),new L(30,new b(24,15),new b(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new L(30,new b(4,122),new b(18,123)),new L(28,new b(13,46),new b(32,47)),new L(30,new b(48,24),new b(14,25)),new L(30,new b(42,15),new b(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new L(30,new b(20,117),new b(4,118)),new L(28,new b(40,47),new b(7,48)),new L(30,new b(43,24),new b(22,25)),new L(30,new b(10,15),new b(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new L(30,new b(19,118),new b(6,119)),new L(28,new b(18,47),new b(31,48)),new L(30,new b(34,24),new b(34,25)),new L(30,new b(20,15),new b(61,16)))],t}(),Ot;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(Ot||(Ot={}));var Qd=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var o=0;o<r;o++)this.isMasked(n,o)&&e.flip(o,n)},t.values=new Map([[Ot.DATA_MASK_000,new t(Ot.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[Ot.DATA_MASK_001,new t(Ot.DATA_MASK_001,function(e,r){return(e&1)===0})],[Ot.DATA_MASK_010,new t(Ot.DATA_MASK_010,function(e,r){return r%3===0})],[Ot.DATA_MASK_011,new t(Ot.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[Ot.DATA_MASK_100,new t(Ot.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[Ot.DATA_MASK_101,new t(Ot.DATA_MASK_101,function(e,r){return e*r%6===0})],[Ot.DATA_MASK_110,new t(Ot.DATA_MASK_110,function(e,r){return e*r%6<3})],[Ot.DATA_MASK_111,new t(Ot.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),Cm=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new ve;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var o=this.bitMatrix.getHeight(),a=0,i=o-7,n=o-1;n>=i;n--)a=this.copyBit(8,n,a);for(var r=o-8;r<o;r++)a=this.copyBit(r,8,a);if(this.parsedFormatInfo=X1.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new ve},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return eo.getVersionForNumber(r);for(var n=0,o=e-11,a=5;a>=0;a--)for(var i=e-9;i>=o;i--)n=this.copyBit(i,a,n);var s=eo.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var i=5;i>=0;i--)for(var a=e-9;a>=o;a--)n=this.copyBit(i,a,n);if(s=eo.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new ve},t.prototype.copyBit=function(e,r,n){var o=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return o?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=Qd.values.get(e.getDataMask()),o=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,o);for(var a=r.buildFunctionPattern(),i=!0,s=new Uint8Array(r.getTotalCodewords()),l=0,u=0,d=0,f=o-1;f>0;f-=2){f===6&&f--;for(var h=0;h<o;h++)for(var p=i?o-1-h:h,v=0;v<2;v++)a.get(f-v,p)||(d++,u<<=1,this.bitMatrix.get(f-v,p)&&(u|=1),d===8&&(s[l++]=u,d=0,u=0));i=!i}if(l!==r.getTotalCodewords())throw new ve;return s},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=Qd.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var o=r+1,a=e.getHeight();o<a;o++)e.get(r,o)!==e.get(o,r)&&(e.flip(o,r),e.flip(r,o))},t}(),Jd=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bm=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var o,a,i,s;if(e.length!==r.getTotalCodewords())throw new Be;var l=r.getECBlocksForLevel(n),u=0,d=l.getECBlocks();try{for(var f=Jd(d),h=f.next();!h.done;h=f.next()){var p=h.value;u+=p.getCount()}}catch(A){o={error:A}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}var v=new Array(u),y=0;try{for(var w=Jd(d),g=w.next();!g.done;g=w.next())for(var p=g.value,x=0;x<p.getCount();x++){var m=p.getDataCodewords(),C=l.getECCodewordsPerBlock()+m;v[y++]=new t(m,new Uint8Array(C))}}catch(A){i={error:A}}finally{try{g&&!g.done&&(s=w.return)&&s.call(w)}finally{if(i)throw i.error}}for(var N=v[0].codewords.length,S=v.length-1;S>=0;){var I=v[S].codewords.length;if(I===N)break;S--}S++;for(var R=N-l.getECCodewordsPerBlock(),z=0,x=0;x<R;x++)for(var k=0;k<y;k++)v[k].codewords[x]=e[z++];for(var k=S;k<y;k++)v[k].codewords[R]=e[z++];for(var oe=v[0].codewords.length,x=R;x<oe;x++)for(var k=0;k<y;k++){var se=k<S?x:x+1;v[k].codewords[se]=e[z++]}return v},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Nr;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Nr||(Nr={}));var st=function(){function t(e,r,n,o){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=o,t.FOR_BITS.set(o,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new Be;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Nr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Nr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Nr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Nr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Nr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Nr.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Nr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Nr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Nr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Nr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),Sm=function(){function t(){}return t.decode=function(e,r,n,o){var a=new V1(e),i=new Ge,s=new Array,l=-1,u=-1;try{var d=null,f=!1,h=void 0;do{if(a.available()<4)h=st.TERMINATOR;else{var p=a.readBits(4);h=st.forBits(p)}switch(h){case st.TERMINATOR:break;case st.FNC1_FIRST_POSITION:case st.FNC1_SECOND_POSITION:f=!0;break;case st.STRUCTURED_APPEND:if(a.available()<16)throw new ve;l=a.readBits(8),u=a.readBits(8);break;case st.ECI:var v=t.parseECIValue(a);if(d=Et.getCharacterSetECIByValue(v),d===null)throw new ve;break;case st.HANZI:var y=a.readBits(4),w=a.readBits(h.getCharacterCountBits(r));y===t.GB2312_SUBSET&&t.decodeHanziSegment(a,i,w);break;default:var g=a.readBits(h.getCharacterCountBits(r));switch(h){case st.NUMERIC:t.decodeNumericSegment(a,i,g);break;case st.ALPHANUMERIC:t.decodeAlphanumericSegment(a,i,g,f);break;case st.BYTE:t.decodeByteSegment(a,i,g,d,s,o);break;case st.KANJI:t.decodeKanjiSegment(a,i,g);break;default:throw new ve}break}}while(h!==st.TERMINATOR)}catch{throw new ve}return new As(e,i.toString(),s.length===0?null:s,n===null?null:n.toString(),l,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new ve;for(var o=new Uint8Array(2*n),a=0;n>0;){var i=e.readBits(13),s=i/96<<8&4294967295|i%96;s<959?s+=41377:s+=42657,o[a]=s>>8&255,o[a+1]=s&255,a+=2,n--}try{r.append(Or.decode(o,He.GB2312))}catch(l){throw new ve(l)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new ve;for(var o=new Uint8Array(2*n),a=0;n>0;){var i=e.readBits(13),s=i/192<<8&4294967295|i%192;s<7936?s+=33088:s+=49472,o[a]=s>>8,o[a+1]=s,a+=2,n--}try{r.append(Or.decode(o,He.SHIFT_JIS))}catch(l){throw new ve(l)}},t.decodeByteSegment=function(e,r,n,o,a,i){if(8*n>e.available())throw new ve;for(var s=new Uint8Array(n),l=0;l<n;l++)s[l]=e.readBits(8);var u;o===null?u=He.guessEncoding(s,i):u=o.getName();try{r.append(Or.decode(s,u))}catch(d){throw new ve(d)}a.push(s)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new ve;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,o){for(var a=r.length();n>1;){if(e.available()<11)throw new ve;var i=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(i/45))),r.append(t.toAlphaNumericChar(i%45)),n-=2}if(n===1){if(e.available()<6)throw new ve;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(o)for(var s=a;s<r.length();s++)r.charAt(s)==="%"&&(s<r.length()-1&&r.charAt(s+1)==="%"?r.deleteCharAt(s+1):r.setCharAt(s,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new ve;var o=e.readBits(10);if(o>=1e3)throw new ve;r.append(t.toAlphaNumericChar(Math.floor(o/100))),r.append(t.toAlphaNumericChar(Math.floor(o/10)%10)),r.append(t.toAlphaNumericChar(o%10)),n-=3}if(n===2){if(e.available()<7)throw new ve;var a=e.readBits(7);if(a>=100)throw new ve;r.append(t.toAlphaNumericChar(Math.floor(a/10))),r.append(t.toAlphaNumericChar(a%10))}else if(n===1){if(e.available()<4)throw new ve;var i=e.readBits(4);if(i>=10)throw new ve;r.append(t.toAlphaNumericChar(i))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var o=e.readBits(16);return(r&31)<<16&4294967295|o}throw new ve},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),W1=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),ef=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nm=function(){function t(){this.rsDecoder=new Is(sr.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(en.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new Cm(e),o=null;try{return this.decodeBitMatrixParser(n,r)}catch(i){o=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var a=this.decodeBitMatrixParser(n,r);return a.setOther(new W1(!0)),a}catch(i){throw o!==null?o:i}},t.prototype.decodeBitMatrixParser=function(e,r){var n,o,a,i,s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),d=bm.getDataBlocks(u,s,l),f=0;try{for(var h=ef(d),p=h.next();!p.done;p=h.next()){var v=p.value;f+=v.getNumDataCodewords()}}catch(S){n={error:S}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}var y=new Uint8Array(f),w=0;try{for(var g=ef(d),x=g.next();!x.done;x=g.next()){var v=x.value,m=v.getCodewords(),C=v.getNumDataCodewords();this.correctErrors(m,C);for(var N=0;N<C;N++)y[w++]=m[N]}}catch(S){a={error:S}}finally{try{x&&!x.done&&(i=g.return)&&i.call(g)}finally{if(a)throw a.error}}return Sm.decode(y,s,l,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Pt}for(var o=0;o<r;o++)e[o]=n[o]},t}(),Em=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Am=function(t){Em(e,t);function e(r,n,o){var a=t.call(this,r,n)||this;return a.estimatedModuleSize=o,a}return e.prototype.aboutEquals=function(r,n,o){if(Math.abs(n-this.getY())<=r&&Math.abs(o-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,o){var a=(this.getX()+n)/2,i=(this.getY()+r)/2,s=(this.estimatedModuleSize+o)/2;return new e(a,i,s)},e}(Oe),Im=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dm=function(){function t(e,r,n,o,a,i,s){this.image=e,this.startX=r,this.startY=n,this.width=o,this.height=a,this.moduleSize=i,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,o=e+n,a=this.startY+r/2,i=new Int32Array(3),s=this.image,l=0;l<r;l++){var u=a+(l&1?-Math.floor((l+1)/2):Math.floor((l+1)/2));i[0]=0,i[1]=0,i[2]=0;for(var d=e;d<o&&!s.get(d,u);)d++;for(var f=0;d<o;){if(s.get(d,u))if(f===1)i[1]++;else if(f===2){if(this.foundPatternCross(i)){var h=this.handlePossibleCenter(i,u,d);if(h!==null)return h}i[0]=i[2],i[1]=1,i[2]=0,f=1}else i[++f]++;else f===1&&f++,i[f]++;d++}if(this.foundPatternCross(i)){var h=this.handlePossibleCenter(i,u,o);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new K},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,o=0;o<3;o++)if(Math.abs(r-e[o])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,o){var a=this.image,i=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=e;l>=0&&a.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&!a.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<i&&a.get(r,l)&&s[1]<=n;)s[1]++,l++;if(l===i||s[1]>n)return NaN;for(;l<i&&!a.get(r,l)&&s[2]<=n;)s[2]++,l++;if(s[2]>n)return NaN;var u=s[0]+s[1]+s[2];return 5*Math.abs(u-o)>=2*o?NaN:this.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var o,a,i=e[0]+e[1]+e[2],s=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,s,2*e[1],i);if(!isNaN(l)){var u=(e[0]+e[1]+e[2])/3;try{for(var d=Im(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.aboutEquals(u,l,s))return h.combineEstimate(l,s,u)}}catch(v){o={error:v}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}var p=new Am(s,l,u);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},t}(),Tm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Om=function(t){Tm(e,t);function e(r,n,o,a){var i=t.call(this,r,n)||this;return i.estimatedModuleSize=o,i.count=a,a===void 0&&(i.count=1),i}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,o){if(Math.abs(n-this.getY())<=r&&Math.abs(o-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,o){var a=this.count+1,i=(this.count*this.getX()+n)/a,s=(this.count*this.getY()+r)/a,l=(this.count*this.estimatedModuleSize+o)/a;return new e(i,s,l,a)},e}(Oe),Mm=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),sa=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rm=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(dt.TRY_HARDER)!==void 0,n=e!=null&&e.get(dt.PURE_BARCODE)!==void 0,o=this.image,a=o.getHeight(),i=o.getWidth(),s=Math.floor(3*a/(4*t.MAX_MODULES));(s<t.MIN_SKIP||r)&&(s=t.MIN_SKIP);for(var l=!1,u=new Int32Array(5),d=s-1;d<a&&!l;d+=s){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,h=0;h<i;h++)if(o.get(h,d))(f&1)===1&&f++,u[f]++;else if(f&1)u[f]++;else if(f===4)if(t.foundPatternCross(u)){var p=this.handlePossibleCenter(u,d,h,n);if(p===!0)if(s=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>u[2]&&(d+=v-u[2]-s,h=i-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;if(t.foundPatternCross(u)){var p=this.handlePossibleCenter(u,d,i,n);p===!0&&(s=u[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var y=this.selectBestPatterns();return Oe.orderBestPatterns(y),new Mm(y)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var o=e[n];if(o===0)return!1;r+=o}if(r<7)return!1;var a=r/7,i=a/2;return Math.abs(a-e[0])<i&&Math.abs(a-e[1])<i&&Math.abs(3*a-e[2])<3*i&&Math.abs(a-e[3])<i&&Math.abs(a-e[4])<i},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,o){for(var a=this.getCrossCheckStateCount(),i=0,s=this.image;e>=i&&r>=i&&s.get(r-i,e-i);)a[2]++,i++;if(e<i||r<i)return!1;for(;e>=i&&r>=i&&!s.get(r-i,e-i)&&a[1]<=n;)a[1]++,i++;if(e<i||r<i||a[1]>n)return!1;for(;e>=i&&r>=i&&s.get(r-i,e-i)&&a[0]<=n;)a[0]++,i++;if(a[0]>n)return!1;var l=s.getHeight(),u=s.getWidth();for(i=1;e+i<l&&r+i<u&&s.get(r+i,e+i);)a[2]++,i++;if(e+i>=l||r+i>=u)return!1;for(;e+i<l&&r+i<u&&!s.get(r+i,e+i)&&a[3]<n;)a[3]++,i++;if(e+i>=l||r+i>=u||a[3]>=n)return!1;for(;e+i<l&&r+i<u&&s.get(r+i,e+i)&&a[4]<n;)a[4]++,i++;if(a[4]>=n)return!1;var d=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(d-o)<2*o&&t.foundPatternCross(a)},t.prototype.crossCheckVertical=function(e,r,n,o){for(var a=this.image,i=a.getHeight(),s=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(r,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&a.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<i&&a.get(r,l);)s[2]++,l++;if(l===i)return NaN;for(;l<i&&!a.get(r,l)&&s[3]<n;)s[3]++,l++;if(l===i||s[3]>=n)return NaN;for(;l<i&&a.get(r,l)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var u=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(u-o)>=2*o?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,o){for(var a=this.image,i=a.getWidth(),s=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(l,r);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(l,r)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&a.get(l,r)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<i&&a.get(l,r);)s[2]++,l++;if(l===i)return NaN;for(;l<i&&!a.get(l,r)&&s[3]<n;)s[3]++,l++;if(l===i||s[3]>=n)return NaN;for(;l<i&&a.get(l,r)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var u=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(u-o)>=o?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,r,n,o){var a=e[0]+e[1]+e[2]+e[3]+e[4],i=t.centerFromEnd(e,n),s=this.crossCheckVertical(r,Math.floor(i),e[2],a);if(!isNaN(s)&&(i=this.crossCheckHorizontal(Math.floor(i),Math.floor(s),e[2],a),!isNaN(i)&&(!o||this.crossCheckDiagonal(Math.floor(s),Math.floor(i),e[2],a)))){for(var l=a/7,u=!1,d=this.possibleCenters,f=0,h=d.length;f<h;f++){var p=d[f];if(p.aboutEquals(l,s,i)){d[f]=p.combineEstimate(s,i,l),u=!0;break}}if(!u){var v=new Om(i,s,l);d.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var o=null;try{for(var a=sa(this.possibleCenters),i=a.next();!i.done;i=a.next()){var s=i.value;if(s.getCount()>=t.CENTER_QUORUM)if(o==null)o=s;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-s.getX())-Math.abs(o.getY()-s.getY()))/2)}}catch(l){e={error:l}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,o,a=0,i=0,s=this.possibleCenters.length;try{for(var l=sa(this.possibleCenters),u=l.next();!u.done;u=l.next()){var d=u.value;d.getCount()>=t.CENTER_QUORUM&&(a++,i+=d.getEstimatedModuleSize())}}catch(y){e={error:y}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}if(a<3)return!1;var f=i/s,h=0;try{for(var p=sa(this.possibleCenters),v=p.next();!v.done;v=p.next()){var d=v.value;h+=Math.abs(d.getEstimatedModuleSize()-f)}}catch(y){n={error:y}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}return h<=.05*i},t.prototype.selectBestPatterns=function(){var e,r,n,o,a=this.possibleCenters.length;if(a<3)throw new K;var i=this.possibleCenters,s;if(a>3){var l=0,u=0;try{for(var d=sa(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value,p=h.getEstimatedModuleSize();l+=p,u+=p*p}}catch(N){e={error:N}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}s=l/a;var v=Math.sqrt(u/a-s*s);i.sort(function(N,S){var I=Math.abs(S.getEstimatedModuleSize()-s),R=Math.abs(N.getEstimatedModuleSize()-s);return I<R?-1:I>R?1:0});for(var y=Math.max(.2*s,v),w=0;w<i.length&&i.length>3;w++){var g=i[w];Math.abs(g.getEstimatedModuleSize()-s)>y&&(i.splice(w,1),w--)}}if(i.length>3){var l=0;try{for(var x=sa(i),m=x.next();!m.done;m=x.next()){var C=m.value;l+=C.getEstimatedModuleSize()}}catch(S){n={error:S}}finally{try{m&&!m.done&&(o=x.return)&&o.call(x)}finally{if(n)throw n.error}}s=l/i.length,i.sort(function(S,I){if(I.getCount()===S.getCount()){var R=Math.abs(I.getEstimatedModuleSize()-s),z=Math.abs(S.getEstimatedModuleSize()-s);return R<z?1:R>z?-1:0}else return I.getCount()-S.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),Pm=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(dt.NEED_RESULT_POINT_CALLBACK);var r=new Rm(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),o=e.getBottomLeft(),a=this.calculateModuleSize(r,n,o);if(a<1)throw new K("No pattern found in proccess finder.");var i=t.computeDimension(r,n,o,a),s=eo.getProvisionalVersionForDimension(i),l=s.getDimensionForVersion()-7,u=null;if(s.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+o.getX(),f=n.getY()-r.getY()+o.getY(),h=1-3/l,p=Math.floor(r.getX()+h*(d-r.getX())),v=Math.floor(r.getY()+h*(f-r.getY())),y=4;y<=16;y<<=1)try{u=this.findAlignmentInRegion(a,p,v,y);break}catch(m){if(!(m instanceof K))throw m}var w=t.createTransform(r,n,o,u,i),g=t.sampleGrid(this.image,w,i),x;return u===null?x=[o,r,n]:x=[o,r,n,u],new mu(g,x)},t.createTransform=function(e,r,n,o,a){var i=a-3.5,s,l,u,d;return o!==null?(s=o.getX(),l=o.getY(),u=i-3,d=u):(s=r.getX()-e.getX()+n.getX(),l=r.getY()-e.getY()+n.getY(),u=i,d=i),G1.quadrilateralToQuadrilateral(3.5,3.5,i,3.5,u,d,3.5,i,e.getX(),e.getY(),r.getX(),r.getY(),s,l,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var o=yu.getInstance();return o.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,o){var a=We.round(Oe.distance(e,r)/o),i=We.round(Oe.distance(e,n)/o),s=Math.floor((a+i)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new K("Dimensions could be not found.")}return s},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?o/7:isNaN(o)?n/7:(n+o)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,o){var a=this.sizeOfBlackWhiteBlackRun(e,r,n,o),i=1,s=e-(n-e);s<0?(i=e/(e-s),s=0):s>=this.image.getWidth()&&(i=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var l=Math.floor(r-(o-r)*i);return i=1,l<0?(i=r/(r-l),l=0):l>=this.image.getHeight()&&(i=(this.image.getHeight()-1-r)/(l-r),l=this.image.getHeight()-1),s=Math.floor(e+(s-e)*i),a+=this.sizeOfBlackWhiteBlackRun(e,r,s,l),a-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,o){var a=Math.abs(o-r)>Math.abs(n-e);if(a){var i=e;e=r,r=i,i=n,n=o,o=i}for(var s=Math.abs(n-e),l=Math.abs(o-r),u=-s/2,d=e<n?1:-1,f=r<o?1:-1,h=0,p=n+d,v=e,y=r;v!==p;v+=d){var w=a?y:v,g=a?v:y;if(h===1===this.image.get(w,g)){if(h===2)return We.distance(v,y,e,r);h++}if(u+=l,u>0){if(y===o)break;y+=f,u-=s}}return h===2?We.distance(n+d,o,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,o){var a=Math.floor(o*e),i=Math.max(0,r-a),s=Math.min(this.image.getWidth()-1,r+a);if(s-i<e*3)throw new K("Alignment top exceeds estimated module size.");var l=Math.max(0,n-a),u=Math.min(this.image.getHeight()-1,n+a);if(u-l<e*3)throw new K("Alignment bottom exceeds estimated module size.");var d=new Dm(this.image,i,l,s-i,u-l,e,this.resultPointCallback);return d.find()},t}(),pc=function(){function t(){this.decoder=new Nm}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,o;if(r!=null&&r.get(dt.PURE_BARCODE)!==void 0){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,r),o=t.NO_POINTS}else{var i=new Pm(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(i.getBits(),r),o=i.getPoints()}n.getOther()instanceof W1&&n.getOther().applyMirroredCorrection(o);var s=new Kt(n.getText(),n.getRawBytes(),void 0,o,ke.QR_CODE,void 0),l=n.getByteSegments();l!==null&&s.putMetadata(Ut.BYTE_SEGMENTS,l);var u=n.getECLevel();return u!==null&&s.putMetadata(Ut.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(s.putMetadata(Ut.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(Ut.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new K;var o=this.moduleSize(r,e),a=r[1],i=n[1],s=r[0],l=n[0];if(s>=l||a>=i)throw new K;if(i-a!==l-s&&(l=s+(i-a),l>=e.getWidth()))throw new K;var u=Math.round((l-s+1)/o),d=Math.round((i-a+1)/o);if(u<=0||d<=0)throw new K;if(d!==u)throw new K;var f=Math.floor(o/2);a+=f,s+=f;var h=s+Math.floor((u-1)*o)-l;if(h>0){if(h>f)throw new K;s-=h}var p=a+Math.floor((d-1)*o)-i;if(p>0){if(p>f)throw new K;a-=p}for(var v=new en(u,d),y=0;y<d;y++)for(var w=a+Math.floor(y*o),g=0;g<u;g++)e.get(s+Math.floor(g*o),w)&&v.set(g,y);return v},t.moduleSize=function(e,r){for(var n=r.getHeight(),o=r.getWidth(),a=e[0],i=e[1],s=!0,l=0;a<o&&i<n;){if(s!==r.get(a,i)){if(++l===5)break;s=!s}a++,i++}if(a===o||i===n)throw new K;return(a-e[0])/7},t.NO_POINTS=new Array,t}(),jm=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ve=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return We.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var o=new Int32Array(e.length),a=0;try{for(var i=jm(e),s=i.next();!s.done;s=i.next()){var l=s.value;o[a++]=l}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},t.getCodeword=function(e){var r=At.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),km=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),Bm=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lm=function(){function t(){}return t.detectMultiple=function(e,r,n){var o=e.getBlackMatrix(),a=t.detect(n,o);return a.length||(o=o.clone(),o.rotate180(),a=t.detect(n,o)),new km(o,a)},t.detect=function(e,r){for(var n,o,a=new Array,i=0,s=0,l=!1;i<r.getHeight();){var u=t.findVertices(r,i,s);if(u[0]==null&&u[3]==null){if(!l)break;l=!1,s=0;try{for(var d=(n=void 0,Bm(a)),f=d.next();!f.done;f=d.next()){var h=f.value;h[1]!=null&&(i=Math.trunc(Math.max(i,h[1].getY()))),h[3]!=null&&(i=Math.max(i,Math.trunc(h[3].getY())))}}catch(p){n={error:p}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}i+=t.ROW_STEP;continue}if(l=!0,a.push(u),!e)break;u[2]!=null?(s=Math.trunc(u[2].getX()),i=Math.trunc(u[2].getY())):(s=Math.trunc(u[4].getX()),i=Math.trunc(u[4].getY()))}return a},t.findVertices=function(e,r,n){var o=e.getHeight(),a=e.getWidth(),i=new Array(8);return t.copyToResult(i,t.findRowsWithPattern(e,o,a,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),i[4]!=null&&(n=Math.trunc(i[4].getX()),r=Math.trunc(i[4].getY())),t.copyToResult(i,t.findRowsWithPattern(e,o,a,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),i},t.copyToResult=function(e,r,n){for(var o=0;o<n.length;o++)e[n[o]]=r[o]},t.findRowsWithPattern=function(e,r,n,o,a,i){for(var s=new Array(4),l=!1,u=new Int32Array(i.length);o<r;o+=t.ROW_STEP){var d=t.findGuardPattern(e,a,o,n,!1,i,u);if(d!=null){for(;o>0;){var f=t.findGuardPattern(e,a,--o,n,!1,i,u);if(f!=null)d=f;else{o++;break}}s[0]=new Oe(d[0],o),s[1]=new Oe(d[1],o),l=!0;break}}var h=o+1;if(l){for(var p=0,f=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);h<r;h++){var d=t.findGuardPattern(e,f[0],h,n,!1,i,u);if(d!=null&&Math.abs(f[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-d[1])<t.MAX_PATTERN_DRIFT)f=d,p=0;else{if(p>t.SKIPPED_ROW_COUNT_MAX)break;p++}}h-=p+1,s[2]=new Oe(f[0],h),s[3]=new Oe(f[1],h)}return h-o<t.BARCODE_MIN_HEIGHT&&At.fill(s,null),s},t.findGuardPattern=function(e,r,n,o,a,i,s){At.fillWithin(s,0,s.length,0);for(var l=r,u=0;e.get(l,n)&&l>0&&u++<t.MAX_PIXEL_DRIFT;)l--;for(var d=l,f=0,h=i.length,p=a;d<o;d++){var v=e.get(d,n);if(v!==p)s[f]++;else{if(f===h-1){if(t.patternMatchVariance(s,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([l,d]);l+=s[0]+s[1],ot.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,p=!p}}return f===h-1&&t.patternMatchVariance(s,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([l,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var o=e.length,a=0,i=0,s=0;s<o;s++)a+=e[s],i+=r[s];if(a<i)return 1/0;var l=a/i;n*=l;for(var u=0,d=0;d<o;d++){var f=e[d],h=r[d]*l,p=f>h?f-h:h-f;if(p>n)return 1/0;u+=p}return u/a},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),Fm=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qn=function(){function t(e,r){if(r.length===0)throw new Be;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var o=1;o<n&&r[o]===0;)o++;o===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-o),ot.arraycopy(r,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var o=0;try{for(var a=Fm(this.coefficients),i=a.next();!i.done;i=a.next()){var s=i.value;o=this.field.add(o,s)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}for(var l=this.coefficients[0],u=this.coefficients.length,d=1;d<u;d++)l=this.field.add(this.field.multiply(e,l),this.coefficients[d]);return l},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new Be("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var o=r;r=n,n=o}var a=new Int32Array(n.length),i=n.length-r.length;ot.arraycopy(n,0,a,0,i);for(var s=i;s<n.length;s++)a[s]=this.field.add(r[s-i],n[s]);return new t(this.field,a)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Be("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Be("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,o=e.coefficients,a=o.length,i=new Int32Array(n+a-1),s=0;s<n;s++)for(var l=r[s],u=0;u<a;u++)i[s+u]=this.field.add(i[s+u],this.field.multiply(l,o[u]));return new t(this.field,i)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),o=0;o<r;o++)n[o]=this.field.multiply(this.coefficients[o],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Be;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,o=new Int32Array(n+e),a=0;a<n;a++)o[a]=this.field.multiply(this.coefficients[a],r);return new t(this.field,o)},t.prototype.toString=function(){for(var e=new Ge,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),Um=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Be;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new U1;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),Gm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$m=function(t){Gm(e,t);function e(r,n){var o=t.call(this)||this;o.modulus=r,o.expTable=new Int32Array(r),o.logTable=new Int32Array(r);for(var a=1,i=0;i<r;i++)o.expTable[i]=a,a=a*n%r;for(var i=0;i<r-1;i++)o.logTable[o.expTable[i]]=i;return o.zero=new qn(o,new Int32Array([0])),o.one=new qn(o,new Int32Array([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Be;if(n===0)return this.zero;var o=new Int32Array(r+1);return o[0]=n,new qn(this,o)},e.PDF417_GF=new e(Ve.NUMBER_OF_CODEWORDS,3),e}(Um),zm=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hm=function(){function t(){this.field=$m.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var o,a,i=new qn(this.field,e),s=new Int32Array(r),l=!1,u=r;u>0;u--){var d=i.evaluateAt(this.field.exp(u));s[r-u]=d,d!==0&&(l=!0)}if(!l)return 0;var f=this.field.getOne();if(n!=null)try{for(var h=zm(n),p=h.next();!p.done;p=h.next()){var v=p.value,y=this.field.exp(e.length-1-v),w=new qn(this.field,new Int32Array([this.field.subtract(0,y),1]));f=f.multiply(w)}}catch(R){o={error:R}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}for(var g=new qn(this.field,s),x=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),g,r),m=x[0],C=x[1],N=this.findErrorLocations(m),S=this.findErrorMagnitudes(C,m,N),u=0;u<N.length;u++){var I=e.length-1-this.field.log(N[u]);if(I<0)throw Pt.getChecksumInstance();e[I]=this.field.subtract(e[I],S[u])}return N.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var o=e;e=r,r=o}for(var a=e,i=r,s=this.field.getZero(),l=this.field.getOne();i.getDegree()>=Math.round(n/2);){var u=a,d=s;if(a=i,s=l,a.isZero())throw Pt.getChecksumInstance();i=u;for(var f=this.field.getZero(),h=a.getCoefficient(a.getDegree()),p=this.field.inverse(h);i.getDegree()>=a.getDegree()&&!i.isZero();){var v=i.getDegree()-a.getDegree(),y=this.field.multiply(i.getCoefficient(i.getDegree()),p);f=f.add(this.field.buildMonomial(v,y)),i=i.subtract(a.multiplyByMonomial(v,y))}l=f.multiply(s).subtract(d).negative()}var w=l.getCoefficient(0);if(w===0)throw Pt.getChecksumInstance();var g=this.field.inverse(w),x=l.multiply(g),m=i.multiply(g);return[x,m]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),o=0,a=1;a<this.field.getSize()&&o<r;a++)e.evaluateAt(a)===0&&(n[o]=this.field.inverse(a),o++);if(o!==r)throw Pt.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var o=r.getDegree(),a=new Int32Array(o),i=1;i<=o;i++)a[o-i]=this.field.multiply(i,r.getCoefficient(i));for(var s=new qn(this.field,a),l=n.length,u=new Int32Array(l),i=0;i<l;i++){var d=this.field.inverse(n[i]),f=this.field.subtract(0,e.evaluateAt(d)),h=this.field.inverse(s.evaluateAt(d));u[i]=this.field.multiply(f,h)}return u},t}(),gc=function(){function t(e,r,n,o,a){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,o,a)}return t.prototype.constructor_1=function(e,r,n,o,a){var i=r==null||n==null,s=o==null||a==null;if(i&&s)throw new K;i?(r=new Oe(0,o.getY()),n=new Oe(0,a.getY())):s&&(o=new Oe(e.getWidth()-1,r.getY()),a=new Oe(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=o,this.bottomRight=a,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(o.getX(),a.getX())),this.minY=Math.trunc(Math.min(r.getY(),o.getY())),this.maxY=Math.trunc(Math.max(n.getY(),a.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var o=this.topLeft,a=this.bottomLeft,i=this.topRight,s=this.bottomRight;if(e>0){var l=n?this.topLeft:this.topRight,u=Math.trunc(l.getY()-e);u<0&&(u=0);var d=new Oe(l.getX(),u);n?o=d:i=d}if(r>0){var f=n?this.bottomLeft:this.bottomRight,h=Math.trunc(f.getY()+r);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var p=new Oe(f.getX(),h);n?a=p:s=p}return new t(this.image,o,a,i,s)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),Vm=function(){function t(e,r,n,o){this.columnCount=e,this.errorCorrectionLevel=o,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),_u=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function o(i,s,l,u,d,f){if(i==="%%")return"%";if(r[++n]!==void 0){i=u?parseInt(u.substr(1)):void 0;var h=d?parseInt(d.substr(1)):void 0,p;switch(f){case"s":p=r[n];break;case"c":p=r[n][0];break;case"f":p=parseFloat(r[n]).toFixed(i);break;case"p":p=parseFloat(r[n]).toPrecision(i);break;case"e":p=parseFloat(r[n]).toExponential(i);break;case"x":p=parseInt(r[n]).toString(h||16);break;case"d":p=parseFloat(parseInt(r[n],h||10).toPrecision(i)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(h);for(var v=parseInt(l),y=l&&l[0]+""=="0"?"0":" ";p.length<v;)p=s!==void 0?p+y:y+p;return p}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,o)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),Xm=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y1=function(){function t(e){this.boundingBox=new gc(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var o=this.imageRowToCodewordIndex(e)-n;if(o>=0&&(r=this.codewords[o],r!=null)||(o=this.imageRowToCodewordIndex(e)+n,o<this.codewords.length&&(r=this.codewords[o],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new _u,o=0;try{for(var a=Xm(this.codewords),i=a.next();!i.done;i=a.next()){var s=i.value;if(s==null){n.format("%3d:    |   %n",o++);continue}n.format("%3d: %3d|%3d%n",o++,s.getRowNumber(),s.getValue())}}catch(l){e={error:l}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),Wm=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ym=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a},xa=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,o=new Array,a=function(f,h){var p={getKey:function(){return f},getValue:function(){return h}};p.getValue()>n?(n=p.getValue(),o=[],o.push(p.getKey())):p.getValue()===n&&o.push(p.getKey())};try{for(var i=Wm(this.values.entries()),s=i.next();!s.done;s=i.next()){var l=Ym(s.value,2),u=l[0],d=l[1];a(u,d)}}catch(f){e={error:f}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return Ve.toIntArray(o)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),Km=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ll=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tf=function(t){Km(e,t);function e(r,n){var o=t.call(this,r)||this;return o._isLeft=n,o}return e.prototype.setRowNumbers=function(){var r,n;try{for(var o=ll(this.getCodewords()),a=o.next();!a.done;a=o.next()){var i=a.value;i!=null&&i.setRowNumberAsRowIndicatorColumn()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var o=this.getBoundingBox(),a=this._isLeft?o.getTopLeft():o.getTopRight(),i=this._isLeft?o.getBottomLeft():o.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=-1,d=1,f=0,h=s;h<l;h++)if(n[h]!=null){var p=n[h],v=p.getRowNumber()-u;if(v===0)f++;else if(v===1)d=Math.max(d,f),f=1,u=p.getRowNumber();else if(v<0||p.getRowNumber()>=r.getRowCount()||v>h)n[h]=null;else{var y=void 0;d>2?y=(d-2)*v:y=v;for(var w=y>=h,g=1;g<=y&&!w;g++)w=n[h-g]!=null;w?n[h]=null:(u=p.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var r,n,o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);var a=new Int32Array(o.getRowCount());try{for(var i=ll(this.getCodewords()),s=i.next();!s.done;s=i.next()){var l=s.value;if(l!=null){var u=l.getRowNumber();if(u>=a.length)continue;a[u]++}}}catch(d){r={error:d}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),o=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(o.getY())),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.getCodewords(),u=-1,d=i;d<s;d++)if(l[d]!=null){var f=l[d];f.setRowNumberAsRowIndicatorColumn();var h=f.getRowNumber()-u;h===0||(h===1?u=f.getRowNumber():f.getRowNumber()>=r.getRowCount()?l[d]=null:u=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,o=this.getCodewords(),a=new xa,i=new xa,s=new xa,l=new xa;try{for(var u=ll(o),d=u.next();!d.done;d=u.next()){var f=d.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var h=f.getValue()%30,p=f.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:i.setValue(h*3+1);break;case 1:l.setValue(h/3),s.setValue(h%3);break;case 2:a.setValue(h+1);break}}}}catch(y){r={error:y}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(a.getValue().length===0||i.getValue().length===0||s.getValue().length===0||l.getValue().length===0||a.getValue()[0]<1||i.getValue()[0]+s.getValue()[0]<Ve.MIN_ROWS_IN_BARCODE||i.getValue()[0]+s.getValue()[0]>Ve.MAX_ROWS_IN_BARCODE)return null;var v=new Vm(a.getValue()[0],i.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(o,v),v},e.prototype.removeIncorrectCodewords=function(r,n){for(var o=0;o<r.length;o++){var a=r[o];if(r[o]!=null){var i=a.getValue()%30,s=a.getRowNumber();if(s>n.getRowCount()){r[o]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:i*3+1!==n.getRowCountUpperPart()&&(r[o]=null);break;case 1:(Math.trunc(i/3)!==n.getErrorCorrectionLevel()||i%3!==n.getRowCountLowerPart())&&(r[o]=null);break;case 2:i+1!==n.getColumnCount()&&(r[o]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(Y1),Zm=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qm=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Ve.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),o=0;o<n.length;o++)n[o]!=null&&(n[o].hasValidRowNumber()||this.adjustRowNumbers(r,o,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var o=1;o<=this.barcodeColumnCount;o++){var a=this.detectionResultColumns[o].getCodewords()[n];a!=null&&(a.setRowNumber(e[n].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[o].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var o=r[n].getRowNumber(),a=0,i=this.barcodeColumnCount+1;i>0&&a<this.ADJUST_ROW_NUMBER_SKIP;i--){var s=this.detectionResultColumns[i].getCodewords()[n];s!=null&&(a=t.adjustRowNumberIfValid(o,a,s),s.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var o=r[n].getRowNumber(),a=0,i=1;i<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;i++){var s=this.detectionResultColumns[i].getCodewords()[n];s!=null&&(a=t.adjustRowNumberIfValid(o,a,s),s.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var o,a;if(this.detectionResultColumns[e-1]!=null){var i=n[r],s=this.detectionResultColumns[e-1].getCodewords(),l=s;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=s[r],u[3]=l[r],r>0&&(u[0]=n[r-1],u[4]=s[r-1],u[5]=l[r-1]),r>1&&(u[8]=n[r-2],u[10]=s[r-2],u[11]=l[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=s[r+1],u[7]=l[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=s[r+2],u[13]=l[r+2]);try{for(var d=Zm(u),f=d.next();!f.done;f=d.next()){var h=f.value;if(t.adjustRowNumber(i,h))return}}catch(p){o={error:p}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new _u,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var o=0;o<this.barcodeColumnCount+2;o++){if(this.detectionResultColumns[o]==null){r.format("    |   ");continue}var a=this.detectionResultColumns[o].getCodewords()[n];if(a==null){r.format("    |   ");continue}r.format(" %3d|%3d",a.getRowNumber(),a.getValue())}r.format("%n")}return r.toString()},t}(),Qm=function(){function t(e,r,n,o){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(o)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),Jm=function(){function t(){}return t.initialize=function(){for(var e=0;e<Ve.SYMBOL_TABLE.length;e++)for(var r=Ve.SYMBOL_TABLE[e],n=r&1,o=0;o<Ve.BARS_IN_MODULE;o++){for(var a=0;(r&1)===n;)a+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(Ve.BARS_IN_MODULE)),t.RATIOS_TABLE[e][Ve.BARS_IN_MODULE-o-1]=Math.fround(a/Ve.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=We.sum(e),n=new Int32Array(Ve.BARS_IN_MODULE),o=0,a=0,i=0;i<Ve.MODULES_IN_CODEWORD;i++){var s=r/(2*Ve.MODULES_IN_CODEWORD)+i*r/Ve.MODULES_IN_CODEWORD;a+e[o]<=s&&(a+=e[o],o++),n[o]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return Ve.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var o=0;o<e[n];o++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=We.sum(e),n=new Array(Ve.BARS_IN_MODULE);if(r>1)for(var o=0;o<n.length;o++)n[o]=Math.fround(e[o]/r);var a=cc.MAX_VALUE,i=-1;this.bSymbolTableReady||t.initialize();for(var s=0;s<t.RATIOS_TABLE.length;s++){for(var l=0,u=t.RATIOS_TABLE[s],d=0;d<Ve.BARS_IN_MODULE;d++){var f=Math.fround(u[d]-n[d]);if(l+=Math.fround(f*f),l>=a)break}l<a&&(a=l,i=Ve.SYMBOL_TABLE[s])}return i},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(Ve.SYMBOL_TABLE.length).map(function(e){return new Array(Ve.BARS_IN_MODULE)}),t}(),ey=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),rf=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),ty=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ry=function(t){ty(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(pr),ny=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new ry;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new xu;if(n===0)return;for(var o=0;o<n;o++)this.write(e[r+o])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),oy=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ay=function(t){oy(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(pr),iy=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sy=function(t){iy(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new Be("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,o=n<<1;if(o-r<0&&(o=r),o<0){if(r<0)throw new ay;o=$e.MAX_VALUE}this.buf=At.copyOfUint8Array(this.buf,o)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,o){if(n<0||n>r.length||o<0||n+o-r.length>0)throw new xu;this.ensureCapacity(this.count+o),ot.arraycopy(r,n,this.buf,this.count,o),this.count+=o},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return At.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(ny),tt;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(tt||(tt={}));function K1(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var mi;function yn(t){if(typeof mi>"u"&&(mi=K1()),mi===null)throw new Error("BigInt is not supported!");return mi(t)}function ly(){var t=[];t[0]=yn(1);var e=yn(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var cy=function(){function t(){}return t.decode=function(e,r){var n=new Ge(""),o=Et.ISO8859_1;n.enableDecoding(o);for(var a=1,i=e[a++],s=new ey;a<e[0];){switch(i){case t.TEXT_COMPACTION_MODE_LATCH:a=t.textCompaction(e,a,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:a=t.byteCompaction(i,e,o,a,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:a=t.numericCompaction(e,a,n);break;case t.ECI_CHARSET:Et.getCharacterSetECIByValue(e[a++]);break;case t.ECI_GENERAL_PURPOSE:a+=2;break;case t.ECI_USER_DEFINED:a++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=t.decodeMacroBlock(e,a,s);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new ve;default:a--,a=t.textCompaction(e,a,n);break}if(a<e.length)i=e[a++];else throw ve.getFormatInstance()}if(n.length()===0)throw ve.getFormatInstance();var l=new As(null,n.toString(),null,r);return l.setOther(s),l},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw ve.getFormatInstance();for(var o=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<t.NUMBER_OF_SEQUENCE_CODEWORDS;a++,r++)o[a]=e[r];n.setSegmentIndex($e.parseInt(t.decodeBase900toBase10(o,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var i=new Ge;r=t.textCompaction(e,r,i),n.setFileId(i.toString());var s=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new Ge;r=t.textCompaction(e,r+1,l),n.setFileName(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new Ge;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new Ge;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new Ge;r=t.numericCompaction(e,r+1,f),n.setSegmentCount($e.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new Ge;r=t.numericCompaction(e,r+1,h),n.setTimestamp(rf.parseLong(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new Ge;r=t.numericCompaction(e,r+1,p),n.setChecksum($e.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var v=new Ge;r=t.numericCompaction(e,r+1,v),n.setFileSize(rf.parseLong(v.toString()));break;default:throw ve.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw ve.getFormatInstance()}if(s!==-1){var y=r-s;n.isLastSegment()&&y--,n.setOptionalData(At.copyOfRange(e,s,s+y))}return r},t.textCompaction=function(e,r,n){for(var o=new Int32Array((e[0]-r)*2),a=new Int32Array((e[0]-r)*2),i=0,s=!1;r<e[0]&&!s;){var l=e[r++];if(l<t.TEXT_COMPACTION_MODE_LATCH)o[i]=l/30,o[i+1]=l%30,i+=2;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:o[i++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[i]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[r++],a[i]=l,i++;break}}return t.decodeTextCompaction(o,a,i,n),r},t.decodeTextCompaction=function(e,r,n,o){for(var a=tt.ALPHA,i=tt.ALPHA,s=0;s<n;){var l=e[s],u="";switch(a){case tt.ALPHA:if(l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case t.LL:a=tt.LOWER;break;case t.ML:a=tt.MIXED;break;case t.PS:i=a,a=tt.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=tt.ALPHA;break}break;case tt.LOWER:if(l<26)u=String.fromCharCode(97+l);else switch(l){case 26:u=" ";break;case t.AS:i=a,a=tt.ALPHA_SHIFT;break;case t.ML:a=tt.MIXED;break;case t.PS:i=a,a=tt.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=tt.ALPHA;break}break;case tt.MIXED:if(l<t.PL)u=t.MIXED_CHARS[l];else switch(l){case t.PL:a=tt.PUNCT;break;case 26:u=" ";break;case t.LL:a=tt.LOWER;break;case t.AL:a=tt.ALPHA;break;case t.PS:i=a,a=tt.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=tt.ALPHA;break}break;case tt.PUNCT:if(l<t.PAL)u=t.PUNCT_CHARS[l];else switch(l){case t.PAL:a=tt.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=tt.ALPHA;break}break;case tt.ALPHA_SHIFT:if(a=i,l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:a=tt.ALPHA;break}break;case tt.PUNCT_SHIFT:if(a=i,l<t.PAL)u=t.PUNCT_CHARS[l];else switch(l){case t.PAL:a=tt.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=tt.ALPHA;break}break}u!==""&&o.append(u),s++}},t.byteCompaction=function(e,r,n,o,a){var i=new sy,s=0,l=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),f=r[o++];o<r[0]&&!u;)switch(d[s++]=f,l=900*l+f,f=r[o++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:o--,u=!0;break;default:if(s%5===0&&s>0){for(var h=0;h<6;++h)i.write(Number(yn(l)>>yn(8*(5-h))));l=0,s=0}break}o===r[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(d[s++]=f);for(var p=0;p<s;p++)i.write(d[p]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;o<r[0]&&!u;){var v=r[o++];if(v<t.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+v;else switch(v){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:o--,u=!0;break}if(s%5===0&&s>0){for(var h=0;h<6;++h)i.write(Number(yn(l)>>yn(8*(5-h))));l=0,s=0}}break}return a.append(Or.decode(i.toByteArray(),n)),o},t.numericCompaction=function(e,r,n){for(var o=0,a=!1,i=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!a;){var s=e[r++];if(r===e[0]&&(a=!0),s<t.TEXT_COMPACTION_MODE_LATCH)i[o]=s,o++;else switch(s){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,a=!0;break}(o%t.MAX_NUMERIC_CODEWORDS===0||s===t.NUMERIC_COMPACTION_MODE_LATCH||a)&&o>0&&(n.append(t.decodeBase900toBase10(i,o)),o=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=yn(0),o=0;o<r;o++)n+=t.EXP900[r-o-1]*yn(e[o]);var a=n.toString();if(a.charAt(0)!=="1")throw new ve;return a.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=K1()?ly():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),la=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uy=function(){function t(){}return t.decode=function(e,r,n,o,a,i,s){for(var l=new gc(e,r,n,o,a),u=null,d=null,f,h=!0;;h=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,l,r,!0,i,s)),o!=null&&(d=t.getRowIndicatorColumn(e,l,o,!1,i,s)),f=t.merge(u,d),f==null)throw K.getNotFoundInstance();var p=f.getBoundingBox();if(h&&p!=null&&(p.getMinY()<l.getMinY()||p.getMaxY()>l.getMaxY()))l=p;else break}f.setBoundingBox(l);var v=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(v,d);for(var y=u!=null,w=1;w<=v;w++){var g=y?w:v-w;if(f.getDetectionResultColumn(g)===void 0){var x=void 0;g===0||g===v?x=new tf(l,g===0):x=new Y1(l),f.setDetectionResultColumn(g,x);for(var m=-1,C=m,N=l.getMinY();N<=l.getMaxY();N++){if(m=t.getStartColumn(f,g,N,y),m<0||m>l.getMaxX()){if(C===-1)continue;m=C}var S=t.detectCodeword(e,l.getMinX(),l.getMaxX(),y,m,N,i,s);S!=null&&(x.setCodeword(N,S),C=m,i=Math.min(i,S.getWidth()),s=Math.max(s,S.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var o=gc.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new qm(n,o)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var o=e.getRowHeights();if(o==null)return null;var a=t.getMax(o),i=0;try{for(var s=la(o),l=s.next();!l.done;l=s.next()){var u=l.value;if(i+=a-u,u>0)break}}catch(p){r={error:p}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),f=0;i>0&&d[f]==null;f++)i--;for(var h=0,f=o.length-1;f>=0&&(h+=a-o[f],!(o[f]>0));f--);for(var f=d.length-1;h>0&&d[f]==null;f--)h--;return e.getBoundingBox().addMissingRows(i,h,e.isLeft())},t.getMax=function(e){var r,n,o=-1;try{for(var a=la(e),i=a.next();!i.done;i=a.next()){var s=i.value;o=Math.max(o,s)}}catch(l){r={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var o;return r==null||(o=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==o.getColumnCount()&&n.getErrorCorrectionLevel()!==o.getErrorCorrectionLevel()&&n.getRowCount()!==o.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,o,a,i){for(var s=new tf(r,o),l=0;l<2;l++)for(var u=l===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=r.getMaxY()&&f>=r.getMinY();f+=u){var h=t.detectCodeword(e,0,e.getWidth(),o,d,f,a,i);h!=null&&(s.setCodeword(f,h),o?d=h.getStartX():d=h.getEndX())}return s},t.adjustCodewordCount=function(e,r){var n=r[0][1],o=n.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(o.length===0){if(a<1||a>Ve.MAX_CODEWORDS_IN_BARCODE)throw K.getNotFoundInstance();n.setValue(a)}else o[0]!==a&&n.setValue(a)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,o=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],i=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var l=0;l<e.getBarcodeColumnCount();l++){var u=r[s][l+1].getValue(),d=s*e.getBarcodeColumnCount()+l;u.length===0?n.push(d):u.length===1?o[d]=u[0]:(i.push(d),a.push(u))}for(var f=new Array(a.length),h=0;h<f.length;h++)f[h]=a[h];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),o,Ve.toIntArray(n),Ve.toIntArray(i),f)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,o,a){for(var i=new Int32Array(o.length),s=100;s-- >0;){for(var l=0;l<i.length;l++)r[o[l]]=a[l][i[l]];try{return t.decodeCodewords(r,e,n)}catch(d){var u=d instanceof Pt;if(!u)throw d}if(i.length===0)throw Pt.getChecksumInstance();for(var l=0;l<i.length;l++)if(i[l]<a[l].length-1){i[l]++;break}else if(i[l]=0,l===i.length-1)throw Pt.getChecksumInstance()}throw Pt.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,o,a,i=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<i.length;s++)for(var l=0;l<i[s].length;l++)i[s][l]=new xa;var u=0;try{for(var d=la(e.getDetectionResultColumns()),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)try{for(var p=(o=void 0,la(h.getCodewords())),v=p.next();!v.done;v=p.next()){var y=v.value;if(y!=null){var w=y.getRowNumber();if(w>=0){if(w>=i.length)continue;i[w][u].setValue(y.getValue())}}}}catch(g){o={error:g}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}u++}}catch(g){r={error:g}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return i},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,o){var a,i,s=o?1:-1,l=null;if(t.isValidBarcodeColumn(e,r-s)&&(l=e.getDetectionResultColumn(r-s).getCodeword(n)),l!=null)return o?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(r).getCodewordNearby(n),l!=null)return o?l.getStartX():l.getEndX();if(t.isValidBarcodeColumn(e,r-s)&&(l=e.getDetectionResultColumn(r-s).getCodewordNearby(n)),l!=null)return o?l.getEndX():l.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-s);){r-=s;try{for(var d=(a=void 0,la(e.getDetectionResultColumn(r).getCodewords())),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)return(o?h.getEndX():h.getStartX())+s*u*(h.getEndX()-h.getStartX())}}catch(p){a={error:p}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}u++}return o?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,o,a,i,s,l){a=t.adjustCodewordStartColumn(e,r,n,o,a,i);var u=t.getModuleBitCount(e,r,n,o,a,i);if(u==null)return null;var d,f=We.sum(u);if(o)d=a+f;else{for(var h=0;h<u.length/2;h++){var p=u[h];u[h]=u[u.length-1-h],u[u.length-1-h]=p}d=a,a=d-f}if(!t.checkCodewordSkew(f,s,l))return null;var v=Jm.getDecodedValue(u),y=Ve.getCodeword(v);return y===-1?null:new Qm(a,d,t.getCodewordBucketNumber(v),y)},t.getModuleBitCount=function(e,r,n,o,a,i){for(var s=a,l=new Int32Array(8),u=0,d=o?1:-1,f=o;(o?s<n:s>=r)&&u<l.length;)e.get(s,i)===f?(l[u]++,s+=d):(u++,f=!f);return u===l.length||s===(o?n:r)&&u===l.length-1?l:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,o,a,i){for(var s=a,l=o?-1:1,u=0;u<2;u++){for(;(o?s>=r:s<n)&&o===e.get(s,i);){if(Math.abs(a-s)>t.CODEWORD_SKEW_SIZE)return a;s+=l}l=-l,o=!o}return s},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw ve.getFormatInstance();var o=1<<r+1,a=t.correctErrors(e,n,o);t.verifyCodewordCount(e,o);var i=cy.decode(e,""+r);return i.setErrorsCorrected(a),i.setErasures(n.length),i},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw Pt.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw ve.getFormatInstance();var n=e[0];if(n>e.length)throw ve.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw ve.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,o=r.length-1;!((e&1)!==n&&(n=e&1,o--,o<0));)r[o]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new _u,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var o=0;o<e[n].length;o++){var a=e[n][o];a.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new Hm,t}(),dy=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xc=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw K.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof ve||n instanceof Pt?K.getNotFoundInstance():n}},t.decode=function(e,r,n){var o,a,i=new Array,s=Lm.detectMultiple(e,r,n);try{for(var l=dy(s.getPoints()),u=l.next();!u.done;u=l.next()){var d=u.value,f=uy.decode(s.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),h=new Kt(f.getText(),f.getRawBytes(),void 0,d,ke.PDF_417);h.putMetadata(Ut.ERROR_CORRECTION_LEVEL,f.getECLevel());var p=f.getOther();p!=null&&h.putMetadata(Ut.PDF417_EXTRA_METADATA,p),i.push(h)}}catch(v){o={error:v}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return i.map(function(v){return v})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?$e.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*Ve.MODULES_IN_CODEWORD/Ve.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*Ve.MODULES_IN_CODEWORD/Ve.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*Ve.MODULES_IN_CODEWORD/Ve.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*Ve.MODULES_IN_CODEWORD/Ve.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),fy=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nf=function(t){fy(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(pr),of=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hy=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(dt.TRY_HARDER)!==void 0,n=e==null?null:e.get(dt.POSSIBLE_FORMATS),o=new Array;if(n!=null){var a=n.some(function(i){return i===ke.UPC_A||i===ke.UPC_E||i===ke.EAN_13||i===ke.EAN_8||i===ke.CODABAR||i===ke.CODE_39||i===ke.CODE_93||i===ke.CODE_128||i===ke.ITF||i===ke.RSS_14||i===ke.RSS_EXPANDED});a&&!r&&o.push(new ga(e)),n.includes(ke.QR_CODE)&&o.push(new pc),n.includes(ke.DATA_MATRIX)&&o.push(new hc),n.includes(ke.AZTEC)&&o.push(new dc),n.includes(ke.PDF_417)&&o.push(new xc),a&&r&&o.push(new ga(e))}o.length===0&&(r||o.push(new ga(e)),o.push(new pc),o.push(new hc),o.push(new dc),o.push(new xc),r&&o.push(new ga(e))),this.readers=o},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=of(this.readers),o=n.next();!o.done;o=n.next()){var a=o.value;a.reset()}}catch(i){e={error:i}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new nf("No readers where selected, nothing can be read.");try{for(var o=of(this.readers),a=o.next();!a.done;a=o.next()){var i=a.value;try{return i.decode(e,this.hints)}catch(s){if(s instanceof nf)continue}}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}throw new K("No MultiFormat Readers were able to detect the code.")},t}(),py=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gy=function(t){py(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var o=this,a=new hy;return a.setHints(r),o=t.call(this,a,n)||this,o}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e}(Zo),xy=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){xy(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new xc,r)||this}return e})(Zo);var vy=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){vy(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new pc,r)||this}return e})(Zo);var vc;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(vc||(vc={}));const yi=vc;var Z1=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Rn(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],o=this.field,a=r.length;a<=e;a++){var i=n.multiply(new Rn(o,Int32Array.from([1,o.exp(a-1+o.getGeneratorBase())])));r.push(i),n=i}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new Be("No error correction bytes");var n=e.length-r;if(n<=0)throw new Be("No data bytes provided");var o=this.buildGenerator(r),a=new Int32Array(n);ot.arraycopy(e,0,a,0,n);var i=new Rn(this.field,a);i=i.multiplyByMonomial(r,1);for(var s=i.divide(o)[1],l=s.getCoefficients(),u=r-l.length,d=0;d<u;d++)e[n+d]=0;ot.arraycopy(l,0,e,n+u,l.length)},t}(),va=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),o=e.getWidth(),a=e.getHeight(),i=0;i<a-1;i++)for(var s=n[i],l=0;l<o-1;l++){var u=s[l];u===s[l+1]&&u===n[i+1][l]&&u===n[i+1][l+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),o=e.getWidth(),a=e.getHeight(),i=0;i<a;i++)for(var s=0;s<o;s++){var l=n[i];s+6<o&&l[s]===1&&l[s+1]===0&&l[s+2]===1&&l[s+3]===1&&l[s+4]===1&&l[s+5]===0&&l[s+6]===1&&(t.isWhiteHorizontal(l,s-4,s)||t.isWhiteHorizontal(l,s+7,s+11))&&r++,i+6<a&&n[i][s]===1&&n[i+1][s]===0&&n[i+2][s]===1&&n[i+3][s]===1&&n[i+4][s]===1&&n[i+5][s]===0&&n[i+6][s]===1&&(t.isWhiteVertical(n,s,i-4,i)||t.isWhiteVertical(n,s,i+7,i+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var o=r;o<n;o++)if(e[o]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,o){n=Math.max(n,0),o=Math.min(o,e.length);for(var a=n;a<o;a++)if(e[a][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),o=e.getWidth(),a=e.getHeight(),i=0;i<a;i++)for(var s=n[i],l=0;l<o;l++)s[l]===1&&r++;var u=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-u)*10/u);return d*t.N4},t.getDataMaskBit=function(e,r,n){var o,a;switch(e){case 0:o=n+r&1;break;case 1:o=n&1;break;case 2:o=r%3;break;case 3:o=(n+r)%3;break;case 4:o=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:a=n*r,o=(a&1)+a%3;break;case 6:a=n*r,o=(a&1)+a%3&1;break;case 7:a=n*r,o=a%3+(n+r&1)&1;break;default:throw new Be("Invalid mask pattern: "+e)}return o===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,o=r?e.getHeight():e.getWidth(),a=r?e.getWidth():e.getHeight(),i=e.getArray(),s=0;s<o;s++){for(var l=0,u=-1,d=0;d<a;d++){var f=r?i[s][d]:i[d][s];f===u?l++:(l>=5&&(n+=t.N1+(l-5)),l=1,u=f)}l>=5&&(n+=t.N1+(l-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),my=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yy=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),o=0;o!==r;o++)n[o]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var o=my(this.bytes),a=o.next();!a.done;a=o.next()){var i=a.value;At.fill(i,e)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,o=this.height;n<o;++n)for(var a=this.bytes[n],i=r.bytes[n],s=0,l=this.width;s<l;++s)if(a[s]!==i[s])return!1;return!0},t.prototype.toString=function(){for(var e=new Ge,r=0,n=this.height;r<n;++r){for(var o=this.bytes[r],a=0,i=this.width;a<i;++a)switch(o[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),mc=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new Ge;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),wy=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),it=function(t){wy(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(pr),af=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,o,a){t.clearMatrix(a),t.embedBasicPatterns(n,a),t.embedTypeInfo(r,o,a),t.maybeEmbedVersionInfo(n,a),t.embedDataBits(e,o,a)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var o=new jt;t.makeTypeInfoBits(e,r,o);for(var a=0,i=o.getSize();a<i;++a){var s=o.get(o.getSize()-1-a),l=t.TYPE_INFO_COORDINATES[a],u=l[0],d=l[1];if(n.setBoolean(u,d,s),a<8){var f=n.getWidth()-a-1,h=8;n.setBoolean(f,h,s)}else{var f=8,h=n.getHeight()-7+(a-8);n.setBoolean(f,h,s)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new jt;t.makeVersionInfoBits(e,n);for(var o=6*3-1,a=0;a<6;++a)for(var i=0;i<3;++i){var s=n.get(o);o--,r.setBoolean(a,r.getHeight()-11+i,s),r.setBoolean(r.getHeight()-11+i,a,s)}}},t.embedDataBits=function(e,r,n){for(var o=0,a=-1,i=n.getWidth()-1,s=n.getHeight()-1;i>0;){for(i===6&&(i-=1);s>=0&&s<n.getHeight();){for(var l=0;l<2;++l){var u=i-l;if(t.isEmpty(n.get(u,s))){var d=void 0;o<e.getSize()?(d=e.get(o),++o):d=!1,r!==255&&va.getDataMaskBit(r,u,s)&&(d=!d),n.setBoolean(u,s,d)}}s+=a}a=-a,s+=a,i-=2}if(o!==e.getSize())throw new it("Not all bits consumed: "+o+"/"+e.getSize())},t.findMSBSet=function(e){return 32-$e.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new Be("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!mc.isValidMaskPattern(r))throw new it("Invalid mask pattern");var o=e.getBits()<<3|r;n.appendBits(o,5);var a=t.calculateBCHCode(o,t.TYPE_INFO_POLY);n.appendBits(a,10);var i=new jt;if(i.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(i),n.getSize()!==15)throw new it("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new it("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new it;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var o=0;o<8;++o){if(!t.isEmpty(n.get(e+o,r)))throw new it;n.setNumber(e+o,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var o=0;o<7;++o){if(!t.isEmpty(n.get(e,r+o)))throw new it;n.setNumber(e,r+o,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var o=0;o<5;++o)for(var a=t.POSITION_ADJUSTMENT_PATTERN[o],i=0;i<5;++i)n.setNumber(e+i,r+o,a[i])},t.embedPositionDetectionPattern=function(e,r,n){for(var o=0;o<7;++o)for(var a=t.POSITION_DETECTION_PATTERN[o],i=0;i<7;++i)n.setNumber(e+i,r+o,a[i])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var o=7;t.embedVerticalSeparationPattern(o,0,e),t.embedVerticalSeparationPattern(e.getHeight()-o-1,0,e),t.embedVerticalSeparationPattern(o,e.getHeight()-o,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,o=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],a=0,i=o.length;a!==i;a++){var s=o[a];if(s>=0)for(var l=0;l!==i;l++){var u=o[l];u>=0&&t.isEmpty(r.get(u,s))&&t.embedPositionAdjustmentPattern(u-2,s-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),_y=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),sf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return va.applyMaskPenaltyRule1(e)+va.applyMaskPenaltyRule2(e)+va.applyMaskPenaltyRule3(e)+va.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var o=t.DEFAULT_BYTE_MODE_ENCODING,a=n!==null&&n.get(yi.CHARACTER_SET)!==void 0;a&&(o=n.get(yi.CHARACTER_SET).toString());var i=this.chooseMode(e,o),s=new jt;if(i===st.BYTE&&(a||t.DEFAULT_BYTE_MODE_ENCODING!==o)){var l=Et.getCharacterSetECIByName(o);l!==void 0&&this.appendECI(l,s)}this.appendModeInfo(i,s);var u=new jt;this.appendBytes(e,i,u,o);var d;if(n!==null&&n.get(yi.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(yi.QR_VERSION).toString(),10);d=eo.getVersionForNumber(f);var h=this.calculateBitsNeeded(i,s,u,d);if(!this.willFit(h,d,r))throw new it("Data too big for requested version")}else d=this.recommendVersion(r,i,s,u);var p=new jt;p.appendBitArray(s);var v=i===st.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(v,d,i,p),p.appendBitArray(u);var y=d.getECBlocksForLevel(r),w=d.getTotalCodewords()-y.getTotalECCodewords();this.terminateBits(w,p);var g=this.interleaveWithECBytes(p,d.getTotalCodewords(),w,y.getNumBlocks()),x=new mc;x.setECLevel(r),x.setMode(i),x.setVersion(d);var m=d.getDimensionForVersion(),C=new yy(m,m),N=this.chooseMaskPattern(g,r,d,C);return x.setMaskPattern(N),af.buildMatrix(g,r,d,N,C),x.setMatrix(C),x},t.recommendVersion=function(e,r,n,o){var a=this.calculateBitsNeeded(r,n,o,eo.getVersionForNumber(1)),i=this.chooseVersion(a,e),s=this.calculateBitsNeeded(r,n,o,i);return this.chooseVersion(s,e)},t.calculateBitsNeeded=function(e,r,n,o){return r.getSize()+e.getCharacterCountBits(o)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),Et.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return st.KANJI;for(var n=!1,o=!1,a=0,i=e.length;a<i;++a){var s=e.charAt(a);if(t.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)o=!0;else return st.BYTE}return o?st.ALPHANUMERIC:n?st.NUMERIC:st.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=Or.encode(e,Et.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var o=0;o<n;o+=2){var a=r[o]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,o){for(var a=Number.MAX_SAFE_INTEGER,i=-1,s=0;s<mc.NUM_MASK_PATTERNS;s++){af.buildMatrix(e,r,n,s,o);var l=this.calculateMaskPenalty(o);l<a&&(a=l,i=s)}return i},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var o=eo.getVersionForNumber(n);if(t.willFit(e,o,r))return o}throw new it("Data too big")},t.willFit=function(e,r,n){var o=r.getTotalCodewords(),a=r.getECBlocksForLevel(n),i=a.getTotalECCodewords(),s=o-i,l=(e+7)/8;return s>=l},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new it("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var o=0;o<4&&r.getSize()<n;++o)r.appendBit(!1);var a=r.getSize()&7;if(a>0)for(var o=a;o<8;o++)r.appendBit(!1);for(var i=e-r.getSizeInBytes(),o=0;o<i;++o)r.appendBits(o&1?17:236,8);if(r.getSize()!==n)throw new it("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,o,a,i){if(o>=n)throw new it("Block ID too large");var s=e%n,l=n-s,u=Math.floor(e/n),d=u+1,f=Math.floor(r/n),h=f+1,p=u-f,v=d-h;if(p!==v)throw new it("EC bytes mismatch");if(n!==l+s)throw new it("RS blocks mismatch");if(e!==(f+p)*l+(h+v)*s)throw new it("Total bytes mismatch");o<l?(a[0]=f,i[0]=p):(a[0]=h,i[0]=v)},t.interleaveWithECBytes=function(e,r,n,o){var a,i,s,l;if(e.getSizeInBytes()!==n)throw new it("Number of bits and data bytes does not match");for(var u=0,d=0,f=0,h=new Array,p=0;p<o;++p){var v=new Int32Array(1),y=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,o,p,v,y);var w=v[0],g=new Uint8Array(w);e.toBytes(8*u,g,0,w);var x=t.generateECBytes(g,y[0]);h.push(new _y(g,x)),d=Math.max(d,w),f=Math.max(f,x.length),u+=v[0]}if(n!==u)throw new it("Data bytes does not match offset");for(var m=new jt,p=0;p<d;++p)try{for(var C=(a=void 0,sf(h)),N=C.next();!N.done;N=C.next()){var S=N.value,g=S.getDataBytes();p<g.length&&m.appendBits(g[p],8)}}catch(k){a={error:k}}finally{try{N&&!N.done&&(i=C.return)&&i.call(C)}finally{if(a)throw a.error}}for(var p=0;p<f;++p)try{for(var I=(s=void 0,sf(h)),R=I.next();!R.done;R=I.next()){var S=R.value,x=S.getErrorCorrectionBytes();p<x.length&&m.appendBits(x[p],8)}}catch(k){s={error:k}}finally{try{R&&!R.done&&(l=I.return)&&l.call(I)}finally{if(s)throw s.error}}if(r!==m.getSizeInBytes())throw new it("Interleaving error: "+r+" and "+m.getSizeInBytes()+" differ.");return m},t.generateECBytes=function(e,r){for(var n=e.length,o=new Int32Array(n+r),a=0;a<n;a++)o[a]=e[a]&255;new Z1(sr.QR_CODE_FIELD_256).encode(o,r);for(var i=new Uint8Array(r),a=0;a<r;a++)i[a]=o[n+a];return i},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,o){var a=n.getCharacterCountBits(r);if(e>=1<<a)throw new it(e+" is bigger than "+((1<<a)-1));o.appendBits(e,a)},t.appendBytes=function(e,r,n,o){switch(r){case st.NUMERIC:t.appendNumericBytes(e,n);break;case st.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case st.BYTE:t.append8BitBytes(e,n,o);break;case st.KANJI:t.appendKanjiBytes(e,n);break;default:throw new it("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,o=0;o<n;){var a=t.getDigit(e.charAt(o));if(o+2<n){var i=t.getDigit(e.charAt(o+1)),s=t.getDigit(e.charAt(o+2));r.appendBits(a*100+i*10+s,10),o+=3}else if(o+1<n){var i=t.getDigit(e.charAt(o+1));r.appendBits(a*10+i,7),o+=2}else r.appendBits(a,4),o++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,o=0;o<n;){var a=t.getAlphanumericCode(e.charCodeAt(o));if(a===-1)throw new it;if(o+1<n){var i=t.getAlphanumericCode(e.charCodeAt(o+1));if(i===-1)throw new it;r.appendBits(a*45+i,11),o+=2}else r.appendBits(a,6),o++}},t.append8BitBytes=function(e,r,n){var o;try{o=Or.encode(e,n)}catch(l){throw new it(l)}for(var a=0,i=o.length;a!==i;a++){var s=o[a];r.appendBits(s,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=Or.encode(e,Et.SJIS)}catch(f){throw new it(f)}for(var o=n.length,a=0;a<o;a+=2){var i=n[a]&255,s=n[a+1]&255,l=i<<8&4294967295|s,u=-1;if(l>=33088&&l<=40956?u=l-33088:l>=57408&&l<=60351&&(u=l-49472),u===-1)throw new it("Invalid byte sequence");var d=(u>>8)*192+(u&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(st.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Et.UTF8.getName(),t})();var Cy=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Cy(e,t);function e(r,n,o,a,i,s,l,u){var d=t.call(this,s,l)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=o,d.left=a,d.top=i,a+s>n||i+l>o)throw new Be("Crop rectangle does not fit within image data.");return u&&d.reverseHorizontal(s,l),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Be("Requested row is outside the image: "+r);var o=this.getWidth();(n==null||n.length<o)&&(n=new Uint8ClampedArray(o));var a=(r+this.top)*this.dataWidth+this.left;return ot.arraycopy(this.yuvData,a,n,0,o),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var o=r*n,a=new Uint8ClampedArray(o),i=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ot.arraycopy(this.yuvData,i,a,0,o),a;for(var s=0;s<n;s++){var l=s*r;ot.arraycopy(this.yuvData,i,a,l,r),i+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,o,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,o,a,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(r*n),a=this.yuvData,i=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var l=s*r,u=0;u<r;u++){var d=a[i+u*e.THUMBNAIL_SCALE_FACTOR]&255;o[l+u]=4278190080|d*65793}i+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return o},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var o=this.yuvData,a=0,i=this.top*this.dataWidth+this.left;a<n;a++,i+=this.dataWidth)for(var s=i+r/2,l=i,u=i+r-1;l<s;l++,u--){var d=o[l];o[l]=o[u],o[u]=d}},e.prototype.invert=function(){return new vu(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Es);var by=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){by(e,t);function e(r,n,o,a,i,s,l){var u=t.call(this,n,o)||this;if(u.dataWidth=a,u.dataHeight=i,u.left=s,u.top=l,r.BYTES_PER_ELEMENT===4){for(var d=n*o,f=new Uint8ClampedArray(d),h=0;h<d;h++){var p=r[h],v=p>>16&255,y=p>>7&510,w=p&255;f[h]=(v+y+w)/4&255}u.luminances=f}else u.luminances=r;if(a===void 0&&(u.dataWidth=n),i===void 0&&(u.dataHeight=o),s===void 0&&(u.left=0),l===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+o>u.dataHeight)throw new Be("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Be("Requested row is outside the image: "+r);var o=this.getWidth();(n==null||n.length<o)&&(n=new Uint8ClampedArray(o));var a=(r+this.top)*this.dataWidth+this.left;return ot.arraycopy(this.luminances,a,n,0,o),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var o=r*n,a=new Uint8ClampedArray(o),i=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ot.arraycopy(this.luminances,i,a,0,o),a;for(var s=0;s<n;s++){var l=s*r;ot.arraycopy(this.luminances,i,a,l,r),i+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,o,a){return new e(this.luminances,o,a,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new vu(this)},e})(Es);var Sy=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ny=function(t){Sy(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(Et),Ey=function(){function t(){}return t.ISO_8859_1=Et.ISO8859_1,t}(),yc,Ay=301,Iy=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=Ay);return{LOG:t,ALOG:e}};yc=Iy([],[]),yc.LOG;yc.ALOG;var lf;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(lf||(lf={}));var cf=129,q1=230,Dy=231,Ty=235,Oy=236,My=237,Ry=238,Py=239,jy=240,cl=254,ky=254,uf="[)>05",df="[)>06",ff="",Je=0,Lt=1,Qt=2,bt=3,Mt=4,Vt=5,By=function(){function t(){}return t.prototype.getEncodingMode=function(){return Je},t.prototype.encode=function(e){var r=zr.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),o=zr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode())switch(o){case Vt:e.writeCodeword(Dy),e.signalEncoderChange(Vt);return;case Lt:e.writeCodeword(q1),e.signalEncoderChange(Lt);return;case bt:e.writeCodeword(Ry),e.signalEncoderChange(bt);break;case Qt:e.writeCodeword(Py),e.signalEncoderChange(Qt);break;case Mt:e.writeCodeword(jy),e.signalEncoderChange(Mt);break;default:throw new Error("Illegal mode: "+o)}else zr.isExtendedASCII(n)?(e.writeCodeword(Ty),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(zr.isDigit(e)&&zr.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),Ly=function(){function t(){}return t.prototype.getEncodingMode=function(){return Vt},t.prototype.encode=function(e){var r=new Ge;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var o=zr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Je);break}}var a=r.length()-1,i=1,s=e.getCodewordCount()+a+i;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||l)if(a<=249)r.setCharAt(0,He.getCharAt(a));else if(a<=1555)r.setCharAt(0,He.getCharAt(Math.floor(a/250)+249)),r.insert(1,He.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var u=0,n=r.length();u<n;u++)e.writeCodeword(this.randomize255State(r.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,o=e+n;return o<=255?o:o-256},t}(),Cu=function(){function t(){}return t.prototype.getEncodingMode=function(){return Lt},t.prototype.encodeMaximal=function(e){for(var r=new Ge,n=0,o=e.pos,a=0;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,n=this.encodeChar(i,r),r.length()%3===0&&(o=e.pos,a=r.length())}if(a!==r.length()){var s=Math.floor(r.length()/3*2),l=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(l);var u=e.getSymbolInfo().getDataCapacity()-l,d=Math.floor(r.length()%3);(d===2&&u!==2||d===1&&(n>3||u!==1))&&(e.pos=o)}r.length()>0&&e.writeCodeword(q1),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new Ge;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var o=this.encodeChar(n,r),a=Math.floor(r.length()/3)*2,i=e.getCodewordCount()+a;e.updateSymbolInfo(i);var s=e.getSymbolInfo().getDataCapacity()-i;if(!e.hasMoreCharacters()){var l=new Ge;for(r.length()%3===2&&s!==2&&(o=this.backtrackOneCharacter(e,r,l,o));r.length()%3===1&&(o>3||s!==1);)o=this.backtrackOneCharacter(e,r,l,o);break}var u=r.length();if(u%3===0){var d=zr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(Je);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,o){var a=r.length(),i=r.toString().substring(0,a-o);r.setLengthToZero(),r.append(i),e.pos--;var s=e.getCurrentChar();return o=this.encodeChar(s,n),e.resetSymbolInfo(),o},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),o=r.length()%3,a=e.getCodewordCount()+n;e.updateSymbolInfo(a);var i=e.getSymbolInfo().getDataCapacity()-a;if(o===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(cl)}else if(i===1&&o===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(cl),e.pos--}else if(o===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(i>0||e.hasMoreCharacters())&&e.writeCodeword(cl)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Je)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,o=r%256,a=new Ge;return a.append(n),a.append(o),a.toString()},t}(),Fy=function(){function t(){}return t.prototype.getEncodingMode=function(){return Mt},t.prototype.encode=function(e){for(var r=new Ge;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var o=r.length();if(o>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var a=r.toString().substring(4);r.setLengthToZero(),r.append(a);var i=zr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Je);break}}}r.append(He.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var o=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>o&&(e.updateSymbolInfo(e.getCodewordCount()+1),o=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=o&&o<=2)return}if(n>4)throw new Error("Count must not exceed 4");var i=n-1,s=this.encodeToCodewords(r.toString()),l=!e.hasMoreCharacters(),u=l&&i<=2;if(i<=2){e.updateSymbolInfo(e.getCodewordCount()+i);var o=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();o>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}u?(e.resetSymbolInfo(),e.pos-=i):e.writeCodewords(s)}finally{e.signalEncoderChange(Je)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(He.getCharAt(e-64)):zr.illegalCharacter(He.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),o=r>=2?e.charAt(1).charCodeAt(0):0,a=r>=3?e.charAt(2).charCodeAt(0):0,i=r>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(o<<12)+(a<<6)+i,l=s>>16&255,u=s>>8&255,d=s&255,f=new Ge;return f.append(l),r>=2&&f.append(u),r>=3&&f.append(d),f.toString()},t}(),Uy=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gy=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ke=function(){function t(e,r,n,o,a,i,s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=o,this.matrixHeight=a,this.dataRegions=i,this.rsBlockData=s,this.rsBlockError=l}return t.lookup=function(e,r,n,o,a){var i,s;r===void 0&&(r=0),n===void 0&&(n=null),o===void 0&&(o=null),a===void 0&&(a=!0);try{for(var l=Gy(zy),u=l.next();!u.done;u=l.next()){var d=u.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(o!=null&&(d.getSymbolWidth()>o.getWidth()||d.getSymbolHeight()>o.getHeight()))&&e<=d.dataCapacity)return d}}catch(f){i={error:f}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),$y=function(t){Uy(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(Ke),zy=[new Ke(!1,3,5,8,8,1),new Ke(!1,5,7,10,10,1),new Ke(!0,5,7,16,6,1),new Ke(!1,8,10,12,12,1),new Ke(!0,10,11,14,6,2),new Ke(!1,12,12,14,14,1),new Ke(!0,16,14,24,10,1),new Ke(!1,18,14,16,16,1),new Ke(!1,22,18,18,18,1),new Ke(!0,22,18,16,10,2),new Ke(!1,30,20,20,20,1),new Ke(!0,32,24,16,14,2),new Ke(!1,36,24,22,22,1),new Ke(!1,44,28,24,24,1),new Ke(!0,49,28,22,14,2),new Ke(!1,62,36,14,14,4),new Ke(!1,86,42,16,16,4),new Ke(!1,114,48,18,18,4),new Ke(!1,144,56,20,20,4),new Ke(!1,174,68,22,22,4),new Ke(!1,204,84,24,24,4,102,42),new Ke(!1,280,112,14,14,16,140,56),new Ke(!1,368,144,16,16,16,92,36),new Ke(!1,456,192,18,18,16,114,48),new Ke(!1,576,224,20,20,16,144,56),new Ke(!1,696,272,22,22,16,174,68),new Ke(!1,816,336,24,24,16,136,56),new Ke(!1,1050,408,18,18,36,175,68),new Ke(!1,1304,496,20,20,36,163,62),new $y],Hy=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(s){return s.charCodeAt(0)}),n=new Ge,o=0,a=r.length;o<a;o++){var i=String.fromCharCode(r[o]&255);if(i==="?"&&e.charAt(o)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(i)}this.msg=n.toString(),this.shape=0,this.codewords=new Ge,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Ke.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),Vy=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xy=function(t){Vy(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return bt},e.prototype.encode=function(r){for(var n=new Ge;r.hasMoreCharacters();){var o=r.getCurrentChar();r.pos++,this.encodeChar(o,n);var a=n.length();if(a%3===0){this.writeNextTriplet(r,n);var i=zr.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){r.signalEncoderChange(Je);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):zr.illegalCharacter(He.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var o=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),a=n.length();r.pos-=a,(r.getRemainingCharacters()>1||o>1||r.getRemainingCharacters()!==o)&&r.writeCodeword(ky),r.getNewEncoding()<0&&r.signalEncoderChange(Je)},e}(Cu),Wy=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yy=function(t){Wy(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Qt},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var o=2;return o+=this.encodeChar(r-128,n),o},e}(Cu),zr=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=cf+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,o,a){r===void 0&&(r=0),n===void 0&&(n=null),o===void 0&&(o=null),a===void 0&&(a=!1);var i=new Cu,s=[new By,i,new Yy,new Xy,new Fy,new Ly],l=new Hy(e);l.setSymbolShape(r),l.setSizeConstraints(n,o),e.startsWith(uf)&&e.endsWith(ff)?(l.writeCodeword(Oy),l.setSkipAtEnd(2),l.pos+=uf.length):e.startsWith(df)&&e.endsWith(ff)&&(l.writeCodeword(My),l.setSkipAtEnd(2),l.pos+=df.length);var u=Je;for(a&&(i.encodeMaximal(l),u=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)s[u].encode(l),l.getNewEncoding()>=0&&(u=l.getNewEncoding(),l.resetEncoderSignal());var d=l.getCodewordCount();l.updateSymbolInfo();var f=l.getSymbolInfo().getDataCapacity();d<f&&u!==Je&&u!==Vt&&u!==Mt&&l.writeCodeword("");var h=l.getCodewords();for(h.length()<f&&h.append(cf);h.length()<f;)h.append(this.randomize253State(h.length()+1));return l.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var o=this.lookAheadTestIntern(e,r,n);if(n===bt&&o===bt){for(var a=Math.min(r+3,e.length),i=r;i<a;i++)if(!this.isNativeX12(e.charCodeAt(i)))return Je}else if(n===Mt&&o===Mt){for(var a=Math.min(r+4,e.length),i=r;i<a;i++)if(!this.isNativeEDIFACT(e.charCodeAt(i)))return Je}return o},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var o;n===Je?o=[0,1,1,1,1,1.25]:(o=[1,2,2,2,2,2.25],o[n]=0);for(var a=0,i=new Uint8Array(6),s=[];;){if(r+a===e.length){At.fill(i,0),At.fill(s,0);var l=this.findMinimums(o,s,$e.MAX_VALUE,i),u=this.getMinimumCount(i);if(s[Je]===l)return Je;if(u===1){if(i[Vt]>0)return Vt;if(i[Mt]>0)return Mt;if(i[Qt]>0)return Qt;if(i[bt]>0)return bt}return Lt}var d=e.charCodeAt(r+a);if(a++,this.isDigit(d)?o[Je]+=.5:this.isExtendedASCII(d)?(o[Je]=Math.ceil(o[Je]),o[Je]+=2):(o[Je]=Math.ceil(o[Je]),o[Je]++),this.isNativeC40(d)?o[Lt]+=2/3:this.isExtendedASCII(d)?o[Lt]+=8/3:o[Lt]+=4/3,this.isNativeText(d)?o[Qt]+=2/3:this.isExtendedASCII(d)?o[Qt]+=8/3:o[Qt]+=4/3,this.isNativeX12(d)?o[bt]+=2/3:this.isExtendedASCII(d)?o[bt]+=13/3:o[bt]+=10/3,this.isNativeEDIFACT(d)?o[Mt]+=3/4:this.isExtendedASCII(d)?o[Mt]+=17/4:o[Mt]+=13/4,this.isSpecialB256(d)?o[Vt]+=4:o[Vt]++,a>=4){if(At.fill(i,0),At.fill(s,0),this.findMinimums(o,s,$e.MAX_VALUE,i),s[Je]<this.min(s[Vt],s[Lt],s[Qt],s[bt],s[Mt]))return Je;if(s[Vt]<s[Je]||s[Vt]+1<this.min(s[Lt],s[Qt],s[bt],s[Mt]))return Vt;if(s[Mt]+1<this.min(s[Vt],s[Lt],s[Qt],s[bt],s[Je]))return Mt;if(s[Qt]+1<this.min(s[Vt],s[Lt],s[Mt],s[bt],s[Je]))return Qt;if(s[bt]+1<this.min(s[Vt],s[Lt],s[Mt],s[Qt],s[Je]))return bt;if(s[Lt]+1<this.min(s[Je],s[Vt],s[Mt],s[Qt])){if(s[Lt]<s[bt])return Lt;if(s[Lt]===s[bt]){for(var f=r+a+1;f<e.length;){var h=e.charCodeAt(f);if(this.isX12TermSep(h))return bt;if(!this.isNativeX12(h))break;f++}return Lt}}}}},t.min=function(e,r,n,o,a){var i=Math.min(e,Math.min(r,Math.min(n,o)));return a===void 0?i:Math.min(i,a)},t.findMinimums=function(e,r,n,o){for(var a=0;a<6;a++){var i=r[a]=Math.ceil(e[a]);n>i&&(n=i,At.fill(o,0)),n===i&&(o[a]=o[a]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,o=r;o<n&&this.isDigit(e.charCodeAt(o));)o++;return o-r},t.illegalCharacter=function(e){var r=$e.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),ul=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hf=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Or.encode(e,this.charset)!=null}catch{return!1}},t}(),Ky=function(){function t(e,r,n){var o,a,i,s,l,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(z){return new hf(Ny.forName(z))}),this.encoders=[];var d=[];d.push(new hf(Ey.ISO_8859_1));for(var f=r!=null&&r.name.startsWith("UTF"),h=0;h<e.length;h++){var p=!1;try{for(var v=(o=void 0,ul(d)),y=v.next();!y.done;y=v.next()){var w=y.value,g=e.charAt(h),x=g.charCodeAt(0);if(x===n||w.canEncode(g)){p=!0;break}}}catch(z){o={error:z}}finally{try{y&&!y.done&&(a=v.return)&&a.call(v)}finally{if(o)throw o.error}}if(!p)try{for(var m=(i=void 0,ul(this.ENCODERS)),C=m.next();!C.done;C=m.next()){var w=C.value;if(w.canEncode(e.charAt(h))){d.push(w),p=!0;break}}}catch(z){i={error:z}}finally{try{C&&!C.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}p||(f=!0)}if(d.length===1&&!f)this.encoders=[d[0]];else{this.encoders=[];var N=0;try{for(var S=ul(d),I=S.next();!I.done;I=S.next()){var w=I.value;this.encoders[N++]=w}}catch(z){l={error:z}}finally{try{I&&!I.done&&(u=S.return)&&u.call(S)}finally{if(l)throw l.error}}}var R=-1;if(r!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&r.name===this.encoders[h].name){R=h;break}}this.priorityEncoderIndex=R}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return Or.encode(He.getCharAt(e),this.encoders[r].name)},t}(),Zy=3,qy=function(){function t(e,r,n){this.fnc1=n;var o=new Ky(e,r,n);if(o.length()===1)for(var a=0;a<this.bytes.length;a++){var i=e.charAt(a).charCodeAt(0);this.bytes[a]=i===n?1e3:i}else this.bytes=this.encodeMinimally(e,o,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new Ge,o=e;o<r;o++){if(this.isECI(o))throw new Error("value at "+o+" is not a character but an ECI");n.append(this.charAt(o))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,o,a,i){var s=e.charAt(o).charCodeAt(0),l=0,u=r.length();r.getPriorityEncoderIndex()>=0&&(s===i||r.canEncode(s,r.getPriorityEncoderIndex()))&&(l=r.getPriorityEncoderIndex(),u=l+1);for(var d=l;d<u;d++)(s===i||r.canEncode(s,d))&&this.addEdge(n,o+1,new pf(s,r,d,a,i))},t.prototype.encodeMinimally=function(e,r,n){var o=e.length,a=new pf[o+1][r.length()];this.addEdges(e,r,a,0,null,n);for(var i=1;i<=o;i++){for(var s=0;s<r.length();s++)a[i][s]!=null&&i<o&&this.addEdges(e,r,a,i,a[i][s],n);for(var s=0;s<r.length();s++)a[i-1][s]=null}for(var l=-1,u=$e.MAX_VALUE,s=0;s<r.length();s++)if(a[o][s]!=null){var d=a[o][s];d.cachedTotalSize<u&&(u=d.cachedTotalSize,l=s)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],h=a[o][l];h!=null;){if(h.isFNC1())f.unshift(1e3);else for(var p=r.encode(h.c,h.encoderIndex),i=p.length-1;i>=0;i--)f.unshift(p[i]&255);var v=h.previous===null?0:h.previous.encoderIndex;v!==h.encoderIndex&&f.unshift(256+r.getECIValue(h.encoderIndex)),h=h.previous}for(var y=[],i=0;i<y.length;i++)y[i]=f[i];return y},t}(),pf=function(){function t(e,r,n,o,a){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=o,this.fnc1=a,this.c=e===a?1e3:e;var i=this.isFNC1()?1:r.encode(e,n).length,s=o===null?0:o.encoderIndex;s!==n&&(i+=Zy),o!=null&&(i+=o.cachedTotalSize),this.cachedTotalSize=i}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),Qy=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var gf;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(gf||(gf={}));(function(t){Qy(e,t);function e(r,n,o,a,i){var s=t.call(this,r,n,o)||this;return s.shape=a,s.macroId=i,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(qy);var Jy=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),xf=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),e2=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),t2=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bu=function(t){t2(e,t);function e(r,n,o){var a=t.call(this,r)||this;return a.value=n,a.bitCount=o,a}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+$e.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(e2),r2=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),n2=function(t){r2(e,t);function e(r,n,o){var a=t.call(this,r,0,0)||this;return a.binaryShiftStart=n,a.binaryShiftByteCount=o,a}return e.prototype.appendTo=function(r,n){for(var o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):o===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+o],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(bu);function o2(t,e,r){return new n2(t,e,r)}function ca(t,e,r){return new bu(t,e,r)}var a2=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Pn=0,cs=1,Dr=2,Q1=3,qr=4,i2=new bu(null,0,0),dl=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],s2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function l2(t){var e,r;try{for(var n=s2(t),o=n.next();!o.done;o=n.next()){var a=o.value;At.fill(a,-1)}}catch(i){e={error:i}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[Pn][qr]=0,t[cs][qr]=0,t[cs][Pn]=28,t[Q1][qr]=0,t[Dr][qr]=0,t[Dr][Pn]=15,t}var J1=l2(At.createInt32Array(6,6)),c2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u2=function(){function t(e,r,n,o){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=o}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,o=this.token;if(e!==this.mode){var a=dl[this.mode][e];o=ca(o,a&65535,a>>16),n+=a>>16}var i=e===Dr?4:5;return o=ca(o,r,i),new t(o,e,0,n+i)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,o=this.mode===Dr?4:5;return n=ca(n,J1[this.mode][e],o),n=ca(n,r,5),new t(n,this.mode,0,this.bitCount+o+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,o=this.bitCount;if(this.mode===qr||this.mode===Dr){var a=dl[n][Pn];r=ca(r,a&65535,a>>16),o+=a>>16,n=Pn}var i=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new t(r,n,this.binaryShiftByteCount+1,o+i);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=o2(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(dl[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,o=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())o.unshift(a);var i=new jt;try{for(var s=c2(o),l=s.next();!l.done;l=s.next()){var u=l.value;u.appendTo(i,e)}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},t.prototype.toString=function(){return He.format("%s bits=%d bytes=%d",a2[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(i2,Pn,0,0),t}();function d2(t){var e=He.getCharCode(" "),r=He.getCharCode("."),n=He.getCharCode(",");t[Pn][e]=1;for(var o=He.getCharCode("Z"),a=He.getCharCode("A"),i=a;i<=o;i++)t[Pn][i]=i-a+2;t[cs][e]=1;for(var s=He.getCharCode("z"),l=He.getCharCode("a"),i=l;i<=s;i++)t[cs][i]=i-l+2;t[Dr][e]=1;for(var u=He.getCharCode("9"),d=He.getCharCode("0"),i=d;i<=u;i++)t[Dr][i]=i-d+2;t[Dr][n]=12,t[Dr][r]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],h=0;h<f.length;h++)t[Q1][He.getCharCode(f[h])]=h;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<p.length;h++)He.getCharCode(p[h])>0&&(t[qr][He.getCharCode(p[h])]=h);return t}var fl=d2(At.createInt32Array(5,256)),wi=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f2=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=He.getCharCode(" "),r=He.getCharCode(`
`),n=xf.singletonList(u2.INITIAL_STATE),o=0;o<this.text.length;o++){var a=void 0,i=o+1<this.text.length?this.text[o+1]:0;switch(this.text[o]){case He.getCharCode("\r"):a=i===r?2:0;break;case He.getCharCode("."):a=i===e?3:0;break;case He.getCharCode(","):a=i===e?4:0;break;case He.getCharCode(":"):a=i===e?5:0;break;default:a=0}a>0?(n=t.updateStateListForPair(n,o,a),o++):n=this.updateStateListForChar(n,o)}var s=xf.min(n,function(l,u){return l.getBitCount()-u.getBitCount()});return s.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,o,a=[];try{for(var i=wi(e),s=i.next();!s.done;s=i.next()){var l=s.value;this.updateStateForChar(l,r,a)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return t.simplifyStates(a)},t.prototype.updateStateForChar=function(e,r,n){for(var o=this.text[r]&255,a=fl[e.getMode()][o]>0,i=null,s=0;s<=qr;s++){var l=fl[s][o];if(l>0){if(i==null&&(i=e.endBinaryShift(r)),!a||s===e.getMode()||s===Dr){var u=i.latchAndAppend(s,l);n.push(u)}if(!a&&J1[e.getMode()][s]>=0){var d=i.shiftAndAppend(s,l);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||fl[e.getMode()][o]===0){var f=e.addBinaryShiftChar(r);n.push(f)}},t.updateStateListForPair=function(e,r,n){var o,a,i=[];try{for(var s=wi(e),l=s.next();!l.done;l=s.next()){var u=l.value;this.updateStateForPair(u,r,n,i)}}catch(d){o={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}return this.simplifyStates(i)},t.updateStateForPair=function(e,r,n,o){var a=e.endBinaryShift(r);if(o.push(a.latchAndAppend(qr,n)),e.getMode()!==qr&&o.push(a.shiftAndAppend(qr,n)),n===3||n===4){var i=a.latchAndAppend(Dr,16-n).latchAndAppend(Dr,1);o.push(i)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);o.push(s)}},t.simplifyStates=function(e){var r,n,o,a,i=[];try{for(var s=wi(e),l=s.next();!l.done;l=s.next()){var u=l.value,d=!0,f=function(w){if(w.isBetterThanOrEqualTo(u))return d=!1,"break";u.isBetterThanOrEqualTo(w)&&(i=i.filter(function(g){return g!==w}))};try{for(var h=(o=void 0,wi(i)),p=h.next();!p.done;p=h.next()){var v=p.value,y=f(v);if(y==="break")break}}catch(w){o={error:w}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}d&&i.push(u)}}catch(w){r={error:w}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},t}(),h2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var o=new f2(e).encode(),a=$e.truncDivision(o.getSize()*r,100)+11,i=o.getSize()+a,s,l,u,d,f;if(n!==t.DEFAULT_AZTEC_LAYERS){if(s=n<0,l=Math.abs(n),l>(s?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new Be(He.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(l,s),d=t.WORD_SIZE[l];var h=u-u%d;if(f=t.stuffBits(o,d),f.getSize()+a>h)throw new Be("Data to large for user specified layer");if(s&&f.getSize()>d*64)throw new Be("Data to large for user specified layer")}else{d=0,f=null;for(var p=0;;p++){if(p>t.MAX_NB_BITS)throw new Be("Data too large for an Aztec code");if(s=p<=3,l=s?p+1:p,u=t.totalBitsInLayer(l,s),!(i>u)){(f==null||d!==t.WORD_SIZE[l])&&(d=t.WORD_SIZE[l],f=t.stuffBits(o,d));var h=u-u%d;if(!(s&&f.getSize()>d*64)&&f.getSize()+a<=h)break}}}var v=t.generateCheckWords(f,u,d),y=f.getSize()/d,w=t.generateModeMessage(s,l,y),g=(s?11:14)+l*4,x=new Int32Array(g),m;if(s){m=g;for(var p=0;p<x.length;p++)x[p]=p}else{m=g+1+2*$e.truncDivision($e.truncDivision(g,2)-1,15);for(var C=$e.truncDivision(g,2),N=$e.truncDivision(m,2),p=0;p<C;p++){var S=p+$e.truncDivision(p,15);x[C-p-1]=N-S-1,x[C+p]=N+S+1}}for(var I=new en(m),p=0,R=0;p<l;p++){for(var z=(l-p)*4+(s?9:12),k=0;k<z;k++)for(var oe=k*2,se=0;se<2;se++)v.get(R+oe+se)&&I.set(x[p*2+se],x[p*2+k]),v.get(R+z*2+oe+se)&&I.set(x[p*2+k],x[g-1-p*2-se]),v.get(R+z*4+oe+se)&&I.set(x[g-1-p*2-se],x[g-1-p*2-k]),v.get(R+z*6+oe+se)&&I.set(x[g-1-p*2-k],x[p*2+se]);R+=z*8}if(t.drawModeMessage(I,s,m,w),s)t.drawBullsEye(I,$e.truncDivision(m,2),5);else{t.drawBullsEye(I,$e.truncDivision(m,2),7);for(var p=0,k=0;p<$e.truncDivision(g,2)-1;p+=15,k+=16)for(var se=$e.truncDivision(m,2)&1;se<m;se+=2)I.set($e.truncDivision(m,2)-k,se),I.set($e.truncDivision(m,2)+k,se),I.set(se,$e.truncDivision(m,2)-k),I.set(se,$e.truncDivision(m,2)+k)}var A=new Jy;return A.setCompact(s),A.setSize(m),A.setLayers(l),A.setCodeWords(y),A.setMatrix(I),A},t.drawBullsEye=function(e,r,n){for(var o=0;o<n;o+=2)for(var a=r-o;a<=r+o;a++)e.set(a,r-o),e.set(a,r+o),e.set(r-o,a),e.set(r+o,a);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var o=new jt;return e?(o.appendBits(r-1,2),o.appendBits(n-1,6),o=t.generateCheckWords(o,28,4)):(o.appendBits(r-1,5),o.appendBits(n-1,11),o=t.generateCheckWords(o,40,4)),o},t.drawModeMessage=function(e,r,n,o){var a=$e.truncDivision(n,2);if(r)for(var i=0;i<7;i++){var s=a-3+i;o.get(i)&&e.set(s,a-5),o.get(i+7)&&e.set(a+5,s),o.get(20-i)&&e.set(s,a+5),o.get(27-i)&&e.set(a-5,s)}else for(var i=0;i<10;i++){var s=a-5+i+$e.truncDivision(i,5);o.get(i)&&e.set(s,a-7),o.get(i+10)&&e.set(a+7,s),o.get(29-i)&&e.set(s,a+7),o.get(39-i)&&e.set(a-7,s)}},t.generateCheckWords=function(e,r,n){var o,a,i=e.getSize()/n,s=new Z1(t.getGF(n)),l=$e.truncDivision(r,n),u=t.bitsToWords(e,n,l);s.encode(u,l-i);var d=r%n,f=new jt;f.appendBits(0,d);try{for(var h=h2(Array.from(u)),p=h.next();!p.done;p=h.next()){var v=p.value;f.appendBits(v,n)}}catch(y){o={error:y}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}return f},t.bitsToWords=function(e,r,n){var o=new Int32Array(n),a,i;for(a=0,i=e.getSize()/r;a<i;a++){for(var s=0,l=0;l<r;l++)s|=e.get(a*r+l)?1<<r-l-1:0;o[a]=s}return o},t.getGF=function(e){switch(e){case 4:return sr.AZTEC_PARAM;case 6:return sr.AZTEC_DATA_6;case 8:return sr.AZTEC_DATA_8;case 10:return sr.AZTEC_DATA_10;case 12:return sr.AZTEC_DATA_12;default:throw new Be("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new jt,o=e.getSize(),a=(1<<r)-2,i=0;i<o;i+=r){for(var s=0,l=0;l<r;l++)(i+l>=o||e.get(i+l))&&(s|=1<<r-1-l);(s&a)===a?(n.appendBits(s&a,r),i--):s&a?n.appendBits(s,r):(n.appendBits(s|1,r),i--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();const Ds=({isOpen:t,onClose:e,onScanSuccess:r,mode:n})=>{const{showNotification:o,openAddBarcodeModal:a}=vt();console.log(" QRCodeScannerModal props:",{isOpen:t,mode:n,hasOnScanSuccess:!!r});const i=_.useRef(null),s=_.useRef(null),l=_.useRef(null),u=_.useRef(null),d=_.useRef(!1),f=_.useRef(null),[h,p]=_.useState(!1),[v,y]=_.useState(""),[w,g]=_.useState(null),[x,m]=_.useState(!1);_.useEffect(()=>{const k=()=>{const oe=window.innerWidth<680;m(oe)};return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const C=async()=>{try{y("");const k=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:9999},height:{ideal:9999}}});l.current=k,i.current&&(i.current.srcObject=k,await i.current.play(),console.log(" Camera started, setting isScanning to true"),p(!0))}catch(k){console.error(":",k),y("")}},N=()=>{console.log(" "),d.current=!1,p(!1),l.current&&(l.current.getTracks().forEach(k=>k.stop()),l.current=null),i.current&&(i.current.srcObject=null)},S=async()=>{if(console.log(" captureAndScan called"),!i.current||!s.current||!h){console.log(" Early return: missing refs or not scanning");return}if(d.current){console.log(" Scan already in progress, skipping");return}d.current=!0;const k=i.current,oe=s.current,se=oe.getContext("2d");if(!se||k.readyState!==k.HAVE_ENOUGH_DATA){console.log(" Video not ready or no context"),d.current=!1,setTimeout(()=>{h&&S()},100);return}oe.width=k.videoWidth,oe.height=k.videoHeight,se.drawImage(k,0,0,oe.width,oe.height);const A=performance.now();try{console.log(" []  ZXing ...");const D=performance.now();f.current||(f.current=new gy);let F;try{F=await f.current.decodeFromCanvas(oe)}catch(P){if(P instanceof K){console.log(" "),d.current=!1,h&&S();return}throw P}const T=performance.now();if(console.log(` [] ZXing : ${(T-D).toFixed(2)}ms`),!F||!F.getText()){console.log(" "),d.current=!1,h&&S();return}const O=F.getText(),M=F.getBarcodeFormat();console.log(" :",O),console.log(" :",M),d.current=!1,N(),e();try{const P=performance.now(),te=await Me.searchByBarCode(O);console.log(":",te);const X=performance.now();if(console.log(` [] API: ${(X-P).toFixed(2)}ms`),console.log(" :",te),te.Code===200)if(console.log(" :",te.Data),console.log("  onScanSuccess, mode:",n),o("","success"),r){console.log(" onScanSuccess ");const ee=performance.now();r(O,te.Data);const Ne=performance.now();console.log(` [] : ${(Ne-ee).toFixed(2)}ms`);const me=performance.now();console.log(` [] : ${(me-A).toFixed(2)}ms`),console.log(" onScanSuccess ")}else console.warn(" onScanSuccess ");else te.Code===-200&&te.Result===""?(console.log(" "),o("","warning"),a(O)):(console.log(" :",te.Result),o(te.Result||"","error"))}catch(P){console.error(":",P),o("","error")}}catch(D){console.error(":",D),d.current=!1,setTimeout(()=>{h&&S()},500)}},I=()=>{console.log(" "),d.current=!1,S()};_.useEffect(()=>(t?C():N(),()=>{N(),f.current&&f.current.reset()}),[t]),_.useEffect(()=>{h?(console.log(" isScanning became true, starting continuous scan"),I()):(console.log(" isScanning became false"),d.current=!1)},[h]);const R=()=>{N(),e()},z=async k=>{if(!l.current||!u.current)return;const oe=u.current.getBoundingClientRect(),se=(k.clientX-oe.left)/oe.width,A=(k.clientY-oe.top)/oe.height;console.log(" :",{x:se,y:A}),g({x:k.clientX-oe.left,y:k.clientY-oe.top}),setTimeout(()=>g(null),1e3);try{const D=l.current.getVideoTracks()[0],F=D.getCapabilities();if(console.log(" :",F),!F.focusMode||!F.focusMode.includes("manual")){console.log(" ");return}const T={advanced:[{focusMode:"manual",focusDistance:0,pointsOfInterest:[{x:se,y:A}]}]};await D.applyConstraints(T),console.log(" ")}catch(D){console.log("  ():",D)}};return t?x?c.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-900 bg-opacity-90",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Vo,{className:"w-6 h-6 text-white"}),c.jsx("h2",{className:"text-lg font-semibold text-white",children:""})]}),c.jsx("button",{onClick:R,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:c.jsx(ut,{className:"w-6 h-6 text-white"})})]}),c.jsxs("div",{className:"flex-1 relative",children:[c.jsxs("div",{ref:u,className:"absolute inset-0 bg-black cursor-crosshair",onClick:z,children:[c.jsx("video",{ref:i,className:"w-full h-full object-cover",playsInline:!0,muted:!0}),w&&c.jsxs("div",{className:"absolute pointer-events-none",style:{left:w.x,top:w.y,transform:"translate(-50%, -50%)"},children:[c.jsx("div",{className:"w-16 h-16 border-2 border-yellow-400 rounded-full animate-ping"}),c.jsx("div",{className:"absolute inset-0 w-16 h-16 border-2 border-yellow-400 rounded-full"}),c.jsxs("div",{className:"absolute inset-0 w-16 h-16 flex items-center justify-center",children:[c.jsx("div",{className:"w-1 h-16 bg-yellow-400"}),c.jsx("div",{className:"absolute w-16 h-1 bg-yellow-400"})]})]})]}),c.jsx("canvas",{ref:s,className:"hidden"})]}),c.jsxs("div",{className:"p-4 bg-gray-900 bg-opacity-90",children:[v&&c.jsx("div",{className:"bg-red-500 bg-opacity-20 border border-red-500 rounded-lg px-3 py-2 mb-3",children:c.jsx("p",{className:"text-red-200 text-sm",children:v})}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-white text-base font-medium mb-1",children:""}),c.jsx("p",{className:"text-gray-300 text-sm mb-1",children:"QR Code"}),c.jsx("p",{className:"text-gray-400 text-xs",children:" "})]})]})]}):c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full overflow-hidden flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",children:c.jsx(Vo,{className:"w-6 h-6 text-blue-500"})}),c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:""})]}),c.jsx("button",{onClick:R,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(ut,{className:"w-6 h-6 text-gray-600"})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[v&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg px-3 py-2 mb-4",children:c.jsx("p",{className:"text-red-600 text-sm",children:v})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{ref:u,className:"relative bg-black rounded-xl overflow-hidden cursor-crosshair",style:{aspectRatio:"16/9"},onClick:z,children:c.jsx("video",{ref:i,className:"w-full h-full object-cover",playsInline:!0,muted:!0})}),c.jsx("canvas",{ref:s,className:"hidden"}),c.jsxs("div",{className:"text-center rounded-lg pb-4",children:[c.jsx("p",{className:"text-gray-800 text-base font-medium mb-2",children:""}),c.jsx("p",{className:"text-gray-600 text-sm",children:"QR Code"}),c.jsx("p",{className:"text-gray-500 text-xs mt-1",children:" "})]})]})]})]})}):null};class p2{constructor(){this.currentTask=null,this.isProcessing=!1}async startLighting(e,r,n,o,a){if(this.isProcessing){console.log(" ...");return}this.isProcessing=!0;try{this.currentTask&&(console.log(" ..."),await this.clearCurrentTask(),await this.sleep(200)),console.log(" ");for(const s of e)try{const l=performance.now();await Me.lightByCodeNameType(s.serverName,s.serverType,s.medicineCode,r,n,s.deviceType);const u=performance.now();console.log(` API (${s.serverName}/${s.medicineCode}): ${(u-l).toFixed(2)}ms`)}catch(l){console.error(`  (${s.serverName}/${s.medicineCode}):`,l)}const i=setTimeout(async()=>{var s;console.log(" "),await this.turnOffLights(e),(s=this.currentTask)!=null&&s.onLightOff&&this.currentTask.onLightOff(),this.currentTask=null},o);this.currentTask={timerId:i,lightData:e,onLightOff:a},console.log(`  ${o/1e3} `)}finally{this.isProcessing=!1}}async clearCurrentTask(){this.currentTask&&(clearTimeout(this.currentTask.timerId),console.log(" "),await this.turnOffLights(this.currentTask.lightData),this.currentTask.onLightOff&&this.currentTask.onLightOff(),this.currentTask=null)}async turnOffLights(e){console.log(" ...");for(const r of e)try{const n=performance.now();await Me.lightByCodeNameType(r.serverName,r.serverType,r.medicineCode,"0,0,0","0",r.deviceType);const o=performance.now();console.log(` API (${r.serverName}/${r.medicineCode}): ${(o-n).toFixed(2)}ms`)}catch(n){console.error(`  (${r.serverName}/${r.medicineCode}):`,n)}console.log(" ")}async turnOffAllLights(){this.currentTask&&await this.clearCurrentTask()}sleep(e){return new Promise(r=>setTimeout(r,e))}hasActiveTask(){return this.currentTask!==null}getCurrentMedicineCode(){var e,r;return((r=(e=this.currentTask)==null?void 0:e.lightData[0])==null?void 0:r.medicineCode)||null}getCurrentMedicineCodes(){return this.currentTask?this.currentTask.lightData.map(e=>e.medicineCode):[]}cleanup(){this.currentTask&&(clearTimeout(this.currentTask.timerId),this.currentTask=null),this.isProcessing=!1}}const Aa=new p2,g2=({children:t})=>{const e=_.useRef(null),{selectedDepartmentType:r,apiDepartmentData:n,setApiDepartmentData:o,showNotification:a,openAddBarcodeModal:i,openContainerDetailModal:s,highlightedMedicineCode:l,setHighlightedMedicineCode:u,activeCanvas:d,setActiveCanvas:f}=vt(),{t:h}=nr(),[p,v]=_.useState({x:0,y:0,scale:1}),[y,w]=_.useState(!1),[g,x]=_.useState(!1),[m,C]=_.useState({x:0,y:0}),[N,S]=_.useState(!1),[I,R]=_.useState(!1),[z,k]=_.useState(""),[oe,se]=_.useState([]),[A,D]=_.useState(null),F={blue:"255,0,0",green:"0,255,0",red:"0,0,255",yellow:"0,255,255",purple:"255,0,255",cyan:"255,255,0"},T=()=>{try{const U=localStorage.getItem("med_map_anchor");return U?JSON.parse(U):[]}catch(U){return console.error("Error reading canvas states from localStorage:",U),[]}},O=(U,Z,Q,ue)=>{try{const ge=T(),Ee=ge.findIndex(Se=>Se.department===U&&Se.canvasType===Z),pe={department:U,canvasType:Z,scale:Q,position:ue};Ee>=0?ge[Ee]=pe:ge.push(pe),localStorage.setItem("med_map_anchor",JSON.stringify(ge))}catch(ge){console.error("Error saving canvas state to localStorage:",ge)}},M=(U,Z)=>T().find(ue=>ue.department===U&&ue.canvasType===Z)||null;_.useEffect(()=>(f("infinite"),()=>{f(null)}),[f]),_.useEffect(()=>{if(d!=="infinite"||!r)return;const Z=setInterval(async()=>{try{console.log(" Auto-refreshing data for InfiniteCanvas...");const Q=await Me.getMedMapByDepartment(r);if(Q.Code===200&&Q.Data){console.log(" API ");const ue=Wt.convertMedMapApiToFakeData(Q.Data);if(!Wt.validateConvertedData(ue)){console.error(" ");return}console.log(" Data refreshed and converted successfully, updating state..."),console.log(" Converted data to set:",ue),o(ue)}}catch(Q){console.error(" Failed to auto-refresh data:",Q)}},3*60*1e3);return()=>{clearInterval(Z)}},[d,r,o]),_.useEffect(()=>{if(r){const U=M(r,"InfiniteCanvas");if(U)v({x:U.position.x,y:U.position.y,scale:U.scale});else{const Z={x:0,y:0,scale:1};v(Z),O(r,"InfiniteCanvas",Z.scale,Z)}}},[r]),_.useEffect(()=>{if(!r)return;const U=setTimeout(()=>{O(r,"InfiniteCanvas",p.scale,{x:p.x,y:p.y})},500);return()=>clearTimeout(U)},[p,r]),_.useEffect(()=>{console.log(" InfiniteCanvas: apiDepartmentData changed",{hasData:!!n,length:(n==null?void 0:n.length)||0,data:n})},[n]);const P=_.useMemo(()=>{if(console.log(" useMemo: Re-calculating components due to apiDepartmentData change"),!n||n.length===0)return console.log(" No apiDepartmentData available"),[];const U=n,Z=[];console.log(" Processing departments for InfiniteCanvas:",U);for(const Q of U)if(console.log(" Processing department:",Q.name,"Type:",Q.type),Q.type===""||Q.type===""){if(Q.contents&&Array.isArray(Q.contents)){console.log("   Found",Q.contents.length,"parent containers");for(const ue of Q.contents)console.log("     Parent container:",{GUID:ue.GUID,name:ue.name,type:ue.type,position:ue.position,hasDimensions:!!ue.dimensions,dimensions:ue.dimensions}),Z.push({GUID:ue.GUID,type:ue.type,name:`${ue.name}`,position:ue.position,dimensions:ue.dimensions||{width:200,height:200,depth:200},med_list:ue.med_list||[],serverName:ue.serverName,serverType:ue.serverType,Master_GUID:Q.GUID,contents:ue.contents||[]})}}else Q.contents&&Array.isArray(Q.contents)&&Q.contents.length>0&&(console.log("   Found",Q.contents.length,"contents"),Z.push(...Q.contents));return console.log(" Total components for InfiniteCanvas:",Z.length),Z},[n]);_.useEffect(()=>{console.log(" InfiniteCanvas: components changed",{count:P.length,components:P.map(U=>({GUID:U.GUID,name:U.name,type:U.type,position:U.position}))})},[P]),_.useEffect(()=>{const U=Q=>{Q.code==="Space"&&!Q.repeat&&(Q.preventDefault(),S(!0))},Z=Q=>{Q.code==="Space"&&(Q.preventDefault(),S(!1),w(!1))};return window.addEventListener("keydown",U),window.addEventListener("keyup",Z),()=>{window.removeEventListener("keydown",U),window.removeEventListener("keyup",Z)}},[]);const te=_.useCallback(U=>{var Q;if(g)return;if(U.ctrlKey&&!navigator.userAgent.includes("Mac")||U.metaKey&&navigator.userAgent.includes("Mac")){U.preventDefault(),U.stopPropagation();const ue=(Q=e.current)==null?void 0:Q.getBoundingClientRect();if(!ue)return;const ge=U.clientX-ue.left,Ee=U.clientY-ue.top,pe=U.deltaY>0?.9:1.1,Se=Math.max(.1,Math.min(5,p.scale*pe)),Te=Se/p.scale,Le=ge-(ge-p.x)*Te,gt=Ee-(Ee-p.y)*Te;v({x:Le,y:gt,scale:Se})}},[p,g]),X=_.useCallback(U=>{g||!N||(w(!0),C({x:U.clientX,y:U.clientY}),U.preventDefault())},[g,N]),ee=_.useCallback(U=>{if(!y||g)return;const Z=U.clientX-m.x,Q=U.clientY-m.y;v(ue=>({...ue,x:ue.x+Z,y:ue.y+Q})),C({x:U.clientX,y:U.clientY})},[y,m,g]),Ne=_.useCallback(()=>{w(!1)},[]),me=_.useCallback(U=>{if(!n)return[];const Z=[],Q=ue=>{for(const ge of ue)ge.med_list&&Array.isArray(ge.med_list)&&ge.med_list.some(pe=>pe.code==U)&&(console.log(" :",ge.name,ge.GUID),Z.push(ge)),ge.components&&Array.isArray(ge.components)&&Q(ge.components),ge.contents&&Array.isArray(ge.contents)&&Q(ge.contents)};return Q(n),Z},[n]),H=_.useCallback(()=>{try{const Z=localStorage.getItem("medMap_setting");if(Z){const ue=JSON.parse(Z).light_sec;if(ue!=null&&ue!==""){const ge=Number(ue);if(!isNaN(ge)&&ge>0)return ge*1e3}}}catch(Z){console.error(":",Z)}return 6e4},[]),Ce=_.useCallback(()=>{const U={rgb_color:"255,0,0",brightness:"100"};try{const Z=localStorage.getItem("medMap_setting");if(Z){const Q=JSON.parse(Z),ue=Q.light_color||"red";return{rgb_color:F[ue]||F.red,brightness:String(Q.brightness!==void 0?Q.brightness:100)}}}catch(Z){console.error(":",Z)}return U},[]),Y=_.useCallback(async U=>{if(!U.trim())return;console.log(" :",U);const Z=me(U);if(Z.length>0){const Q=H(),ue=Ce();console.log(`  ${Z.length} :`,Z),console.log(` : ${Q}ms (${Q/1e3})`),console.log(" :",ue);const ge=Z.map(pe=>pe.GUID);se(ge),D(U),u(U);const Ee=Z.filter(pe=>pe.serverName&&pe.serverType).map(pe=>({serverName:pe.serverName,serverType:pe.serverType,medicineCode:U,deviceType:pe.device_type}));Ee.length>0&&(await Aa.startLighting(Ee,ue.rgb_color,ue.brightness,Q),setTimeout(()=>{se([]),D(null),u(null)},Q))}else console.log(" "),se([]),D(null),u(null)},[me,H,Ce,u]),be=(U,Z)=>{var Ee,pe;console.log(" [-]  - :",{barcode:U,medicineData:Z});const Q=((Ee=Z[0])==null?void 0:Ee.CODE)||((pe=Z[0])==null?void 0:pe.code);R(!1);const ue=performance.now();Y(Q);const ge=performance.now();console.log(` [-] : ${(ge-ue).toFixed(2)}ms`)},ye=async U=>{var Z,Q;if(U.key==="Enter"){if(U.preventDefault(),!z.trim()){a("","warning");return}const ue=performance.now();try{console.log(" [-] :",z);const ge=performance.now(),Ee=await Me.searchByBarCode(z),pe=performance.now();if(console.log(` [-] API: ${(pe-ge).toFixed(2)}ms`),console.log(" :",Ee),Ee.Code===200&&Ee.Data&&Ee.Data.length>0){const Se=((Z=Ee.Data[0])==null?void 0:Z.CODE)||((Q=Ee.Data[0])==null?void 0:Q.code);console.log(" :",Ee.Data),a("","success");const Te=performance.now();Y(Se);const Le=performance.now();console.log(` [-] : ${(Le-Te).toFixed(2)}ms`),k("");const gt=performance.now();console.log(` [-] : ${(gt-ue).toFixed(2)}ms`)}else Ee.Code===-200&&Ee.Result===""?(console.log(" "),a("","warning"),i(z),k("")):(console.log(" :",Ee.Result),a(Ee.Result||"","error"))}catch(ge){console.error(":",ge),a("","error")}}};_.useEffect(()=>()=>{Aa.cleanup()},[]),_.useEffect(()=>{if(l){console.log(" Context highlightedMedicineCode :",l);const U=me(l);if(U.length>0){const Z=U.map(Q=>Q.GUID);se(Z),D(l),console.log(" UI :",Z)}}else se([]),D(null)},[l,me]);const[B,xe]=_.useState(null),[W,j]=_.useState({x:0,y:0}),ce=U=>{if(U.length<2)return null;const Z=U[0],Q=U[1];return Math.sqrt(Math.pow(Q.clientX-Z.clientX,2)+Math.pow(Q.clientY-Z.clientY,2))},de=U=>{if(U.length===1)return{x:U[0].clientX,y:U[0].clientY};const Z=U[0],Q=U[1];return{x:(Z.clientX+Q.clientX)/2,y:(Z.clientY+Q.clientY)/2}},V=_.useCallback(U=>{if(!g){if(U.touches.length===2){const Z=ce(U.touches),Q=de(U.touches);xe(Z),j(Q)}else if(U.touches.length===1){const Z=U.touches[0];C({x:Z.clientX,y:Z.clientY}),w(!0)}}},[g]),re=_.useCallback(U=>{var Z;if(!g){if(U.preventDefault(),U.touches.length===2&&B!==null){const Q=ce(U.touches),ue=de(U.touches);if(Q&&B){const ge=(Z=e.current)==null?void 0:Z.getBoundingClientRect();if(!ge)return;const Ee=Q/B,pe=Math.max(.1,Math.min(5,p.scale*Ee)),Se=ue.x-ge.left,Te=ue.y-ge.top,Le=pe/p.scale,gt=Se-(Se-p.x)*Le,Ue=Te-(Te-p.y)*Le;v({x:gt,y:Ue,scale:pe}),xe(Q),j(ue)}}else if(U.touches.length===1&&y){const Q=U.touches[0],ue=Q.clientX-m.x,ge=Q.clientY-m.y;v(Ee=>({...Ee,x:Ee.x+ue,y:Ee.y+ge})),C({x:Q.clientX,y:Q.clientY})}}},[p,B,y,m,g]),he=_.useCallback(()=>{xe(null),w(!1)},[]);return _.useEffect(()=>{const U=e.current;if(U)return U.addEventListener("wheel",te,{passive:!1}),()=>U.removeEventListener("wheel",te)},[te]),_.useCallback(()=>{v({x:0,y:0,scale:1})},[]),c.jsxs("div",{className:"relative w-full h-full overflow-hidden bg-gray-50",children:[c.jsx("div",{className:"absolute md:bottom-4 md:left-4 bottom-16 left-[50%] md:translate-x-[0%] translate-x-[-50%] z-10",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-lg flex items-center overflow-hidden border border-gray-200",children:[c.jsx("input",{type:"text",value:z,onChange:U=>k(U.target.value),onKeyPress:ye,placeholder:"...",className:"px-4 py-2 w-50 focus:outline-none text-gray-700 disabled:opacity-50"}),c.jsx("button",{onClick:()=>R(!0),className:"p-2",title:"",children:c.jsx(Vo,{className:"w-6 h-6 text-blue-600"})})]})}),c.jsx("div",{className:"absolute bottom-4 right-4 z-10 flex gap-2",children:c.jsx("button",{onClick:()=>x(!g),className:`p-3 rounded-lg shadow-lg transition-colors ${g?"bg-red-500 text-white hover:bg-red-600":"bg-white text-gray-700 hover:bg-gray-50"}`,title:h(g?"canvas.unlockCanvas":"canvas.lockCanvas"),children:g?c.jsx(gu,{className:"w-6 h-6"}):c.jsx(F1,{className:"w-6 h-6"})})}),c.jsx("div",{ref:e,className:`w-full h-full relative ${N&&!g?"cursor-grab":"cursor-default"} ${y?"cursor-grabbing":""}`,onMouseDown:X,onMouseMove:ee,onMouseUp:Ne,onMouseLeave:Ne,onTouchStart:V,onTouchMove:re,onTouchEnd:he,children:c.jsxs("div",{className:"absolute inset-0 origin-top-left",style:{transform:`translate(${p.x}px, ${p.y}px) scale(${p.scale})`,transformOrigin:"0 0"},children:[c.jsx("div",{className:"absolute",style:{left:-1e4,top:-1e4,width:2e4,height:2e4,backgroundImage:`
                linear-gradient(to right, #e5e7eb 1px, transparent 1px),
                linear-gradient(to bottom, #e5e7eb 1px, transparent 1px)
              `,backgroundSize:"50px 50px"}}),c.jsxs("div",{className:"relative","data-canvas-content":!0,children:[P.map(U=>c.jsx(Ix,{component:U,scale:p.scale,isLocked:g,isHighlighted:oe.includes(U.GUID),onContainerClick:Z=>{console.log(" :",A),s(Z,A)}},U.GUID)),t]})]})}),c.jsx(Ds,{isOpen:I,onClose:()=>R(!1),onScanSuccess:be,mode:"med_light_location_mode"})]})},_i=({content:t,isAdminMode:e})=>{const{openMedBoxModal:r,openAddMedBoxModal:n,openListDrawModal:o,openGridDrawModal:a,openAddShelfDrawContainerModal:i,openAddSubContainerModal:s,openAddStoreItemModal:l,setSelectedMedBox:u,setModalMode:d,setMedBoxModalOpen:f,showNotification:h,triggerRefresh:p,openEditStoreShelfModal:v,openEditParentContainerModal:y,updateContainerInLocalData:w,removeContainerFromLocalData:g}=vt(),{t:x}=nr(),[m,C]=_.useState(!1),[N,S]=_.useState(""),[I,R]=_.useState(!1),[z,k]=_.useState(t.name),[oe,se]=_.useState(!1),[A,D]=_.useState(!1);_.useEffect(()=>{k(t.name)},[t.name]);const F=H=>{H.stopPropagation(),S(t.name||""),C(!0)},T=H=>{H.stopPropagation(),C(!1),S("")},O=H=>{H.stopPropagation(),D(!0)},M=H=>{H.stopPropagation(),D(!1)},P=async H=>{H.stopPropagation(),se(!0);try{let Ce;if(t.type==="parent_container")Ce=await Me.deleteParentContainer(t.GUID);else if(t.type==="sub_container")Ce=await Me.deleteSubContainer(t.GUID);else if(t.type==="store_shelves"||t.type==="dispensing_shelves")Ce=await Me.deleteShelfContainer(t.GUID);else{h("","error"),se(!1),D(!1);return}Ce.Code===200?(h("","success"),g(t.GUID),D(!1)):h(Ce.Result||"","error")}catch(Ce){console.error(":",Ce),h("","error")}finally{se(!1),D(!1)}},te=async H=>{if(H.stopPropagation(),!N.trim()){h("","error");return}if(N===t.name){C(!1);return}R(!0);try{const Ce=[{GUID:t.GUID,name:N.trim(),Master_GUID:t.Master_GUID,position:t.gird_position,serverName:t.serverName,serverType:t.serverType}];let Y;if(t.type==="store_shelves"||t.type==="dispensing_shelves")Y=await Me.updateMedMapShelf(Ce);else if(t.type==="sub_container")Y=await Me.updateSubSection(Ce);else if(t.type==="parent_container")Y=await Me.updateMedMapSection(Ce);else{h("","error"),R(!1);return}Y.Code===200?(h("","success"),C(!1),k(N.trim()),w(t.GUID,{name:N.trim()})):h(Y.Result||"","error")}catch(Ce){console.error(":",Ce),h("","error")}finally{R(!1)}},X=H=>{switch(H){case"parent_container":return"bg-pink-100";case"sub_container":return"bg-blue-100";case"dispensing_shelves":case"store_shelves":return"bg-green-100";case"med_box":return"bg-yellow-100";case"grid_draw":case"list_draw":return"bg-violet-100";default:return"bg-gray-100"}},ee=H=>{switch(H){case"parent_container":return"border-pink-200";case"sub_container":return"border-blue-200";case"dispensing_shelves":case"store_shelves":return"border-green-200";case"med_box":return"border-yellow-200";case"grid_draw":case"list_draw":return"border-violet-200";default:return"border-gray-200"}},Ne=H=>{switch(H){case"parent_container":return"bg-pink-400";case"sub_container":return"bg-blue-400";case"dispensing_shelves":case"store_shelves":return"bg-green-400";case"med_box":return"bg-yellow-400";case"grid_draw":case"list_draw":return"bg-violet-400";default:return"bg-gray-200"}},me=H=>{switch(H){case"parent_container":return x("type.parentContainer");case"sub_container":return x("type.subContainer");case"dispensing_shelves":return x("type.medBoxShelf");case"store_shelves":return x("type.storeShelf");case"grid_draw":return x("type.gridDraw");case"list_draw":return x("type.listDraw");case"med_box":return x("type.medBox");default:return H}};switch(t.type){case"sub_container":return c.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${X(t.type||0)} ${ee(t.type||0)}`,children:[c.jsxs("div",{className:"flex items-center space-x-2 mr-6 flex-1",children:[m?c.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[c.jsx("input",{type:"text",value:N,onChange:H=>S(H.target.value),onClick:H=>H.stopPropagation(),className:"text-base font-semibold text-gray-800 border-2 border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:I,autoFocus:!0}),c.jsx("button",{onClick:te,disabled:I,className:"p-1 hover:bg-green-100 rounded transition-colors disabled:opacity-50",title:"",children:c.jsx(gi,{className:"w-5 h-5 text-green-600"})}),c.jsx("button",{onClick:T,disabled:I,className:"p-1 hover:bg-red-100 rounded transition-colors disabled:opacity-50",title:"",children:c.jsx(ut,{className:"w-5 h-5 text-red-600"})})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-base font-semibold text-gray-800 whitespace-nowrap",children:z}),c.jsx("button",{onClick:F,className:"p-1 hover:bg-black/10 rounded transition-colors",title:"",children:c.jsx(Io,{className:"w-4 h-4 text-gray-600"})})]}),t.type!="parent_container"&&!m&&c.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${Ne(t.type)}`,children:me(t.type)})]}),t.type!=="none"&&!m&&c.jsxs("div",{className:"flex items-center space-x-1",children:[e&&c.jsx("button",{className:"p-1 hover:bg-red-100 rounded transition-colors",onClick:O,title:"",children:c.jsx(Do,{className:"w-5 h-5 text-red-600"})}),c.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:H=>{H.stopPropagation(),i(t)},title:x("modal.add"),children:c.jsx(cr,{className:"w-6 h-6 text-green-700"})})]}),A&&c.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-sm mx-4",onClick:H=>H.stopPropagation(),children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:""}),c.jsxs("p",{className:"text-gray-600 mb-4",children:["",t.name,""]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{onClick:M,disabled:oe,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:""}),c.jsx("button",{onClick:P,disabled:oe,className:"px-4 py-2 text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:oe?"...":""})]})]})})]});case"parent_container":return c.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${X(t.type||0)} ${ee(t.type||0)} cursor-pointer hover:bg-black/5 transition-colors`,onClick:H=>{m||y(t)},children:[c.jsxs("div",{className:"flex items-center space-x-2 mr-6 flex-1",children:[m?c.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[c.jsx("input",{type:"text",value:N,onChange:H=>S(H.target.value),onClick:H=>H.stopPropagation(),className:"text-base font-semibold text-gray-800 border-2 border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:I,autoFocus:!0}),c.jsx("button",{onClick:H=>{H.stopPropagation(),te(H)},disabled:I,className:"p-1 hover:bg-green-100 rounded transition-colors disabled:opacity-50",title:"",children:c.jsx(gi,{className:"w-5 h-5 text-green-600"})}),c.jsx("button",{onClick:H=>{H.stopPropagation(),T(H)},disabled:I,className:"p-1 hover:bg-red-100 rounded transition-colors disabled:opacity-50",title:"",children:c.jsx(ut,{className:"w-5 h-5 text-red-600"})})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-base font-semibold text-gray-800 whitespace-nowrap",children:z}),c.jsx("button",{onClick:H=>{H.stopPropagation(),F(H)},className:"p-1 hover:bg-black/10 rounded transition-colors",title:"",children:c.jsx(Io,{className:"w-4 h-4 text-gray-600"})})]}),t.type!="parent_container"&&!m?c.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${Ne(t.type)}`,children:me(t.type)}):null]}),t.type!=="none"&&!m&&c.jsxs("div",{className:"flex items-center space-x-1",children:[e&&c.jsx("button",{className:"p-1 hover:bg-red-100 rounded transition-colors",onClick:O,title:"",children:c.jsx(Do,{className:"w-5 h-5 text-red-600"})}),c.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:H=>{H.stopPropagation(),s(t)},title:x("modal.add"),children:c.jsx(cr,{className:"w-6 h-6 text-green-700"})})]}),A&&c.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-sm mx-4",onClick:H=>H.stopPropagation(),children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:""}),c.jsxs("p",{className:"text-gray-600 mb-4",children:["",t.name,""]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{onClick:M,disabled:oe,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:""}),c.jsx("button",{onClick:P,disabled:oe,className:"px-4 py-2 text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:oe?"...":""})]})]})})]});case"med_box":return c.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${X(t.type||0)} ${ee(t.type||0)}`,children:[c.jsx("div",{className:"flex items-center mr-4",children:t.type!="parent_container"?c.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${Ne(t.type)}`,children:me(t.type)}):null}),c.jsx("div",{className:"flex items-center space-x-1",children:c.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:H=>{H.stopPropagation(),r(t)},title:x("modal.settings"),children:c.jsx(Sn,{className:"w-6 h-6 text-gray-600"})})})]});case"dispensing_shelves":return c.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${X(t.type||0)} ${ee(t.type||0)}`,onClick:H=>{m||v(t)},children:[c.jsxs("div",{className:"flex items-center space-x-2 mr-6 flex-1",children:[m?c.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[c.jsx("input",{type:"text",value:N,onChange:H=>S(H.target.value),onClick:H=>H.stopPropagation(),className:"text-base font-semibold text-gray-800 border-2 border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:I,autoFocus:!0}),c.jsx("button",{onClick:te,disabled:I,className:"p-1 hover:bg-green-100 rounded transition-colors disabled:opacity-50",title:"",children:c.jsx(gi,{className:"w-5 h-5 text-green-600"})}),c.jsx("button",{onClick:T,disabled:I,className:"p-1 hover:bg-red-100 rounded transition-colors disabled:opacity-50",title:"",children:c.jsx(ut,{className:"w-5 h-5 text-red-600"})})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-base font-semibold text-gray-800 whitespace-nowrap",children:z}),c.jsx("button",{onClick:H=>{H.stopPropagation(),F(H)},className:"p-1 hover:bg-black/10 rounded transition-colors",title:"",children:c.jsx(Io,{className:"w-4 h-4 text-gray-600"})})]}),t.type!="parent_container"&&!m&&c.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${Ne(t.type)}`,children:me(t.type)})]}),c.jsxs("div",{className:"flex items-center space-x-1",children:[e&&!m&&c.jsx("button",{className:"p-1 hover:bg-red-100 rounded transition-colors",onClick:O,title:"",children:c.jsx(Do,{className:"w-5 h-5 text-red-600"})}),c.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:H=>{H.stopPropagation();const Ce={GUID:`new_medbox_${Date.now()}`,name:"",box_type:"",width:[],width_index:0,med_info:[],parentShelf:t};u(Ce),d("add"),f(!0)},title:x("modal.add"),children:c.jsx(cr,{className:"w-6 h-6 text-green-700"})})]}),A&&c.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-sm mx-4",onClick:H=>H.stopPropagation(),children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:""}),c.jsxs("p",{className:"text-gray-600 mb-4",children:["",t.name,""]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{onClick:M,disabled:oe,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:""}),c.jsx("button",{onClick:P,disabled:oe,className:"px-4 py-2 text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:oe?"...":""})]})]})})]});case"store_shelves":return c.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${X(t.type||0)} ${ee(t.type||0)} cursor-pointer hover:bg-black/5 transition-colors`,onClick:H=>{m||v(t)},children:[c.jsxs("div",{className:"flex items-center space-x-2 mr-6 flex-1",children:[m?c.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[c.jsx("input",{type:"text",value:N,onChange:H=>S(H.target.value),onClick:H=>H.stopPropagation(),className:"text-base font-semibold text-gray-800 border-2 border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:I,autoFocus:!0}),c.jsx("button",{onClick:H=>{H.stopPropagation(),te(H)},disabled:I,className:"p-1 hover:bg-green-100 rounded transition-colors disabled:opacity-50",title:"",children:c.jsx(gi,{className:"w-5 h-5 text-green-600"})}),c.jsx("button",{onClick:H=>{H.stopPropagation(),T(H)},disabled:I,className:"p-1 hover:bg-red-100 rounded transition-colors disabled:opacity-50",title:"",children:c.jsx(ut,{className:"w-5 h-5 text-red-600"})})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-base font-semibold text-gray-800 whitespace-nowrap",children:z}),c.jsx("button",{onClick:H=>{H.stopPropagation(),F(H)},className:"p-1 hover:bg-black/10 rounded transition-colors",title:"",children:c.jsx(Io,{className:"w-4 h-4 text-gray-600"})})]}),t.type!="parent_container"&&!m&&c.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${Ne(t.type)}`,children:me(t.type)})]}),c.jsxs("div",{className:"flex items-center space-x-1",children:[e&&!m&&c.jsx("button",{className:"p-1 hover:bg-red-100 rounded transition-colors",onClick:O,title:"",children:c.jsx(Do,{className:"w-5 h-5 text-red-600"})}),c.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:H=>{H.stopPropagation(),l(t)},title:x("modal.add"),children:c.jsx(cr,{className:"w-6 h-6 text-green-700"})})]}),A&&c.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-sm mx-4",onClick:H=>H.stopPropagation(),children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:""}),c.jsxs("p",{className:"text-gray-600 mb-4",children:["",t.name,""]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{onClick:M,disabled:oe,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:""}),c.jsx("button",{onClick:P,disabled:oe,className:"px-4 py-2 text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:oe?"...":""})]})]})})]});case"list_draw":return c.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${X(t.type||0)} ${ee(t.type||0)}`,children:[c.jsxs("div",{className:"flex items-center space-x-2 mr-6",children:[c.jsx("span",{className:"text-base font-semibold text-gray-800 whitespace-nowrap",children:t.name}),t.type!="parent_container"?c.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${Ne(t.type)}`,children:me(t.type)}):null]}),c.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:H=>{H.stopPropagation(),o(t)},title:x("modal.settings"),children:c.jsx(Sn,{className:"w-6 h-6 text-gray-600"})})]});case"grid_draw":return c.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${X(t.type||0)} ${ee(t.type||0)}`,children:[c.jsxs("div",{className:"flex items-center space-x-2 mr-6",children:[c.jsx("span",{className:"text-base font-semibold text-gray-800 whitespace-nowrap",children:t.name}),t.type!="parent_container"?c.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${Ne(t.type)}`,children:me(t.type)}):null]}),c.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:H=>{H.stopPropagation(),a(t)},title:x("modal.settings"),children:c.jsx(Sn,{className:"w-6 h-6 text-gray-600"})})]});default:return c.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${X(t.type||0)} ${ee(t.type||0)}`,children:[c.jsx("div",{className:"flex items-center space-x-2 mr-6",children:t.type!="parent_container"?c.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${Ne(t.type)}`,children:me(t.type)}):null}),t.type!=="none"&&c.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",title:x("modal.settings"),children:c.jsx(Sn,{className:"w-6 h-6 text-gray-600"})})]})}},eh=_.forwardRef(({children:t},e)=>{const r=_.useRef(null),{selectedDepartmentType:n,apiDepartmentData:o,setApiDepartmentData:a,setSidebarOpen:i,openAddParentContainerModal:s,openEditStoreItemModal:l,openQRCodeScannerModal:u,openAddBarcodeModal:d,showNotification:f,isAdminMode:h,activeCanvas:p,setActiveCanvas:v}=vt(),[y,w]=_.useState({x:0,y:0,scale:1}),[g,x]=_.useState(!1),[m,C]=_.useState(!1),[N,S]=_.useState({x:0,y:0}),[I,R]=_.useState(!1),[z,k]=_.useState(""),[oe,se]=_.useState(!1),[A,D]=_.useState(null),[F,T]=_.useState(!1),[O,M]=_.useState({isDragging:!1,draggedContainer:null,draggedElement:null,floatingElement:null,originalParent:null,originalPosition:"",originalIndex:-1,mouseOffset:{x:0,y:0},isMobileDrag:!1,originalData:null,draggedStockItem:null,draggedStockShelf:null}),[P,te]=_.useState(null),X=_.useRef({}),ee=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,Ne=8,me=()=>{try{const E=localStorage.getItem("med_map_anchor");return E?JSON.parse(E):[]}catch(E){return console.error("Error reading canvas states from localStorage:",E),[]}},H=(E,ae,J,G)=>{try{const q=me(),$=q.findIndex(le=>le.department===E&&le.canvasType===ae),ne={department:E,canvasType:ae,scale:J,position:G};$>=0?q[$]=ne:q.push(ne),localStorage.setItem("med_map_anchor",JSON.stringify(q))}catch(q){console.error("Error saving canvas state to localStorage:",q)}},Ce=(E,ae)=>me().find(G=>G.department===E&&G.canvasType===ae)||null;_.useEffect(()=>(v("drug"),()=>{v(null)}),[v]),_.useEffect(()=>{if(p!=="drug"||!n)return;const ae=setInterval(async()=>{try{console.log(" Auto-refreshing data for DrugCanvas...");const J=await Me.getMedMapByDepartment(n);if(J.Code===200&&J.Data){console.log(" API ");const G=Wt.convertMedMapApiToFakeData(J.Data);if(!Wt.validateConvertedData(G)){console.error(" ");return}console.log(" Data refreshed and converted successfully, updating state..."),a(G)}}catch(J){console.error(" Failed to auto-refresh data:",J)}},3*60*1e3);return()=>{clearInterval(ae)}},[p,n,a]),_.useEffect(()=>{if(n){const E=Ce(n,"drugCanvas");if(E)w({x:E.position.x,y:E.position.y,scale:E.scale});else{const ae={x:0,y:0,scale:1};w(ae),H(n,"drugCanvas",ae.scale,ae)}}},[n]),_.useEffect(()=>{if(!n)return;const E=setTimeout(()=>{H(n,"drugCanvas",y.scale,{x:y.x,y:y.y})},500);return()=>clearTimeout(E)},[y,n]);const Y=E=>["parent_container","sub_container","dispensing_shelves","store_shelves","grid_draw","list_draw","med_box"].includes(E),be=E=>({parent_container:["parent_container","",""],sub_container:["parent_container","sub_container"],dispensing_shelves:["dispensing_shelves","store_shelves","sub_container","grid_draw","list_draw"],store_shelves:["dispensing_shelves","store_shelves","sub_container","grid_draw","list_draw"],grid_draw:["grid_draw","list_draw","sub_container","dispensing_shelves","store_shelves"],list_draw:["grid_draw","list_draw","sub_container","dispensing_shelves","store_shelves"],med_box:["med_box","dispensing_shelves"]})[E]||[],ye=E=>{const[ae,J]=E.split(",").map(Number);return{row:ae||0,col:J||0}},B=(E,ae)=>{const J=(q,$=null)=>{if(q.GUID===E)return{container:q,parent:$};if(q.contents)for(const ne of q.contents){const le=J(ne,q);if(le)return le}return null},G=yt();for(const q of G){const $=J(q);if($)return $}return null},xe=(E,ae)=>{if(!E.contents)return[];const J=ae;if(!J)return E.contents;const G=ye(J.gird_position);console.log(" :",G);for(const q of E.contents){const $=ye(q.gird_position);if($.row===G.row&&$.col>G.col){const ne=$.col-1;q.gird_position=`${$.row},${ne}`,console.log(`    ${q.GUID}: (${$.row},${$.col})  (${$.row},${ne})`),X.current[q.GUID]={GUID:q.GUID,Master_GUID:E.GUID,position:`${$.row},${ne}`,serverName:E.serverName,serverType:E.serverType,type:q.type,containerData:q}}}return console.log(" "),E.contents},W=(E,ae,J,G,q)=>{if(E.contents||(E.contents=[]),console.log(" :",`(${J},${G})`),console.log("   :",q),console.log("   :",E.GUID),console.log("   :",E.contents.length),E.contents.length===0)J=0,G=0,console.log("    (0,0)");else{const $=E.contents.filter(ne=>{const le=ye(ne.gird_position||"0,0");return le.row===J&&le.col>=G}).sort((ne,le)=>{const we=ye(ne.gird_position||"0,0");return ye(le.gird_position||"0,0").col-we.col});console.log(`    row ${J} :`,$.length);for(const ne of $){const le=ye(ne.gird_position||"0,0"),we=le.col+1;ne.gird_position=`${le.row},${we}`,console.log(`    ${ne.GUID}: (${le.row},${le.col})  (${le.row},${we})`),X.current[ne.GUID]={GUID:ne.GUID,Master_GUID:E.GUID,position:`${le.row},${we}`,serverName:E.serverName,serverType:E.serverType,type:ne.type,containerData:ne}}}ae.gird_position=`${J},${G}`,ae.Master_GUID=E.GUID,console.log(`Inserted container ${ae.GUID} at position ${J},${G}`),E.contents.push(ae),X.current[ae.GUID]={GUID:ae.GUID,Master_GUID:E.GUID,position:`${J},${G}`,serverName:E.serverName,serverType:E.serverType,type:ae.type,containerData:ae},ae.type==="dispensing_shelves"&&ae.contents&&ae.contents.forEach($=>{$.type==="med_box"&&(X.current[$.GUID]={GUID:$.GUID,Master_GUID:$.Master_GUID,position:$.gird_position,serverName:E.serverName,serverType:E.serverType,type:$.type,containerData:$})})},j=(E,ae,J)=>{const G=E.getBoundingClientRect(),q=G.left+G.width/2,$=G.top+G.height/2,ne=ae-q,le=J-$;return Math.abs(ne)>Math.abs(le)?ne>0?"right":"left":le>0?"bottom":"top"},ce=(E,ae,J,G)=>{if(!m)return;if(G.preventDefault(),G.stopPropagation(),O.floatingElement)try{O.floatingElement.parentNode&&O.floatingElement.parentNode.removeChild(O.floatingElement)}catch(_e){console.error(":",_e)}const q=ee(),$="touches"in G?G.touches[0].clientX:("pointerId"in G,G.clientX),ne="touches"in G?G.touches[0].clientY:("pointerId"in G,G.clientY),le=J.getBoundingClientRect(),we={x:$-le.left,y:ne-le.top},ie=J.cloneNode(!0);ie.style.position="fixed",ie.style.left=`${$-we.x}px`,ie.style.top=`${ne-we.y}px`,ie.style.width=`${le.width}px`,ie.style.height=`${le.height}px`,ie.style.zIndex="9999",ie.style.opacity="0.8",ie.style.boxShadow="0 10px 25px rgba(0,0,0,0.3)",ie.style.pointerEvents="none",document.body.appendChild(ie),console.log(" stockItem:",E),console.log(" shelf:",ae),M({isDragging:!0,draggedContainer:null,draggedElement:J,floatingElement:ie,originalParent:null,originalPosition:"",originalIndex:-1,mouseOffset:we,isMobileDrag:q,originalData:null,draggedStockItem:E,draggedStockShelf:ae})},de=(E,ae,J)=>{if(!m||!Y(E.type))return;if(E.type==="sub_container"&&!h){f("","error");return}if(X.current={},J.preventDefault(),J.stopPropagation(),O.floatingElement)try{O.floatingElement.parentNode&&O.floatingElement.parentNode.removeChild(O.floatingElement)}catch(Pe){console.error(":",Pe)}const G=ee(),q="touches"in J?J.touches[0].clientX:("pointerId"in J,J.clientX),$="touches"in J?J.touches[0].clientY:("pointerId"in J,J.clientY),ne=ae.getBoundingClientRect(),le={x:q-ne.left,y:$-ne.top},we=B(E.GUID);if(!we)return;console.log("",E),console.log("",we);const ie=ae.cloneNode(!0);ie.style.position="fixed",ie.style.left=`${q-le.x}px`,ie.style.top=`${$-le.y}px`,ie.style.width=`${ne.width}px`,ie.style.height=`${ne.height}px`,ie.style.zIndex="9999",ie.style.opacity="0.8",ie.style.boxShadow="0 10px 25px rgba(0,0,0,0.3)",ie.style.pointerEvents="none",document.body.appendChild(ie);const _e=we.parent.contents.findIndex(Pe=>Pe.GUID===E.GUID),Ae=JSON.parse(JSON.stringify(we.parent.contents));we.parent.contents.splice(_e,1),console.log(_e);const Re=we.parent,De=xe(we.parent,E);we.parent.contents=De,console.log(we.parent),M({isDragging:!0,draggedContainer:E,draggedElement:ae,floatingElement:ie,originalParent:Re,originalPosition:E.gird_position,originalIndex:_e,mouseOffset:le,isMobileDrag:G,originalData:Ae})},V=E=>{if(!O.isDragging||!O.floatingElement)return;const ae="touches"in E?E.touches[0].clientX:E.clientX,J="touches"in E?E.touches[0].clientY:E.clientY;if(O.floatingElement.style.left=`${ae-O.mouseOffset.x}px`,O.floatingElement.style.top=`${J-O.mouseOffset.y}px`,O.draggedStockItem){const $=document.elementFromPoint(ae,J),ne=$==null?void 0:$.closest("[data-stock-guid]");if(ne){const we=ne.getAttribute("data-stock-guid"),ie=Ae=>{for(const Re of Ae){if(Re.type==="store_shelves"&&Re.medMapStock){const De=Re.medMapStock.find(Pe=>Pe.GUID===we);if(De)return{stockItem:De,shelf:Re}}if(Re.contents){const De=ie(Re.contents);if(De)return De}}return null},_e=ie(o);if(_e&&_e.stockItem.GUID!==O.draggedStockItem.GUID){const Ae=ne.getBoundingClientRect(),Re=Ae.left+Ae.width/2,De=ae<Re?"left":"right";te({container:_e.shelf,direction:null,element:ne,stockItem:_e.stockItem,stockItemDirection:De});return}}const le=$==null?void 0:$.closest("[data-container-guid]");if(le){const we=le.getAttribute("data-container-guid"),ie=B(we);if(ie&&ie.container.type==="store_shelves"){te({container:ie.container,direction:null,element:le});return}}te(null);return}const G=document.elementFromPoint(ae,J),q=G==null?void 0:G.closest("[data-container-guid]");if(q){const $=q.getAttribute("data-container-guid"),ne=B($);if(ne){const le=be(O.draggedContainer.type),we=O.draggedContainer.type,ie=ne.container.type;if(le.includes(ie)){const _e=j(q,ae,J);if(we==="med_box"&&!["left","right"].includes(_e)){te(null);return}te({container:ne.container,direction:_e,element:q});return}if(we==="parent_container"||we==="sub_container"){let _e=q.parentElement;for(;_e;){if(_e.hasAttribute("data-container-guid")){const Ae=_e.getAttribute("data-container-guid"),Re=B(Ae);if(Re&&le.includes(Re.container.type)){const De=j(_e,ae,J);console.log(` : ${Re.container.type} (${Re.container.name})`),te({container:Re.container,direction:De,element:_e});return}}_e=_e.parentElement}}}}te(null)},re=async E=>{if(!O.isDragging)return;if(O.floatingElement)try{O.floatingElement.parentNode&&O.floatingElement.parentNode.removeChild(O.floatingElement)}catch(q){console.error(":",q)}if(O.draggedStockItem&&O.draggedStockShelf){if(console.log("StockItem "),console.log("Drop Target:",P),P){const q=[];if(P.stockItem&&P.stockItemDirection){console.log(` stockItem ${P.stockItem.GUID}  ${P.stockItemDirection} `);const $=P.container,ne=O.draggedStockShelf,le=O.draggedStockItem,we=Number(P.stockItem.location),ie=Number(le.location);if($.GUID===ne.GUID){console.log("");const Ae=ne.medMapStock.findIndex(Pe=>Pe.GUID===le.GUID);Ae!==-1&&ne.medMapStock.splice(Ae,1),ne.medMapStock.forEach(Pe=>{const je=Number(Pe.location);je>ie&&(Pe.location=String(je-1),q.push({...Pe}))});let Re;const De=we>ie?we-1:we;P.stockItemDirection==="left"?Re=De:Re=De+1,ne.medMapStock.forEach(Pe=>{const je=Number(Pe.location);je>=Re&&(Pe.location=String(je+1),q.push({...Pe}))}),le.location=String(Re),ne.medMapStock.push(le),ne.medMapStock.sort((Pe,je)=>Number(Pe.location)-Number(je.location)),q.push({...le})}else{console.log("");const Ae=ne.medMapStock.findIndex(De=>De.GUID===le.GUID);Ae!==-1&&ne.medMapStock.splice(Ae,1),ne.medMapStock.forEach(De=>{const Pe=Number(De.location);Pe>ie&&(De.location=String(Pe-1),q.push({...De}))});let Re;P.stockItemDirection==="left"?Re=we:Re=we+1,$.medMapStock.forEach(De=>{const Pe=Number(De.location);Pe>=Re&&(De.location=String(Pe+1),q.push({...De}))}),le.location=String(Re),le.shelf_guid=$.GUID,$.medMapStock.push(le),$.medMapStock.sort((De,Pe)=>Number(De.location)-Number(Pe.location)),q.push({...le})}}else if(P.container.type==="store_shelves"){console.log(" store_shelves ");const $=P.container,ne=O.draggedStockShelf,le=O.draggedStockItem,we=Number(le.location),ie=ne.medMapStock.findIndex(_e=>_e.GUID===le.GUID);ie!==-1&&(ne.medMapStock.splice(ie,1),ne.medMapStock.forEach(_e=>{const Ae=Number(_e.location);Ae>we&&(_e.location=String(Ae-1),q.push({..._e}))})),le.location="0",le.shelf_guid=$.GUID,$.medMapStock||($.medMapStock=[]),$.medMapStock.forEach(_e=>{const Ae=Number(_e.location);_e.location=String(Ae+1),q.push({..._e})}),$.medMapStock.push(le),$.medMapStock.sort((_e,Ae)=>Number(_e.location)-Number(Ae.location)),q.push({...le})}if(q.length>0){console.log(" stockItems:",q);try{const $=await Me.updateStock(q);$.Code===200?f("","success"):f($.Result||"","error")}catch($){console.error(" stockItem :",$),f("","error")}}}M({isDragging:!1,draggedContainer:null,draggedElement:null,floatingElement:null,originalParent:null,originalPosition:"",originalIndex:-1,mouseOffset:{x:0,y:0},isMobileDrag:!1,originalData:null,draggedStockItem:null,draggedStockShelf:null}),te(null);return}let ae=null,J=null,G=null;if(console.log("Drop Target:",P),console.log("Is Mobile Drag:",O.isMobileDrag),O.isMobileDrag)if(P){ae=P.direction,G=P.container;const q=B(O.draggedContainer.GUID);let $=null;if(q){$=q.parent.GUID;const Re=q.parent.contents.findIndex(Pe=>Pe.GUID===O.draggedContainer.GUID);q.parent.contents.splice(Re,1);const De=xe(q.parent,O.draggedContainer);q.parent.contents=De}const ne=B(P.container.Master_GUID||P.container.GUID);let le=P.container;if($&&ne&&ne.container.GUID===$){const Re=ne.container.contents.find(De=>De.GUID===P.container.GUID);Re&&(le=Re,console.log(":",Re.gird_position))}const we=ye(le.gird_position||"0,0");let ie=we.row,_e=we.col;switch(P.direction){case"top":ie=Math.max(0,we.row);break;case"bottom":ie=we.row+1;break;case"left":_e=Math.max(0,we.col);break;case"right":_e=we.col+1;break}let Ae=(ne==null?void 0:ne.container)||P.container;if(O.draggedContainer.class!=P.class&&(Ae=P),O.draggedContainer.type==="med_box"&&P.container.type!=="med_box")if(console.log(""),Ae=P.container,Ae.contents.length>0){let Re=0,De=0;Ae.contents.forEach(Pe=>{const je=ye(Pe.gird_position||"0,0").row,_t=ye(Pe.gird_position||"0,0").col;Re>je&&(Re=je),De>_t&&(De=_t)});for(let Pe=0;Pe<=De;Pe++)for(let je=0;je<=Re;je++){const _t=`${Pe},${je}`;Ae.contents.filter($n=>$n.grid_position===_t).length===0&&(ie=Pe,_e=je)}}else ie=0,_e=0;J=Ae,W(Ae,O.draggedContainer,ie,_e,P.direction)}else console.log(""),O.originalData&&O.originalParent&&(O.originalParent.contents=JSON.parse(JSON.stringify(O.originalData))),ae=null,G=null,J=O.originalParent;else if(P){ae=P.direction,G=P.container;const q=B(O.draggedContainer.GUID);let $=null;if(console.log("===  ==="),console.log(" GUID:",O.draggedContainer.GUID),console.log(":",O.draggedContainer.gird_position),q){$=q.parent.GUID,console.log(" GUID:",$),console.log(" contents :",q.parent.contents.length);const Re=q.parent.contents.findIndex(Pe=>Pe.GUID===O.draggedContainer.GUID);q.parent.contents.splice(Re,1),console.log(" contents :",q.parent.contents.length);const De=xe(q.parent,O.draggedContainer);q.parent.contents=De,console.log(":"),q.parent.contents.forEach(Pe=>{console.log(`  - ${Pe.GUID}: ${Pe.gird_position}`)})}const ne=B(P.container.Master_GUID||P.container.GUID);let le=P.container;if(console.log(":",P.container.gird_position),$&&ne&&ne.container.GUID===$){console.log(" ");const Re=ne.container.contents.find(De=>De.GUID===P.container.GUID);Re&&(le=Re,console.log(":",Re.gird_position))}else console.log(" ");const we=ye(le.gird_position||"0,0");let ie=we.row,_e=we.col;switch(P.direction){case"top":ie=Math.max(0,we.row);break;case"bottom":ie=we.row+1;break;case"left":_e=Math.max(0,we.col);break;case"right":_e=we.col+1;break}console.log("------",P),console.log("------",O.draggedContainer);let Ae=(ne==null?void 0:ne.container)||P.container;if(console.log(O.draggedContainer.class),console.log(P.container.class),console.log(O.draggedContainer.class!=P.container.class),O.draggedContainer.class!=P.container.class&&(Ae=P.container,console.log("------"),console.log("------",P),console.log("------",O.draggedContainer),console.log("------",Ae)),O.draggedContainer.type==="med_box"&&P.container.type!=="med_box")if(console.log(""),Ae=P.container,Ae.contents.length>0){let Re=0,De=0;Ae.contents.forEach(Pe=>{const je=ye(Pe.gird_position||"0,0").row,_t=ye(Pe.gird_position||"0,0").col;Re>je&&(Re=je),De>_t&&(De=_t)});for(let Pe=0;Pe<=De;Pe++)for(let je=0;je<=Re;je++){const _t=`${Pe},${je}`;Ae.contents.filter($n=>$n.grid_position===_t).length===0&&(ie=Pe,_e=je)}}else ie=0,_e=0;J=Ae,W(Ae,O.draggedContainer,ie,_e,P.direction)}else console.log(""),O.originalData&&O.originalParent&&(O.originalParent.contents=JSON.parse(JSON.stringify(O.originalData))),ae=null,G=null,J=O.originalParent;M({isDragging:!1,draggedContainer:null,draggedElement:null,floatingElement:null,originalParent:null,originalPosition:"",originalIndex:-1,mouseOffset:{x:0,y:0},isMobileDrag:!1,originalData:null,draggedStockItem:null,draggedStockShelf:null}),te(null),console.log("Drop Direction:",ae),console.log("Parent Object:",J),console.log("Target Object:",G),console.log("API",X),await x2(X)};_.useEffect(()=>{if(O.isDragging)if(ee()){const ae=q=>{q.preventDefault(),V(q)},J=q=>re(),G=q=>re();return document.addEventListener("pointermove",ae,{passive:!1}),document.addEventListener("pointerup",J),document.addEventListener("pointercancel",G),()=>{document.removeEventListener("pointermove",ae),document.removeEventListener("pointerup",J),document.removeEventListener("pointercancel",G)}}else{const ae=$=>V($),J=$=>re(),G=$=>{$.preventDefault(),V($)},q=$=>re();return document.addEventListener("mousemove",ae),document.addEventListener("mouseup",J),document.addEventListener("touchmove",G,{passive:!1}),document.addEventListener("touchend",q),()=>{document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",J),document.removeEventListener("touchmove",G),document.removeEventListener("touchend",q)}}},[O.isDragging,P]),_.useEffect(()=>()=>{if(O.floatingElement)try{O.floatingElement.parentNode&&O.floatingElement.parentNode.removeChild(O.floatingElement)}catch(E){console.error(":",E)}},[O.floatingElement]),_.useEffect(()=>{const E=J=>{J.code==="Space"&&!J.repeat&&(J.preventDefault(),R(!0))},ae=J=>{J.code==="Space"&&(J.preventDefault(),R(!1),x(!1))};return window.addEventListener("keydown",E),window.addEventListener("keyup",ae),()=>{window.removeEventListener("keydown",E),window.removeEventListener("keyup",ae)}},[]);const he=_.useCallback(E=>{var J;if(m)return;if(E.ctrlKey||E.metaKey){E.preventDefault(),E.stopPropagation();const G=(J=r.current)==null?void 0:J.getBoundingClientRect();if(!G)return;const q=E.clientX-G.left,$=E.clientY-G.top,ne=E.deltaY>0?.9:1.1,le=Math.max(.1,Math.min(5,y.scale*ne)),we=le/y.scale,ie=q-(q-y.x)*we,_e=$-($-y.y)*we;w({x:ie,y:_e,scale:le})}},[y,m]),U=_.useCallback(E=>{m||!I||(x(!0),S({x:E.clientX,y:E.clientY}),D({x:E.clientX,y:E.clientY}),T(!1),E.preventDefault())},[m,I]),Z=_.useCallback(E=>{if(!g||m)return;const ae=E.clientX-N.x,J=E.clientY-N.y;if(A){const G=Math.abs(E.clientX-A.x),q=Math.abs(E.clientY-A.y);(G>5||q>5)&&T(!0)}w(G=>({...G,x:G.x+ae,y:G.y+J})),S({x:E.clientX,y:E.clientY})},[g,N,m,A]),Q=_.useCallback(()=>{x(!1),D(null)},[]),[ue,ge]=_.useState(null),[Ee,pe]=_.useState({x:0,y:0}),Se=E=>{if(E.length<2)return null;const ae=E[0],J=E[1];return Math.sqrt(Math.pow(J.clientX-ae.clientX,2)+Math.pow(J.clientY-ae.clientY,2))},Te=E=>{if(E.length===1)return{x:E[0].clientX,y:E[0].clientY};const ae=E[0],J=E[1];return{x:(ae.clientX+J.clientX)/2,y:(ae.clientY+J.clientY)/2}},Le=_.useCallback(E=>{if(!m){if(E.touches.length===2){const ae=Se(E.touches),J=Te(E.touches);ge(ae),pe(J)}else if(E.touches.length===1){const ae=E.touches[0];S({x:ae.clientX,y:ae.clientY}),x(!0)}}},[m]),gt=_.useCallback(E=>{var ae;if(!m){if(E.preventDefault(),E.touches.length===2&&ue!==null){const J=Se(E.touches),G=Te(E.touches);if(J&&ue){const q=(ae=r.current)==null?void 0:ae.getBoundingClientRect();if(!q)return;const $=J/ue,ne=Math.max(.1,Math.min(5,y.scale*$)),le=G.x-q.left,we=G.y-q.top,ie=ne/y.scale,_e=le-(le-y.x)*ie,Ae=we-(we-y.y)*ie;w({x:_e,y:Ae,scale:ne}),ge(J),pe(G)}}else if(E.touches.length===1&&g){const J=E.touches[0],G=J.clientX-N.x,q=J.clientY-N.y;w($=>({...$,x:$.x+G,y:$.y+q})),S({x:J.clientX,y:J.clientY})}}},[y,ue,g,N,m]),Ue=_.useCallback(()=>{ge(null),x(!1)},[]);_.useEffect(()=>{const E=r.current;if(E)return E.addEventListener("wheel",he,{passive:!1}),()=>E.removeEventListener("wheel",he)},[he]);const yt=()=>!o||o.length===0?[]:o,rt=E=>{if(!E||E.length===0)return{sortedContents:[],maxRow:0,maxCol:0};const ae=E.map($=>({...$,gridPos:ye($.gird_position||"0,0")})),J=Math.max(...ae.map($=>$.gridPos.row),0),G=Math.max(...ae.map($=>$.gridPos.col),0);return{sortedContents:ae.sort(($,ne)=>$.gridPos.row!==ne.gridPos.row?$.gridPos.row-ne.gridPos.row:$.gridPos.col-ne.gridPos.col),maxRow:J,maxCol:G}},gr=yt(),br=Math.max(...gr.map(E=>ye(E.gird_position||"0,0").row),0),Un=Math.max(...gr.map(E=>ye(E.gird_position||"0,0").col),0),Pr=E=>{const ae=G=>{if(G.width&&Array.isArray(G.width)&&typeof G.width_index=="number"&&G.width_index>=0&&G.width_index<G.width.length){const $=parseFloat(G.width[G.width_index]);if(!isNaN($)){const ne=$*20;return Math.max(200,ne)}}return 200},J=G=>{switch(G){case"parent_container":return"bg-pink-50 border-pink-300";case"sub_container":return"bg-blue-50 border-blue-300";case"dispensing_shelves":case"store_shelves":return"bg-green-50 border-green-300";case"med_box":return"bg-yellow-50 border-yellow-300";case"grid_draw":case"list_draw":return"bg-violet-50 border-violet-300";default:return"bg-gray-50 border-gray-300"}};switch(E.type){case"med_box":return ae(E),c.jsxs("div",{"data-container-guid":E.GUID,className:`${E.type!=="sub_container"?"border-2 rounded-lg shadow-sm":""} ${J(E.type||0)} min-h-[80px] flex flex-col flex-shrink-0 h-full overflow-hidden`,children:[c.jsx("div",{onMouseDown:m&&Y(E.type)&&!ee()?G=>de(E,G.currentTarget.closest("[data-container-guid]"),G):void 0,onTouchStart:m&&Y(E.type)&&!ee()?G=>de(E,G.currentTarget.closest("[data-container-guid]"),G):void 0,onPointerDown:m&&Y(E.type)&&ee()?G=>de(E,G.currentTarget.closest("[data-container-guid]"),G):void 0,className:m&&Y(E.type)?"cursor-move":"",children:c.jsx(_i,{content:E,isAdminMode:h})}),c.jsx("div",{className:"flex-1 p-1",children:lo(E)})]},E.GUID);case"sub_container":case"parent_container":return c.jsxs("div",{"data-container-guid":E.GUID,className:`${J(E.type||0)} border-2 overflow-hidden rounded-lg shadow-sm min-h-[80px] flex flex-col h-full`,children:[c.jsx("div",{onMouseDown:m&&Y(E.type)&&!ee()?G=>de(E,G.currentTarget.closest("[data-container-guid]"),G):void 0,onTouchStart:m&&Y(E.type)&&!ee()?G=>de(E,G.currentTarget.closest("[data-container-guid]"),G):void 0,onPointerDown:m&&Y(E.type)&&ee()?G=>de(E,G.currentTarget.closest("[data-container-guid]"),G):void 0,className:m&&Y(E.type)?"cursor-move":"",children:c.jsx(_i,{content:E,isAdminMode:h})}),c.jsx("div",{className:"flex-1  p-1",children:lo(E)})]},E.GUID);case"grid_draw":return c.jsxs("div",{"data-container-guid":E.GUID,className:`${E.type!=="sub_container"?"border-2 rounded-lg shadow-sm":""} ${J(E.type||0)} min-h-[80px] flex flex-col h-full overflow-hidden`,children:[c.jsx("div",{onMouseDown:m&&Y(E.type)&&!ee()?G=>de(E,G.currentTarget.closest("[data-container-guid]"),G):void 0,onTouchStart:m&&Y(E.type)&&!ee()?G=>de(E,G.currentTarget.closest("[data-container-guid]"),G):void 0,onPointerDown:m&&Y(E.type)&&ee()?G=>de(E,G.currentTarget.closest("[data-container-guid]"),G):void 0,className:m&&Y(E.type)?"cursor-move":"",children:c.jsx(_i,{content:E,isAdminMode:h})}),c.jsx("div",{className:"flex-1 p-1 flex items-center",children:lo(E)})]},E.GUID);default:return c.jsxs("div",{"data-container-guid":E.GUID,className:`${E.type!=="sub_container"?"border-2 rounded-lg shadow-sm":""} ${J(E.type||0)} min-h-[80px] flex flex-col h-full overflow-hidden ${E.type=="none"?"opacity-0":""}`,children:[c.jsx("div",{onMouseDown:m&&Y(E.type)&&!ee()?G=>de(E,G.currentTarget.closest("[data-container-guid]"),G):void 0,onTouchStart:m&&Y(E.type)&&!ee()?G=>de(E,G.currentTarget.closest("[data-container-guid]"),G):void 0,onPointerDown:m&&Y(E.type)&&ee()?G=>de(E,G.currentTarget.closest("[data-container-guid]"),G):void 0,className:m&&Y(E.type)?"cursor-move":"",children:c.jsx(_i,{content:E,isAdminMode:h})}),c.jsx("div",{className:"flex-1 p-1",children:lo(E)})]},E.GUID)}},lo=E=>{const ae=(J,G,q)=>{const $=Array(G+1).fill(null).map(()=>Array(q+1).fill(!1)),ne={};return J.forEach(le=>{const we=ye(le.gird_position||"0,0");ne[`${we.row},${we.col}`]=le,$[we.row][we.col]=!0}),c.jsx("table",{className:"w-full h-full",style:{borderCollapse:"none",borderSpacing:"0px"},children:c.jsx("tbody",{children:Array.from({length:G+1},(le,we)=>c.jsx("tr",{className:"h-full",style:{height:`${100/(G+1)}%`,minHeight:"80px"},children:Array.from({length:q+1},(ie,_e)=>{const Ae=`${we},${_e}`,Re=ne[Ae];return Re?c.jsxs("td",{className:"align-top bg-transparent",style:{width:`${100/(q+1)}%`,height:`${100/(G+1)}%`,minHeight:"80px",border:"none",position:"relative"},children:[Pr(Re),(P==null?void 0:P.container.GUID)===Re.GUID&&c.jsx("div",{className:"absolute inset-0 pointer-events-none",children:c.jsx("div",{className:`absolute bg-blue-400 opacity-50 ${P.direction==="top"?"top-0 left-0 right-0 h-1":P.direction==="bottom"?"bottom-0 left-0 right-0 h-1":P.direction==="left"?"left-0 top-0 bottom-0 w-1":"right-0 top-0 bottom-0 w-1"}`})})]},_e):c.jsx("td",{className:"p-1 align-top bg-transparent",style:{width:`${100/(q+1)}%`,height:`${100/(G+1)}%`,minHeight:"80px",border:"none"},children:c.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm",children:""})},_e)})},we))})})};switch(E.type){case"parent_container":case"sub_container":if(E.contents&&E.contents.length>0){const{sortedContents:ie,maxRow:_e,maxCol:Ae}=rt(E.contents);return ae(ie,_e,Ae)}else return c.jsx("table",{className:"bg-transparent w-full h-full",style:{borderCollapse:"separate",borderSpacing:"1px"},children:c.jsx("tbody",{children:c.jsx("tr",{})})});case"dispensing_shelves":if(E.contents&&E.contents.length>0){const{sortedContents:ie,maxRow:_e,maxCol:Ae}=rt(E.contents);return ae(ie,_e,Ae)}else return c.jsx("table",{className:"bg-transparent w-full h-full",style:{borderCollapse:"separate",borderSpacing:"0px"},children:c.jsx("tbody",{children:c.jsx("tr",{children:c.jsx("td",{className:"p-4 text-center text-gray-500 bg-transparent",children:c.jsx("div",{className:"text-base",children:""})})})})});case"store_shelves":if(E.medMapStock&&E.medMapStock.length>0){const ie=E.medMapStock,_e=ie.length,Ae=_e>0?100/_e:100,Re=E.width?E.width*5:500;return c.jsx("div",{className:"flex h-full",style:{minWidth:`${Re}px`},children:ie.map((De,Pe)=>(Number(De.location),c.jsx("div",{className:"m-1 flex-shrink-0 relative",style:{width:`calc(${Ae}% - 8px)`},"data-stock-guid":De.GUID,children:c.jsxs("div",{className:`border-2 bg-yellow-50 border-yellow-400 rounded-lg p-2 h-full flex flex-col justify-center items-center cursor-pointer bg-white hover:bg-yellow-100 hover:border-yellow-500 hover:shadow-md transition-all ${m?"cursor-move":""}`,onMouseDown:je=>{m?ce(De,E,je.currentTarget.closest("[data-stock-guid]"),je):!g&&!I&&(D({x:je.clientX,y:je.clientY}),T(!1))},onMouseUp:je=>{if(!g&&!I&&!F&&A&&!m){const _t=Math.abs(je.clientX-A.x),Gn=Math.abs(je.clientY-A.y);_t<=5&&Gn<=5&&(je.stopPropagation(),l(E,De))}m||(D(null),T(!1))},onTouchStart:je=>{if(m&&ee())ce(De,E,je.currentTarget.closest("[data-stock-guid]"),je);else if(!g&&!m){const _t=je.touches[0];D({x:_t.clientX,y:_t.clientY}),T(!1)}},onTouchEnd:je=>{if(!g&&!F&&A&&!m){const _t=je.changedTouches[0],Gn=Math.abs(_t.clientX-A.x),$n=Math.abs(_t.clientY-A.y);Gn<=5&&$n<=5&&(je.stopPropagation(),l(E,De))}m||(D(null),T(!1))},onPointerDown:je=>{m&&ee()&&ce(De,E,je.currentTarget.closest("[data-stock-guid]"),je)},children:[c.jsx("div",{className:"text-base font-semibold text-gray-800 flex truncate w-full items-center flex-1",children:c.jsx("div",{className:"w-full text-center truncate whitespace-normal",children:De.name||De.material_no})}),c.jsxs("div",{className:"w-full flex justify-between items-end",children:[c.jsx("div",{className:"",children:c.jsxs("div",{className:"mt-1",children:["[ ",+De.qty||0," ]"]})}),c.jsx("div",{className:"flex justify-end items-end mt-2",children:c.jsx("button",{onMouseDown:je=>{je.stopPropagation()},onMouseUp:je=>{je.stopPropagation()},onTouchStart:je=>{je.stopPropagation()},onTouchEnd:je=>{je.stopPropagation()},onClick:je=>Qo(De,E,je),className:"text-red-500 hover:text-red-600 rounded-full p-2 transition-all z-10",title:"",children:c.jsx(Do,{className:"w-6 h-6"})})})]})]})},De.GUID||Pe)))})}else if(E.contents&&E.contents.length>0){const{sortedContents:ie,maxRow:_e,maxCol:Ae}=rt(E.contents);return ae(ie,_e,Ae)}else return c.jsx("table",{className:"bg-transparent w-full h-full",style:{borderCollapse:"separate",borderSpacing:"0px"},children:c.jsx("tbody",{children:c.jsx("tr",{children:c.jsx("td",{className:"p-4 text-center text-gray-500 bg-transparent",children:c.jsx("div",{className:"text-base",children:""})})})})});case"none":if(E.contents&&E.contents.length>0){const{sortedContents:ie,maxRow:_e,maxCol:Ae}=rt(E.contents);return ae(ie,_e,Ae)}else return c.jsx("table",{className:"bg-transparent w-full h-full",style:{borderCollapse:"separate",borderSpacing:"0px"},children:c.jsx("tbody",{children:c.jsx("tr",{children:c.jsx("td",{className:"p-4 text-center text-gray-500 bg-transparent",children:c.jsx("div",{className:"text-base",children:""})})})})});case"grid_draw":const J=Math.max(...E.Boxes.flat().map(ie=>+ie.Row+ +ie.Height-1)),G=Math.max(...E.Boxes.flat().map(ie=>+ie.Column+ +ie.Width-1)),q=J+1,$=G+1,ne=E.Boxes.flat(),le=Array(q).fill(null).map(()=>Array($).fill(!1)),we={};return ne.forEach(ie=>{ie.Slave||(we[`${ie.Row},${ie.Column}`]=ie)}),ne.forEach(ie=>{if(!ie.Slave&&(ie.Width>1||ie.Height>1))for(let _e=ie.Row;_e<ie.Row+ie.Height;_e++)for(let Ae=ie.Column;Ae<ie.Column+ie.Width;Ae++)(_e!==ie.Row||Ae!==ie.Column)&&(le[_e][Ae]=!0)}),c.jsxs("div",{className:"bg-violet-100 h-20 flex ml-2 mt-2 mb-6 rounded-xl border-2 border-violet-400 w-[140px] items-center justify-center",children:[c.jsx("div",{className:"h-[60%] bg-violet-400 w-[3%] rounded-xl"}),c.jsx("div",{className:"h-[80%] border-2 border-violet-400 w-[82%] mx-1",children:c.jsx("div",{className:"flex items-center justify-center text-base text-violet-400 h-[100%]"})}),c.jsx("div",{className:"h-[60%] bg-violet-400 w-[3%]"})]});case"list_draw":return c.jsxs("div",{className:"bg-violet-100 h-20 flex ml-2 mt-2 mb-6 rounded-xl border-2 border-violet-400 w-[140px] items-center justify-center",children:[c.jsx("div",{className:"h-[60%] bg-violet-400 w-[3%] rounded-xl"}),c.jsx("div",{className:"h-[80%] border-2 border-violet-400 w-[82%] mx-1",children:c.jsx("div",{className:"flex items-center justify-center text-base text-violet-400 h-[100%]"})}),c.jsx("div",{className:"h-[60%] bg-violet-400 w-[3%]"})]});case"med_box":return E.med_info&&E.med_info.length>0?c.jsxs("div",{className:"text-base text-left h-full min-h-[40px] max-w-[200px] min-w-[200px] p-1 flex items-center justify-between flex-col",children:[c.jsx("div",{className:"text-gray-700 font-bold truncate w-full",children:E.med_info[0].name}),c.jsxs("div",{className:"text-gray-700 w-full flex justify-between px-1",children:[c.jsxs("div",{children:[E.box_type,""]}),c.jsxs("div",{children:[E.width[E.width_index],"cm"]})]})]}):c.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:c.jsx("div",{className:"text-base",children:""})});default:return E.contents&&E.contents.length>0?c.jsx("div",{className:"space-y-2",children:E.contents.map(ie=>Pr(ie))}):c.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:c.jsxs("div",{className:"text-base",children:[": ",E.type]})})}},qo=E=>{if(ye(E.gird_position||"0,0"),E.type!==""&&E.type!=="")return null;const ae=J=>{if(!J||J.length===0)return c.jsx("table",{className:"w-full h-full border-none",children:c.jsx("tbody",{children:c.jsx("tr",{children:c.jsx("td",{className:"p-4 text-center text-gray-500",children:c.jsx("div",{className:"text-center",children:c.jsx("div",{className:"text-base",children:""})})})})})});const{sortedContents:G,maxRow:q,maxCol:$}=rt(J),ne=Array(q+1).fill(null).map(()=>Array($+1).fill(!1)),le={};return G.forEach(we=>{const ie=ye(we.gird_position||"0,0");le[`${ie.row},${ie.col}`]=we,ne[ie.row][ie.col]=!0}),c.jsx("table",{className:"w-full h-full",style:{borderCollapse:"none",borderSpacing:"0px"},children:c.jsx("tbody",{children:Array.from({length:q+1},(we,ie)=>c.jsx("tr",{className:"h-full",children:Array.from({length:$+1},(_e,Ae)=>{const Re=`${ie},${Ae}`,De=le[Re];return De?c.jsxs("td",{className:"p-1 align-top bg-transparent",style:{width:`${100/($+1)}%`,height:`${100/(q+1)}%`,minHeight:"120px",border:"none",position:"relative"},children:[Pr(De),(P==null?void 0:P.container.GUID)===De.GUID&&c.jsx("div",{className:"absolute inset-0 pointer-events-none",children:c.jsx("div",{className:`absolute bg-blue-400 opacity-50 ${P.direction==="top"?"top-0 left-0 right-0 h-1":P.direction==="bottom"?"bottom-0 left-0 right-0 h-1":P.direction==="left"?"left-0 top-0 bottom-0 w-1":"right-0 top-0 bottom-0 w-1"}`})})]},Ae):c.jsx("td",{className:"p-1 align-top bg-transparent",style:{width:`${100/($+1)}%`,height:`${100/(q+1)}%`,minHeight:"120px",border:"1px dashed #e5e7eb"},children:c.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm",children:""})},Ae)})},ie))})})};return c.jsxs("div",{"data-container-guid":E.GUID,className:"border-2 rounded-lg shadow-lg bg-orange-50 border-orange-300 min-h-[120px] flex flex-col overflow-hidden w-full h-full",children:[c.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b-2 bg-orange-100 border-b-orange-200",children:[c.jsx("div",{className:"flex items-center space-x-2",children:c.jsx("span",{className:"text-lg font-semibold text-gray-800",children:E.name})}),c.jsx("div",{className:"flex items-center space-x-1",children:c.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:J=>{J.stopPropagation(),console.log(" "),console.log(" :",E),E?(console.log("  openAddParentContainerModal"),s(E)):console.warn(" ")},title:"",children:c.jsx(cr,{className:"w-6 h-6 text-green-700"})})})]}),c.jsx("div",{className:`flex-1 bg-orange-50 ${(P==null?void 0:P.container.GUID)===E.GUID?"ring-2 ring-blue-400 ring-inset":""}`,children:ae(E.contents||[])})]},E.GUID)},qa=_.useCallback(E=>{if(console.log(" locateDrugOnCanvas :",E),console.log(" apiDepartmentData:",!!o),console.log(" canvasRef.current:",!!r.current),!o||!r.current){console.warn(" ",{hasApiData:!!o,hasCanvasRef:!!r.current});return}const ae=E[0].CODE||E[0].code;if(console.log(" :",ae),!ae){console.warn(" ");return}console.log(" :",ae);const J=q=>{for(const $ of q){if($.type==="grid_draw"&&$.Boxes){for(const ne of $.Boxes)for(const le of ne)if(le.Code===ae){const we=document.querySelector(`[data-container-guid="${$.GUID}"]`);if(we)return console.log("  (grid_draw):",$),{element:we,bounds:we.getBoundingClientRect()}}}if($.type==="list_draw"&&$.drugs&&$.drugs.some(le=>le.code===ae)){const le=document.querySelector(`[data-container-guid="${$.GUID}"]`);if(le)return console.log("  (list_draw):",$),{element:le,bounds:le.getBoundingClientRect()}}if(($.type==="store_shelves"||$.type==="dispensing_shelves")&&$.medMapStock&&$.medMapStock.some(le=>le.code===ae||le.material_no===ae)){const le=document.querySelector(`[data-container-guid="${$.GUID}"]`);if(le)return console.log("  (store_shelves):",$),{element:le,bounds:le.getBoundingClientRect()}}if($.type==="med_box"&&$.med_info&&$.med_info.length>0&&$.med_info.some(le=>le.code===ae)){const le=document.querySelector(`[data-container-guid="${$.GUID}"]`);if(le)return console.log("  (med_box):",$),{element:le,bounds:le.getBoundingClientRect()}}if($.contents&&$.contents.length>0){const ne=J($.contents);if(ne)return ne}}return null},G=J(o);if(G){const q=r.current.getBoundingClientRect(),$=G.bounds,ne=($.left+$.right)/2,le=($.top+$.bottom)/2,we=(ne-q.left-y.x)/y.scale,ie=(le-q.top-y.y)/y.scale,_e=q.width/2,Ae=q.height/2,Re=_e-we*y.scale,De=Ae-ie*y.scale;w(Pe=>({...Pe,x:Re,y:De})),console.log(" ",{elementScreenCenter:{x:ne,y:le},elementCanvasPos:{x:we,y:ie},screenCenter:{x:_e,y:Ae},newTransform:{x:Re,y:De}}),f(`${E.CHT_NAME||E.NAME||ae}`,"success")}else console.warn(" "),f("","error")},[o,y,f]);_.useImperativeHandle(e,()=>(console.log(" useImperativeHandle  ref "),{locateDrug:qa}));const Qo=async(E,ae,J)=>{if(J.stopPropagation(),J.preventDefault(),!!window.confirm(` ${E.name||E.material_no} `))try{const q=await Me.deleteStockByGUID([E.GUID]);if(q.Code===200){const $=ae.medMapStock.findIndex(ne=>ne.GUID===E.GUID);$!==-1&&(ae.medMapStock.splice($,1),ae.medMapStock.forEach((ne,le)=>{ne.location=String(le)})),f("","success")}else f(q.Result||"","error")}catch(q){console.error(" stock :",q),f("","error")}},Ts=async E=>{if(E.key==="Enter"&&z.trim()&&!oe){E.preventDefault(),se(!0);const ae=performance.now();try{console.log(" [] :",z);const J=performance.now(),G=await Me.searchByBarCode(z.trim()),q=performance.now();if(console.log(` [] API: ${(q-J).toFixed(2)}ms`),console.log(" :",G),G.Code===200){console.log(" :",G.Data),f("","success");const $=performance.now();qa(G.Data);const ne=performance.now();console.log(` [] : ${(ne-$).toFixed(2)}ms`),k("");const le=performance.now();console.log(` [] : ${(le-ae).toFixed(2)}ms`)}else G.Code===-200&&G.Result===""?(console.log(" "),f("","error"),d(z.trim()),k("")):(console.log(" :",G.Result),f(G.Result||"","error"))}catch(J){console.error(":",J),f("","error")}finally{se(!1)}}};return c.jsxs("div",{className:"relative w-full h-full overflow-hidden bg-gray-50",children:[c.jsx("div",{className:"absolute md:bottom-4 md:left-4 bottom-16 left-[50%] md:translate-x-[0%] translate-x-[-50%] z-10",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-lg flex items-center overflow-hidden border border-gray-200",children:[c.jsx("input",{type:"text",value:z,onChange:E=>k(E.target.value),onKeyDown:Ts,placeholder:"...",className:"px-4 py-2 w-50 focus:outline-none text-gray-700 disabled:opacity-50",disabled:oe}),c.jsx("button",{onClick:()=>u("track_Drug_mode"),className:"p-2",title:"",disabled:oe,children:c.jsx(Vo,{className:"w-6 h-6 text-blue-600"})})]})}),c.jsx("div",{className:"absolute bottom-4 right-4 z-10 flex gap-2",children:c.jsx("button",{onClick:()=>C(!m),className:`rounded-lg shadow-lg p-2 transition-colors ${m?"bg-red-500 text-white hover:bg-red-600":"bg-white text-gray-700 hover:bg-gray-50"}`,title:m?"Unlock Canvas":"Lock Canvas",children:m?c.jsx(gu,{className:"w-6 h-6"}):c.jsx(F1,{className:"w-6 h-6"})})}),c.jsx("div",{ref:r,className:`w-full h-full relative ${I&&!m?"cursor-grab":"cursor-default"} ${g?"cursor-grabbing":""}`,onMouseDown:U,onMouseMove:Z,onMouseUp:Q,onMouseLeave:Q,onTouchStart:Le,onTouchMove:gt,onTouchEnd:Ue,children:c.jsxs("div",{className:"absolute inset-0 origin-top-left",style:{transform:`translate(${y.x}px, ${y.y}px) scale(${y.scale})`,transformOrigin:"0 0"},children:[c.jsx("div",{className:"relative","data-canvas-content":!0,children:c.jsx("table",{className:"h-full",style:{borderCollapse:"separate",borderSpacing:`${Ne}px`,minWidth:"fit-content",minHeight:"fit-content"},children:c.jsx("tbody",{children:Array.from({length:br+1},(E,ae)=>c.jsx("tr",{children:Array.from({length:Un+1},(J,G)=>{const q=gr.find($=>{const ne=ye($.gird_position||"0,0");return ne.row===ae&&ne.col===G});return q?c.jsx("td",{className:"align-top",style:{minWidth:"150px",minHeight:"120px",border:"none"},children:qo(q)},G):c.jsx("td",{className:"align-top",style:{minWidth:"150px",minHeight:"120px",border:"none"},children:c.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-base"})},G)})},ae))})})}),t]})})]})});eh.displayName="DrugCanvas";const x2=async t=>{if(console.log(t),Object.keys(t.current).length===0){console.log("");return}console.log(" :",t.current);const e=[],r=[],n=[],o=[],a=[];Object.values(t.current).forEach(s=>{var u,d,f,h,p;console.log("API REQ",s);const l={GUID:s.GUID,position:s.position,Master_GUID:s.Master_GUID,serverName:s.serverName,serverType:s.serverType};switch(s.type){case"med_box":e.push(l);break;case"grid_draw":case"list_draw":r.push(l);break;case"dispensing_shelves":case"store_shelves":n.push(l);break;case"parent_container":const v={...l,absolute_position:`${(u=s.containerData)==null?void 0:u.position.x},${(d=s.containerData)==null?void 0:d.position.y}`,position:((f=s.containerData)==null?void 0:f.gird_position)||s.position,name:((h=s.containerData)==null?void 0:h.name)||"",ip:((p=s.containerData)==null?void 0:p.ip)||""};o.push(v);break;case"sub_container":a.push(l);break;default:console.warn(":",s.type)}});const i=[];if(e.length>0&&(console.log(" :",e),i.push(Me.updateMedMapBox(e).then(s=>({type:"med_box",response:s,count:e.length})).catch(s=>({type:"med_box",error:s,count:e.length})))),r.length>0&&(console.log(" :",r),i.push(Me.updateMedMapDrawer(r).then(s=>({type:"drawer",response:s,count:r.length})).catch(s=>({type:"drawer",error:s,count:r.length})))),n.length>0&&(console.log(" :",n),i.push(Me.updateMedMapShelf(n).then(s=>({type:"shelf",response:s,count:n.length})).catch(s=>({type:"shelf",error:s,count:n.length})))),o.length>0&&(console.log(" :",o),o.forEach(s=>{i.push(Me.updateContainerPosition(s).then(l=>({type:"parent_container",response:l,count:1})).catch(l=>({type:"parent_container",error:l,count:1})))})),a.length>0&&(console.log(" :",a),i.push(Me.updateSubSection(a).then(s=>({type:"sub_container",response:s,count:a.length})).catch(s=>({type:"sub_container",error:s,count:a.length})))),i.length===0){console.log(" API");return}try{const s=await Promise.all(i);let l=0,u=0;const d=[];s.forEach(f=>{var h,p;if(f.error)u+=f.count,d.push(`${f.type}: ${f.error.message||""}`),console.error(` ${f.type} API :`,f.error);else if(((h=f.response)==null?void 0:h.Code)===200)l+=f.count,console.log(` ${f.type} API :`,f.response);else{u+=f.count;const v=((p=f.response)==null?void 0:p.Result)||"";d.push(`${f.type}: ${v}`),console.error(` ${f.type} API :`,f.response)}})}catch(s){console.error(" :",s)}finally{console.log("")}},v2="modulepreload",m2=function(t){return"/"+t},vf={},y2=function(e,r,n){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),s=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(r.map(l=>{if(l=m2(l),l in vf)return;vf[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":v2,u||(f.as="script"),f.crossOrigin="",f.href=l,s&&f.setAttribute("nonce",s),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(i){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i}return o.then(i=>{for(const s of i||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})},Yr=[{name:"2.13",box_type:"2.13",width:["7.5"],unit:"cm"},{name:"2.9",type:"2.9",width:["10","15","20"],unit:"cm"},{name:"4.2",type:"4.2",width:["11","16"],unit:"cm"}],w2=()=>{const{medBoxModalOpen:t,closeMedBoxModal:e,selectedMedBox:r,selectedDepartmentType:n,setApiDepartmentData:o,setIsLoadingMedMap:a,showNotification:i,triggerRefresh:s,modalMode:l,medicineList:u}=vt(),{t:d}=nr(),[f,h]=_.useState(0),[p,v]=_.useState({}),[y,w]=_.useState(""),[g,x]=_.useState(""),[m,C]=_.useState("N"),[N,S]=_.useState([]),[I,R]=_.useState(!1),[z,k]=_.useState(!1),[oe,se]=_.useState(null),[A,D]=_.useState(null),[F,T]=_.useState(!1),[O,M]=_.useState(!1);_.useEffect(()=>{if(r&&t)if(l==="add"){h(0);const W={};Yr.forEach((j,ce)=>{W[ce]=0}),v(W),w(""),k(!1),P()}else{const W=Yr.findIndex(j=>j.box_type===r.box_type||j.type===r.box_type);if(console.log(r),W>=0){h(W);const ce=Yr[W].width.findIndex(V=>{var re;return V===((re=r.width)==null?void 0:re[r.width_index||0])}),de={};Yr.forEach((V,re)=>{re===W?de[re]=ce>=0?ce:0:de[re]=0}),v(de)}else{h(0);const j={};Yr.forEach((ce,de)=>{j[de]=0}),v(j)}w(r.ip||""),D({box_type:r.box_type,width:r.width,width_index:r.width_index,ip:r.ip||"",storage:r.storage?JSON.parse(JSON.stringify(r.storage)):null})}},[r,t,l]);const P=()=>{r&&r.parentShelf&&se(r.parentShelf)},te=W=>{if(!W||!W.contents||W.contents.length===0)return"0,0";let j=-1,ce=0;return W.contents.forEach(de=>{if(de.gird_position){const[V,re]=de.gird_position.split(",").map(Number);re>j&&(j=re,ce=V)}}),`${ce},${j+1}`},X=()=>{if(!A||l!=="edit")return!1;const W=Yr[f],j=p[f]||0,ce=W.box_type||W.type||W.name;return A.box_type!==ce||A.width_index!==j||A.ip!==y||JSON.stringify(A.storage)!==JSON.stringify(r==null?void 0:r.storage)},ee=W=>{h(W)},Ne=(W,j)=>{v(ce=>({...ce,[W]:j}))},me=()=>{r&&(l==="add"?Ce():Y())},H=()=>{e()},Ce=async()=>{if(!r||!oe){i("","error");return}k(!0);try{const W=Yr[f],j=p[f]||0,ce=W.width[j],de=te(oe),V={Master_GUID:oe.GUID,position:de,width:ce.toString(),height:"60",ip_box:y,serverName:oe.serverName||"",serverType:oe.serverType||""};console.log("  API :",V);const re=await Me.addMedMapBox(V);re.Code===200?(i("","success"),e(),await be()):i(`${re.Result||""}`,"error")}catch(W){console.error("Add med box failed:",W),i("","error")}finally{k(!1)}},Y=async()=>{var W;if(!r||!X()){i("","error");return}T(!0);try{const j=Yr[f],ce=p[f]||0,de=j.width[ce],V=j.box_type||j.type||j.name,re=A.box_type!==V||A.width_index!==ce||A.ip!==y,he=JSON.stringify(A.storage)!==JSON.stringify(r==null?void 0:r.storage),U=[];if(re){const ue={GUID:r.GUID,Master_GUID:r.Master_GUID,position:r.gird_position,ip_light:y,serverName:r.serverName,serverType:r.serverType};U.push(Me.updateMedMapBox([ue]))}he&&U.push(Me.updateEpd266Storages(r.serverName||"",r.serverType||"",[r.storage]));const Z=await Promise.all(U);if(Z.every(ue=>ue.Code===200))i("","success"),e(),await be();else{const ue=Z.filter(ge=>ge.Code!==200);i(`${((W=ue[0])==null?void 0:W.Result)||""}`,"error")}}catch(j){console.error("Update med box failed:",j),i("","error")}finally{T(!1)}},be=async()=>{if(!n){console.warn(" ");return}console.log(" :",n),a(!0);try{const W=await Me.getMedMapByDepartment(n);if(W.Code===200&&W.Data){console.log(" API ");const j=await y2(()=>Promise.resolve().then(()=>nx),void 0),ce=j.default.convertMedMapApiToFakeData(W.Data);if(!j.default.validateConvertedData(ce)){console.error(" "),i("","error");return}o(ce),console.log(" ")}else console.error(" API :",W),i("API ","error")}catch(W){console.error(" :",W),i("","error")}finally{a(!1)}},ye=async()=>{R(!0);try{const W=g.toLowerCase().trim();let j=u;W&&(j=j.filter(ce=>{var de,V,re;return((de=ce.CODE)==null?void 0:de.toLowerCase().includes(W))||((V=ce.NAME)==null?void 0:V.toLowerCase().includes(W))||((re=ce.CHT_NAME)==null?void 0:re.toLowerCase().includes(W))})),m!=="N"&&(j=j.filter(ce=>ce.DRUGKIND===m)),S(j)}catch(W){console.error("Search failed:",W),S([])}finally{R(!1)}},B=(W,j)=>{console.log(" :",j),M(!1),xe(j)},xe=async W=>{if(r)try{console.log(" :",W.CODE);const j=await Me.updateEpd266Medcode(r.serverName||"",r.serverType||"",W.CODE,r.storage||{});j.Code===200?(console.log(" :",j.Data),r.storage=j.Data,r.med_info=[{name:W.NAME,cht_name:W.CHT_NAME,code:W.CODE}],i("","success"),s()):(console.error(" :",j),i(`${j.Result||""}`,"error"))}catch(j){console.error(" :",j),i("","error")}};return!t||!r?null:c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:H}),c.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh"},onClick:W=>W.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Sn,{className:"w-6 h-6 text-gray-600"}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:d(l==="add"?"modal.addMedBox":"modal.medBoxSettings")})]}),c.jsx("button",{onClick:H,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(ut,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"flex-1 px-4 py-2 overflow-y-auto",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"gap-16 flex",children:c.jsxs("div",{className:"space-y-1",children:[c.jsx("h3",{className:"text-base font-medium text-gray-900",children:d("form.ipAddress")}),c.jsx("div",{className:"flex items-center",children:c.jsx("input",{type:"text",onChange:W=>w(W.target.value),placeholder:(r==null?void 0:r.ip)||(r==null?void 0:r.name)||d("placeholder.ipAddress"),className:"px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors w-64"})})]})}),c.jsxs("div",{className:"flex gap-16",children:[c.jsxs("div",{className:"space-y-1 min-w-[260px]",children:[c.jsx("h3",{className:"text-base font-medium text-gray-900",children:d("form.medBoxType")}),c.jsx("div",{className:"flex gap-4 justify-between",children:Yr.map((W,j)=>c.jsxs("label",{className:`flex items-center px-4 py-2 border-2 rounded-lg cursor-pointer transition-all ${f===j?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[c.jsx("input",{type:"radio",name:"boxType",value:j,checked:f===j,onChange:()=>ee(j),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 hidden"}),c.jsx("div",{children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:W.name})})]},j))})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("h3",{className:"text-base font-medium text-gray-900",children:d("form.widthSelection")}),Yr.map((W,j)=>c.jsx("div",{className:`flex gap-4 ${f===j?"block":"hidden"}`,children:W.width.map((ce,de)=>c.jsxs("label",{className:`flex items-center justify-center px-4 py-2 border-2 rounded-lg cursor-pointer transition-all ${f===j&&(p[j]||0)===de?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[c.jsx("input",{type:"radio",name:`width-${j}`,value:de,checked:f===j&&(p[j]||0)===de,onChange:()=>Ne(j,de),className:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500 hidden"}),c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[ce," ",W.unit]})})]},`${j}-${de}`))},j))]})]}),c.jsxs("div",{className:"flex gap-6",children:[l==="edit"&&c.jsxs("div",{className:"space-y-2 w-[50%]",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:d("form.drugInfo")}),c.jsx("div",{children:r!=null&&r.med_info&&r.med_info.length>0?c.jsx("div",{children:r.med_info.map((W,j)=>c.jsxs("div",{className:"space-y-2 p-4 border border-gray-200 rounded-lg min-h-[262px] max-h-[262px]",children:[c.jsxs("div",{children:[c.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[d("form.drugCode"),":"]}),c.jsx("div",{className:"text-base text-gray-900 mt-1",children:W.code||d("status.notSet")})]}),c.jsxs("div",{children:[c.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[d("form.drugName"),":"]}),c.jsx("div",{className:"text-base text-gray-900 mt-1",children:W.name||d("status.notSet")})]}),c.jsxs("div",{children:[c.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[d("form.chineseName"),":"]}),c.jsx("div",{className:"text-base text-gray-900 mt-1",children:W.cht_name||d("status.notSet")})]})]},j))}):c.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg py-8 px-4 text-center space-y-4",children:c.jsx("div",{className:"text-gray-500 text-base",children:d("status.noDrugData")})})})]}),l==="add"&&c.jsxs("div",{className:"space-y-2 w-[50%]",children:[c.jsx("h3",{className:"text-base font-medium text-gray-900",children:d("form.drugInfo")}),c.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg py-2 px-4 min-h-[262px] max-h-[262px]",children:c.jsx("div",{className:"text-center py-8 space-y-4",children:c.jsx("div",{className:"text-gray-500 text-base",children:d("status.newMedBoxNoDrug")})})})]}),c.jsxs("div",{className:"space-y-2 w-[50%]",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:d("form.drugSearch")}),c.jsx("button",{onClick:()=>M(!0),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",title:"",children:c.jsx(Vo,{className:"w-5 h-5 text-gray-600"})})]}),c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("input",{type:"text",value:g,onChange:W=>x(W.target.value),placeholder:d("placeholder.drugSearch"),className:"border rounded px-3 py-1 flex-1 min-w-0 focus:border-blue-500 focus:outline-none transition-colors"}),c.jsxs("select",{value:m,onChange:W=>C(W.target.value),className:"border rounded px-2 py-1 focus:border-blue-500 focus:outline-none transition-colors",title:"",children:[c.jsx("option",{value:"N",children:"N"}),c.jsx("option",{value:"1",children:"1"}),c.jsx("option",{value:"2",children:"2"}),c.jsx("option",{value:"3",children:"3"}),c.jsx("option",{value:"4",children:"4"})]}),c.jsxs("button",{onClick:ye,disabled:I,className:"bg-blue-600 text-white px-4 py-1.5 rounded hover:bg-blue-700 transition-colors whitespace-nowrap disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[I&&c.jsx(hr,{className:"w-4 h-4 animate-spin"}),d("button.search")]})]}),c.jsx("div",{className:"bg-white border rounded p-3 min-h-[220px] max-h-[220px] overflow-y-auto",children:I?c.jsxs("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:[c.jsx(hr,{className:"w-5 h-5 animate-spin mr-2"}),d("status.searching")]}):N.length>0?c.jsx("div",{className:"space-y-1",children:N.map((W,j)=>c.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:W.NAME}),c.jsx("div",{className:"text-xs text-gray-500 truncate",children:W.CHT_NAME}),c.jsx("div",{className:"text-xs text-gray-400 font-mono",children:W.CODE})]}),c.jsx("button",{onClick:()=>xe(W),className:"ml-2 p-1 text-green-600 hover:text-green-700 hover:bg-green-50 rounded transition-colors flex-shrink-0",title:d("button.add"),children:c.jsx(cr,{className:"w-4 h-4"})})]},W.GUID||j))}):c.jsx("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:d(g||m!=="N"?"status.noSearchResults":"status.searchResults")})})]})]})]})}),c.jsxs("div",{className:"flex items-center justify-end space-x-3 py-2 px-4 border-t border-gray-200",children:[c.jsx("button",{onClick:H,disabled:z||F,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:d("button.cancel")}),c.jsxs("button",{onClick:me,disabled:z||F,className:"px-6 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[(z||F)&&c.jsx(hr,{className:"w-4 h-4 animate-spin"}),c.jsx("span",{children:z?"...":F?"...":d(l==="add"?"button.add":"button.save")})]})]})]}),c.jsx(Ds,{isOpen:O,onClose:()=>M(!1),onScanSuccess:B,mode:"set_med_box_med_mode"})]})},_2=()=>{const{listDrawModalOpen:t,closeListDrawModal:e,selectedListDraw:r,triggerRefresh:n}=vt(),{t:o}=nr(),[a,i]=_.useState(""),[s,l]=_.useState([]),[u,d]=_.useState(""),[f,h]=_.useState("N"),[p,v]=_.useState([]),[y,w]=_.useState(!1);_.useEffect(()=>{r&&t&&(i(r.name||""),l(r.med_info||[]))},[r,t]);const g=S=>{l(I=>I.filter(R=>R.code!==S))},x=async()=>{w(!0);try{const S=await Me.searchMedicine(u,f);v(S)}catch(S){console.error("Search failed:",S),v([])}finally{w(!1)}},m=S=>{const I={id:S.GUID||`${Date.now()}_${Math.random()}`,name:S.NAME,cht_name:S.CHT_NAME,code:S.CODE};l(R=>R.some(k=>k.code===I.code)?R:[...R,I])},C=()=>{r&&(r.name=a,r.med_info=s,n(),e())},N=()=>{e()};return!t||!r?null:c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:N}),c.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh"},onClick:S=>S.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Sn,{className:"w-6 h-6 text-gray-600"}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:o("modal.listDrawSettings")})]}),c.jsx("button",{onClick:N,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(ut,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"flex-1 px-4 py-1 overflow-y-auto",children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:o("form.drawerName")}),c.jsx("input",{type:"text",value:a,onChange:S=>i(S.target.value),placeholder:(r==null?void 0:r.name)||o("placeholder.drawerName"),className:"w-full px-2 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors text-base"})]}),c.jsxs("div",{className:"flex gap-6",children:[c.jsxs("div",{className:"space-y-2 w-[50%]",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:o("form.drugList")}),s.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-2",children:s.map(S=>c.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-1 hover:border-gray-300 transition-colors",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsx("div",{className:"flex-1 min-w-0",children:c.jsxs("div",{children:[S.code&&c.jsx("div",{children:c.jsx("div",{className:"text-sm text-gray-900 font-mono",children:S.code})}),c.jsx("div",{children:c.jsx("div",{className:"text-sm text-gray-900 font-medium",children:S.name||o("status.notSet")})}),c.jsx("div",{children:c.jsx("div",{className:"text-sm text-gray-900",children:S.cht_name||o("status.notSet")})})]})}),c.jsx("button",{onClick:()=>g(S.code),className:"ml-3 p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors flex-shrink-0",title:o("button.remove"),children:c.jsx(ut,{className:"w-5 h-5"})})]})},S.id))}):c.jsx("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-500 text-lg mb-2",children:o("status.drawerNoDrug")}),c.jsx("div",{className:"text-gray-400 text-sm",children:o("status.drugListEmpty")})]})})]}),c.jsxs("div",{className:"space-y-2 w-[50%]",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:o("form.drugSearch")}),c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("input",{type:"text",value:u,onChange:S=>d(S.target.value),placeholder:o("placeholder.drugSearch"),className:"border rounded px-3 py-1 flex-1 min-w-0 focus:border-blue-500 focus:outline-none transition-colors"}),c.jsxs("select",{value:f,onChange:S=>h(S.target.value),className:"border rounded px-2 py-1 focus:border-blue-500 focus:outline-none transition-colors",title:"",children:[c.jsx("option",{value:"N",children:"N"}),c.jsx("option",{value:"1",children:"1"}),c.jsx("option",{value:"2",children:"2"}),c.jsx("option",{value:"3",children:"3"}),c.jsx("option",{value:"4",children:"4"})]}),c.jsxs("button",{onClick:x,disabled:y,className:"bg-blue-600 text-white px-4 py-1.5 rounded hover:bg-blue-700 transition-colors whitespace-nowrap disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[y&&c.jsx(hr,{className:"w-4 h-4 animate-spin"}),o("button.search")]})]}),c.jsx("div",{className:"bg-white border rounded p-3 min-h-[300px] max-h-[300px] overflow-y-auto",children:y?c.jsxs("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:[c.jsx(hr,{className:"w-5 h-5 animate-spin mr-2"}),o("status.searching")]}):p.length>0?c.jsx("div",{className:"space-y-1",children:p.map((S,I)=>c.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:S.NAME}),c.jsx("div",{className:"text-xs text-gray-500 truncate",children:S.CHT_NAME}),c.jsx("div",{className:"text-xs text-gray-400 font-mono",children:S.CODE})]}),c.jsx("button",{onClick:()=>m(S),className:"ml-2 p-1 text-green-600 hover:text-green-700 hover:bg-green-50 rounded transition-colors flex-shrink-0",title:o("button.add"),children:c.jsx(cr,{className:"w-4 h-4"})})]},S.GUID||I))}):c.jsx("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:o(u||f!=="N"?"status.noSearchResults":"status.searchResults")})})]})]})]})}),c.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 border-t border-gray-200",children:[c.jsx("button",{onClick:N,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:o("button.cancel")}),c.jsx("button",{onClick:C,className:"px-6 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:o("button.save")})]})]})]})},C2=()=>{const{gridDrawModalOpen:t,closeGridDrawModal:e,selectedGridDraw:r,triggerRefresh:n,apiDepartmentData:o,setApiDepartmentData:a,showNotification:i,medicineList:s}=vt(),{t:l}=nr(),[u,d]=_.useState(""),[f,h]=_.useState(null),[p,v]=_.useState(!1),[y,w]=_.useState(!1),[g,x]=_.useState(null),[m,C]=_.useState(""),[N,S]=_.useState("N"),[I,R]=_.useState([]),[z,k]=_.useState(!1),[oe,se]=_.useState(0),[A,D]=_.useState({x:0,y:0});_.useEffect(()=>{if(r&&t)if(d(r.name||""),r.drawer){if(!p){console.log("  drawer :",r);const V=JSON.parse(JSON.stringify(r.drawer));h(V),v(!0),console.log(" :",V)}}else console.log("  drawer "),h(null),v(!1)},[r,t,p]),_.useEffect(()=>{t||(v(!1),h(null),x(null))},[t]);const F=()=>{r&&ce()},T=()=>{if(console.log(" ..."),console.log(":",f),console.log(" selectedGridDraw:",r),r&&f&&p){console.log("  drawer ...");const V=JSON.parse(JSON.stringify(f));if(r.drawer=V,o){const re=U=>{U.forEach(Z=>{Z.GUID===r.GUID&&(console.log(" "),Z.drawer=V),Z.contents&&Array.isArray(Z.contents)&&re(Z.contents),Z.components&&Array.isArray(Z.components)&&re(Z.components)})},he=JSON.parse(JSON.stringify(o));re(he),a(he),console.log(" ")}console.log(" :",r.drawer)}else console.log("  - selectedGridDraworiginalDrawerData  hasBackup "),console.log("selectedGridDraw:",!!r),console.log("originalDrawerData:",!!f),console.log("hasBackup:",p);x(null),v(!1),h(null),n(),e()},O=(V,re)=>{if(!g)return!1;const he=Math.min(g.startRow,g.endRow),U=Math.max(g.startRow,g.endRow),Z=Math.min(g.startCol,g.endCol),Q=Math.max(g.startCol,g.endCol);return V>=he&&V<=U&&re>=Z&&re<=Q},M=V=>{var Ee;if(!((Ee=r==null?void 0:r.drawer)!=null&&Ee.Boxes)||V.Slave)return{width:1,height:1};const he=r.drawer.Boxes.flat().filter(pe=>pe.Slave&&pe.MasterBox_Row===V.Row&&pe.MasterBox_Column===V.Column);if(he.length===0)return{width:1,height:1};const U=[V,...he],Z=Math.min(...U.map(pe=>pe.Row)),Q=Math.max(...U.map(pe=>pe.Row)),ue=Math.min(...U.map(pe=>pe.Column));return{width:Math.max(...U.map(pe=>pe.Column))-ue+1,height:Q-Z+1}},P=()=>{var ue;if(!g||!((ue=r==null?void 0:r.drawer)!=null&&ue.Boxes))return[];const V=r.drawer.Boxes.flat(),re=Math.min(g.startRow,g.endRow),he=Math.max(g.startRow,g.endRow),U=Math.min(g.startCol,g.endCol),Z=Math.max(g.startCol,g.endCol),Q=[];return V.forEach(ge=>{if(!ge.Slave){const Ee=M(ge),pe=ge.Row+Ee.height-1,Se=ge.Column+Ee.width-1;ge.Row>=re&&pe<=he&&ge.Column>=U&&Se<=Z&&Q.push(ge)}}),Q},te=(V,re,he,U)=>{var Se;if(!g||!((Se=r==null?void 0:r.drawer)!=null&&Se.Boxes))return!1;const Z=r.drawer.Boxes.flat();let Q=!0,ue=V,ge=re,Ee=he,pe=U;for(;Q;)Q=!1,Z.forEach(Te=>{if(!Te.Slave){const Le=M(Te),gt=Te.Row+Le.height-1,Ue=Te.Column+Le.width-1;!(Te.Row>ge||gt<ue||Te.Column>pe||Ue<Ee)&&(Te.Row<ue&&(ue=Te.Row,Q=!0),gt>ge&&(ge=gt,Q=!0),Te.Column<Ee&&(Ee=Te.Column,Q=!0),Ue>pe&&(pe=Ue,Q=!0))}});return{minRow:ue,maxRow:ge,minCol:Ee,maxCol:pe}},X=()=>{var Q;if(!g||!((Q=r==null?void 0:r.drawer)!=null&&Q.Boxes))return!1;const V=Math.min(g.startRow,g.endRow),re=Math.max(g.startRow,g.endRow),he=Math.min(g.startCol,g.endCol),U=Math.max(g.startCol,g.endCol),Z=r.drawer.Boxes.flat();for(let ue=V;ue<=re;ue++)for(let ge=he;ge<=U;ge++){let Ee=!1;for(const pe of Z)if(!pe.Slave){const Se=M(pe),Te=pe.Row+Se.height-1,Le=pe.Column+Se.width-1;if(ue>=pe.Row&&ue<=Te&&ge>=pe.Column&&ge<=Le){Ee=!0;break}}if(!Ee)return!1}return!0},ee=()=>{var Se,Te;const V=P();if(!g)return{canMerge:!1,canUnmerge:!1};if(V.length===0)return{canMerge:!1,canUnmerge:!1};const re=((Te=(Se=r==null?void 0:r.drawer)==null?void 0:Se.Boxes)==null?void 0:Te.flat())||[],he=V.some(Le=>re.filter(Ue=>Ue.Slave&&Ue.MasterBox_Row===Le.Row&&Ue.MasterBox_Column===Le.Column).length>0),U=Math.min(g.startRow,g.endRow),Z=Math.max(g.startRow,g.endRow),Q=Math.min(g.startCol,g.endCol),ue=Math.max(g.startCol,g.endCol),ge=re.some(Le=>Le.Slave&&Le.Row>=U&&Le.Row<=Z&&Le.Column>=Q&&Le.Column<=ue);return{canMerge:V.length>1&&X(),canUnmerge:he||ge}},{canMerge:Ne,canUnmerge:me}=ee(),H=async()=>{k(!0);try{const V=m.toLowerCase().trim();let re=s;V&&(re=re.filter(he=>{var U,Z,Q;return((U=he.CODE)==null?void 0:U.toLowerCase().includes(V))||((Z=he.NAME)==null?void 0:Z.toLowerCase().includes(V))||((Q=he.CHT_NAME)==null?void 0:Q.toLowerCase().includes(V))})),N!=="N"&&(re=re.filter(he=>he.DRUGKIND===N)),R(re)}catch(V){console.error("Search failed:",V),R([])}finally{k(!1)}},Ce=async V=>{var he;if(!g||!((he=r==null?void 0:r.drawer)!=null&&he.Boxes))return;const re=P();if(re.length!==0)try{const U={ServerName:r.serverName,ServerType:r.serverType,ValueAry:[`guid=${re[0].GUID}`,`code=${V.CODE}`],Data:r.drawer};console.log("  API :",U);const Z=await Me.request("/api/device/update_drawer_medcode",{method:"POST",body:JSON.stringify(U)});if(console.log("  API :",Z),Z.Code===200&&Z.Data){if(r.drawer=Z.Data,Z.Data.Boxes&&(r.Boxes=Z.Data.Boxes),console.log(" "),o){const Q=ge=>{ge.forEach(Ee=>{Ee.GUID===r.GUID&&(console.log(" "),Ee.drawer=r.drawer,r.Boxes&&(Ee.Boxes=r.Boxes)),Ee.contents&&Array.isArray(Ee.contents)&&Q(Ee.contents),Ee.components&&Array.isArray(Ee.components)&&Q(Ee.components)})},ue=JSON.parse(JSON.stringify(o));Q(ue),a(ue)}x(null),n()}else console.error(" :",Z),i(`${Z.Result||""}`,"error")}catch(U){console.error("  API :",U),i("","error")}},Y=(V,re,he)=>{he.preventDefault(),he.stopPropagation(),"touches"in he&&(se(Date.now()),D({x:he.touches[0].clientX,y:he.touches[0].clientY})),w(!0),x({startRow:V,startCol:re,endRow:V,endCol:re})},be=(V,re)=>{if(!y||!g)return;const he=Math.min(g.startRow,V),U=Math.max(g.startRow,V),Z=Math.min(g.startCol,re),Q=Math.max(g.startCol,re),ue=te(he,U,Z,Q);ue&&x(ge=>ge?{startRow:ge.startRow,startCol:ge.startCol,endRow:V>=ge.startRow?ue.maxRow:ue.minRow,endCol:re>=ge.startCol?ue.maxCol:ue.minCol}:null)},ye=()=>{if(y&&(w(!1),g&&(r!=null&&r.Boxes))){const V=Math.min(g.startRow,g.endRow),re=Math.max(g.startRow,g.endRow),he=Math.min(g.startCol,g.endCol),U=Math.max(g.startCol,g.endCol),Z=te(V,re,he,U);Z&&x({startRow:Z.minRow,startCol:Z.minCol,endRow:Z.maxRow,endCol:Z.maxCol})}},B=()=>{var V;!Ne||!((V=r==null?void 0:r.drawer)!=null&&V.Boxes)||!g||j()},xe=()=>{var V;!me||!((V=r==null?void 0:r.drawer)!=null&&V.Boxes)||!g||(console.log(g),W())},W=async()=>{var V;if(!(!g||!((V=r==null?void 0:r.drawer)!=null&&V.Boxes)))try{const re=Math.min(g.startRow,g.endRow),he=Math.max(g.startRow,g.endRow),U=Math.min(g.startCol,g.endCol),Z=Math.max(g.startCol,g.endCol),ue=r.drawer.Boxes.flat().filter(Te=>Te.Row>=re&&Te.Row<=he&&Te.Column>=U&&Te.Column<=Z),ge=[],Ee=[];ue.forEach(Te=>{ge.push(Te.Column.toString()),Ee.push(Te.Row.toString())});const pe={ServerName:r.serverName,ServerType:r.serverType,ValueAry:[`SelectColumns=${ge.join(",")}`,`SelectRows=${Ee.join(",")}`],Data:{IP:r.ip,Boxes:r.Boxes}};console.log("  API :",pe);const Se=await Me.request("/api/device/separate_drawer_boxes",{method:"POST",body:JSON.stringify(pe)});if(console.log(" API :",Se),Se.Code===200&&Se.Data){if(Se.Data.Boxes&&Array.isArray(Se.Data.Boxes)&&(r.Boxes=Se.Data.Boxes,r.drawer=Se.Data,console.log(" "),o)){const Te=gt=>{gt.forEach(Ue=>{Ue.GUID===r.GUID&&(console.log(" "),Ue.drawer=r.drawer),Ue.contents&&Array.isArray(Ue.contents)&&Te(Ue.contents),Ue.components&&Array.isArray(Ue.components)&&Te(Ue.components)})},Le=JSON.parse(JSON.stringify(o));Te(Le),a(Le)}}else console.error(" API :",Se),i(`${Se.Result||""}`,"error")}catch(re){console.error(" API :",re),i("","error")}finally{console.log("",r),console.log("",o),x(null),n()}},j=async()=>{var V;if(!(!g||!((V=r==null?void 0:r.drawer)!=null&&V.Boxes)))try{const re=Math.min(g.startRow,g.endRow),he=Math.max(g.startRow,g.endRow),U=Math.min(g.startCol,g.endCol),Z=Math.max(g.startCol,g.endCol),ue=r.drawer.Boxes.flat().filter(Te=>Te.Row>=re&&Te.Row<=he&&Te.Column>=U&&Te.Column<=Z),ge=[],Ee=[];ue.forEach(Te=>{ge.push(Te.Column.toString()),Ee.push(Te.Row.toString())});const pe={ServerName:r.serverName,ServerType:r.serverType,ValueAry:[`SelectColumns=${ge.join(",")}`,`SelectRows=${Ee.join(",")}`],Data:{IP:r.ip,Boxes:r.Boxes}};console.log("  API :",pe);const Se=await Me.request("/api/device/combine_drawer_boxes",{method:"POST",body:JSON.stringify(pe)});if(console.log(" API :",Se),Se.Code===200&&Se.Data){if(Se.Data.Boxes&&Array.isArray(Se.Data.Boxes)&&(r.Boxes=Se.Data.Boxes,r.drawer=Se.Data,console.log(" "),o)){const Te=gt=>{gt.forEach(Ue=>{Ue.GUID===r.GUID&&(console.log(" "),Ue.drawer=r.drawer),Ue.contents&&Array.isArray(Ue.contents)&&Te(Ue.contents),Ue.components&&Array.isArray(Ue.components)&&Te(Ue.components)})},Le=JSON.parse(JSON.stringify(o));Te(Le),a(Le)}}else console.error(" API :",Se),i(`${Se.Result||""}`,"error")}catch(re){console.error(" API :",re),i("","error")}finally{console.log("",r),console.log("",o),x(null),n()}},ce=async()=>{if(r)try{r.name=u;const V={ServerName:r.serverName,ServerType:r.serverType,Data:[r.drawer]};console.log("  API :",V);const re=await Me.request("/api/device/update_epd583_drawers",{method:"POST",body:JSON.stringify(V)});if(console.log("  API :",re),re.Code===200){if(console.log(" "),i("","success"),o){const he=Z=>{Z.forEach(Q=>{Q.GUID===r.GUID&&(console.log(" "),Q.name=r.name),Q.contents&&Array.isArray(Q.contents)&&he(Q.contents),Q.components&&Array.isArray(Q.components)&&he(Q.components)})},U=JSON.parse(JSON.stringify(o));he(U),a(U)}v(!1),h(null),n(),e()}else console.error(" :",re),i(`${re.Result||""}`,"error")}catch(V){console.error("  API :",V),i("","error")}},de=()=>{var Ee;if(!((Ee=r==null?void 0:r.drawer)!=null&&Ee.Boxes)||r.drawer.Boxes.length===0)return c.jsx("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx(L1,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("div",{className:"text-gray-500 text-lg mb-2",children:l("status.gridDrawNotConfigured")}),c.jsx("div",{className:"text-gray-400 text-sm",children:l("status.noDrugInfo")})]})});const V=r.drawer.Boxes.flat(),re=pe=>{if(pe.Slave)return{width:1,height:1};const Se=V.filter(rt=>rt.Slave&&rt.MasterBox_Row===pe.Row&&rt.MasterBox_Column===pe.Column);if(Se.length===0)return{width:1,height:1};const Te=[pe,...Se],Le=Math.min(...Te.map(rt=>rt.Row)),gt=Math.max(...Te.map(rt=>rt.Row)),Ue=Math.min(...Te.map(rt=>rt.Column));return{width:Math.max(...Te.map(rt=>rt.Column))-Ue+1,height:gt-Le+1}},he=Math.max(...V.map(pe=>pe.Row+1-1)),U=Math.max(...V.map(pe=>pe.Column+1-1)),Z=he+1,Q=U+1,ue=Array(Z).fill(null).map(()=>Array(Q).fill(!1)),ge={};return V.forEach(pe=>{if(!pe.Slave){const Se=re(pe);ge[`${pe.Row},${pe.Column}`]=pe,pe.calculatedWidth=Se.width,pe.calculatedHeight=Se.height}}),V.forEach(pe=>{if(!pe.Slave&&(pe.calculatedWidth>1||pe.calculatedHeight>1))for(let Se=pe.Row;Se<pe.Row+pe.calculatedHeight;Se++)for(let Te=pe.Column;Te<pe.Column+pe.calculatedWidth;Te++)(Se!==pe.Row||Te!==pe.Column)&&(ue[Se][Te]=!0)}),c.jsx("div",{className:"rounded-lg",children:c.jsx("table",{className:"w-full",children:c.jsx("tbody",{children:Array.from({length:Z},(pe,Se)=>c.jsx("tr",{children:Array.from({length:Q},(Te,Le)=>{if(ue[Se][Le])return null;const gt=`${Se},${Le}`,Ue=ge[gt];return Ue?c.jsx("td",{className:`border border-gray-400 pt-1 pl-1 align-top cursor-pointer select-none ${O(Se,Le)?"bg-blue-200":"bg-white hover:bg-gray-100"}`,style:{width:`${100/Q}%`,minHeight:"40px",height:`${50*Ue.calculatedHeight}px`,maxHeight:`${50*Ue.calculatedHeight}px`},colSpan:Ue.calculatedWidth,rowSpan:Ue.calculatedHeight,onMouseDown:yt=>Y(Se,Le,yt),onMouseEnter:()=>be(Se,Le),onMouseUp:ye,onTouchStart:yt=>Y(Se,Le,yt),onTouchMove:yt=>{if(yt.preventDefault(),!y)return;const rt=yt.touches[0],gr=document.elementFromPoint(rt.clientX,rt.clientY),br=gr==null?void 0:gr.closest("td");if(br){const Un=parseInt(br.getAttribute("data-row")||"0"),Pr=parseInt(br.getAttribute("data-col")||"0");be(Un,Pr)}},onTouchEnd:ye,"data-row":Se,"data-col":Le,children:c.jsx("div",{className:"h-full flex flex-col",children:Ue.Code||Ue.Name||Ue.ChineseName?c.jsxs(c.Fragment,{children:[Ue.Code&&c.jsx("div",{className:"text-xs font-mono text-gray-600",children:Ue.Code}),Ue.Name&&c.jsx("div",{className:"text-xs font-medium text-gray-900",children:Ue.Name}),Ue.ChineseName&&c.jsx("div",{className:"text-xs text-gray-700",children:Ue.ChineseName})]}):c.jsx("div",{className:"h-full flex justify-center items-center text-xs text-gray-400 italic text-center",children:l("status.notAdded")})})},Le):c.jsx("td",{className:`border border-gray-300 p-2 align-top cursor-pointer select-none ${O(Se,Le)?"border-1 border-blue-500 bg-blue-100":"bg-gray-50 hover:bg-gray-100"}`,style:{width:`${100/Q}%`,minWidth:"80px",minHeight:"80px"},onMouseDown:yt=>Y(Se,Le,yt),onMouseEnter:()=>be(Se,Le),onMouseUp:ye,onTouchStart:yt=>Y(Se,Le,yt),onTouchMove:yt=>{if(yt.preventDefault(),!y)return;const rt=yt.touches[0],gr=document.elementFromPoint(rt.clientX,rt.clientY),br=gr==null?void 0:gr.closest("td");if(br){const Un=parseInt(br.getAttribute("data-row")||"0"),Pr=parseInt(br.getAttribute("data-col")||"0");be(Un,Pr)}},onTouchEnd:ye,"data-row":Se,"data-col":Le,children:c.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 text-xs",children:l("status.notAdded")})},Le)})},Se))})})})};return!t||!r?null:c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:T}),c.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh"},onClick:V=>V.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Sn,{className:"w-6 h-6 text-gray-600"}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:l("modal.gridDrawSettings")})]}),c.jsx("button",{onClick:T,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(ut,{className:"w-6 h-6"})})]}),c.jsxs("div",{className:"flex-1 px-4 py-2 overflow-y-auto",children:[c.jsxs("div",{className:"space-y-4 pt-2",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("h3",{className:"text-lg whitespace-nowrap font-medium text-gray-900",children:l("form.drawerName")}),c.jsx("input",{type:"text",value:u,onChange:V=>d(V.target.value),disabled:!0,placeholder:(r==null?void 0:r.name)||l("placeholder.gridDrawName"),className:"px-2 py-1 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors text-base"})]}),c.jsx("div",{className:"space-y-1",children:de()})]}),c.jsxs("div",{className:"py-2 flex space-x-4",children:[c.jsx("div",{className:"grid grid-cols-1 gap-2 w-[10%]",children:c.jsxs("div",{className:"grid grid-cols-1 gap-2 items-strat",children:[c.jsx("button",{onClick:B,disabled:!Ne,className:`px-4 py-2 rounded transition-colors ${Ne?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:l("button.merge")}),c.jsx("button",{onClick:xe,disabled:!me,className:`px-4 py-2 rounded transition-colors ${me?"bg-red-600 text-white hover:bg-red-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:l("button.unmerge")})]})}),c.jsx("div",{className:"space-y-2 w-[30%]",children:(()=>{const V=P(),re=V.find(he=>!he.Slave);return re&&(re.Code||re.Name||re.ChineseName)?c.jsxs("div",{className:"border border-blue-200 rounded-lg p-2 space-y-1 h-full",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-900 mb-1",children:l("form.drugCode")}),c.jsx("div",{className:"text-base text-gray-900",children:re.Code||"-"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-900  mb-1",children:l("form.drugName")}),c.jsx("div",{className:"text-base text-gray-900",children:re.Name||"-"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-gray-900 mb-1",children:l("form.chineseName")}),c.jsx("div",{className:"text-base text-gray-900",children:re.ChineseName||"-"})]})]}):c.jsx("div",{className:"bg-gray-50 border h-full border-gray-200 rounded-lg p-3 text-center",children:c.jsx("div",{className:"text-gray-500 h-full w-full flex justify-center items-center",children:g&&V.length>0?l("status.selectedCellsNoDrug"):l("status.selectCellsForDrug")})})})()}),c.jsxs("div",{className:"w-[60%]",children:[c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("input",{type:"text",value:m,onChange:V=>C(V.target.value),placeholder:l("placeholder.drugSearch"),className:"border rounded px-3 py-1 flex-1 min-w-0 focus:border-blue-500 focus:outline-none transition-colors"}),c.jsxs("select",{value:N,onChange:V=>S(V.target.value),className:"border rounded px-2 py-1 focus:border-blue-500 focus:outline-none transition-colors",title:"",children:[c.jsx("option",{value:"N",children:"N"}),c.jsx("option",{value:"1",children:"1"}),c.jsx("option",{value:"2",children:"2"}),c.jsx("option",{value:"3",children:"3"}),c.jsx("option",{value:"4",children:"4"})]}),c.jsxs("button",{onClick:H,disabled:z,className:"bg-blue-600 text-white px-4 py-1.5 rounded hover:bg-blue-700 transition-colors whitespace-nowrap disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[z&&c.jsx(hr,{className:"w-4 h-4 animate-spin"}),l("button.search")]})]}),c.jsx("div",{className:"bg-white border rounded p-3 min-h-[150px] max-h-[150px] overflow-y-auto",children:z?c.jsxs("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:[c.jsx(hr,{className:"w-5 h-5 animate-spin mr-2"}),l("status.searching")]}):I.length>0?c.jsx("div",{className:"space-y-1",children:I.map((V,re)=>c.jsxs("div",{className:"flex items-center justify-between p-1 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:V.NAME}),c.jsx("div",{className:"text-xs text-gray-500 truncate",children:V.CHT_NAME}),c.jsx("div",{className:"text-xs text-gray-400 font-mono",children:V.CODE})]}),c.jsx("button",{onClick:()=>Ce(V),className:"ml-2 p-1 text-green-600 hover:text-green-700 hover:bg-green-50 rounded transition-colors flex-shrink-0",title:l("button.add"),children:c.jsx(cr,{className:"w-4 h-4"})})]},V.GUID||re))}):c.jsx("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:l(m||N!=="N"?"status.noSearchResults":"status.searchResults")})})]})]}),c.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 border-t border-gray-200",children:[c.jsx("button",{onClick:T,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:l("button.cancel")}),c.jsx("button",{onClick:F,className:"px-6 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:l("button.save")})]})]}),c.jsx("div",{className:"fixed inset-0 pointer-events-none",onMouseUp:ye,onMouseLeave:ye,onTouchEnd:ye,onTouchCancel:ye})]})]})},b2=()=>{var se;const{addParentContainerModalOpen:t,closeAddParentContainerModal:e,selectedDepartmentForAdd:r,selectedDepartmentType:n,setApiDepartmentData:o,setIsLoadingMedMap:a,showNotification:i,triggerRefresh:s,setSidebarOpen:l}=vt(),{t:u}=nr(),[d,f]=_.useState(null),[h,p]=_.useState(0),[v,y]=_.useState(0),[w,g]=_.useState(!1);_.useEffect(()=>{t&&(f(null),p(0),y(0),g(!1))},[t]),_.useEffect(()=>{d&&(p(d.row),y(d.col))},[d]);const x=()=>{const A=new Set;return r!=null&&r.contents&&r.contents.forEach(D=>{D.type==="parent_container"&&D.gird_position&&A.add(D.gird_position)}),A},m=()=>{const A=x(),D=[];if(A.size===0)return D.push({row:0,col:0}),D;const F=[];A.forEach(O=>{const[M,P]=O.split(",").map(Number);F.push({row:M,col:P})});const T=new Set;return F.forEach(({row:O,col:M})=>{T.add(`${O},${M+1}`),T.add(`${O+1},${M}`),M>0&&T.add(`${O},${M-1}`),O>0&&T.add(`${O-1},${M}`)}),T.forEach(O=>{if(!A.has(O)){const[M,P]=O.split(",").map(Number);M>=0&&P>=0&&D.push({row:M,col:P})}}),A.has("0,1")||D.some(M=>M.row===0&&M.col===1)||D.push({row:0,col:1}),A.has("1,0")||D.some(M=>M.row===1&&M.col===0)||D.push({row:1,col:0}),D.sort((O,M)=>O.row===M.row?O.col-M.col:O.row-M.row)},C=A=>{f(A)},N=A=>{p(A),f({row:A,col:v})},S=A=>{y(A),f({row:h,col:A})},I=d&&!x().has(`${d.row},${d.col}`)&&d.row>=0&&d.col>=0,R=async()=>{if(!(!d||!r||!I)){g(!0);try{const A=`${d.row},${d.col}`,D=await Me.addMedMapSection(r.GUID,A);D.Code===200?(i("","success"),e(),l(!1),await z()):i(`${D.Result||""}`,"error")}catch(A){console.error("Add parent container failed:",A),i("","error")}finally{g(!1)}}},z=async()=>{if(!n){console.warn(" ");return}console.log(" :",n),a(!0);try{const A=await Me.getMedMapByDepartment(n);if(A.Code===200&&A.Data){console.log(" API ");const D=Wt.convertMedMapApiToFakeData(A.Data);if(!Wt.validateConvertedData(D)){console.error(" "),i("","error");return}o(D),console.log(" ")}else console.error(" API :",A),i("API ","error")}catch(A){console.error(" :",A),i("","error")}finally{a(!1)}},k=()=>{e()},oe=()=>{const A=x(),D=m(),F=[...A].map(ee=>{const[Ne,me]=ee.split(",").map(Number);return{row:Ne,col:me}}).concat(D);F.length===0&&F.push({row:0,col:0});const T=Math.max(...F.map(ee=>ee.row)),O=Math.max(...F.map(ee=>ee.col)),M=Math.min(...F.map(ee=>ee.row)),P=Math.min(...F.map(ee=>ee.col)),te=T-M+1,X=O-P+1;return c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),c.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${X}, 1fr)`},children:Array.from({length:te*X},(ee,Ne)=>{const me=Math.floor(Ne/X)+M,H=Ne%X+P,Ce=`${me},${H}`,Y=A.has(Ce),be=D.some(B=>B.row===me&&B.col===H),ye=(d==null?void 0:d.row)===me&&(d==null?void 0:d.col)===H;return c.jsx("button",{onClick:()=>be&&C({row:me,col:H}),disabled:Y||!be,className:`
                    w-16 h-16 border-2 rounded-lg transition-all duration-200 flex items-center justify-center text-sm font-medium
                    ${Y?"bg-red-100 border-red-300 text-red-600 cursor-not-allowed":ye?"bg-blue-500 border-blue-600 text-white shadow-lg":be?"bg-green-100 border-green-300 text-green-700 hover:bg-green-200 hover:border-green-400 cursor-pointer":"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed"}
                  `,title:Y?"":be?"":"",children:Y?"":`${me},${H}`},Ce)})})})]})};return!t||!r?null:c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:k}),c.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh",maxWidth:"800px"},onClick:A=>A.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(cr,{className:"w-6 h-6 text-green-600"}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:""})]}),c.jsx("button",{onClick:k,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(ut,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"flex-1 px-6 py-4 overflow-y-auto",children:c.jsxs("div",{className:"space-y-6",children:[oe(),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:" (Row):"}),c.jsx("input",{type:"number",min:"0",value:h,onChange:A=>N(parseInt(A.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:" (Column):"}),c.jsx("input",{type:"number",min:"0",value:v,onChange:A=>S(parseInt(A.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]})]}),d&&c.jsx("div",{className:`text-sm p-2 rounded ${I?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:I?`${d.row},${d.col}`:` ${d.row},${d.col} `})]}),c.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:""}),c.jsxs("div",{className:"text-sm text-gray-600",children:[c.jsxs("div",{children:["",(r==null?void 0:r.name)||""]}),c.jsxs("div",{children:["",(r==null?void 0:r.type)||""]}),c.jsxs("div",{children:["",((se=r==null?void 0:r.contents)==null?void 0:se.filter(A=>A.type==="parent_container").length)||0]})]})]})]})}),c.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 border-t border-gray-200",children:[c.jsx("button",{onClick:k,disabled:w,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u("button.cancel")}),c.jsxs("button",{onClick:R,disabled:!I||w,className:"px-6 py-2 text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[w&&c.jsx(hr,{className:"w-4 h-4 animate-spin"}),c.jsx("span",{children:w?"...":""})]})]})]})]})},mf=[{value:"dispensing_shelves",label:"",icon:c.jsx(vx,{className:"w-5 h-5"}),isShelf:!0},{value:"store_shelves",label:"",icon:c.jsx(cx,{className:"w-5 h-5"}),isShelf:!0},{value:"list_draw",label:"",icon:c.jsx(ac,{className:"w-5 h-5"}),isShelf:!1},{value:"grid_draw",label:"",icon:c.jsx(L1,{className:"w-5 h-5"}),isShelf:!1}],S2=()=>{var te;const{addShelfDrawContainerModalOpen:t,closeAddShelfDrawContainerModal:e,selectedSubContainerForAdd:r,selectedDepartmentType:n,setApiDepartmentData:o,setIsLoadingMedMap:a,showNotification:i,triggerRefresh:s,setSidebarOpen:l}=vt(),{t:u}=nr(),[d,f]=_.useState("dispensing_shelves"),[h,p]=_.useState("1"),[v,y]=_.useState("1"),[w,g]=_.useState(""),[x,m]=_.useState(null),[C,N]=_.useState(0),[S,I]=_.useState(0),[R,z]=_.useState(!1);_.useEffect(()=>{t&&(f("dispensing_shelves"),p("1"),y("1"),g(""),m(null),N(0),I(0),z(!1))},[t]),_.useEffect(()=>{x&&(N(x.row),I(x.col))},[x]);const k=()=>{const X=new Set;return r!=null&&r.contents&&r.contents.forEach(ee=>{ee.gird_position&&X.add(ee.gird_position)}),X},oe=()=>{const X=k(),ee=[];if(X.size===0)return ee.push({row:0,col:0}),ee;const Ne=[];X.forEach(H=>{const[Ce,Y]=H.split(",").map(Number);Ne.push({row:Ce,col:Y})});const me=new Set;return Ne.forEach(({row:H,col:Ce})=>{me.add(`${H},${Ce+1}`),me.add(`${H+1},${Ce}`),Ce>0&&me.add(`${H},${Ce-1}`),H>0&&me.add(`${H-1},${Ce}`)}),me.forEach(H=>{if(!X.has(H)){const[Ce,Y]=H.split(",").map(Number);Ce>=0&&Y>=0&&ee.push({row:Ce,col:Y})}}),X.has("0,1")||ee.some(Ce=>Ce.row===0&&Ce.col===1)||ee.push({row:0,col:1}),X.has("1,0")||ee.some(Ce=>Ce.row===1&&Ce.col===0)||ee.push({row:1,col:0}),ee.sort((H,Ce)=>H.row===Ce.row?H.col-Ce.col:H.row-Ce.row)},se=X=>{m(X)},A=X=>{N(X),m({row:X,col:S})},D=X=>{I(X),m({row:C,col:X})},F=x&&!k().has(`${x.row},${x.col}`)&&x.row>=0&&x.col>=0,T=async()=>{if(!(!x||!r||!F)){z(!0);try{const X=`${x.row},${x.col}`,ee=mf.find(me=>me.value===d);let Ne;ee!=null&&ee.isShelf?Ne=await Me.addMedMapShelf({Master_GUID:r.GUID,position:X,width:h,height:v,ip_light:w,type:d}):Ne=await Me.addMedMapDrawer({Master_GUID:r.GUID,position:X,width:h,height:v,ip_drawer:w,type:d}),Ne.Code===200?(i("","success"),e(),l(!1),await O()):i(`${Ne.Result||""}`,"error")}catch(X){console.error("Add container failed:",X),i("","error")}finally{z(!1)}}},O=async()=>{if(!n){console.warn(" ");return}console.log(" :",n),a(!0);try{const X=await Me.getMedMapByDepartment(n);if(X.Code===200&&X.Data){console.log(" API ");const ee=Wt.convertMedMapApiToFakeData(X.Data);if(!Wt.validateConvertedData(ee)){console.error(" "),i("","error");return}o(ee),console.log(" ")}else console.error(" API :",X),i("API ","error")}catch(X){console.error(" :",X),i("","error")}finally{a(!1)}},M=()=>{e()},P=()=>{const X=k(),ee=oe(),Ne=[...X].map(B=>{const[xe,W]=B.split(",").map(Number);return{row:xe,col:W}}).concat(ee);Ne.length===0&&Ne.push({row:0,col:0});const me=Math.max(...Ne.map(B=>B.row)),H=Math.max(...Ne.map(B=>B.col)),Ce=Math.min(...Ne.map(B=>B.row)),Y=Math.min(...Ne.map(B=>B.col)),be=me-Ce+1,ye=H-Y+1;return c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),c.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${ye}, 1fr)`},children:Array.from({length:be*ye},(B,xe)=>{const W=Math.floor(xe/ye)+Ce,j=xe%ye+Y,ce=`${W},${j}`,de=X.has(ce),V=ee.some(he=>he.row===W&&he.col===j),re=(x==null?void 0:x.row)===W&&(x==null?void 0:x.col)===j;return c.jsx("button",{onClick:()=>V&&se({row:W,col:j}),disabled:de||!V,className:`
                    w-16 h-16 border-2 rounded-lg transition-all duration-200 flex items-center justify-center text-sm font-medium
                    ${de?"bg-red-100 border-red-300 text-red-600 cursor-not-allowed":re?"bg-blue-500 border-blue-600 text-white shadow-lg":V?"bg-green-100 border-green-300 text-green-700 hover:bg-green-200 hover:border-green-400 cursor-pointer":"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed"}
                  `,title:de?"":V?"":"",children:de?"":`${W},${j}`},ce)})})})]})};return!t||!r?null:c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:M}),c.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh",maxWidth:"1000px"},onClick:X=>X.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(cr,{className:"w-6 h-6 text-green-600"}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"/"})]}),c.jsx("button",{onClick:M,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(ut,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"flex-1 px-6 py-4 overflow-y-auto",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),c.jsx("div",{className:"grid grid-cols-2 gap-3",children:mf.map(X=>c.jsxs("label",{className:`flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${d===X.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[c.jsx("input",{type:"radio",name:"containerType",value:X.value,checked:d===X.value,onChange:ee=>f(ee.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 hidden"}),c.jsxs("div",{className:"flex items-center space-x-3",children:[X.icon,c.jsx("span",{className:"font-medium text-gray-900",children:X.label})]})]},X.value))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:""}),c.jsx("input",{type:"number",min:"1",value:h,onChange:X=>p(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:""}),c.jsx("input",{type:"number",min:"1",value:v,onChange:X=>y(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"IP "}),c.jsx("input",{type:"text",value:w,onChange:X=>g(X.target.value),placeholder:" IP ",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]}),P(),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:" (Row):"}),c.jsx("input",{type:"number",min:"0",value:C,onChange:X=>A(parseInt(X.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:" (Column):"}),c.jsx("input",{type:"number",min:"0",value:S,onChange:X=>D(parseInt(X.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]})]}),x&&c.jsx("div",{className:`text-sm p-2 rounded ${F?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:F?`${x.row},${x.col}`:` ${x.row},${x.col} `})]}),c.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:""}),c.jsxs("div",{className:"text-sm text-gray-600",children:[c.jsxs("div",{children:["",(r==null?void 0:r.name)||""]}),c.jsxs("div",{children:["",(r==null?void 0:r.type)||""]}),c.jsxs("div",{children:["",((te=r==null?void 0:r.contents)==null?void 0:te.length)||0]})]})]})]})}),c.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 border-t border-gray-200",children:[c.jsx("button",{onClick:M,disabled:R,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u("button.cancel")}),c.jsxs("button",{onClick:T,disabled:!F||R,className:"px-6 py-2 text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[R&&c.jsx(hr,{className:"w-4 h-4 animate-spin"}),c.jsx("span",{children:R?"...":""})]})]})]})]})},N2=()=>{var se;const{addSubContainerModalOpen:t,closeAddSubContainerModal:e,selectedParentContainerForAdd:r,selectedDepartmentType:n,setApiDepartmentData:o,setIsLoadingMedMap:a,showNotification:i,triggerRefresh:s,setSidebarOpen:l}=vt(),{t:u}=nr(),[d,f]=_.useState(null),[h,p]=_.useState(0),[v,y]=_.useState(0),[w,g]=_.useState(!1);_.useEffect(()=>{t&&(f(null),p(0),y(0),g(!1))},[t]),_.useEffect(()=>{d&&(p(d.row),y(d.col))},[d]);const x=()=>{const A=new Set;return r!=null&&r.contents&&r.contents.forEach(D=>{D.type==="sub_container"&&D.gird_position&&A.add(D.gird_position)}),A},m=()=>{const A=x(),D=[];if(A.size===0)return D.push({row:0,col:0}),D;const F=[];A.forEach(O=>{const[M,P]=O.split(",").map(Number);F.push({row:M,col:P})});const T=new Set;return F.forEach(({row:O,col:M})=>{T.add(`${O},${M+1}`),T.add(`${O+1},${M}`),M>0&&T.add(`${O},${M-1}`),O>0&&T.add(`${O-1},${M}`)}),T.forEach(O=>{if(!A.has(O)){const[M,P]=O.split(",").map(Number);M>=0&&P>=0&&D.push({row:M,col:P})}}),A.has("0,1")||D.some(M=>M.row===0&&M.col===1)||D.push({row:0,col:1}),A.has("1,0")||D.some(M=>M.row===1&&M.col===0)||D.push({row:1,col:0}),D.sort((O,M)=>O.row===M.row?O.col-M.col:O.row-M.row)},C=A=>{f(A)},N=A=>{p(A),f({row:A,col:v})},S=A=>{y(A),f({row:h,col:A})},I=d&&!x().has(`${d.row},${d.col}`)&&d.row>=0&&d.col>=0,R=async()=>{if(!(!d||!r||!I)){g(!0);try{const A=`${d.row},${d.col}`,D=await Me.addSubSection(r.GUID,A);D.Code===200?(i("","success"),e(),l(!1),await z()):i(`${D.Result||""}`,"error")}catch(A){console.error("Add sub container failed:",A),i("","error")}finally{g(!1)}}},z=async()=>{if(!n){console.warn(" ");return}console.log(" :",n),a(!0);try{const A=await Me.getMedMapByDepartment(n);if(A.Code===200&&A.Data){console.log(" API ");const D=Wt.convertMedMapApiToFakeData(A.Data);if(!Wt.validateConvertedData(D)){console.error(" "),i("","error");return}o(D),console.log(" ")}else console.error(" API :",A),i("API ","error")}catch(A){console.error(" :",A),i("","error")}finally{a(!1)}},k=()=>{e()},oe=()=>{const A=x(),D=m(),F=[...A].map(ee=>{const[Ne,me]=ee.split(",").map(Number);return{row:Ne,col:me}}).concat(D);F.length===0&&F.push({row:0,col:0});const T=Math.max(...F.map(ee=>ee.row)),O=Math.max(...F.map(ee=>ee.col)),M=Math.min(...F.map(ee=>ee.row)),P=Math.min(...F.map(ee=>ee.col)),te=T-M+1,X=O-P+1;return c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),c.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:c.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${X}, 1fr)`},children:Array.from({length:te*X},(ee,Ne)=>{const me=Math.floor(Ne/X)+M,H=Ne%X+P,Ce=`${me},${H}`,Y=A.has(Ce),be=D.some(B=>B.row===me&&B.col===H),ye=(d==null?void 0:d.row)===me&&(d==null?void 0:d.col)===H;return c.jsx("button",{onClick:()=>be&&C({row:me,col:H}),disabled:Y||!be,className:`
                    w-16 h-16 border-2 rounded-lg transition-all duration-200 flex items-center justify-center text-sm font-medium
                    ${Y?"bg-red-100 border-red-300 text-red-600 cursor-not-allowed":ye?"bg-blue-500 border-blue-600 text-white shadow-lg":be?"bg-green-100 border-green-300 text-green-700 hover:bg-green-200 hover:border-green-400 cursor-pointer":"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed"}
                  `,title:Y?"":be?"":"",children:Y?"":`${me},${H}`},Ce)})})})]})};return!t||!r?null:c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:k}),c.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh",maxWidth:"800px"},onClick:A=>A.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(cr,{className:"w-6 h-6 text-green-600"}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:""})]}),c.jsx("button",{onClick:k,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(ut,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"flex-1 px-6 py-4 overflow-y-auto",children:c.jsxs("div",{className:"space-y-6",children:[oe(),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:" (Row):"}),c.jsx("input",{type:"number",min:"0",value:h,onChange:A=>N(parseInt(A.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:" (Column):"}),c.jsx("input",{type:"number",min:"0",value:v,onChange:A=>S(parseInt(A.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]})]}),d&&c.jsx("div",{className:`text-sm p-2 rounded ${I?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:I?`${d.row},${d.col}`:` ${d.row},${d.col} `})]}),c.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:""}),c.jsxs("div",{className:"text-sm text-gray-600",children:[c.jsxs("div",{children:["",(r==null?void 0:r.name)||""]}),c.jsxs("div",{children:["",(r==null?void 0:r.type)||""]}),c.jsxs("div",{children:["",((se=r==null?void 0:r.contents)==null?void 0:se.filter(A=>A.type==="sub_container").length)||0]})]})]})]})}),c.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 border-t border-gray-200",children:[c.jsx("button",{onClick:k,disabled:w,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u("button.cancel")}),c.jsxs("button",{onClick:R,disabled:!I||w,className:"px-6 py-2 text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[w&&c.jsx(hr,{className:"w-4 h-4 animate-spin"}),c.jsx("span",{children:w?"...":""})]})]})]})]})},E2=({isOpen:t,onClose:e,storeShelf:r})=>{const{showNotification:n,medicineList:o,isLoadingMedicines:a,addStockToShelf:i,selectedStockItemForEdit:s,storeItemModalMode:l,updateStockInShelf:u}=vt(),[d,f]=_.useState(""),[h,p]=_.useState(""),[v,y]=_.useState(""),[w,g]=_.useState(""),[x,m]=_.useState([]),[C,N]=_.useState([]),[S,I]=_.useState(""),[R,z]=_.useState(""),[k,oe]=_.useState(""),[se,A]=_.useState(null),[D,F]=_.useState([]),[T,O]=_.useState(""),[M,P]=_.useState(!1),te=_.useRef(null);_.useEffect(()=>{if(t&&l==="edit"&&s){f(s.code||""),p(s.name||""),y(""),g(s.material_no||"");const B=s.lot||[],xe=s.expiry_date||[],W=s.qty||[],j=[];if(B.length>0||xe.length>0||W.length>0){const ce=Math.max(B.length,xe.length,W.length),de=[];for(let V=0;V<ce;V++){const re=xe[V]||"";let he="";re&&(he=re.split("T")[0]),he=he.replace(/\//g,"-"),de.push({id:`batch_${Date.now()}_${V}`,lot:B[V]||"",expiryDate:he,qty:String(W[V]||"")}),he&&j.push(he)}m(de),N(j)}else m([]),N([]);I(s.location||""),z(s.led_index||""),oe(s.ip||"")}else if(t&&l==="add")if(f(""),p(""),y(""),g(""),m([]),N([]),z(""),oe(""),r&&r.medMapStock&&r.medMapStock.length>0){const B=r.medMapStock.map(W=>Number(W.location));let xe=0;for(;B.includes(xe);)xe++;I(String(xe))}else I("0")},[t,l,s,r]),_.useEffect(()=>{const B=xe=>{te.current&&!te.current.contains(xe.target)&&A(null)};return document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[]);const X=(B,xe)=>{if(!xe.trim()){F([]);return}const W=xe.toLowerCase(),j=o.filter(ce=>{var de,V,re,he;switch(B){case"code":return(de=ce.CODE)==null?void 0:de.toLowerCase().includes(W);case"name":return(V=ce.NAME)==null?void 0:V.toLowerCase().includes(W);case"chineseName":return(re=ce.CHT_NAME)==null?void 0:re.toLowerCase().includes(W);case"skdiacode":return(he=ce.SKDIACODE)==null?void 0:he.toLowerCase().includes(W);default:return!1}});F(j.slice(0,50))},ee=(B,xe)=>{switch(A(B),B){case"code":f(xe);break;case"name":p(xe);break;case"chineseName":y(xe);break;case"skdiacode":g(xe);break}X(B,xe)},Ne=(B,xe)=>{switch(xe){case"code":f(B.CODE||""),p(B.NAME||""),y(B.CHT_NAME||""),g(B.SKDIACODE||"");break;case"name":f(B.CODE||""),p(B.NAME||""),y(B.CHT_NAME||""),g(B.SKDIACODE||"");break;case"chineseName":f(B.CODE||""),p(B.NAME||""),y(B.CHT_NAME||""),g(B.SKDIACODE||"");break;case"skdiacode":f(B.CODE||""),p(B.NAME||""),y(B.CHT_NAME||""),g(B.SKDIACODE||"");break}O(B.GUID),A(null),F([])},me=()=>{const B={id:`batch_${Date.now()}`,lot:"",expiryDate:"",qty:""};m([...x,B])},H=B=>{m(x.filter(xe=>xe.id!==B))},Ce=(B,xe,W)=>{m(x.map(j=>j.id===B?{...j,[xe]:W}:j))},Y=async()=>{var j;if(!d||!h){n("","error");return}if(!r||!r.GUID){n("","error");return}const B=[],xe=[],W=[];x.forEach(ce=>{B.push(ce.lot||"");let de="";ce.expiryDate&&(de=`${ce.expiryDate}`),xe.push(de),W.push(ce.qty?`${Number(ce.qty)}`:"0")});try{if(l==="edit"&&s){const ce={GUID:s.GUID,code:d,device_type:"EPD290",expiry_date:xe,ip_light:k||"",led_index:R||"",location:S||"",lot:B,material_no:w||"",name:h,qty:W,shelf_guid:r.GUID},de=await Me.updateStock([ce]);if(de.Code===200){u(r.GUID,s.GUID,ce),console.log("");const V=C.filter(re=>!xe.includes(re));if(console.log(V),V.length>0){console.log(" :",V);let re="";try{s.Value&&(re=JSON.parse(s.Value).GUID||"",console.log("  Value  GUID:",re))}catch(he){console.error("  Value :",he)}if(re){for(const he of V)try{console.log(` GUID: ${re}, : ${he}`);const U=await Me.stockDeleteValidityPeriod(re,he);U.Code===200?console.log(` : ${he}`):console.warn(`  (: ${he}):`,U.Result)}catch(U){console.error(`  (: ${he}):`,U)}n(` ${V.length} `,"success")}else console.warn("  Value GUID"),n("","success")}else n("","success");ye()}else n(de.Result||"","error")}else{const ce={code:d,device_type:"EPD290",expiry_date:xe,ip_light:k||"",led_index:R||"",location:S||"",lot:B,material_no:w||"",name:h,qty:W,shelf_guid:r.GUID},de=await Me.addStock([ce]);de.Code===200?(i(r.GUID,{GUID:((j=de.Data)==null?void 0:j.GUID)||`stock_${Date.now()}`,...ce}),n("","success"),ye()):n(de.Result||"","error")}}catch(ce){console.error(":",ce),n(l==="edit"?"":"","error")}},be=(B,xe)=>{console.log(" :",xe),f(xe[0].CODE||xe[0].code||""),p(xe[0].NAME||xe[0].name||""),y(xe[0].CHT_NAME||xe[0].cht_name||""),g(xe[0].SKDIACODE||xe[0].skdiacode||xe[0].material_no||""),O(xe[0].GUID||""),P(!1),n("","success")},ye=()=>{f(""),p(""),y(""),g(""),m([]),N([]),I(""),z(""),oe(""),O(""),F([]),A(null),e()};return t?c.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between z-10",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l==="edit"?"":""}),c.jsx("button",{onClick:ye,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(ut,{className:"w-5 h-5"})})]}),c.jsx("div",{className:"p-6 space-y-6",children:a?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-blue-500 border-t-transparent"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"..."})]}):o.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-gray-600",children:""}),c.jsx("p",{className:"text-sm text-gray-500 mt-2",children:""})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex w-full border-b items-center pb-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-700 mr-6",children:""}),c.jsx("button",{onClick:()=>P(!0),className:"hover:bg-gray-100 rounded-lg transition-colors p-2",title:"",children:c.jsx(Vo,{className:"w-7 h-7 text-blue-600"})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"relative",ref:se==="code"?te:null,children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsx("input",{type:"text",value:d,onChange:B=>ee("code",B.target.value),onFocus:()=>A("code"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""}),se==="code"&&D.length>0&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:D.map(B=>c.jsxs("div",{onClick:()=>Ne(B,"code"),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer border-b last:border-b-0",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"font-medium text-gray-900",children:B.CODE}),c.jsx("span",{className:"text-gray-600",children:"|"}),c.jsx("span",{className:"text-gray-700",children:B.NAME})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs mt-1",children:[c.jsx("span",{className:"text-gray-600",children:B.CHT_NAME}),c.jsx("span",{className:"text-gray-400",children:"|"}),c.jsxs("span",{className:"text-gray-500",children:[": ",B.SKDIACODE]})]})]},B.GUID))})]}),c.jsxs("div",{className:"relative",ref:se==="name"?te:null,children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsx("input",{type:"text",value:h,onChange:B=>ee("name",B.target.value),onFocus:()=>A("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""}),se==="name"&&D.length>0&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:D.map(B=>c.jsxs("div",{onClick:()=>Ne(B,"name"),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer border-b last:border-b-0",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"font-medium text-gray-900",children:B.CODE}),c.jsx("span",{className:"text-gray-600",children:"|"}),c.jsx("span",{className:"text-gray-700",children:B.NAME})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs mt-1",children:[c.jsx("span",{className:"text-gray-600",children:B.CHT_NAME}),c.jsx("span",{className:"text-gray-400",children:"|"}),c.jsxs("span",{className:"text-gray-500",children:[": ",B.SKDIACODE]})]})]},B.GUID))})]}),c.jsxs("div",{className:"relative",ref:se==="chineseName"?te:null,children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsx("input",{type:"text",value:v,onChange:B=>ee("chineseName",B.target.value),onFocus:()=>A("chineseName"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""}),se==="chineseName"&&D.length>0&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:D.map(B=>c.jsxs("div",{onClick:()=>Ne(B,"chineseName"),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer border-b last:border-b-0",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"font-medium text-gray-900",children:B.CODE}),c.jsx("span",{className:"text-gray-600",children:"|"}),c.jsx("span",{className:"text-gray-700",children:B.NAME})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs mt-1",children:[c.jsx("span",{className:"text-gray-600",children:B.CHT_NAME}),c.jsx("span",{className:"text-gray-400",children:"|"}),c.jsxs("span",{className:"text-gray-500",children:[": ",B.SKDIACODE]})]})]},B.GUID))})]}),c.jsxs("div",{className:"relative",ref:se==="skdiacode"?te:null,children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsx("input",{type:"text",value:w,onChange:B=>ee("skdiacode",B.target.value),onFocus:()=>A("skdiacode"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""}),se==="skdiacode"&&D.length>0&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:D.map(B=>c.jsxs("div",{onClick:()=>Ne(B,"skdiacode"),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer border-b last:border-b-0",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"font-medium text-gray-900",children:B.CODE}),c.jsx("span",{className:"text-gray-600",children:"|"}),c.jsx("span",{className:"text-gray-700",children:B.NAME})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs mt-1",children:[c.jsx("span",{className:"text-gray-600",children:B.CHT_NAME}),c.jsx("span",{className:"text-gray-400",children:"|"}),c.jsxs("span",{className:"text-gray-500",children:[": ",B.SKDIACODE]})]})]},B.GUID))})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:""}),c.jsxs("button",{onClick:me,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"",children:[c.jsx(cr,{className:"w-4 h-4"}),""]})]}),x.length===0?c.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[c.jsx("p",{className:"text-gray-500",children:""}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:""})]}):c.jsx("div",{className:"space-y-3",children:x.map((B,xe)=>c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[" ",xe+1]}),c.jsx("button",{onClick:()=>H(B.id),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"",children:c.jsx(Do,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),c.jsx("input",{type:"text",value:B.lot,onChange:W=>Ce(B.id,"lot",W.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),c.jsx("input",{type:"date",value:B.expiryDate,onChange:W=>Ce(B.id,"expiryDate",W.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:""}),c.jsx("input",{type:"number",value:B.qty,onChange:W=>Ce(B.id,"qty",W.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"",min:"0"})]})]})]},B.id))})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:""}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),c.jsx("input",{type:"text",value:S,onChange:B=>I(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LED "}),c.jsx("input",{type:"text",value:R,onChange:B=>z(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:" LED "})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" IP"}),c.jsx("input",{type:"text",value:k,onChange:B=>oe(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:" IP"})]})]})]})]})}),c.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t flex justify-end space-x-3",children:[c.jsx("button",{onClick:ye,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors",children:""}),c.jsx("button",{onClick:Y,disabled:a||o.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400",children:l==="edit"?"":""})]})]}),c.jsx(Ds,{isOpen:M,onClose:()=>P(!1),onScanSuccess:be,mode:"set_store_med_mode"})]}):null},A2=({isOpen:t,onClose:e})=>{const{selectedDepartmentType:r,apiDepartmentData:n,allDepartmentsList:o,showNotification:a,triggerRefresh:i,reloadMedMapData:s}=vt(),[l,u]=_.useState(null),[d,f]=_.useState(""),[h,p]=_.useState(!1),v=()=>n?n.map(I=>I.name):[],y=()=>!r||!o?[]:o.filter(I=>I["department_type "]===r),w=()=>{const I=v();return y().filter(z=>!I.includes(z.name))},g=()=>n?n.map(I=>I.gird_position):[],x=()=>{const I=g(),R=[];for(let z=0;z<10;z++)for(let k=0;k<10;k++){const oe=`${z},${k}`;I.includes(oe)||R.push(oe)}return R.slice(0,20)};_.useEffect(()=>{t&&(u(null),f(""))},[t]);const m=async()=>{if(!l){a("","error");return}if(!d){a("","error");return}if(!r){a("","error");return}p(!0);try{const I=await Me.addMedMap(l.name,l.type,d);I.Code===200?(a("","success"),await s(),C()):a(I.Result||"","error")}catch(I){console.error(":",I),a("","error")}finally{p(!1)}},C=()=>{u(null),f(""),e()};if(!t)return null;const N=w(),S=x();return c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:""}),c.jsx("button",{onClick:C,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(ut,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[r&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm font-medium text-blue-900",children:["",c.jsx("span",{className:"font-bold",children:r})]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:""}),N.length===0?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-600",children:""})}):c.jsx("div",{className:"space-y-2",children:N.map(I=>c.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all ${(l==null?void 0:l.name)===I.name?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:[c.jsx("input",{type:"radio",name:"department",value:I.name,checked:(l==null?void 0:l.name)===I.name,onChange:()=>u(I),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),c.jsxs("div",{className:"ml-3",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.name}),c.jsx("div",{className:"text-xs text-gray-500",children:I.type})]})]},I.name))})]}),l&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:""}),S.length===0?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-600",children:""})}):c.jsx("div",{className:"grid grid-cols-5 gap-2",children:S.map(I=>{const[R,z]=I.split(",");return c.jsxs("button",{onClick:()=>f(I),className:`p-3 border-2 rounded-lg text-sm font-medium transition-all ${d===I?"border-blue-500 bg-blue-500 text-white":"border-gray-200 hover:border-blue-300 hover:bg-blue-50 text-gray-700"}`,children:["(",R,",",z,")"]},I)})})]})]}),c.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t flex justify-end space-x-3",children:[c.jsx("button",{onClick:C,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors",disabled:h,children:""}),c.jsx("button",{onClick:m,disabled:!l||!d||h,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:h?"...":""})]})]})})},I2=({isOpen:t,onClose:e,initialBarcode:r=""})=>{const{showNotification:n,medicineList:o,isLoadingMedicines:a}=vt(),[i,s]=_.useState(""),[l,u]=_.useState(""),[d,f]=_.useState(""),[h,p]=_.useState(""),[v,y]=_.useState(""),[w,g]=_.useState(null),[x,m]=_.useState([]),[C,N]=_.useState(""),[S,I]=_.useState(null),[R,z]=_.useState(!1),k=_.useRef(null);_.useEffect(()=>{t&&(s(r),u(""),f(""),p(""),y(""),N(""),I(null),g(null))},[t,r]),_.useEffect(()=>{const T=O=>{k.current&&!k.current.contains(O.target)&&g(null)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]);const oe=(T,O)=>{if(!O.trim()||a){m([]);return}const M=O.toLowerCase(),P=o.filter(te=>{var X,ee,Ne,me;switch(T){case"code":return(X=te.CODE)==null?void 0:X.toLowerCase().includes(M);case"name":return(ee=te.NAME)==null?void 0:ee.toLowerCase().includes(M);case"chineseName":return(Ne=te.CHT_NAME)==null?void 0:Ne.toLowerCase().includes(M);case"skdiacode":return(me=te.SKDIACODE)==null?void 0:me.toLowerCase().includes(M);default:return!1}});m(P.slice(0,10))},se=(T,O)=>{switch(g(T),T){case"code":u(O);break;case"name":f(O);break;case"chineseName":p(O);break;case"skdiacode":y(O);break}oe(T,O)},A=T=>{N(T.GUID),I(T),u(T.CODE||""),f(T.NAME||""),p(T.CHT_NAME||""),y(T.SKDIACODE||""),g(null),m([])},D=()=>{s(""),u(""),f(""),p(""),y(""),N(""),I(null),g(null),m([]),e()},F=async()=>{if(!l.trim()){n("","error");return}if(!i.trim()){n("","error");return}z(!0);try{let T=[];if(S&&S.BARCODE2)try{const M=JSON.parse(S.BARCODE2);Array.isArray(M)?T=[...M]:typeof M=="string"&&(T=[M])}catch{console.warn(" BARCODE2 :",S.BARCODE2),S.BARCODE2&&(T=[S.BARCODE2])}T.includes(i.trim())||T.push(i.trim()),console.log("  BARCODE2 :",T);const O=await Me.addMedClouds(i.trim(),l.trim(),JSON.stringify(T),S.BARCODE);O.Code===200?(n("","success"),D()):n(O.Result||"","error")}catch(T){console.error(":",T),n("","error")}finally{z(!1)}};return t?c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-2 border-b",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:c.jsx(cr,{className:"w-6 h-6 text-blue-500"})}),c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:""})]}),c.jsx("button",{onClick:D,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",disabled:R,children:c.jsx(ut,{className:"w-6 h-6 text-gray-600"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c.jsxs("div",{className:"space-y-4",ref:k,children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),c.jsx("input",{type:"text",value:i,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-600 cursor-not-allowed"})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",value:l,onChange:T=>se("code",T.target.value),onFocus:()=>g("code"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"...",disabled:R}),w==="code"&&x.length>0&&c.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:x.map(T=>c.jsxs("div",{onClick:()=>A(T),className:"px-4 py-2 hover:bg-green-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[c.jsx("div",{className:"font-medium text-gray-800",children:T.CODE}),c.jsx("div",{className:"text-sm text-gray-600",children:T.NAME})]},T.GUID))})]}),c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),c.jsx("input",{type:"text",value:d,onChange:T=>se("name",T.target.value),onFocus:()=>g("name"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"...",disabled:R}),w==="name"&&x.length>0&&c.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:x.map(T=>c.jsxs("div",{onClick:()=>A(T),className:"px-4 py-2 hover:bg-green-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[c.jsx("div",{className:"font-medium text-gray-800",children:T.NAME}),c.jsx("div",{className:"text-sm text-gray-600",children:T.CODE})]},T.GUID))})]}),c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),c.jsx("input",{type:"text",value:h,onChange:T=>se("chineseName",T.target.value),onFocus:()=>g("chineseName"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"...",disabled:R}),w==="chineseName"&&x.length>0&&c.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:x.map(T=>c.jsxs("div",{onClick:()=>A(T),className:"px-4 py-2 hover:bg-green-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[c.jsx("div",{className:"font-medium text-gray-800",children:T.CHT_NAME}),c.jsx("div",{className:"text-sm text-gray-600",children:T.CODE})]},T.GUID))})]}),c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),c.jsx("input",{type:"text",value:v,onChange:T=>se("skdiacode",T.target.value),onFocus:()=>g("skdiacode"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"...",disabled:R}),w==="skdiacode"&&x.length>0&&c.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:x.map(T=>c.jsxs("div",{onClick:()=>A(T),className:"px-4 py-2 hover:bg-green-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[c.jsx("div",{className:"font-medium text-gray-800",children:T.SKDIACODE}),c.jsx("div",{className:"text-sm text-gray-600",children:T.NAME})]},T.GUID))})]}),a&&c.jsx("div",{className:"text-center py-2 text-gray-500 text-sm",children:"..."})]})}),c.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{onClick:D,disabled:R,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:""}),c.jsx("button",{onClick:F,disabled:R||!l.trim(),className:"px-6 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:R?"...":""})]})})]})}):null},D2=({container:t,highlightedMedicineCode:e,pendingRequisitionCodes:r=[],onMedicineClick:n})=>{const o=()=>{try{const f=localStorage.getItem("medMap_setting");if(f)return JSON.parse(f).light_color||"red"}catch(f){console.error(":",f)}return"red"},a=f=>{const[h,p]=f.split(",").map(Number);return{row:h||0,col:p||0}},i=f=>{if(!f||f.length===0)return{sortedContents:[],maxRow:0,maxCol:0};const h=f.map(w=>({...w,gridPos:a(w.gird_position||"0,0")})),p=Math.max(...h.map(w=>w.gridPos.row),0),v=Math.max(...h.map(w=>w.gridPos.col),0);return{sortedContents:h.sort((w,g)=>w.gridPos.row!==g.gridPos.row?w.gridPos.row-g.gridPos.row:w.gridPos.col-g.gridPos.col),maxRow:p,maxCol:v}},s=f=>{switch(f){case"parent_container":return"border-gray-300";case"sub_container":return"border-gray-300";case"dispensing_shelves":case"store_shelves":return"border-gray-300";case"med_box":return"border-gray-300";case"grid_draw":case"list_draw":return"border-gray-300";default:return"border-gray-300"}},l=f=>{const h=["med_box","dispensing_shelves","store_shelves","grid_draw","list_draw"].includes(f.type);return c.jsx("div",{className:`${h?"shadow-sm border-2 p-1 rounded-lg":""} ${s(f.type)} flex flex-col max-w-full min-w-0 h-full overflow-hidden`,children:c.jsx("div",{className:"flex-1 min-w-0 overflow-hidden",children:d(f)})},f.GUID)},u=(f,h,p)=>{const v={};return f.forEach(y=>{const w=a(y.gird_position||"0,0");v[`${w.row},${w.col}`]=y}),c.jsx("table",{className:"w-full h-full max-w-full table-fixed",style:{borderCollapse:"separate",borderSpacing:"0px"},children:c.jsx("tbody",{children:Array.from({length:h+1},(y,w)=>c.jsx("tr",{children:Array.from({length:p+1},(g,x)=>{const m=`${w},${x}`,C=v[m];return C?c.jsx("td",{className:"align-top bg-transparent overflow-hidden",style:{width:`${100/(p+1)}%`,maxWidth:`${100/(p+1)}%`},children:l(C)},x):c.jsx("td",{className:"align-top bg-transparent overflow-hidden",style:{width:`${100/(p+1)}%`,maxWidth:`${100/(p+1)}%`},children:c.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-300 text-xs border border-dashed border-gray-200 rounded overflow-hidden",children:""})},x)})},w))})})},d=f=>{switch(f.type){case"parent_container":if(f.contents&&f.contents.length>0){const{sortedContents:h,maxRow:p,maxCol:v}=i(f.contents);return u(h,p,v)}else return c.jsx("div",{className:""});case"sub_container":if(f.contents&&f.contents.length>0){const{sortedContents:h,maxRow:p,maxCol:v}=i(f.contents);return u(h,p,v)}else return c.jsx("div",{className:""});case"dispensing_shelves":if(f.contents&&f.contents.length>0){const{sortedContents:h,maxRow:p,maxCol:v}=i(f.contents);return u(h,p,v)}else return c.jsx("div",{className:"border-2 rounded-lg flex py-3 items-center justify-center h-full text-gray-400 text-sm",children:""});case"store_shelves":if(f.medMapStock&&f.medMapStock.length>0){const h=f.medMapStock,p=h.length,v=p>0?100/p:100;return c.jsx("div",{className:"flex h-full w-full overflow-hidden",children:h.map((y,w)=>{let g=0;y.qty.forEach(N=>{g+=+N});const x=e&&(y.code==e||y.material_no==e),m=r.includes(y.code)||r.includes(y.material_no),C=o();return c.jsxs("div",{className:`border-2 rounded-lg border-gray-300 p-2 flex flex-col text-gray-800 justify-center items-center transition-colors cursor-pointer min-w-0 overflow-hidden ${m?"highlight-breathe-red":x?`highlight-breathe-${C}`:""}`,style:{width:`${v}%`,maxWidth:`${v}%`,flexShrink:0},onClick:()=>n&&n({code:y.code||y.material_no,name:y.name}),children:[c.jsx("div",{className:"text-sm font-semibold truncate w-full text-center whitespace-normal overflow-hidden",children:y.name||y.material_no}),c.jsxs("div",{className:"text-xs mt-1",children:[": ",g||0]})]},y.GUID||w)})})}else if(f.contents&&f.contents.length>0){const{sortedContents:h,maxRow:p,maxCol:v}=i(f.contents);return u(h,p,v)}else return c.jsx("div",{className:"border-2 flex py-3 items-center justify-center h-full text-gray-400 text-sm",children:""});case"grid_draw":return c.jsxs("div",{className:"border-2 bg-violet-100 h-16 flex rounded-lg border-2 border-violet-400 max-w-[120px] w-full items-center justify-center mx-auto overflow-hidden",children:[c.jsx("div",{className:"h-[50%] bg-violet-400 w-[3%] rounded flex-shrink-0"}),c.jsx("div",{className:"h-[70%] border-2 border-violet-400 w-[82%] mx-1 flex items-center justify-center overflow-hidden",children:c.jsx("span",{className:"text-xs text-violet-600 truncate",children:""})}),c.jsx("div",{className:"h-[50%] bg-violet-400 w-[3%] flex-shrink-0"})]});case"list_draw":return c.jsxs("div",{className:"border-2 bg-violet-100 h-16 flex rounded-lg border-2 border-violet-400 max-w-[120px] w-full items-center justify-center mx-auto overflow-hidden",children:[c.jsx("div",{className:"h-[50%] bg-violet-400 w-[3%] rounded flex-shrink-0"}),c.jsx("div",{className:"h-[70%] border-2 border-violet-400 w-[82%] mx-1 flex items-center justify-center overflow-hidden",children:c.jsx("span",{className:"text-xs text-violet-600 truncate",children:""})}),c.jsx("div",{className:"h-[50%] bg-violet-400 w-[3%] flex-shrink-0"})]});case"med_box":if(f.med_info&&f.med_info.length>0){const h=e&&f.med_info.some(y=>y.code==e),p=f.med_info.some(y=>r.includes(y.code)),v=o();return c.jsx("div",{className:`text-sm text-center h-full p-2 flex flex-col text-gray-800 justify-center transition-colors cursor-pointer overflow-hidden ${p?"highlight-breathe-red":h?`highlight-breathe-${v}`:""}`,onClick:()=>n&&n(f.med_info[0]),children:c.jsx("div",{className:"font-semibold truncate w-full overflow-hidden",children:f.med_info[0].name||"-"})})}else return c.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 text-xs",children:""});default:if(f.contents&&f.contents.length>0){const{sortedContents:h,maxRow:p,maxCol:v}=i(f.contents);return u(h,p,v)}else return c.jsxs("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:[": ",f.type]})}};return t?c.jsx("div",{className:"w-full h-full overflow-auto",children:c.jsx("div",{className:"max-w-full h-full",children:d(t)})}):c.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:c.jsx("p",{children:""})})},T2=({isOpen:t,onClose:e,type:r,data:n,onApprove:o})=>{const[a,i]=_.useState("0"),[s,l]=_.useState("0"),[u,d]=_.useState(null),[f,h]=_.useState(null),[p,v]=_.useState(!1),[y,w]=_.useState(!1),[g,x]=_.useState(""),[m,C]=_.useState(""),[N,S]=_.useState([]),[I,R]=_.useState([]),[z,k]=_.useState([]),[oe,se]=_.useState(!1),[A,D]=_.useState(!1),F=_.useRef(null),T=_.useRef(null),O=_.useRef(null),M=_.useRef(null);_.useEffect(()=>{if(t&&n){const j=n.issuedQuantity||n.requestedQuantity||"0";i(j),l(j),d(null),h(null),v(!1);const ce=localStorage.getItem("medMap_setting");if(ce)try{const de=JSON.parse(ce);x(de.default_person||""),C(de.default_person_id||"")}catch(de){console.error(":",de),x(""),C("")}else x(""),C("");P()}},[t,n]),_.useEffect(()=>{const j=ce=>{O.current&&!O.current.contains(ce.target)&&F.current&&!F.current.contains(ce.target)&&se(!1),M.current&&!M.current.contains(ce.target)&&T.current&&!T.current.contains(ce.target)&&D(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const P=async()=>{try{const j=await Me.getAllStaffInfo();j.Code===200&&j.Data&&S(j.Data)}catch(j){console.error(":",j)}},te=j=>{if(x(j),j.trim()===""){R([]),se(!1);return}const ce=N.filter(de=>de.name&&de.name.toLowerCase().includes(j.toLowerCase()));R(ce),se(ce.length>0)},X=j=>{if(C(j),j.trim()===""){k([]),D(!1);return}const ce=N.filter(de=>de.ID&&de.ID.toLowerCase().includes(j.toLowerCase()));k(ce),D(ce.length>0)},ee=j=>{x(j.name),C(j.ID),se(!1)},Ne=j=>{x(j.name),C(j.ID),D(!1)};if(!t||!n)return null;const me=j=>{if(p)i(j),l(j),v(!1);else{const ce=a==="0"?j:a+j;i(ce),l(ce)}},H=j=>{u&&f!==null&&!p&&Ce(),h(s),d(j),v(!0)},Ce=()=>{if(u===null||f===null)return;const j=parseFloat(f),ce=parseFloat(s);let de=0;switch(u){case"+":de=j+ce;break;case"-":de=j-ce;break;case"":de=j*ce;break;case"":de=ce!==0?j/ce:0;break;default:return}const V=de.toString();i(V),l(V),d(null),h(null),v(!0)},Y=()=>{Ce()},be=()=>{if(p)i("0."),l("0."),v(!1);else if(!a.includes(".")){const j=a+".";i(j),l(j)}},ye=()=>{i("0"),l("0"),d(null),h(null),v(!1)},B=()=>{const j=new Date,ce=j.getFullYear(),de=String(j.getMonth()+1).padStart(2,"0"),V=String(j.getDate()).padStart(2,"0"),re=String(j.getHours()).padStart(2,"0"),he=String(j.getMinutes()).padStart(2,"0"),U=String(j.getSeconds()).padStart(2,"0");return`${ce}-${de}-${V}T${re}:${he}:${U}`},xe=async()=>{if(!n)return;if(!g.trim()){alert("");return}const j=r==="requisition"?"":"";if(window.confirm(`

${n.name}
${a}
${g}${m?` (${m})`:""}

${j}`)){w(!0);try{const de=B();if(r==="requisition"){const V=await Me.updateRequisitionActualQuantity(n.GUID,a);if(V.Code!==200){alert(`${V.Message||""}`),w(!1);return}const re={...n,actualQuantity:a,notice:"False",state:"",issuingPerson:g,issueTime:de};console.log("request",re);const he=await Me.updateRequisitionByGuid(re);if(he.Code!==200){alert(`${he.Message||""}`),w(!1);return}console.log(" :",{GUID:n.GUID,name:n.name,actualQuantity:a,issuingPerson:g,issueTime:de})}else{const V=await Me.updateDistributionActualQuantity(n.GUID,a);if(V.Code!==200){alert(`${V.Message||""}`),w(!1);return}const re={...n,actualQuantity:a,notice:"False",state:"",issuer:g,issuanceTime:de};console.log("request",re);const he=await Me.updateDistributionByGuid(re);if(he.Code!==200){alert(`${he.Message||""}`),w(!1);return}console.log(" :",{GUID:n.GUID,name:n.name,actualQuantity:a,issuer:g,issuanceTime:de})}o&&await o(),alert(`${j}`),e()}catch(de){console.error(`${j}:`,de),alert(`${j}`)}finally{w(!1)}}},W=r==="requisition"?n.requestedQuantity:n.issuedQuantity;return c.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),c.jsxs("div",{className:"relative w-full max-w-md bg-white shadow-2xl rounded-xl overflow-hidden flex flex-col m-4 max-h-[90vh]",children:[c.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-200",children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-800",children:[r==="requisition"?"":"",""]}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-white/50 rounded-full transition-colors",title:"",children:c.jsx(ut,{className:"w-5 h-5 text-gray-700"})})]}),c.jsx("div",{className:"overflow-y-auto flex-1",children:c.jsxs("div",{className:"p-4 space-y-2",children:[c.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 space-y-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:""}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{ref:F,type:"text",value:g,onChange:j=>te(j.target.value),onFocus:()=>{g.trim()&&te(g)},placeholder:"",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"}),oe&&c.jsx("div",{ref:O,className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-40 overflow-y-auto",children:I.map((j,ce)=>c.jsxs("div",{onClick:()=>ee(j),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer transition-colors",children:[c.jsx("div",{className:"text-xs text-gray-500",children:j.ID}),c.jsx("div",{className:"font-medium text-gray-900 text-sm",children:j.name})]},ce))})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{ref:T,type:"text",value:m,onChange:j=>X(j.target.value),onFocus:()=>{m.trim()&&X(m)},placeholder:" ID",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"}),A&&c.jsx("div",{ref:M,className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-40 overflow-y-auto",children:z.map((j,ce)=>c.jsxs("div",{onClick:()=>Ne(j),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer transition-colors",children:[c.jsx("div",{className:"font-medium text-gray-900 text-sm",children:j.ID}),c.jsx("div",{className:"text-xs text-gray-500",children:j.name})]},ce))})]})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-semibold text-gray-600",children:""}),c.jsx("div",{className:"text-base text-gray-800 mt-1",children:n.name||"-"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-semibold text-gray-600",children:""}),c.jsx("div",{className:"text-base text-gray-800 mt-1",children:n.code||"-"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-semibold text-gray-600",children:r==="requisition"?"":""}),c.jsx("div",{className:"text-base text-gray-800 mt-1",children:W||"-"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-base font-semibold text-gray-600 block mb-2",children:""}),c.jsx("input",{type:"text",value:a,disabled:!0,className:"w-full px-4 py-3 text-lg font-semibold text-gray-800 bg-gray-100 border border-gray-300 rounded-lg"})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[c.jsx("button",{onClick:()=>me("7"),className:"py-4 text-lg font-semibold bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"7"}),c.jsx("button",{onClick:()=>me("8"),className:"py-4 text-lg font-semibold bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"8"}),c.jsx("button",{onClick:()=>me("9"),className:"py-4 text-lg font-semibold bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"9"}),c.jsx("button",{onClick:()=>H(""),className:"py-4 text-lg font-semibold bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-lg transition-colors",children:""}),c.jsx("button",{onClick:()=>me("4"),className:"py-4 text-lg font-semibold bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"4"}),c.jsx("button",{onClick:()=>me("5"),className:"py-4 text-lg font-semibold bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"5"}),c.jsx("button",{onClick:()=>me("6"),className:"py-4 text-lg font-semibold bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"6"}),c.jsx("button",{onClick:()=>H(""),className:"py-4 text-lg font-semibold bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-lg transition-colors",children:""}),c.jsx("button",{onClick:()=>me("1"),className:"py-4 text-lg font-semibold bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"1"}),c.jsx("button",{onClick:()=>me("2"),className:"py-4 text-lg font-semibold bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"2"}),c.jsx("button",{onClick:()=>me("3"),className:"py-4 text-lg font-semibold bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"3"}),c.jsx("button",{onClick:()=>H("-"),className:"py-4 text-lg font-semibold bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-lg transition-colors",children:"-"}),c.jsx("button",{onClick:()=>me("0"),className:"py-4 text-lg font-semibold bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"0"}),c.jsx("button",{onClick:be,className:"py-4 text-lg font-semibold bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"."}),c.jsx("button",{onClick:Y,className:"py-4 text-lg font-semibold bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",children:"="}),c.jsx("button",{onClick:()=>H("+"),className:"py-4 text-lg font-semibold bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-lg transition-colors",children:"+"})]})]})}),c.jsxs("div",{className:"flex items-center justify-end gap-2 p-3 border-t border-gray-200 bg-gray-50",children:[c.jsx("button",{onClick:ye,className:"px-6 py-2.5 font-semibold text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors",children:""}),c.jsx("button",{onClick:e,className:"px-6 py-2.5 font-semibold text-gray-700 bg-white border border-gray-300 hover:bg-gray-100 rounded-lg transition-colors",children:""}),c.jsx("button",{onClick:xe,disabled:y,className:"px-6 py-2.5 font-semibold text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y?"...":""})]})]})]})},O2=({isOpen:t,onClose:e,medicineInfo:r,requisitions:n,distributions:o,onNoticeUpdated:a})=>{const{setHighlightedMedicineCode:i}=vt(),[s,l]=_.useState(n),[u,d]=_.useState(o),[f,h]=_.useState(null),[p,v]=_.useState(!1),[y,w]=_.useState(null),[g,x]=_.useState("requisition"),[m,C]=_.useState(!1),[N,S]=_.useState(!1);Bi.useEffect(()=>{l(n),d(o)},[n,o]),_.useEffect(()=>()=>{Aa.cleanup()},[]);const I=async()=>{var D;if(r&&!N){if(!r.serverName||!r.serverType){alert("");return}S(!0);try{const F=localStorage.getItem("medMap_setting");let T="255,0,0",O="1",M=60;if(F)try{const P=JSON.parse(F);T={blue:"255,0,0",green:"0,255,0",red:"0,0,255",yellow:"0,255,255",purple:"255,0,255",cyan:"255,255,0"}[P.light_color]||"255,0,0",O=((D=P.brightness)==null?void 0:D.toString())||"1",M=P.light_sec||60}catch(P){console.error(":",P)}if(m)await Aa.turnOffAllLights(),C(!1),i(null);else{const P=[{serverName:r.serverName,serverType:r.serverType,medicineCode:r.code}];await Aa.startLighting(P,T,O,M*1e3,()=>{C(!1),i(null)}),C(!0),i(r.code)}}catch(F){console.error(":",F)}finally{S(!1)}}},R=async D=>{const F=D.notice==="True"?"False":"True";h(D.GUID);const T=[...s],O=T.findIndex(M=>M.GUID===D.GUID);if(O===-1){h(null);return}T[O]={...D,notice:F},l(T);try{const M=await Me.updateRequisitionNotice(D.GUID,F);M.Code!==200?(T[O]={...D,notice:D.notice},l(T),console.error(":",M)):a&&a()}catch(M){T[O]={...D,notice:D.notice},l(T),console.error(":",M)}finally{h(null)}},z=async D=>{const F=D.notice==="True"?"False":"True";h(D.GUID);const T=[...u],O=T.findIndex(M=>M.GUID===D.GUID);if(O===-1){h(null);return}T[O]={...D,notice:F},d(T);try{const M=await Me.updateDistributionNotice(D.GUID,F);M.Code!==200?(T[O]={...D,notice:D.notice},d(T),console.error(":",M)):a&&a()}catch(M){T[O]={...D,notice:D.notice},d(T),console.error(":",M)}finally{h(null)}};if(!t||!r)return null;const k=s.filter(D=>D.state===""),oe=u.filter(D=>D.state===""),se=k.length===0&&oe.length===0,A=D=>{if(!D||D==="1/01/01 00:00:00"||D==="0001-01-01T00:00:00")return"-";try{const F=new Date(D);if(isNaN(F.getTime()))return D;const T=F.getFullYear(),O=String(F.getMonth()+1).padStart(2,"0"),M=String(F.getDate()).padStart(2,"0"),P=String(F.getHours()).padStart(2,"0"),te=String(F.getMinutes()).padStart(2,"0");return`${T}/${O}/${M} ${P}:${te}`}catch{return D}};return c.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),c.jsxs("div",{className:"relative w-full max-w-4xl max-h-[90vh] bg-white shadow-2xl rounded-lg overflow-hidden flex flex-col m-4",children:[c.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:""}),c.jsx("button",{onClick:I,disabled:N,className:`p-2 rounded-full transition-all disabled:opacity-50 disabled:cursor-not-allowed ${m?"bg-green-500 text-white hover:bg-green-600 shadow-lg":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,title:m?"":"",children:c.jsx(px,{className:"w-6 h-6",fill:m?"currentColor":"none"})})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:e,className:"p-2 hover:bg-white/50 rounded-full transition-colors",title:"",children:c.jsx(ut,{className:"w-6 h-6 text-gray-700"})})})]}),c.jsx("div",{className:"px-3 py-2 bg-gray-50 border-b border-gray-200",children:c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsx("span",{className:"font-semibold text-gray-600",children:""}),c.jsx("span",{className:"text-gray-800",children:r.name||"-"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-gray-600",children:""}),c.jsx("span",{className:"text-gray-800",children:r.skdiacode||"-"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-gray-600",children:""}),c.jsx("span",{className:"text-gray-800",children:r.code||"-"})]}),r.cht_name&&c.jsxs("div",{className:"col-span-2",children:[c.jsx("span",{className:"font-semibold text-gray-600",children:""}),c.jsx("span",{className:"text-gray-800",children:r.cht_name})]})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:se?c.jsx("div",{className:"flex items-center justify-center h-40 text-gray-400 text-lg",children:""}):c.jsxs("div",{className:"space-y-2",children:[k.map((D,F)=>c.jsxs("div",{className:"border border-blue-200 rounded-lg p-3 bg-blue-50 hover:shadow-md transition-shadow",onClick:()=>{x("requisition"),w(D),v(!0)},children:[c.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx("span",{className:"underline font-medium text-xl font-semibold text-gray-700",children:""}),c.jsx("button",{onClick:T=>{T.stopPropagation(),R(D)},disabled:f===D.GUID,className:`p-2 rounded-full transition-all disabled:opacity-50 disabled:cursor-not-allowed hover:scale-110 ${D.notice==="True"?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-600 hover:bg-gray-400"}`,title:D.notice==="True"?"":"",children:c.jsx(Pd,{className:"w-5 h-5"})})]}),c.jsx("span",{className:`px-3 text-sm py-2 text-white font-semibold rounded-full ${D.actionType.includes("")?"bg-green-600":"bg-blue-600"}`,children:D.actionType})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-gray-600",children:""}),c.jsx("span",{className:"text-gray-800",children:D.requestingUnit||"-"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-gray-600",children:""}),c.jsx("span",{className:"text-gray-800",children:D.requestingPerson||"-"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-gray-600",children:""}),c.jsx("span",{className:"text-gray-800",children:D.requestedQuantity||"-"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-gray-600",children:""}),c.jsx("span",{className:"text-gray-800",children:A(D.requestTime)})]})]})]},D.GUID)),oe.map((D,F)=>c.jsxs("div",{className:"border border-yellow-200 rounded-lg p-3 bg-yellow-50 hover:shadow-md transition-shadow",onClick:()=>{x("distribution"),w(D),v(!0)},children:[c.jsxs("div",{className:"flex items-center gap-6 mb-2",children:[c.jsx("span",{className:"underline font-medium text-xl rounded-full text-gray-700",children:""}),c.jsx("button",{onClick:T=>{T.stopPropagation(),z(D)},disabled:f===D.GUID,className:`p-2 rounded-full transition-all disabled:opacity-50 disabled:cursor-not-allowed hover:scale-110 ${D.notice==="True"?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-600 hover:bg-gray-400"}`,title:D.notice==="True"?"":"",children:c.jsx(Pd,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-gray-600",children:""}),c.jsx("span",{className:"text-gray-800",children:D.sourceStoreType||"-"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-gray-600",children:""}),c.jsx("span",{className:"text-gray-800",children:D.destinationStoreType||"-"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-gray-600",children:""}),c.jsx("span",{className:"text-gray-800",children:D.LOT||"-"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-gray-600",children:""}),c.jsx("span",{className:"text-gray-800",children:D.VAL||"-"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-gray-600",children:""}),c.jsx("span",{className:"text-gray-800",children:D.issuedQuantity||"-"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-gray-600",children:""}),c.jsx("span",{className:"text-gray-800",children:D.reportName||"-"})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("span",{className:"font-semibold text-gray-600",children:""}),c.jsx("span",{className:"text-gray-800",children:A(D.addedTime)})]})]})]},D.GUID))]})})]}),c.jsx(T2,{isOpen:p,onClose:()=>v(!1),type:g,data:y,onApprove:a})]})},M2=({isOpen:t,onClose:e,container:r})=>{const[n,o]=_.useState("list_mode"),{highlightedMedicineCode:a,apiDepartmentData:i}=vt(),[s,l]=_.useState(!1),[u,d]=_.useState([]),[f,h]=_.useState([]),[p,v]=_.useState([]),[y,w]=_.useState(!1),[g,x]=_.useState(null),m=_.useRef(null),C=_.useRef(null),N=_.useCallback(A=>{if(!i||!A)return null;const D=F=>{for(const T of F){if(T.GUID===A)return T;if(T.contents&&Array.isArray(T.contents)){const O=D(T.contents);if(O)return O}}return null};for(const F of i){if(F.GUID===A)return F;if(F.contents&&Array.isArray(F.contents)){const T=D(F.contents);if(T)return T}}return null},[i]),S=r?N(r.GUID)||r:null,I=()=>{try{const D=localStorage.getItem("medMap_setting");if(D){const T=JSON.parse(D).light_sec;if(T!=null&&T!==""){const O=Number(T);if(!isNaN(O)&&O>0)return O*1e3}}}catch(D){console.error(":",D)}return 6e4},R=()=>{try{const A=localStorage.getItem("medMap_setting");if(A)return JSON.parse(A).light_color||"red"}catch(A){console.error(":",A)}return"red"},z=_.useCallback(async()=>{try{const A=new Date,D=`${A.getFullYear()}-${String(A.getMonth()+1).padStart(2,"0")}-${String(A.getDate()).padStart(2,"0")} 00:00:00`,F=`${A.getFullYear()}-${String(A.getMonth()+1).padStart(2,"0")}-${String(A.getDate()).padStart(2,"0")} 23:59:59`,[T,O]=await Promise.all([Me.getRequisitionByTime(D,F),Me.getDistributionByTime(D,F)]),M=[];if(T.Code===200&&T.Data){const P=T.Data.filter(X=>{var ee;return(ee=S==null?void 0:S.med_list)==null?void 0:ee.some(Ne=>Ne.code===X.code)});h(P),P.filter(X=>X.state===""&&X.notice==="True").forEach(X=>{X.code&&M.push(X.code)})}if(O.Code===200&&O.Data){const P=O.Data.filter(X=>{var ee;return(ee=S==null?void 0:S.med_list)==null?void 0:ee.some(Ne=>Ne.code===X.code)});v(P),P.filter(X=>X.state===""&&X.notice==="True").forEach(X=>{X.code&&(M.includes(X.code)||M.push(X.code))})}d(M)}catch(A){console.error(":",A)}},[S]);_.useEffect(()=>(t?(z(),C.current&&clearInterval(C.current),C.current=setInterval(()=>{z()},1e4)):C.current&&(clearInterval(C.current),C.current=null),()=>{C.current&&(clearInterval(C.current),C.current=null)}),[t,z]),_.useEffect(()=>{var A;S&&console.log(" ContainerDetailModal: currentContainer updated",{GUID:S.GUID,name:S.name,medListCount:((A=S.med_list)==null?void 0:A.length)||0})},[S]),_.useEffect(()=>{if(console.log("",S),console.log(" ContainerDetailModal - :",{isOpen:t,highlightedMedicineCode:a,containerName:S==null?void 0:S.name}),t&&a){l(!0);const A=I();console.log(" ContainerDetailModal - :",{medicineCode:a,duration:A/1e3+""}),m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{console.log(" ContainerDetailModal - "),l(!1),m.current=null},A)}else l(!1);return()=>{m.current&&clearTimeout(m.current)}},[t,a]);const k=A=>{var T,O;f.filter(M=>M.code===A.code),p.filter(M=>M.code===A.code);const D=M=>{for(const P of M){if(P.type==="store_shelves"&&P.medMapStock){const te=P.medMapStock.find(X=>X.code===A.code);if(te)return{stock:te,shelf:P}}if(P.contents&&P.contents.length>0){const te=D(P.contents);if(te)return te}}return null},F=r?D([r]):null;x({code:A.code,name:A.name,cht_name:A.cht_name,skdiacode:A.SKDIACODE||A.skdiacode,serverName:(T=F==null?void 0:F.shelf)==null?void 0:T.serverName,serverType:(O=F==null?void 0:F.shelf)==null?void 0:O.serverType}),w(!0)};if(!t)return null;const oe=()=>{if(!(S!=null&&S.med_list)||S.med_list.length===0)return c.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:c.jsx("p",{children:""})});const A=[...S.med_list].sort((D,F)=>D.code.localeCompare(F.code));return c.jsx("div",{className:"overflow-y-auto h-full",children:c.jsxs("table",{className:"w-full border-collapse",children:[c.jsx("thead",{className:"sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"border border-gray-300 px-1 py-2 text-left text-sm font-semibold text-gray-700",children:""}),c.jsx("th",{className:"border border-gray-300 px-1 py-2 text-left text-sm font-semibold text-gray-700",children:""}),c.jsx("th",{className:"border border-gray-300 px-1 py-2 text-left text-sm font-semibold text-gray-700",children:""}),c.jsx("th",{className:"border border-gray-300 px-1 py-2 text-left text-sm font-semibold text-gray-700 text-right",children:""}),c.jsx("th",{className:"border border-gray-300 px-1 py-2 text-left text-sm font-semibold text-gray-700 text-center",children:""}),c.jsx("th",{className:"border border-gray-300 px-1 py-2 text-left text-sm font-semibold text-gray-700 text-center",children:""}),c.jsx("th",{className:"border border-gray-300 px-1 py-2 text-left text-sm font-semibold text-gray-700 text-center",children:""})]})}),c.jsx("tbody",{children:A.map((D,F)=>{const T=s&&a&&D.code==a,O=u.includes(D.code);let M=0;D.qty.forEach(te=>{M+=+te}),F===0&&console.log(" ContainerDetailModal - :",{medCode:D.code,highlightedCode:a,isHighlightActive:s,isHighlighted:T,isPendingRequisition:O,comparison:`${D.code} == ${a} = ${D.code==a}`});const P=R();return c.jsxs("tr",{className:`transition-colors cursor-pointer ${O?"highlight-breathe-red":T?`highlight-breathe-${P}`:"hover:bg-gray-50"}`,onClick:()=>k(D),children:[c.jsx("td",{className:"border border-gray-300 px-1 py-2 text-sm",children:D.code||"-"}),c.jsx("td",{className:"border border-gray-300 px-1 py-2 text-sm",children:D.SKDIACODE||"-"}),c.jsx("td",{className:"border border-gray-300 px-1 py-2 text-sm",children:D.name||"-"}),c.jsx("td",{className:"border border-gray-300 px-1 py-2 text-sm text-right",children:M||"-"}),c.jsx("td",{className:"border border-gray-300 px-1 py-2 text-sm text-center",children:D.stockCol||"-"}),c.jsx("td",{className:"border border-gray-300 px-1 py-2 text-sm text-center",children:D.stockRow||"-"}),c.jsx("td",{className:"border border-gray-300 px-1 py-2 text-sm text-center",children:D.stock||"-"})]},F)})})]})})},se=()=>r?c.jsx(D2,{container:S,highlightedMedicineCode:s?a:null,pendingRequisitionCodes:u,onMedicineClick:k}):c.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:c.jsx("p",{children:""})});return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),c.jsxs("div",{className:"relative w-full h-full bg-white shadow-2xl overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200 bg-white",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 rounded-lg p-1",children:[c.jsx("button",{onClick:()=>o("list_mode"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${n==="list_mode"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:""}),c.jsx("button",{onClick:()=>o("view_mode"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${n==="view_mode"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:""})]}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",title:"",children:c.jsx(ut,{className:"w-6 h-6 text-gray-700"})})]}),c.jsx("div",{className:"flex-1 overflow-hidden p-3",children:n==="list_mode"?oe():se()})]})]}),c.jsx(O2,{isOpen:y,onClose:()=>w(!1),medicineInfo:g,requisitions:g?f.filter(A=>A.code===g.code):[],distributions:g?p.filter(A=>A.code===g.code):[],onNoticeUpdated:z})]})},R2=()=>{const{editStoreShelfModalOpen:t,closeEditStoreShelfModal:e,selectedStoreShelfForEdit:r,showNotification:n,updateContainerInLocalData:o}=vt(),[a,i]=_.useState({name:"",position:"",width:"85",height:"29",ip:"",serverName:"",serverType:"",deviceType:""}),[s,l]=_.useState(!1);_.useEffect(()=>{r&&t&&i({name:r.name||"",position:r.gird_position||"",width:r.width||"85",height:r.height||"29",ip:r.ip||"",serverName:r.serverName||"",serverType:r.serverType||"",deviceType:r.device_type||""})},[r,t]);const u=(h,p)=>{i(v=>({...v,[h]:p}))},d=async()=>{if(r){if(!a.name.trim()){n("","error");return}if(!a.position.trim()){n("","error");return}l(!0);try{const h={Data:[{Master_GUID:r.Master_GUID,name:a.name.trim(),position:a.position.trim(),type:r.type,width:a.width,height:a.height,ip_light:a.ip.trim(),ip:a.ip.trim(),device_type:a.deviceType,serverName:a.serverName.trim(),serverType:a.serverType.trim(),GUID:r.GUID}]},v=`${(await Me.getConfig()).domain}/api/medmap/update_shelf`,w=await(await fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).json();console.log(h),console.log(w),w.Code===200?(n("","success"),o(r.GUID,{name:a.name.trim(),gird_position:a.position.trim(),width:a.width,height:a.height,ip:a.ip.trim(),device_type:a.deviceType,serverName:a.serverName.trim(),serverType:a.serverType.trim()}),e()):n(w.Result||"","error")}catch(h){console.error(":",h),n("","error")}finally{l(!1)}}},f=()=>{e()};return!t||!r?null:c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:f}),c.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200 w-[600px]",onClick:h=>h.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Io,{className:"w-6 h-6 text-gray-600"}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:""})]}),c.jsx("button",{onClick:f,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(ut,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"flex-1 px-6 py-4 overflow-y-auto",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),c.jsx("input",{type:"text",value:a.name,onChange:h=>u("name",h.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" (grid_position)"}),c.jsx("input",{type:"text",value:a.position,onChange:h=>u("position",h.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",placeholder:"0,0"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),c.jsx("input",{type:"text",value:a.width,onChange:h=>u("width",h.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",placeholder:"85"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),c.jsx("input",{type:"text",value:a.height,onChange:h=>u("height",h.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",placeholder:"29"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IP"}),c.jsx("input",{type:"text",value:a.ip,onChange:h=>u("ip",h.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",placeholder:"IP"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),c.jsx("input",{type:"text",value:a.serverName,onChange:h=>u("serverName",h.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),c.jsx("input",{type:"text",value:a.serverType,onChange:h=>u("serverType",h.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),c.jsxs("select",{value:a.deviceType,onChange:h=>u("deviceType",h.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors bg-white",children:[c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"RowsLED",children:"RowsLED"})]})]})]})}),c.jsxs("div",{className:"flex items-center justify-end space-x-3 py-4 px-6 border-t border-gray-200",children:[c.jsx("button",{onClick:f,disabled:s,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:""}),c.jsxs("button",{onClick:d,disabled:s,className:"px-6 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[s&&c.jsx(hr,{className:"w-4 h-4 animate-spin"}),c.jsx("span",{children:s?"...":""})]})]})]})]})},P2=()=>{const{editParentContainerModalOpen:t,closeEditParentContainerModal:e,selectedParentContainerForEdit:r,showNotification:n,updateContainerInLocalData:o}=vt(),[a,i]=_.useState({name:"",position:"",ip_light:"",serverName:"",serverType:"",deviceType:""}),[s,l]=_.useState(!1);_.useEffect(()=>{r&&t&&i({name:r.name||"",position:r.gird_position||"",ip_light:r.ip_light||"",serverName:r.serverName||"",serverType:r.serverType||"",deviceType:r.device_type||""})},[r,t]);const u=(h,p)=>{i(v=>({...v,[h]:p}))},d=async()=>{if(r){if(!a.name.trim()){n("","error");return}if(!a.position.trim()){n("","error");return}l(!0);try{let h=`${r.position.x},${r.position.y}`;const p=[{GUID:r.GUID,name:a.name.trim(),position:a.position.trim(),absolute_position:h||"0,0",ip_light:a.ip_light.trim(),serverName:a.serverName.trim(),serverType:a.serverType.trim(),device_type:a.deviceType}];console.log("=========",p,"=========");const v=await Me.updateMedMapSection(p);v.Code===200?(n("","success"),o(r.GUID,{name:a.name.trim(),gird_position:a.position.trim(),ip_light:a.ip_light.trim(),serverName:a.serverName.trim(),serverType:a.serverType.trim(),device_type:a.deviceType}),e()):n(v.Result||"","error")}catch(h){console.error(":",h),n("","error")}finally{l(!1)}}},f=()=>{e()};return!t||!r?null:c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:f}),c.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200 w-[600px]",onClick:h=>h.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Io,{className:"w-6 h-6 text-gray-600"}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:""})]}),c.jsx("button",{onClick:f,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(ut,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"flex-1 px-6 py-4 overflow-y-auto",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),c.jsx("input",{type:"text",value:a.name,onChange:h=>u("name",h.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" (grid_position)"}),c.jsx("input",{type:"text",value:a.position,onChange:h=>u("position",h.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",placeholder:"0,0"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IP"}),c.jsx("input",{type:"text",value:a.ip_light,onChange:h=>u("ip_light",h.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",placeholder:"IP"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),c.jsx("input",{type:"text",value:a.serverName,onChange:h=>u("serverName",h.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),c.jsx("input",{type:"text",value:a.serverType,onChange:h=>u("serverType",h.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors",placeholder:""})]}),c.jsxs("div",{className:"hidden",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),c.jsxs("select",{value:a.deviceType,onChange:h=>u("deviceType",h.target.value),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors bg-white",children:[c.jsx("option",{value:"",children:""}),c.jsx("option",{value:"RowsLED",children:"RowsLED"})]})]})]})}),c.jsxs("div",{className:"flex items-center justify-end space-x-3 py-4 px-6 border-t border-gray-200",children:[c.jsx("button",{onClick:f,disabled:s,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:""}),c.jsxs("button",{onClick:d,disabled:s,className:"px-6 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[s&&c.jsx(hr,{className:"w-4 h-4 animate-spin"}),c.jsx("span",{children:s?"...":""})]})]})]})]})},j2=({isOpen:t,onLoginSuccess:e})=>{const{t:r}=nr(),[n,o]=_.useState(""),[a,i]=_.useState(""),[s,l]=_.useState(!1),[u,d]=_.useState(!1),[f,h]=_.useState(""),p=async y=>{if(y.preventDefault(),!n.trim()||!a.trim()){h("Please enter both ID and password");return}d(!0),h("");try{const w=await Me.login({ID:n.trim(),Password:a});if(w.Code===200&&w.Data){const g={...w.Data,loginTime:new Date().toISOString()};sessionStorage.setItem("user_session",JSON.stringify(g)),e(g)}else h(w.Result||"Login failed")}catch(w){console.error("Login failed:",w),h("Network error. Please try again.")}finally{d(!1)}},v=y=>{y.key==="Enter"&&!u&&p(y)};return t?c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900",children:[c.jsx("div",{className:"absolute inset-0 bg-white"}),c.jsxs("div",{className:"relative z-10 w-full max-w-md mx-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:r("login.title")}),c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-4 md:p-6",children:[f&&c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-600 text-sm",children:f})}),c.jsxs("form",{onSubmit:p,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"userId",className:"block text-sm font-medium text-gray-700 mb-2",children:r("login.userId")}),c.jsx("input",{id:"userId",type:"text",value:n,onChange:y=>o(y.target.value),onKeyPress:v,placeholder:r("login.userIdPlaceholder"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",disabled:u,autoComplete:"username"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:r("login.password")}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{id:"password",type:s?"text":"password",value:a,onChange:y=>i(y.target.value),onKeyPress:v,placeholder:r("login.passwordPlaceholder"),className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",disabled:u,autoComplete:"current-password"}),c.jsx("button",{type:"button",onClick:()=>l(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:u,children:s?c.jsx(k1,{className:"w-5 h-5"}):c.jsx(B1,{className:"w-5 h-5"})})]})]}),c.jsx("button",{type:"submit",disabled:u||!n.trim()||!a.trim(),className:"w-full flex items-center justify-center px-4 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:u?c.jsxs(c.Fragment,{children:[c.jsx(hr,{className:"w-5 h-5 animate-spin mr-2"}),r("login.loggingIn")]}):c.jsx(c.Fragment,{children:r("login.loginButton")})})]})]})]})]}):null},k2=({isVisible:t,message:e})=>{const{t:r}=nr();return t?c.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),c.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center p-8",children:c.jsxs("div",{className:"bg-white/95 backdrop-blur-sm border border-gray-200/50 rounded-2xl shadow-2xl px-8 py-6 flex flex-col items-center space-y-4 min-w-[280px]",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[c.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:c.jsx(pu,{className:"w-8 h-8 text-blue-600"})}),c.jsx("div",{className:"text-xl font-semibold text-gray-900",children:r("nav.title")})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(hr,{className:"w-8 h-8 text-blue-600 animate-spin"}),c.jsx("div",{className:"text-lg font-medium text-gray-700",children:e||r("status.loadingMedMapData")})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:c.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full animate-pulse",style:{width:"100%"}})}),c.jsx("div",{className:"text-sm text-gray-500 text-center max-w-xs",children:r("status.loadingMedMapHint")})]})})]}):null},B2=({message:t,type:e,isVisible:r,onClose:n,duration:o=3e3})=>{const[a,i]=_.useState(!1);return _.useEffect(()=>{if(r){i(!0);const s=setTimeout(()=>{n()},o);return()=>clearTimeout(s)}else{const s=setTimeout(()=>{i(!1)},300);return()=>clearTimeout(s)}},[r,o,n]),a?c.jsx("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-[9999] transition-all duration-300 ease-in-out ${r?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"}`,children:c.jsxs("div",{className:`flex items-center space-x-3 px-4 py-3 rounded-lg shadow-lg border ${e==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[e==="success"?c.jsx(ux,{className:"w-5 h-5 text-green-600"}):c.jsx(wx,{className:"w-5 h-5 text-red-600"}),c.jsx("span",{className:"text-sm font-medium",children:t}),c.jsx("button",{onClick:n,className:`p-1 rounded-full hover:bg-black/10 transition-colors ${e==="success"?"text-green-600":"text-red-600"}`,children:c.jsx(ut,{className:"w-4 h-4"})})]})}):null};function L2(){const{selectedDepartmentType:t,viewMode:e,isAuthenticated:r,setIsAuthenticated:n,setCurrentUser:o,isLoadingMedMap:a,notification:i,hideNotification:s,addParentContainerModalOpen:l,closeAddParentContainerModal:u,selectedDepartmentForAdd:d,addStoreItemModalOpen:f,closeAddStoreItemModal:h,selectedStoreShelfForAdd:p,addDepartmentModalOpen:v,closeAddDepartmentModal:y,qrCodeScannerModalOpen:w,qrCodeScannerMode:g,closeQRCodeScannerModal:x,addBarcodeModalOpen:m,closeAddBarcodeModal:C,initialBarcodeValue:N,containerDetailModalOpen:S,closeContainerDetailModal:I,selectedContainerForDetail:R,setMedicineList:z,setIsLoadingMedicines:k,showNotification:oe}=vt();_.useEffect(()=>{(()=>{try{const T=sessionStorage.getItem("user_session");if(T){const O=JSON.parse(T);O.GUID&&O.ID&&O.Name?(o(O),n(!0)):sessionStorage.removeItem("user_session")}}catch(T){console.error("Error checking session:",T),sessionStorage.removeItem("user_session")}})()},[n,o]),_.useEffect(()=>{let F=!0;return(async()=>{if(r){k(!0);try{console.log("...");const O=await Me.getMedicineCloud();if(console.log(" API :",O),!F)return;O.Code===200&&O.Data?(z(O.Data),console.log(`  ${O.Data.length} `),oe(` ${O.Data.length} `,"success")):(console.warn("API :",O),z([]),oe("","error"))}catch(O){if(!F)return;console.error(":",O),z([]),oe("","error")}finally{F&&k(!1)}}})(),()=>{F=!1}},[r]);const se=F=>{o(F),n(!0)},A=Bi.useRef(null),D=(F,T)=>{if(console.log(" QR - handleQRScanSuccess :",{barcode:F,medicineData:T,mode:g}),console.log("  mode:",g),console.log("  viewMode:",e),console.log(" drugCanvasRef.current:",A.current),g==="track_Drug_mode"){if(console.log("  track_Drug_mode "),e!=="medicine"){console.warn(" "),oe("","error");return}A.current?(console.log(" drugCanvasRef.current "),console.log(" drugCanvasRef.current.locateDrug :",typeof A.current.locateDrug),typeof A.current.locateDrug=="function"?(console.log("  locateDrug "),A.current.locateDrug(T)):console.warn(" locateDrug ")):console.warn(" drugCanvasRef.current ")}else console.log(" mode  track_Drug_mode mode:",g)};return r?c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx(_x,{}),c.jsx(Cx,{}),c.jsx(Ex,{}),c.jsx("div",{className:"fixed inset-0",children:c.jsx("div",{className:"w-full h-full",children:e==="department"?c.jsx(g2,{}):c.jsx(eh,{ref:A})})}),c.jsx(Ax,{}),c.jsx(w2,{}),c.jsx(_2,{}),c.jsx(C2,{}),c.jsx(b2,{}),c.jsx(S2,{}),c.jsx(N2,{}),c.jsx(E2,{isOpen:f,onClose:h,storeShelf:p}),c.jsx(A2,{isOpen:v,onClose:y}),c.jsx(Ds,{isOpen:w,onClose:x,mode:g,onScanSuccess:D}),c.jsx(I2,{isOpen:m,onClose:C,initialBarcode:N}),c.jsx(M2,{isOpen:S,onClose:I,container:R}),c.jsx(R2,{}),c.jsx(P2,{}),c.jsx(k2,{isVisible:a}),c.jsx(B2,{message:i.message,type:i.type,isVisible:i.isVisible,onClose:s})]}):c.jsx(j2,{isOpen:!0,onLoginSuccess:se})}function F2(){return c.jsx(ix,{children:c.jsx(ox,{children:c.jsx(L2,{})})})}O1(document.getElementById("root")).render(c.jsx(_.StrictMode,{children:c.jsx(F2,{})}));
