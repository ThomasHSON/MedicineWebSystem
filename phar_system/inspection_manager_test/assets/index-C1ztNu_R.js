var uf=Object.defineProperty;var df=(e,t,n)=>t in e?uf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $n=(e,t,n)=>df(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function ff(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Lc={exports:{}},ko={},Mc={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cs=Symbol.for("react.element"),hf=Symbol.for("react.portal"),mf=Symbol.for("react.fragment"),pf=Symbol.for("react.strict_mode"),gf=Symbol.for("react.profiler"),xf=Symbol.for("react.provider"),yf=Symbol.for("react.context"),vf=Symbol.for("react.forward_ref"),wf=Symbol.for("react.suspense"),bf=Symbol.for("react.memo"),Nf=Symbol.for("react.lazy"),ga=Symbol.iterator;function _f(e){return e===null||typeof e!="object"?null:(e=ga&&e[ga]||e["@@iterator"],typeof e=="function"?e:null)}var Ac={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uc=Object.assign,$c={};function pr(e,t,n){this.props=e,this.context=t,this.refs=$c,this.updater=n||Ac}pr.prototype.isReactComponent={};pr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};pr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function zc(){}zc.prototype=pr.prototype;function mi(e,t,n){this.props=e,this.context=t,this.refs=$c,this.updater=n||Ac}var pi=mi.prototype=new zc;pi.constructor=mi;Uc(pi,pr.prototype);pi.isPureReactComponent=!0;var xa=Array.isArray,Fc=Object.prototype.hasOwnProperty,gi={current:null},Bc={key:!0,ref:!0,__self:!0,__source:!0};function Hc(e,t,n){var r,o={},l=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)Fc.call(t,r)&&!Bc.hasOwnProperty(r)&&(o[r]=t[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:cs,type:e,key:l,ref:i,props:o,_owner:gi.current}}function jf(e,t){return{$$typeof:cs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xi(e){return typeof e=="object"&&e!==null&&e.$$typeof===cs}function Sf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ya=/\/+/g;function Wo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Sf(""+e.key):t.toString(36)}function Bs(e,t,n,r,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case cs:case hf:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+Wo(i,0):r,xa(o)?(n="",e!=null&&(n=e.replace(ya,"$&/")+"/"),Bs(o,t,n,"",function(u){return u})):o!=null&&(xi(o)&&(o=jf(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(ya,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",xa(e))for(var a=0;a<e.length;a++){l=e[a];var c=r+Wo(l,a);i+=Bs(l,t,n,c,o)}else if(c=_f(e),typeof c=="function")for(e=c.call(e),a=0;!(l=e.next()).done;)l=l.value,c=r+Wo(l,a++),i+=Bs(l,t,n,c,o);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function js(e,t,n){if(e==null)return e;var r=[],o=0;return Bs(e,r,"","",function(l){return t.call(n,l,o++)}),r}function kf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ke={current:null},Hs={transition:null},Cf={ReactCurrentDispatcher:Ke,ReactCurrentBatchConfig:Hs,ReactCurrentOwner:gi};function Gc(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:js,forEach:function(e,t,n){js(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return js(e,function(){t++}),t},toArray:function(e){return js(e,function(t){return t})||[]},only:function(e){if(!xi(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=pr;oe.Fragment=mf;oe.Profiler=gf;oe.PureComponent=mi;oe.StrictMode=pf;oe.Suspense=wf;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cf;oe.act=Gc;oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Uc({},e.props),o=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=gi.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)Fc.call(t,c)&&!Bc.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:cs,type:e.type,key:o,ref:l,props:r,_owner:i}};oe.createContext=function(e){return e={$$typeof:yf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xf,_context:e},e.Consumer=e};oe.createElement=Hc;oe.createFactory=function(e){var t=Hc.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:vf,render:e}};oe.isValidElement=xi;oe.lazy=function(e){return{$$typeof:Nf,_payload:{_status:-1,_result:e},_init:kf}};oe.memo=function(e,t){return{$$typeof:bf,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=Hs.transition;Hs.transition={};try{e()}finally{Hs.transition=t}};oe.unstable_act=Gc;oe.useCallback=function(e,t){return Ke.current.useCallback(e,t)};oe.useContext=function(e){return Ke.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return Ke.current.useDeferredValue(e)};oe.useEffect=function(e,t){return Ke.current.useEffect(e,t)};oe.useId=function(){return Ke.current.useId()};oe.useImperativeHandle=function(e,t,n){return Ke.current.useImperativeHandle(e,t,n)};oe.useInsertionEffect=function(e,t){return Ke.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return Ke.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return Ke.current.useMemo(e,t)};oe.useReducer=function(e,t,n){return Ke.current.useReducer(e,t,n)};oe.useRef=function(e){return Ke.current.useRef(e)};oe.useState=function(e){return Ke.current.useState(e)};oe.useSyncExternalStore=function(e,t,n){return Ke.current.useSyncExternalStore(e,t,n)};oe.useTransition=function(){return Ke.current.useTransition()};oe.version="18.3.1";Mc.exports=oe;var x=Mc.exports;const ke=ff(x);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ef=x,Df=Symbol.for("react.element"),Tf=Symbol.for("react.fragment"),If=Object.prototype.hasOwnProperty,Pf=Ef.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rf={key:!0,ref:!0,__self:!0,__source:!0};function Wc(e,t,n){var r,o={},l=null,i=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)If.call(t,r)&&!Rf.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Df,type:e,key:l,ref:i,props:o,_owner:Pf.current}}ko.Fragment=Tf;ko.jsx=Wc;ko.jsxs=Wc;Lc.exports=ko;var s=Lc.exports,Vc={exports:{}},ht={},Qc={exports:{}},qc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(S,A){var M=S.length;S.push(A);e:for(;0<M;){var Q=M-1>>>1,te=S[Q];if(0<o(te,A))S[Q]=A,S[M]=te,M=Q;else break e}}function n(S){return S.length===0?null:S[0]}function r(S){if(S.length===0)return null;var A=S[0],M=S.pop();if(M!==A){S[0]=M;e:for(var Q=0,te=S.length,Le=te>>>1;Q<Le;){var b=2*(Q+1)-1,X=S[b],N=b+1,B=S[N];if(0>o(X,M))N<te&&0>o(B,X)?(S[Q]=B,S[N]=M,Q=N):(S[Q]=X,S[b]=M,Q=b);else if(N<te&&0>o(B,M))S[Q]=B,S[N]=M,Q=N;else break e}}return A}function o(S,A){var M=S.sortIndex-A.sortIndex;return M!==0?M:S.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var c=[],u=[],h=1,m=null,g=3,y=!1,w=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(S){for(var A=n(u);A!==null;){if(A.callback===null)r(u);else if(A.startTime<=S)r(u),A.sortIndex=A.expirationTime,t(c,A);else break;A=n(u)}}function v(S){if(k=!1,p(S),!w)if(n(c)!==null)w=!0,H(j);else{var A=n(u);A!==null&&V(v,A.startTime-S)}}function j(S,A){w=!1,k&&(k=!1,f(R),R=-1),y=!0;var M=g;try{for(p(A),m=n(c);m!==null&&(!(m.expirationTime>A)||S&&!Y());){var Q=m.callback;if(typeof Q=="function"){m.callback=null,g=m.priorityLevel;var te=Q(m.expirationTime<=A);A=e.unstable_now(),typeof te=="function"?m.callback=te:m===n(c)&&r(c),p(A)}else r(c);m=n(c)}if(m!==null)var Le=!0;else{var b=n(u);b!==null&&V(v,b.startTime-A),Le=!1}return Le}finally{m=null,g=M,y=!1}}var E=!1,D=null,R=-1,U=5,I=-1;function Y(){return!(e.unstable_now()-I<U)}function L(){if(D!==null){var S=e.unstable_now();I=S;var A=!0;try{A=D(!0,S)}finally{A?T():(E=!1,D=null)}}else E=!1}var T;if(typeof d=="function")T=function(){d(L)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,ne=z.port2;z.port1.onmessage=L,T=function(){ne.postMessage(null)}}else T=function(){C(L,0)};function H(S){D=S,E||(E=!0,T())}function V(S,A){R=C(function(){S(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(S){S.callback=null},e.unstable_continueExecution=function(){w||y||(w=!0,H(j))},e.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<S?Math.floor(1e3/S):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(S){switch(g){case 1:case 2:case 3:var A=3;break;default:A=g}var M=g;g=A;try{return S()}finally{g=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(S,A){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var M=g;g=S;try{return A()}finally{g=M}},e.unstable_scheduleCallback=function(S,A,M){var Q=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?Q+M:Q):M=Q,S){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=M+te,S={id:h++,callback:A,priorityLevel:S,startTime:M,expirationTime:te,sortIndex:-1},M>Q?(S.sortIndex=M,t(u,S),n(c)===null&&S===n(u)&&(k?(f(R),R=-1):k=!0,V(v,M-Q))):(S.sortIndex=te,t(c,S),w||y||(w=!0,H(j))),S},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(S){var A=g;return function(){var M=g;g=A;try{return S.apply(this,arguments)}finally{g=M}}}})(qc);Qc.exports=qc;var Of=Qc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf=x,ft=Of;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kc=new Set,Br={};function Ln(e,t){or(e,t),or(e+"Capture",t)}function or(e,t){for(Br[e]=t,e=0;e<t.length;e++)Kc.add(t[e])}var Bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yl=Object.prototype.hasOwnProperty,Mf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,va={},wa={};function Af(e){return yl.call(wa,e)?!0:yl.call(va,e)?!1:Mf.test(e)?wa[e]=!0:(va[e]=!0,!1)}function Uf(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $f(e,t,n,r){if(t===null||typeof t>"u"||Uf(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ye(e,t,n,r,o,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var Fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fe[e]=new Ye(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fe[t]=new Ye(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fe[e]=new Ye(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fe[e]=new Ye(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fe[e]=new Ye(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fe[e]=new Ye(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fe[e]=new Ye(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fe[e]=new Ye(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fe[e]=new Ye(e,5,!1,e.toLowerCase(),null,!1,!1)});var yi=/[\-:]([a-z])/g;function vi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(yi,vi);Fe[t]=new Ye(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(yi,vi);Fe[t]=new Ye(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(yi,vi);Fe[t]=new Ye(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fe[e]=new Ye(e,1,!1,e.toLowerCase(),null,!1,!1)});Fe.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fe[e]=new Ye(e,1,!1,e.toLowerCase(),null,!0,!0)});function wi(e,t,n,r){var o=Fe.hasOwnProperty(t)?Fe[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($f(t,n,o,r)&&(n=null),r||o===null?Af(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Vt=Lf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ss=Symbol.for("react.element"),Fn=Symbol.for("react.portal"),Bn=Symbol.for("react.fragment"),bi=Symbol.for("react.strict_mode"),vl=Symbol.for("react.profiler"),Yc=Symbol.for("react.provider"),Jc=Symbol.for("react.context"),Ni=Symbol.for("react.forward_ref"),wl=Symbol.for("react.suspense"),bl=Symbol.for("react.suspense_list"),_i=Symbol.for("react.memo"),qt=Symbol.for("react.lazy"),Xc=Symbol.for("react.offscreen"),ba=Symbol.iterator;function wr(e){return e===null||typeof e!="object"?null:(e=ba&&e[ba]||e["@@iterator"],typeof e=="function"?e:null)}var Ne=Object.assign,Vo;function Er(e){if(Vo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Vo=t&&t[1]||""}return`
`+Vo+e}var Qo=!1;function qo(e,t){if(!e||Qo)return"";Qo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),l=r.stack.split(`
`),i=o.length-1,a=l.length-1;1<=i&&0<=a&&o[i]!==l[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==l[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==l[a]){var c=`
`+o[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=a);break}}}finally{Qo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Er(e):""}function zf(e){switch(e.tag){case 5:return Er(e.type);case 16:return Er("Lazy");case 13:return Er("Suspense");case 19:return Er("SuspenseList");case 0:case 2:case 15:return e=qo(e.type,!1),e;case 11:return e=qo(e.type.render,!1),e;case 1:return e=qo(e.type,!0),e;default:return""}}function Nl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bn:return"Fragment";case Fn:return"Portal";case vl:return"Profiler";case bi:return"StrictMode";case wl:return"Suspense";case bl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Jc:return(e.displayName||"Context")+".Consumer";case Yc:return(e._context.displayName||"Context")+".Provider";case Ni:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _i:return t=e.displayName||null,t!==null?t:Nl(e.type)||"Memo";case qt:t=e._payload,e=e._init;try{return Nl(e(t))}catch{}}return null}function Ff(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nl(t);case 8:return t===bi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Bf(e){var t=Zc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ks(e){e._valueTracker||(e._valueTracker=Bf(e))}function eu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Zc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function eo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _l(e,t){var n=t.checked;return Ne({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Na(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=cn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function tu(e,t){t=t.checked,t!=null&&wi(e,"checked",t,!1)}function jl(e,t){tu(e,t);var n=cn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Sl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Sl(e,t.type,cn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function _a(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Sl(e,t,n){(t!=="number"||eo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Dr=Array.isArray;function Zn(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+cn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function kl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return Ne({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ja(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(O(92));if(Dr(n)){if(1<n.length)throw Error(O(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:cn(n)}}function nu(e,t){var n=cn(t.value),r=cn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Sa(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ru(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ru(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Cs,su=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Cs=Cs||document.createElement("div"),Cs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Cs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Pr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hf=["Webkit","ms","Moz","O"];Object.keys(Pr).forEach(function(e){Hf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pr[t]=Pr[e]})});function ou(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Pr.hasOwnProperty(e)&&Pr[e]?(""+t).trim():t+"px"}function lu(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=ou(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Gf=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function El(e,t){if(t){if(Gf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function Dl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tl=null;function ji(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Il=null,er=null,tr=null;function ka(e){if(e=fs(e)){if(typeof Il!="function")throw Error(O(280));var t=e.stateNode;t&&(t=Io(t),Il(e.stateNode,e.type,t))}}function iu(e){er?tr?tr.push(e):tr=[e]:er=e}function au(){if(er){var e=er,t=tr;if(tr=er=null,ka(e),t)for(e=0;e<t.length;e++)ka(t[e])}}function cu(e,t){return e(t)}function uu(){}var Ko=!1;function du(e,t,n){if(Ko)return e(t,n);Ko=!0;try{return cu(e,t,n)}finally{Ko=!1,(er!==null||tr!==null)&&(uu(),au())}}function Gr(e,t){var n=e.stateNode;if(n===null)return null;var r=Io(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(O(231,t,typeof n));return n}var Pl=!1;if(Bt)try{var br={};Object.defineProperty(br,"passive",{get:function(){Pl=!0}}),window.addEventListener("test",br,br),window.removeEventListener("test",br,br)}catch{Pl=!1}function Wf(e,t,n,r,o,l,i,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var Rr=!1,to=null,no=!1,Rl=null,Vf={onError:function(e){Rr=!0,to=e}};function Qf(e,t,n,r,o,l,i,a,c){Rr=!1,to=null,Wf.apply(Vf,arguments)}function qf(e,t,n,r,o,l,i,a,c){if(Qf.apply(this,arguments),Rr){if(Rr){var u=to;Rr=!1,to=null}else throw Error(O(198));no||(no=!0,Rl=u)}}function Mn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function fu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ca(e){if(Mn(e)!==e)throw Error(O(188))}function Kf(e){var t=e.alternate;if(!t){if(t=Mn(e),t===null)throw Error(O(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return Ca(o),e;if(l===r)return Ca(o),t;l=l.sibling}throw Error(O(188))}if(n.return!==r.return)n=o,r=l;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=l;break}if(a===r){i=!0,r=o,n=l;break}a=a.sibling}if(!i){for(a=l.child;a;){if(a===n){i=!0,n=l,r=o;break}if(a===r){i=!0,r=l,n=o;break}a=a.sibling}if(!i)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?e:t}function hu(e){return e=Kf(e),e!==null?mu(e):null}function mu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=mu(e);if(t!==null)return t;e=e.sibling}return null}var pu=ft.unstable_scheduleCallback,Ea=ft.unstable_cancelCallback,Yf=ft.unstable_shouldYield,Jf=ft.unstable_requestPaint,Ce=ft.unstable_now,Xf=ft.unstable_getCurrentPriorityLevel,Si=ft.unstable_ImmediatePriority,gu=ft.unstable_UserBlockingPriority,ro=ft.unstable_NormalPriority,Zf=ft.unstable_LowPriority,xu=ft.unstable_IdlePriority,Co=null,Lt=null;function eh(e){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(Co,e,void 0,(e.current.flags&128)===128)}catch{}}var Et=Math.clz32?Math.clz32:rh,th=Math.log,nh=Math.LN2;function rh(e){return e>>>=0,e===0?32:31-(th(e)/nh|0)|0}var Es=64,Ds=4194304;function Tr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function so(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,l=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~o;a!==0?r=Tr(a):(l&=i,l!==0&&(r=Tr(l)))}else i=n&~o,i!==0?r=Tr(i):l!==0&&(r=Tr(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,l=t&-t,o>=l||o===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Et(t),o=1<<n,r|=e[n],t&=~o;return r}function sh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-Et(l),a=1<<i,c=o[i];c===-1?(!(a&n)||a&r)&&(o[i]=sh(a,t)):c<=t&&(e.expiredLanes|=a),l&=~a}}function Ol(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yu(){var e=Es;return Es<<=1,!(Es&4194240)&&(Es=64),e}function Yo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function us(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Et(t),e[t]=n}function lh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Et(n),l=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~l}}function ki(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Et(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var de=0;function vu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wu,Ci,bu,Nu,_u,Ll=!1,Ts=[],en=null,tn=null,nn=null,Wr=new Map,Vr=new Map,Yt=[],ih="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Da(e,t){switch(e){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":Wr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vr.delete(t.pointerId)}}function Nr(e,t,n,r,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[o]},t!==null&&(t=fs(t),t!==null&&Ci(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function ah(e,t,n,r,o){switch(t){case"focusin":return en=Nr(en,e,t,n,r,o),!0;case"dragenter":return tn=Nr(tn,e,t,n,r,o),!0;case"mouseover":return nn=Nr(nn,e,t,n,r,o),!0;case"pointerover":var l=o.pointerId;return Wr.set(l,Nr(Wr.get(l)||null,e,t,n,r,o)),!0;case"gotpointercapture":return l=o.pointerId,Vr.set(l,Nr(Vr.get(l)||null,e,t,n,r,o)),!0}return!1}function ju(e){var t=vn(e.target);if(t!==null){var n=Mn(t);if(n!==null){if(t=n.tag,t===13){if(t=fu(n),t!==null){e.blockedOn=t,_u(e.priority,function(){bu(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ml(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Tl=r,n.target.dispatchEvent(r),Tl=null}else return t=fs(n),t!==null&&Ci(t),e.blockedOn=n,!1;t.shift()}return!0}function Ta(e,t,n){Gs(e)&&n.delete(t)}function ch(){Ll=!1,en!==null&&Gs(en)&&(en=null),tn!==null&&Gs(tn)&&(tn=null),nn!==null&&Gs(nn)&&(nn=null),Wr.forEach(Ta),Vr.forEach(Ta)}function _r(e,t){e.blockedOn===t&&(e.blockedOn=null,Ll||(Ll=!0,ft.unstable_scheduleCallback(ft.unstable_NormalPriority,ch)))}function Qr(e){function t(o){return _r(o,e)}if(0<Ts.length){_r(Ts[0],e);for(var n=1;n<Ts.length;n++){var r=Ts[n];r.blockedOn===e&&(r.blockedOn=null)}}for(en!==null&&_r(en,e),tn!==null&&_r(tn,e),nn!==null&&_r(nn,e),Wr.forEach(t),Vr.forEach(t),n=0;n<Yt.length;n++)r=Yt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Yt.length&&(n=Yt[0],n.blockedOn===null);)ju(n),n.blockedOn===null&&Yt.shift()}var nr=Vt.ReactCurrentBatchConfig,oo=!0;function uh(e,t,n,r){var o=de,l=nr.transition;nr.transition=null;try{de=1,Ei(e,t,n,r)}finally{de=o,nr.transition=l}}function dh(e,t,n,r){var o=de,l=nr.transition;nr.transition=null;try{de=4,Ei(e,t,n,r)}finally{de=o,nr.transition=l}}function Ei(e,t,n,r){if(oo){var o=Ml(e,t,n,r);if(o===null)ll(e,t,r,lo,n),Da(e,r);else if(ah(o,e,t,n,r))r.stopPropagation();else if(Da(e,r),t&4&&-1<ih.indexOf(e)){for(;o!==null;){var l=fs(o);if(l!==null&&wu(l),l=Ml(e,t,n,r),l===null&&ll(e,t,r,lo,n),l===o)break;o=l}o!==null&&r.stopPropagation()}else ll(e,t,r,null,n)}}var lo=null;function Ml(e,t,n,r){if(lo=null,e=ji(r),e=vn(e),e!==null)if(t=Mn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=fu(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return lo=e,null}function Su(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xf()){case Si:return 1;case gu:return 4;case ro:case Zf:return 16;case xu:return 536870912;default:return 16}default:return 16}}var Xt=null,Di=null,Ws=null;function ku(){if(Ws)return Ws;var e,t=Di,n=t.length,r,o="value"in Xt?Xt.value:Xt.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[l-r];r++);return Ws=o.slice(e,1<r?1-r:void 0)}function Vs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Is(){return!0}function Ia(){return!1}function mt(e){function t(n,r,o,l,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(l):l[a]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Is:Ia,this.isPropagationStopped=Ia,this}return Ne(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Is)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Is)},persist:function(){},isPersistent:Is}),t}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ti=mt(gr),ds=Ne({},gr,{view:0,detail:0}),fh=mt(ds),Jo,Xo,jr,Eo=Ne({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ii,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jr&&(jr&&e.type==="mousemove"?(Jo=e.screenX-jr.screenX,Xo=e.screenY-jr.screenY):Xo=Jo=0,jr=e),Jo)},movementY:function(e){return"movementY"in e?e.movementY:Xo}}),Pa=mt(Eo),hh=Ne({},Eo,{dataTransfer:0}),mh=mt(hh),ph=Ne({},ds,{relatedTarget:0}),Zo=mt(ph),gh=Ne({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),xh=mt(gh),yh=Ne({},gr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vh=mt(yh),wh=Ne({},gr,{data:0}),Ra=mt(wh),bh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_h={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_h[e])?!!t[e]:!1}function Ii(){return jh}var Sh=Ne({},ds,{key:function(e){if(e.key){var t=bh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ii,charCode:function(e){return e.type==="keypress"?Vs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kh=mt(Sh),Ch=Ne({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oa=mt(Ch),Eh=Ne({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ii}),Dh=mt(Eh),Th=Ne({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ih=mt(Th),Ph=Ne({},Eo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rh=mt(Ph),Oh=[9,13,27,32],Pi=Bt&&"CompositionEvent"in window,Or=null;Bt&&"documentMode"in document&&(Or=document.documentMode);var Lh=Bt&&"TextEvent"in window&&!Or,Cu=Bt&&(!Pi||Or&&8<Or&&11>=Or),La=" ",Ma=!1;function Eu(e,t){switch(e){case"keyup":return Oh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Du(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hn=!1;function Mh(e,t){switch(e){case"compositionend":return Du(t);case"keypress":return t.which!==32?null:(Ma=!0,La);case"textInput":return e=t.data,e===La&&Ma?null:e;default:return null}}function Ah(e,t){if(Hn)return e==="compositionend"||!Pi&&Eu(e,t)?(e=ku(),Ws=Di=Xt=null,Hn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cu&&t.locale!=="ko"?null:t.data;default:return null}}var Uh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Aa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Uh[e.type]:t==="textarea"}function Tu(e,t,n,r){iu(r),t=io(t,"onChange"),0<t.length&&(n=new Ti("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Lr=null,qr=null;function $h(e){Fu(e,0)}function Do(e){var t=Vn(e);if(eu(t))return e}function zh(e,t){if(e==="change")return t}var Iu=!1;if(Bt){var el;if(Bt){var tl="oninput"in document;if(!tl){var Ua=document.createElement("div");Ua.setAttribute("oninput","return;"),tl=typeof Ua.oninput=="function"}el=tl}else el=!1;Iu=el&&(!document.documentMode||9<document.documentMode)}function $a(){Lr&&(Lr.detachEvent("onpropertychange",Pu),qr=Lr=null)}function Pu(e){if(e.propertyName==="value"&&Do(qr)){var t=[];Tu(t,qr,e,ji(e)),du($h,t)}}function Fh(e,t,n){e==="focusin"?($a(),Lr=t,qr=n,Lr.attachEvent("onpropertychange",Pu)):e==="focusout"&&$a()}function Bh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Do(qr)}function Hh(e,t){if(e==="click")return Do(t)}function Gh(e,t){if(e==="input"||e==="change")return Do(t)}function Wh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var It=typeof Object.is=="function"?Object.is:Wh;function Kr(e,t){if(It(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!yl.call(t,o)||!It(e[o],t[o]))return!1}return!0}function za(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fa(e,t){var n=za(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=za(n)}}function Ru(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ru(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ou(){for(var e=window,t=eo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=eo(e.document)}return t}function Ri(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Vh(e){var t=Ou(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ru(n.ownerDocument.documentElement,n)){if(r!==null&&Ri(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,l=Math.min(r.start,o);r=r.end===void 0?l:Math.min(r.end,o),!e.extend&&l>r&&(o=r,r=l,l=o),o=Fa(n,l);var i=Fa(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qh=Bt&&"documentMode"in document&&11>=document.documentMode,Gn=null,Al=null,Mr=null,Ul=!1;function Ba(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ul||Gn==null||Gn!==eo(r)||(r=Gn,"selectionStart"in r&&Ri(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mr&&Kr(Mr,r)||(Mr=r,r=io(Al,"onSelect"),0<r.length&&(t=new Ti("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Gn)))}function Ps(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Wn={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionend:Ps("Transition","TransitionEnd")},nl={},Lu={};Bt&&(Lu=document.createElement("div").style,"AnimationEvent"in window||(delete Wn.animationend.animation,delete Wn.animationiteration.animation,delete Wn.animationstart.animation),"TransitionEvent"in window||delete Wn.transitionend.transition);function To(e){if(nl[e])return nl[e];if(!Wn[e])return e;var t=Wn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Lu)return nl[e]=t[n];return e}var Mu=To("animationend"),Au=To("animationiteration"),Uu=To("animationstart"),$u=To("transitionend"),zu=new Map,Ha="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(e,t){zu.set(e,t),Ln(t,[e])}for(var rl=0;rl<Ha.length;rl++){var sl=Ha[rl],qh=sl.toLowerCase(),Kh=sl[0].toUpperCase()+sl.slice(1);dn(qh,"on"+Kh)}dn(Mu,"onAnimationEnd");dn(Au,"onAnimationIteration");dn(Uu,"onAnimationStart");dn("dblclick","onDoubleClick");dn("focusin","onFocus");dn("focusout","onBlur");dn($u,"onTransitionEnd");or("onMouseEnter",["mouseout","mouseover"]);or("onMouseLeave",["mouseout","mouseover"]);or("onPointerEnter",["pointerout","pointerover"]);or("onPointerLeave",["pointerout","pointerover"]);Ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ln("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Ga(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,qf(r,t,void 0,e),e.currentTarget=null}function Fu(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==l&&o.isPropagationStopped())break e;Ga(o,a,u),l=c}else for(i=0;i<r.length;i++){if(a=r[i],c=a.instance,u=a.currentTarget,a=a.listener,c!==l&&o.isPropagationStopped())break e;Ga(o,a,u),l=c}}}if(no)throw e=Rl,no=!1,Rl=null,e}function pe(e,t){var n=t[Hl];n===void 0&&(n=t[Hl]=new Set);var r=e+"__bubble";n.has(r)||(Bu(t,e,2,!1),n.add(r))}function ol(e,t,n){var r=0;t&&(r|=4),Bu(n,e,r,t)}var Rs="_reactListening"+Math.random().toString(36).slice(2);function Yr(e){if(!e[Rs]){e[Rs]=!0,Kc.forEach(function(n){n!=="selectionchange"&&(Yh.has(n)||ol(n,!1,e),ol(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rs]||(t[Rs]=!0,ol("selectionchange",!1,t))}}function Bu(e,t,n,r){switch(Su(t)){case 1:var o=uh;break;case 4:o=dh;break;default:o=Ei}n=o.bind(null,t,n,e),o=void 0,!Pl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ll(e,t,n,r,o){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;i=i.return}for(;a!==null;){if(i=vn(a),i===null)return;if(c=i.tag,c===5||c===6){r=l=i;continue e}a=a.parentNode}}r=r.return}du(function(){var u=l,h=ji(n),m=[];e:{var g=zu.get(e);if(g!==void 0){var y=Ti,w=e;switch(e){case"keypress":if(Vs(n)===0)break e;case"keydown":case"keyup":y=kh;break;case"focusin":w="focus",y=Zo;break;case"focusout":w="blur",y=Zo;break;case"beforeblur":case"afterblur":y=Zo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Pa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=mh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Dh;break;case Mu:case Au:case Uu:y=xh;break;case $u:y=Ih;break;case"scroll":y=fh;break;case"wheel":y=Rh;break;case"copy":case"cut":case"paste":y=vh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Oa}var k=(t&4)!==0,C=!k&&e==="scroll",f=k?g!==null?g+"Capture":null:g;k=[];for(var d=u,p;d!==null;){p=d;var v=p.stateNode;if(p.tag===5&&v!==null&&(p=v,f!==null&&(v=Gr(d,f),v!=null&&k.push(Jr(d,v,p)))),C)break;d=d.return}0<k.length&&(g=new y(g,w,null,n,h),m.push({event:g,listeners:k}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",g&&n!==Tl&&(w=n.relatedTarget||n.fromElement)&&(vn(w)||w[Ht]))break e;if((y||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=u,w=w?vn(w):null,w!==null&&(C=Mn(w),w!==C||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=u),y!==w)){if(k=Pa,v="onMouseLeave",f="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(k=Oa,v="onPointerLeave",f="onPointerEnter",d="pointer"),C=y==null?g:Vn(y),p=w==null?g:Vn(w),g=new k(v,d+"leave",y,n,h),g.target=C,g.relatedTarget=p,v=null,vn(h)===u&&(k=new k(f,d+"enter",w,n,h),k.target=p,k.relatedTarget=C,v=k),C=v,y&&w)t:{for(k=y,f=w,d=0,p=k;p;p=zn(p))d++;for(p=0,v=f;v;v=zn(v))p++;for(;0<d-p;)k=zn(k),d--;for(;0<p-d;)f=zn(f),p--;for(;d--;){if(k===f||f!==null&&k===f.alternate)break t;k=zn(k),f=zn(f)}k=null}else k=null;y!==null&&Wa(m,g,y,k,!1),w!==null&&C!==null&&Wa(m,C,w,k,!0)}}e:{if(g=u?Vn(u):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var j=zh;else if(Aa(g))if(Iu)j=Gh;else{j=Bh;var E=Fh}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(j=Hh);if(j&&(j=j(e,u))){Tu(m,j,n,h);break e}E&&E(e,g,u),e==="focusout"&&(E=g._wrapperState)&&E.controlled&&g.type==="number"&&Sl(g,"number",g.value)}switch(E=u?Vn(u):window,e){case"focusin":(Aa(E)||E.contentEditable==="true")&&(Gn=E,Al=u,Mr=null);break;case"focusout":Mr=Al=Gn=null;break;case"mousedown":Ul=!0;break;case"contextmenu":case"mouseup":case"dragend":Ul=!1,Ba(m,n,h);break;case"selectionchange":if(Qh)break;case"keydown":case"keyup":Ba(m,n,h)}var D;if(Pi)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Hn?Eu(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Cu&&n.locale!=="ko"&&(Hn||R!=="onCompositionStart"?R==="onCompositionEnd"&&Hn&&(D=ku()):(Xt=h,Di="value"in Xt?Xt.value:Xt.textContent,Hn=!0)),E=io(u,R),0<E.length&&(R=new Ra(R,e,null,n,h),m.push({event:R,listeners:E}),D?R.data=D:(D=Du(n),D!==null&&(R.data=D)))),(D=Lh?Mh(e,n):Ah(e,n))&&(u=io(u,"onBeforeInput"),0<u.length&&(h=new Ra("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:u}),h.data=D))}Fu(m,t)})}function Jr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function io(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=Gr(e,n),l!=null&&r.unshift(Jr(e,l,o)),l=Gr(e,t),l!=null&&r.push(Jr(e,l,o))),e=e.return}return r}function zn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Wa(e,t,n,r,o){for(var l=t._reactName,i=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,o?(c=Gr(n,l),c!=null&&i.unshift(Jr(n,c,a))):o||(c=Gr(n,l),c!=null&&i.push(Jr(n,c,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Jh=/\r\n?/g,Xh=/\u0000|\uFFFD/g;function Va(e){return(typeof e=="string"?e:""+e).replace(Jh,`
`).replace(Xh,"")}function Os(e,t,n){if(t=Va(t),Va(e)!==t&&n)throw Error(O(425))}function ao(){}var $l=null,zl=null;function Fl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bl=typeof setTimeout=="function"?setTimeout:void 0,Zh=typeof clearTimeout=="function"?clearTimeout:void 0,Qa=typeof Promise=="function"?Promise:void 0,em=typeof queueMicrotask=="function"?queueMicrotask:typeof Qa<"u"?function(e){return Qa.resolve(null).then(e).catch(tm)}:Bl;function tm(e){setTimeout(function(){throw e})}function il(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Qr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Qr(t)}function rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qa(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var xr=Math.random().toString(36).slice(2),Ot="__reactFiber$"+xr,Xr="__reactProps$"+xr,Ht="__reactContainer$"+xr,Hl="__reactEvents$"+xr,nm="__reactListeners$"+xr,rm="__reactHandles$"+xr;function vn(e){var t=e[Ot];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ht]||n[Ot]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=qa(e);e!==null;){if(n=e[Ot])return n;e=qa(e)}return t}e=n,n=e.parentNode}return null}function fs(e){return e=e[Ot]||e[Ht],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function Io(e){return e[Xr]||null}var Gl=[],Qn=-1;function fn(e){return{current:e}}function ge(e){0>Qn||(e.current=Gl[Qn],Gl[Qn]=null,Qn--)}function he(e,t){Qn++,Gl[Qn]=e.current,e.current=t}var un={},Ve=fn(un),nt=fn(!1),Cn=un;function lr(e,t){var n=e.type.contextTypes;if(!n)return un;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function rt(e){return e=e.childContextTypes,e!=null}function co(){ge(nt),ge(Ve)}function Ka(e,t,n){if(Ve.current!==un)throw Error(O(168));he(Ve,t),he(nt,n)}function Hu(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(O(108,Ff(e)||"Unknown",o));return Ne({},n,r)}function uo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||un,Cn=Ve.current,he(Ve,e),he(nt,nt.current),!0}function Ya(e,t,n){var r=e.stateNode;if(!r)throw Error(O(169));n?(e=Hu(e,t,Cn),r.__reactInternalMemoizedMergedChildContext=e,ge(nt),ge(Ve),he(Ve,e)):ge(nt),he(nt,n)}var Ut=null,Po=!1,al=!1;function Gu(e){Ut===null?Ut=[e]:Ut.push(e)}function sm(e){Po=!0,Gu(e)}function hn(){if(!al&&Ut!==null){al=!0;var e=0,t=de;try{var n=Ut;for(de=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ut=null,Po=!1}catch(o){throw Ut!==null&&(Ut=Ut.slice(e+1)),pu(Si,hn),o}finally{de=t,al=!1}}return null}var qn=[],Kn=0,fo=null,ho=0,gt=[],xt=0,En=null,$t=1,zt="";function gn(e,t){qn[Kn++]=ho,qn[Kn++]=fo,fo=e,ho=t}function Wu(e,t,n){gt[xt++]=$t,gt[xt++]=zt,gt[xt++]=En,En=e;var r=$t;e=zt;var o=32-Et(r)-1;r&=~(1<<o),n+=1;var l=32-Et(t)+o;if(30<l){var i=o-o%5;l=(r&(1<<i)-1).toString(32),r>>=i,o-=i,$t=1<<32-Et(t)+o|n<<o|r,zt=l+e}else $t=1<<l|n<<o|r,zt=e}function Oi(e){e.return!==null&&(gn(e,1),Wu(e,1,0))}function Li(e){for(;e===fo;)fo=qn[--Kn],qn[Kn]=null,ho=qn[--Kn],qn[Kn]=null;for(;e===En;)En=gt[--xt],gt[xt]=null,zt=gt[--xt],gt[xt]=null,$t=gt[--xt],gt[xt]=null}var dt=null,it=null,xe=!1,kt=null;function Vu(e,t){var n=yt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ja(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,dt=e,it=rn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,dt=e,it=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=En!==null?{id:$t,overflow:zt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=yt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,dt=e,it=null,!0):!1;default:return!1}}function Wl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Vl(e){if(xe){var t=it;if(t){var n=t;if(!Ja(e,t)){if(Wl(e))throw Error(O(418));t=rn(n.nextSibling);var r=dt;t&&Ja(e,t)?Vu(r,n):(e.flags=e.flags&-4097|2,xe=!1,dt=e)}}else{if(Wl(e))throw Error(O(418));e.flags=e.flags&-4097|2,xe=!1,dt=e}}}function Xa(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;dt=e}function Ls(e){if(e!==dt)return!1;if(!xe)return Xa(e),xe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fl(e.type,e.memoizedProps)),t&&(t=it)){if(Wl(e))throw Qu(),Error(O(418));for(;t;)Vu(e,t),t=rn(t.nextSibling)}if(Xa(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){it=rn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}it=null}}else it=dt?rn(e.stateNode.nextSibling):null;return!0}function Qu(){for(var e=it;e;)e=rn(e.nextSibling)}function ir(){it=dt=null,xe=!1}function Mi(e){kt===null?kt=[e]:kt.push(e)}var om=Vt.ReactCurrentBatchConfig;function Sr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,e));var o=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var a=o.refs;i===null?delete a[l]:a[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,e))}return e}function Ms(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Za(e){var t=e._init;return t(e._payload)}function qu(e){function t(f,d){if(e){var p=f.deletions;p===null?(f.deletions=[d],f.flags|=16):p.push(d)}}function n(f,d){if(!e)return null;for(;d!==null;)t(f,d),d=d.sibling;return null}function r(f,d){for(f=new Map;d!==null;)d.key!==null?f.set(d.key,d):f.set(d.index,d),d=d.sibling;return f}function o(f,d){return f=an(f,d),f.index=0,f.sibling=null,f}function l(f,d,p){return f.index=p,e?(p=f.alternate,p!==null?(p=p.index,p<d?(f.flags|=2,d):p):(f.flags|=2,d)):(f.flags|=1048576,d)}function i(f){return e&&f.alternate===null&&(f.flags|=2),f}function a(f,d,p,v){return d===null||d.tag!==6?(d=pl(p,f.mode,v),d.return=f,d):(d=o(d,p),d.return=f,d)}function c(f,d,p,v){var j=p.type;return j===Bn?h(f,d,p.props.children,v,p.key):d!==null&&(d.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===qt&&Za(j)===d.type)?(v=o(d,p.props),v.ref=Sr(f,d,p),v.return=f,v):(v=Zs(p.type,p.key,p.props,null,f.mode,v),v.ref=Sr(f,d,p),v.return=f,v)}function u(f,d,p,v){return d===null||d.tag!==4||d.stateNode.containerInfo!==p.containerInfo||d.stateNode.implementation!==p.implementation?(d=gl(p,f.mode,v),d.return=f,d):(d=o(d,p.children||[]),d.return=f,d)}function h(f,d,p,v,j){return d===null||d.tag!==7?(d=jn(p,f.mode,v,j),d.return=f,d):(d=o(d,p),d.return=f,d)}function m(f,d,p){if(typeof d=="string"&&d!==""||typeof d=="number")return d=pl(""+d,f.mode,p),d.return=f,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Ss:return p=Zs(d.type,d.key,d.props,null,f.mode,p),p.ref=Sr(f,null,d),p.return=f,p;case Fn:return d=gl(d,f.mode,p),d.return=f,d;case qt:var v=d._init;return m(f,v(d._payload),p)}if(Dr(d)||wr(d))return d=jn(d,f.mode,p,null),d.return=f,d;Ms(f,d)}return null}function g(f,d,p,v){var j=d!==null?d.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return j!==null?null:a(f,d,""+p,v);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ss:return p.key===j?c(f,d,p,v):null;case Fn:return p.key===j?u(f,d,p,v):null;case qt:return j=p._init,g(f,d,j(p._payload),v)}if(Dr(p)||wr(p))return j!==null?null:h(f,d,p,v,null);Ms(f,p)}return null}function y(f,d,p,v,j){if(typeof v=="string"&&v!==""||typeof v=="number")return f=f.get(p)||null,a(d,f,""+v,j);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ss:return f=f.get(v.key===null?p:v.key)||null,c(d,f,v,j);case Fn:return f=f.get(v.key===null?p:v.key)||null,u(d,f,v,j);case qt:var E=v._init;return y(f,d,p,E(v._payload),j)}if(Dr(v)||wr(v))return f=f.get(p)||null,h(d,f,v,j,null);Ms(d,v)}return null}function w(f,d,p,v){for(var j=null,E=null,D=d,R=d=0,U=null;D!==null&&R<p.length;R++){D.index>R?(U=D,D=null):U=D.sibling;var I=g(f,D,p[R],v);if(I===null){D===null&&(D=U);break}e&&D&&I.alternate===null&&t(f,D),d=l(I,d,R),E===null?j=I:E.sibling=I,E=I,D=U}if(R===p.length)return n(f,D),xe&&gn(f,R),j;if(D===null){for(;R<p.length;R++)D=m(f,p[R],v),D!==null&&(d=l(D,d,R),E===null?j=D:E.sibling=D,E=D);return xe&&gn(f,R),j}for(D=r(f,D);R<p.length;R++)U=y(D,f,R,p[R],v),U!==null&&(e&&U.alternate!==null&&D.delete(U.key===null?R:U.key),d=l(U,d,R),E===null?j=U:E.sibling=U,E=U);return e&&D.forEach(function(Y){return t(f,Y)}),xe&&gn(f,R),j}function k(f,d,p,v){var j=wr(p);if(typeof j!="function")throw Error(O(150));if(p=j.call(p),p==null)throw Error(O(151));for(var E=j=null,D=d,R=d=0,U=null,I=p.next();D!==null&&!I.done;R++,I=p.next()){D.index>R?(U=D,D=null):U=D.sibling;var Y=g(f,D,I.value,v);if(Y===null){D===null&&(D=U);break}e&&D&&Y.alternate===null&&t(f,D),d=l(Y,d,R),E===null?j=Y:E.sibling=Y,E=Y,D=U}if(I.done)return n(f,D),xe&&gn(f,R),j;if(D===null){for(;!I.done;R++,I=p.next())I=m(f,I.value,v),I!==null&&(d=l(I,d,R),E===null?j=I:E.sibling=I,E=I);return xe&&gn(f,R),j}for(D=r(f,D);!I.done;R++,I=p.next())I=y(D,f,R,I.value,v),I!==null&&(e&&I.alternate!==null&&D.delete(I.key===null?R:I.key),d=l(I,d,R),E===null?j=I:E.sibling=I,E=I);return e&&D.forEach(function(L){return t(f,L)}),xe&&gn(f,R),j}function C(f,d,p,v){if(typeof p=="object"&&p!==null&&p.type===Bn&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Ss:e:{for(var j=p.key,E=d;E!==null;){if(E.key===j){if(j=p.type,j===Bn){if(E.tag===7){n(f,E.sibling),d=o(E,p.props.children),d.return=f,f=d;break e}}else if(E.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===qt&&Za(j)===E.type){n(f,E.sibling),d=o(E,p.props),d.ref=Sr(f,E,p),d.return=f,f=d;break e}n(f,E);break}else t(f,E);E=E.sibling}p.type===Bn?(d=jn(p.props.children,f.mode,v,p.key),d.return=f,f=d):(v=Zs(p.type,p.key,p.props,null,f.mode,v),v.ref=Sr(f,d,p),v.return=f,f=v)}return i(f);case Fn:e:{for(E=p.key;d!==null;){if(d.key===E)if(d.tag===4&&d.stateNode.containerInfo===p.containerInfo&&d.stateNode.implementation===p.implementation){n(f,d.sibling),d=o(d,p.children||[]),d.return=f,f=d;break e}else{n(f,d);break}else t(f,d);d=d.sibling}d=gl(p,f.mode,v),d.return=f,f=d}return i(f);case qt:return E=p._init,C(f,d,E(p._payload),v)}if(Dr(p))return w(f,d,p,v);if(wr(p))return k(f,d,p,v);Ms(f,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,d!==null&&d.tag===6?(n(f,d.sibling),d=o(d,p),d.return=f,f=d):(n(f,d),d=pl(p,f.mode,v),d.return=f,f=d),i(f)):n(f,d)}return C}var ar=qu(!0),Ku=qu(!1),mo=fn(null),po=null,Yn=null,Ai=null;function Ui(){Ai=Yn=po=null}function $i(e){var t=mo.current;ge(mo),e._currentValue=t}function Ql(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function rr(e,t){po=e,Ai=Yn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(tt=!0),e.firstContext=null)}function wt(e){var t=e._currentValue;if(Ai!==e)if(e={context:e,memoizedValue:t,next:null},Yn===null){if(po===null)throw Error(O(308));Yn=e,po.dependencies={lanes:0,firstContext:e}}else Yn=Yn.next=e;return t}var wn=null;function zi(e){wn===null?wn=[e]:wn.push(e)}function Yu(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,zi(t)):(n.next=o.next,o.next=n),t.interleaved=n,Gt(e,r)}function Gt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Kt=!1;function Fi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ju(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ft(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Gt(e,n)}return o=r.interleaved,o===null?(t.next=t,zi(r)):(t.next=o.next,o.next=t),r.interleaved=t,Gt(e,n)}function Qs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ki(e,n)}}function ec(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=i:l=l.next=i,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function go(e,t,n,r){var o=e.updateQueue;Kt=!1;var l=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var c=a,u=c.next;c.next=null,i===null?l=u:i.next=u,i=c;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==i&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(l!==null){var m=o.baseState;i=0,h=u=c=null,a=l;do{var g=a.lane,y=a.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=e,k=a;switch(g=t,y=n,k.tag){case 1:if(w=k.payload,typeof w=="function"){m=w.call(y,m,g);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=k.payload,g=typeof w=="function"?w.call(y,m,g):w,g==null)break e;m=Ne({},m,g);break e;case 2:Kt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,g=o.effects,g===null?o.effects=[a]:g.push(a))}else y={eventTime:y,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=y,c=m):h=h.next=y,i|=g;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;g=a,a=g.next,g.next=null,o.lastBaseUpdate=g,o.shared.pending=null}}while(!0);if(h===null&&(c=m),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=h,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else l===null&&(o.shared.lanes=0);Tn|=i,e.lanes=i,e.memoizedState=m}}function tc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(O(191,o));o.call(r)}}}var hs={},Mt=fn(hs),Zr=fn(hs),es=fn(hs);function bn(e){if(e===hs)throw Error(O(174));return e}function Bi(e,t){switch(he(es,t),he(Zr,e),he(Mt,hs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Cl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Cl(t,e)}ge(Mt),he(Mt,t)}function cr(){ge(Mt),ge(Zr),ge(es)}function Xu(e){bn(es.current);var t=bn(Mt.current),n=Cl(t,e.type);t!==n&&(he(Zr,e),he(Mt,n))}function Hi(e){Zr.current===e&&(ge(Mt),ge(Zr))}var ve=fn(0);function xo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cl=[];function Gi(){for(var e=0;e<cl.length;e++)cl[e]._workInProgressVersionPrimary=null;cl.length=0}var qs=Vt.ReactCurrentDispatcher,ul=Vt.ReactCurrentBatchConfig,Dn=0,be=null,Re=null,Ae=null,yo=!1,Ar=!1,ts=0,lm=0;function Be(){throw Error(O(321))}function Wi(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!It(e[n],t[n]))return!1;return!0}function Vi(e,t,n,r,o,l){if(Dn=l,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qs.current=e===null||e.memoizedState===null?um:dm,e=n(r,o),Ar){l=0;do{if(Ar=!1,ts=0,25<=l)throw Error(O(301));l+=1,Ae=Re=null,t.updateQueue=null,qs.current=fm,e=n(r,o)}while(Ar)}if(qs.current=vo,t=Re!==null&&Re.next!==null,Dn=0,Ae=Re=be=null,yo=!1,t)throw Error(O(300));return e}function Qi(){var e=ts!==0;return ts=0,e}function Rt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?be.memoizedState=Ae=e:Ae=Ae.next=e,Ae}function bt(){if(Re===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Re.next;var t=Ae===null?be.memoizedState:Ae.next;if(t!==null)Ae=t,Re=e;else{if(e===null)throw Error(O(310));Re=e,e={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Ae===null?be.memoizedState=Ae=e:Ae=Ae.next=e}return Ae}function ns(e,t){return typeof t=="function"?t(e):t}function dl(e){var t=bt(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=Re,o=r.baseQueue,l=n.pending;if(l!==null){if(o!==null){var i=o.next;o.next=l.next,l.next=i}r.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,r=r.baseState;var a=i=null,c=null,u=l;do{var h=u.lane;if((Dn&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var m={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=m,i=r):c=c.next=m,be.lanes|=h,Tn|=h}u=u.next}while(u!==null&&u!==l);c===null?i=r:c.next=a,It(r,t.memoizedState)||(tt=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do l=o.lane,be.lanes|=l,Tn|=l,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function fl(e){var t=bt(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do l=e(l,i.action),i=i.next;while(i!==o);It(l,t.memoizedState)||(tt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Zu(){}function ed(e,t){var n=be,r=bt(),o=t(),l=!It(r.memoizedState,o);if(l&&(r.memoizedState=o,tt=!0),r=r.queue,qi(rd.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||Ae!==null&&Ae.memoizedState.tag&1){if(n.flags|=2048,rs(9,nd.bind(null,n,r,o,t),void 0,null),Ue===null)throw Error(O(349));Dn&30||td(n,t,o)}return o}function td(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function nd(e,t,n,r){t.value=n,t.getSnapshot=r,sd(t)&&od(e)}function rd(e,t,n){return n(function(){sd(t)&&od(e)})}function sd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!It(e,n)}catch{return!0}}function od(e){var t=Gt(e,1);t!==null&&Dt(t,e,1,-1)}function nc(e){var t=Rt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:e},t.queue=e,e=e.dispatch=cm.bind(null,be,e),[t.memoizedState,e]}function rs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ld(){return bt().memoizedState}function Ks(e,t,n,r){var o=Rt();be.flags|=e,o.memoizedState=rs(1|t,n,void 0,r===void 0?null:r)}function Ro(e,t,n,r){var o=bt();r=r===void 0?null:r;var l=void 0;if(Re!==null){var i=Re.memoizedState;if(l=i.destroy,r!==null&&Wi(r,i.deps)){o.memoizedState=rs(t,n,l,r);return}}be.flags|=e,o.memoizedState=rs(1|t,n,l,r)}function rc(e,t){return Ks(8390656,8,e,t)}function qi(e,t){return Ro(2048,8,e,t)}function id(e,t){return Ro(4,2,e,t)}function ad(e,t){return Ro(4,4,e,t)}function cd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ud(e,t,n){return n=n!=null?n.concat([e]):null,Ro(4,4,cd.bind(null,t,e),n)}function Ki(){}function dd(e,t){var n=bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function fd(e,t){var n=bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function hd(e,t,n){return Dn&21?(It(n,t)||(n=yu(),be.lanes|=n,Tn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,tt=!0),e.memoizedState=n)}function im(e,t){var n=de;de=n!==0&&4>n?n:4,e(!0);var r=ul.transition;ul.transition={};try{e(!1),t()}finally{de=n,ul.transition=r}}function md(){return bt().memoizedState}function am(e,t,n){var r=ln(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pd(e))gd(t,n);else if(n=Yu(e,t,n,r),n!==null){var o=qe();Dt(n,e,r,o),xd(n,t,r)}}function cm(e,t,n){var r=ln(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pd(e))gd(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,a=l(i,n);if(o.hasEagerState=!0,o.eagerState=a,It(a,i)){var c=t.interleaved;c===null?(o.next=o,zi(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=Yu(e,t,o,r),n!==null&&(o=qe(),Dt(n,e,r,o),xd(n,t,r))}}function pd(e){var t=e.alternate;return e===be||t!==null&&t===be}function gd(e,t){Ar=yo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function xd(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ki(e,n)}}var vo={readContext:wt,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useInsertionEffect:Be,useLayoutEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useMutableSource:Be,useSyncExternalStore:Be,useId:Be,unstable_isNewReconciler:!1},um={readContext:wt,useCallback:function(e,t){return Rt().memoizedState=[e,t===void 0?null:t],e},useContext:wt,useEffect:rc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ks(4194308,4,cd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ks(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ks(4,2,e,t)},useMemo:function(e,t){var n=Rt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Rt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=am.bind(null,be,e),[r.memoizedState,e]},useRef:function(e){var t=Rt();return e={current:e},t.memoizedState=e},useState:nc,useDebugValue:Ki,useDeferredValue:function(e){return Rt().memoizedState=e},useTransition:function(){var e=nc(!1),t=e[0];return e=im.bind(null,e[1]),Rt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=be,o=Rt();if(xe){if(n===void 0)throw Error(O(407));n=n()}else{if(n=t(),Ue===null)throw Error(O(349));Dn&30||td(r,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,rc(rd.bind(null,r,l,e),[e]),r.flags|=2048,rs(9,nd.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Rt(),t=Ue.identifierPrefix;if(xe){var n=zt,r=$t;n=(r&~(1<<32-Et(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ts++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=lm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dm={readContext:wt,useCallback:dd,useContext:wt,useEffect:qi,useImperativeHandle:ud,useInsertionEffect:id,useLayoutEffect:ad,useMemo:fd,useReducer:dl,useRef:ld,useState:function(){return dl(ns)},useDebugValue:Ki,useDeferredValue:function(e){var t=bt();return hd(t,Re.memoizedState,e)},useTransition:function(){var e=dl(ns)[0],t=bt().memoizedState;return[e,t]},useMutableSource:Zu,useSyncExternalStore:ed,useId:md,unstable_isNewReconciler:!1},fm={readContext:wt,useCallback:dd,useContext:wt,useEffect:qi,useImperativeHandle:ud,useInsertionEffect:id,useLayoutEffect:ad,useMemo:fd,useReducer:fl,useRef:ld,useState:function(){return fl(ns)},useDebugValue:Ki,useDeferredValue:function(e){var t=bt();return Re===null?t.memoizedState=e:hd(t,Re.memoizedState,e)},useTransition:function(){var e=fl(ns)[0],t=bt().memoizedState;return[e,t]},useMutableSource:Zu,useSyncExternalStore:ed,useId:md,unstable_isNewReconciler:!1};function jt(e,t){if(e&&e.defaultProps){t=Ne({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ql(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ne({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Oo={isMounted:function(e){return(e=e._reactInternals)?Mn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qe(),o=ln(e),l=Ft(r,o);l.payload=t,n!=null&&(l.callback=n),t=sn(e,l,o),t!==null&&(Dt(t,e,o,r),Qs(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qe(),o=ln(e),l=Ft(r,o);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=sn(e,l,o),t!==null&&(Dt(t,e,o,r),Qs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qe(),r=ln(e),o=Ft(n,r);o.tag=2,t!=null&&(o.callback=t),t=sn(e,o,r),t!==null&&(Dt(t,e,r,n),Qs(t,e,r))}};function sc(e,t,n,r,o,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,i):t.prototype&&t.prototype.isPureReactComponent?!Kr(n,r)||!Kr(o,l):!0}function yd(e,t,n){var r=!1,o=un,l=t.contextType;return typeof l=="object"&&l!==null?l=wt(l):(o=rt(t)?Cn:Ve.current,r=t.contextTypes,l=(r=r!=null)?lr(e,o):un),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Oo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function oc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Oo.enqueueReplaceState(t,t.state,null)}function Kl(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Fi(e);var l=t.contextType;typeof l=="object"&&l!==null?o.context=wt(l):(l=rt(t)?Cn:Ve.current,o.context=lr(e,l)),o.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ql(e,t,l,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Oo.enqueueReplaceState(o,o.state,null),go(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function ur(e,t){try{var n="",r=t;do n+=zf(r),r=r.return;while(r);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:o,digest:null}}function hl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Yl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hm=typeof WeakMap=="function"?WeakMap:Map;function vd(e,t,n){n=Ft(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){bo||(bo=!0,li=r),Yl(e,t)},n}function wd(e,t,n){n=Ft(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Yl(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Yl(e,t),typeof r!="function"&&(on===null?on=new Set([this]):on.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function lc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new hm;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Cm.bind(null,e,t,n),t.then(e,e))}function ic(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ac(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ft(-1,1),t.tag=2,sn(n,t,1))),n.lanes|=1),e)}var mm=Vt.ReactCurrentOwner,tt=!1;function Qe(e,t,n,r){t.child=e===null?Ku(t,null,n,r):ar(t,e.child,n,r)}function cc(e,t,n,r,o){n=n.render;var l=t.ref;return rr(t,o),r=Vi(e,t,n,r,l,o),n=Qi(),e!==null&&!tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Wt(e,t,o)):(xe&&n&&Oi(t),t.flags|=1,Qe(e,t,r,o),t.child)}function uc(e,t,n,r,o){if(e===null){var l=n.type;return typeof l=="function"&&!ra(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,bd(e,t,l,r,o)):(e=Zs(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&o)){var i=l.memoizedProps;if(n=n.compare,n=n!==null?n:Kr,n(i,r)&&e.ref===t.ref)return Wt(e,t,o)}return t.flags|=1,e=an(l,r),e.ref=t.ref,e.return=t,t.child=e}function bd(e,t,n,r,o){if(e!==null){var l=e.memoizedProps;if(Kr(l,r)&&e.ref===t.ref)if(tt=!1,t.pendingProps=r=l,(e.lanes&o)!==0)e.flags&131072&&(tt=!0);else return t.lanes=e.lanes,Wt(e,t,o)}return Jl(e,t,n,r,o)}function Nd(e,t,n){var r=t.pendingProps,o=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(Xn,ot),ot|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,he(Xn,ot),ot|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,he(Xn,ot),ot|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,he(Xn,ot),ot|=r;return Qe(e,t,o,n),t.child}function _d(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Jl(e,t,n,r,o){var l=rt(n)?Cn:Ve.current;return l=lr(t,l),rr(t,o),n=Vi(e,t,n,r,l,o),r=Qi(),e!==null&&!tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Wt(e,t,o)):(xe&&r&&Oi(t),t.flags|=1,Qe(e,t,n,o),t.child)}function dc(e,t,n,r,o){if(rt(n)){var l=!0;uo(t)}else l=!1;if(rr(t,o),t.stateNode===null)Ys(e,t),yd(t,n,r),Kl(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=wt(u):(u=rt(n)?Cn:Ve.current,u=lr(t,u));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||c!==u)&&oc(t,i,r,u),Kt=!1;var g=t.memoizedState;i.state=g,go(t,r,i,o),c=t.memoizedState,a!==r||g!==c||nt.current||Kt?(typeof h=="function"&&(ql(t,n,h,r),c=t.memoizedState),(a=Kt||sc(t,n,a,r,g,c,u))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=u,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ju(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:jt(t.type,a),i.props=u,m=t.pendingProps,g=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=wt(c):(c=rt(n)?Cn:Ve.current,c=lr(t,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==m||g!==c)&&oc(t,i,r,c),Kt=!1,g=t.memoizedState,i.state=g,go(t,r,i,o);var w=t.memoizedState;a!==m||g!==w||nt.current||Kt?(typeof y=="function"&&(ql(t,n,y,r),w=t.memoizedState),(u=Kt||sc(t,n,u,r,g,w,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,w,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,w,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),i.props=r,i.state=w,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Xl(e,t,n,r,l,o)}function Xl(e,t,n,r,o,l){_d(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&Ya(t,n,!1),Wt(e,t,l);r=t.stateNode,mm.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=ar(t,e.child,null,l),t.child=ar(t,null,a,l)):Qe(e,t,a,l),t.memoizedState=r.state,o&&Ya(t,n,!0),t.child}function jd(e){var t=e.stateNode;t.pendingContext?Ka(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ka(e,t.context,!1),Bi(e,t.containerInfo)}function fc(e,t,n,r,o){return ir(),Mi(o),t.flags|=256,Qe(e,t,n,r),t.child}var Zl={dehydrated:null,treeContext:null,retryLane:0};function ei(e){return{baseLanes:e,cachePool:null,transitions:null}}function Sd(e,t,n){var r=t.pendingProps,o=ve.current,l=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),he(ve,o&1),e===null)return Vl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,l?(r=t.mode,l=t.child,i={mode:"hidden",children:i},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Ao(i,r,0,null),e=jn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=ei(n),t.memoizedState=Zl,e):Yi(t,i));if(o=e.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return pm(e,t,i,r,a,o,n);if(l){l=r.fallback,i=t.mode,o=e.child,a=o.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=an(o,c),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?l=an(a,l):(l=jn(l,i,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,i=e.child.memoizedState,i=i===null?ei(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~n,t.memoizedState=Zl,r}return l=e.child,e=l.sibling,r=an(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Yi(e,t){return t=Ao({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function As(e,t,n,r){return r!==null&&Mi(r),ar(t,e.child,null,n),e=Yi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pm(e,t,n,r,o,l,i){if(n)return t.flags&256?(t.flags&=-257,r=hl(Error(O(422))),As(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,o=t.mode,r=Ao({mode:"visible",children:r.children},o,0,null),l=jn(l,o,i,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&ar(t,e.child,null,i),t.child.memoizedState=ei(i),t.memoizedState=Zl,l);if(!(t.mode&1))return As(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,l=Error(O(419)),r=hl(l,r,void 0),As(e,t,i,r)}if(a=(i&e.childLanes)!==0,tt||a){if(r=Ue,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Gt(e,o),Dt(r,e,o,-1))}return na(),r=hl(Error(O(421))),As(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Em.bind(null,e),o._reactRetry=t,null):(e=l.treeContext,it=rn(o.nextSibling),dt=t,xe=!0,kt=null,e!==null&&(gt[xt++]=$t,gt[xt++]=zt,gt[xt++]=En,$t=e.id,zt=e.overflow,En=t),t=Yi(t,r.children),t.flags|=4096,t)}function hc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ql(e.return,t,n)}function ml(e,t,n,r,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=o)}function kd(e,t,n){var r=t.pendingProps,o=r.revealOrder,l=r.tail;if(Qe(e,t,r.children,n),r=ve.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hc(e,n,t);else if(e.tag===19)hc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(he(ve,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&xo(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ml(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&xo(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ml(t,!0,n,null,l);break;case"together":ml(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ys(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Tn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,n=an(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=an(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gm(e,t,n){switch(t.tag){case 3:jd(t),ir();break;case 5:Xu(t);break;case 1:rt(t.type)&&uo(t);break;case 4:Bi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;he(mo,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(he(ve,ve.current&1),t.flags|=128,null):n&t.child.childLanes?Sd(e,t,n):(he(ve,ve.current&1),e=Wt(e,t,n),e!==null?e.sibling:null);he(ve,ve.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return kd(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),he(ve,ve.current),r)break;return null;case 22:case 23:return t.lanes=0,Nd(e,t,n)}return Wt(e,t,n)}var Cd,ti,Ed,Dd;Cd=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ti=function(){};Ed=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,bn(Mt.current);var l=null;switch(n){case"input":o=_l(e,o),r=_l(e,r),l=[];break;case"select":o=Ne({},o,{value:void 0}),r=Ne({},r,{value:void 0}),l=[];break;case"textarea":o=kl(e,o),r=kl(e,r),l=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ao)}El(n,r);var i;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var a=o[u];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Br.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in r){var c=r[u];if(a=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(i in a)!a.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&a[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(l||(l=[]),l.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(l=l||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Br.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&pe("scroll",e),l||a===c||(l=[])):(l=l||[]).push(u,c))}n&&(l=l||[]).push("style",n);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};Dd=function(e,t,n,r){n!==r&&(t.flags|=4)};function kr(e,t){if(!xe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function He(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function xm(e,t,n){var r=t.pendingProps;switch(Li(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(t),null;case 1:return rt(t.type)&&co(),He(t),null;case 3:return r=t.stateNode,cr(),ge(nt),ge(Ve),Gi(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ls(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,kt!==null&&(ci(kt),kt=null))),ti(e,t),He(t),null;case 5:Hi(t);var o=bn(es.current);if(n=t.type,e!==null&&t.stateNode!=null)Ed(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(O(166));return He(t),null}if(e=bn(Mt.current),Ls(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Ot]=t,r[Xr]=l,e=(t.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(o=0;o<Ir.length;o++)pe(Ir[o],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":Na(r,l),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},pe("invalid",r);break;case"textarea":ja(r,l),pe("invalid",r)}El(n,l),o=null;for(var i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="children"?typeof a=="string"?r.textContent!==a&&(l.suppressHydrationWarning!==!0&&Os(r.textContent,a,e),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(l.suppressHydrationWarning!==!0&&Os(r.textContent,a,e),o=["children",""+a]):Br.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&pe("scroll",r)}switch(n){case"input":ks(r),_a(r,l,!0);break;case"textarea":ks(r),Sa(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=ao)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ru(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Ot]=t,e[Xr]=r,Cd(e,t,!1,!1),t.stateNode=e;e:{switch(i=Dl(n,r),n){case"dialog":pe("cancel",e),pe("close",e),o=r;break;case"iframe":case"object":case"embed":pe("load",e),o=r;break;case"video":case"audio":for(o=0;o<Ir.length;o++)pe(Ir[o],e);o=r;break;case"source":pe("error",e),o=r;break;case"img":case"image":case"link":pe("error",e),pe("load",e),o=r;break;case"details":pe("toggle",e),o=r;break;case"input":Na(e,r),o=_l(e,r),pe("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Ne({},r,{value:void 0}),pe("invalid",e);break;case"textarea":ja(e,r),o=kl(e,r),pe("invalid",e);break;default:o=r}El(n,o),a=o;for(l in a)if(a.hasOwnProperty(l)){var c=a[l];l==="style"?lu(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&su(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Hr(e,c):typeof c=="number"&&Hr(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Br.hasOwnProperty(l)?c!=null&&l==="onScroll"&&pe("scroll",e):c!=null&&wi(e,l,c,i))}switch(n){case"input":ks(e),_a(e,r,!1);break;case"textarea":ks(e),Sa(e);break;case"option":r.value!=null&&e.setAttribute("value",""+cn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Zn(e,!!r.multiple,l,!1):r.defaultValue!=null&&Zn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=ao)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return He(t),null;case 6:if(e&&t.stateNode!=null)Dd(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(O(166));if(n=bn(es.current),bn(Mt.current),Ls(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ot]=t,(l=r.nodeValue!==n)&&(e=dt,e!==null))switch(e.tag){case 3:Os(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Os(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ot]=t,t.stateNode=r}return He(t),null;case 13:if(ge(ve),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xe&&it!==null&&t.mode&1&&!(t.flags&128))Qu(),ir(),t.flags|=98560,l=!1;else if(l=Ls(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(O(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(O(317));l[Ot]=t}else ir(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;He(t),l=!1}else kt!==null&&(ci(kt),kt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ve.current&1?Oe===0&&(Oe=3):na())),t.updateQueue!==null&&(t.flags|=4),He(t),null);case 4:return cr(),ti(e,t),e===null&&Yr(t.stateNode.containerInfo),He(t),null;case 10:return $i(t.type._context),He(t),null;case 17:return rt(t.type)&&co(),He(t),null;case 19:if(ge(ve),l=t.memoizedState,l===null)return He(t),null;if(r=(t.flags&128)!==0,i=l.rendering,i===null)if(r)kr(l,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=xo(e),i!==null){for(t.flags|=128,kr(l,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return he(ve,ve.current&1|2),t.child}e=e.sibling}l.tail!==null&&Ce()>dr&&(t.flags|=128,r=!0,kr(l,!1),t.lanes=4194304)}else{if(!r)if(e=xo(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),kr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!xe)return He(t),null}else 2*Ce()-l.renderingStartTime>dr&&n!==1073741824&&(t.flags|=128,r=!0,kr(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(n=l.last,n!==null?n.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ce(),t.sibling=null,n=ve.current,he(ve,r?n&1|2:n&1),t):(He(t),null);case 22:case 23:return ta(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ot&1073741824&&(He(t),t.subtreeFlags&6&&(t.flags|=8192)):He(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function ym(e,t){switch(Li(t),t.tag){case 1:return rt(t.type)&&co(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return cr(),ge(nt),ge(Ve),Gi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Hi(t),null;case 13:if(ge(ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));ir()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ge(ve),null;case 4:return cr(),null;case 10:return $i(t.type._context),null;case 22:case 23:return ta(),null;case 24:return null;default:return null}}var Us=!1,Ge=!1,vm=typeof WeakSet=="function"?WeakSet:Set,F=null;function Jn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_e(e,t,r)}else n.current=null}function ni(e,t,n){try{n()}catch(r){_e(e,t,r)}}var mc=!1;function wm(e,t){if($l=oo,e=Ou(),Ri(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var i=0,a=-1,c=-1,u=0,h=0,m=e,g=null;t:for(;;){for(var y;m!==n||o!==0&&m.nodeType!==3||(a=i+o),m!==l||r!==0&&m.nodeType!==3||(c=i+r),m.nodeType===3&&(i+=m.nodeValue.length),(y=m.firstChild)!==null;)g=m,m=y;for(;;){if(m===e)break t;if(g===n&&++u===o&&(a=i),g===l&&++h===r&&(c=i),(y=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=y}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(zl={focusedElem:e,selectionRange:n},oo=!1,F=t;F!==null;)if(t=F,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,F=e;else for(;F!==null;){t=F;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var k=w.memoizedProps,C=w.memoizedState,f=t.stateNode,d=f.getSnapshotBeforeUpdate(t.elementType===t.type?k:jt(t.type,k),C);f.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(v){_e(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,F=e;break}F=t.return}return w=mc,mc=!1,w}function Ur(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var l=o.destroy;o.destroy=void 0,l!==void 0&&ni(t,n,l)}o=o.next}while(o!==r)}}function Lo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ri(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Td(e){var t=e.alternate;t!==null&&(e.alternate=null,Td(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ot],delete t[Xr],delete t[Hl],delete t[nm],delete t[rm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Id(e){return e.tag===5||e.tag===3||e.tag===4}function pc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Id(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function si(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ao));else if(r!==4&&(e=e.child,e!==null))for(si(e,t,n),e=e.sibling;e!==null;)si(e,t,n),e=e.sibling}function oi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(oi(e,t,n),e=e.sibling;e!==null;)oi(e,t,n),e=e.sibling}var $e=null,St=!1;function Qt(e,t,n){for(n=n.child;n!==null;)Pd(e,t,n),n=n.sibling}function Pd(e,t,n){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(Co,n)}catch{}switch(n.tag){case 5:Ge||Jn(n,t);case 6:var r=$e,o=St;$e=null,Qt(e,t,n),$e=r,St=o,$e!==null&&(St?(e=$e,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(St?(e=$e,n=n.stateNode,e.nodeType===8?il(e.parentNode,n):e.nodeType===1&&il(e,n),Qr(e)):il($e,n.stateNode));break;case 4:r=$e,o=St,$e=n.stateNode.containerInfo,St=!0,Qt(e,t,n),$e=r,St=o;break;case 0:case 11:case 14:case 15:if(!Ge&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var l=o,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&ni(n,t,i),o=o.next}while(o!==r)}Qt(e,t,n);break;case 1:if(!Ge&&(Jn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_e(n,t,a)}Qt(e,t,n);break;case 21:Qt(e,t,n);break;case 22:n.mode&1?(Ge=(r=Ge)||n.memoizedState!==null,Qt(e,t,n),Ge=r):Qt(e,t,n);break;default:Qt(e,t,n)}}function gc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new vm),t.forEach(function(r){var o=Dm.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function _t(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var l=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:$e=a.stateNode,St=!1;break e;case 3:$e=a.stateNode.containerInfo,St=!0;break e;case 4:$e=a.stateNode.containerInfo,St=!0;break e}a=a.return}if($e===null)throw Error(O(160));Pd(l,i,o),$e=null,St=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(u){_e(o,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Rd(t,e),t=t.sibling}function Rd(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_t(t,e),Pt(e),r&4){try{Ur(3,e,e.return),Lo(3,e)}catch(k){_e(e,e.return,k)}try{Ur(5,e,e.return)}catch(k){_e(e,e.return,k)}}break;case 1:_t(t,e),Pt(e),r&512&&n!==null&&Jn(n,n.return);break;case 5:if(_t(t,e),Pt(e),r&512&&n!==null&&Jn(n,n.return),e.flags&32){var o=e.stateNode;try{Hr(o,"")}catch(k){_e(e,e.return,k)}}if(r&4&&(o=e.stateNode,o!=null)){var l=e.memoizedProps,i=n!==null?n.memoizedProps:l,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&l.type==="radio"&&l.name!=null&&tu(o,l),Dl(a,i);var u=Dl(a,l);for(i=0;i<c.length;i+=2){var h=c[i],m=c[i+1];h==="style"?lu(o,m):h==="dangerouslySetInnerHTML"?su(o,m):h==="children"?Hr(o,m):wi(o,h,m,u)}switch(a){case"input":jl(o,l);break;case"textarea":nu(o,l);break;case"select":var g=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var y=l.value;y!=null?Zn(o,!!l.multiple,y,!1):g!==!!l.multiple&&(l.defaultValue!=null?Zn(o,!!l.multiple,l.defaultValue,!0):Zn(o,!!l.multiple,l.multiple?[]:"",!1))}o[Xr]=l}catch(k){_e(e,e.return,k)}}break;case 6:if(_t(t,e),Pt(e),r&4){if(e.stateNode===null)throw Error(O(162));o=e.stateNode,l=e.memoizedProps;try{o.nodeValue=l}catch(k){_e(e,e.return,k)}}break;case 3:if(_t(t,e),Pt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qr(t.containerInfo)}catch(k){_e(e,e.return,k)}break;case 4:_t(t,e),Pt(e);break;case 13:_t(t,e),Pt(e),o=e.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(Zi=Ce())),r&4&&gc(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Ge=(u=Ge)||h,_t(t,e),Ge=u):_t(t,e),Pt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(F=e,h=e.child;h!==null;){for(m=F=h;F!==null;){switch(g=F,y=g.child,g.tag){case 0:case 11:case 14:case 15:Ur(4,g,g.return);break;case 1:Jn(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(k){_e(r,n,k)}}break;case 5:Jn(g,g.return);break;case 22:if(g.memoizedState!==null){yc(m);continue}}y!==null?(y.return=g,F=y):yc(m)}h=h.sibling}e:for(h=null,m=e;;){if(m.tag===5){if(h===null){h=m;try{o=m.stateNode,u?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(a=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=ou("display",i))}catch(k){_e(e,e.return,k)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(k){_e(e,e.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:_t(t,e),Pt(e),r&4&&gc(e);break;case 21:break;default:_t(t,e),Pt(e)}}function Pt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Id(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Hr(o,""),r.flags&=-33);var l=pc(e);oi(e,l,o);break;case 3:case 4:var i=r.stateNode.containerInfo,a=pc(e);si(e,a,i);break;default:throw Error(O(161))}}catch(c){_e(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bm(e,t,n){F=e,Od(e)}function Od(e,t,n){for(var r=(e.mode&1)!==0;F!==null;){var o=F,l=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||Us;if(!i){var a=o.alternate,c=a!==null&&a.memoizedState!==null||Ge;a=Us;var u=Ge;if(Us=i,(Ge=c)&&!u)for(F=o;F!==null;)i=F,c=i.child,i.tag===22&&i.memoizedState!==null?vc(o):c!==null?(c.return=i,F=c):vc(o);for(;l!==null;)F=l,Od(l),l=l.sibling;F=o,Us=a,Ge=u}xc(e)}else o.subtreeFlags&8772&&l!==null?(l.return=o,F=l):xc(e)}}function xc(e){for(;F!==null;){var t=F;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ge||Lo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ge)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:jt(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&tc(t,l,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}tc(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Qr(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Ge||t.flags&512&&ri(t)}catch(g){_e(t,t.return,g)}}if(t===e){F=null;break}if(n=t.sibling,n!==null){n.return=t.return,F=n;break}F=t.return}}function yc(e){for(;F!==null;){var t=F;if(t===e){F=null;break}var n=t.sibling;if(n!==null){n.return=t.return,F=n;break}F=t.return}}function vc(e){for(;F!==null;){var t=F;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Lo(4,t)}catch(c){_e(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){_e(t,o,c)}}var l=t.return;try{ri(t)}catch(c){_e(t,l,c)}break;case 5:var i=t.return;try{ri(t)}catch(c){_e(t,i,c)}}}catch(c){_e(t,t.return,c)}if(t===e){F=null;break}var a=t.sibling;if(a!==null){a.return=t.return,F=a;break}F=t.return}}var Nm=Math.ceil,wo=Vt.ReactCurrentDispatcher,Ji=Vt.ReactCurrentOwner,vt=Vt.ReactCurrentBatchConfig,ae=0,Ue=null,Te=null,ze=0,ot=0,Xn=fn(0),Oe=0,ss=null,Tn=0,Mo=0,Xi=0,$r=null,et=null,Zi=0,dr=1/0,At=null,bo=!1,li=null,on=null,$s=!1,Zt=null,No=0,zr=0,ii=null,Js=-1,Xs=0;function qe(){return ae&6?Ce():Js!==-1?Js:Js=Ce()}function ln(e){return e.mode&1?ae&2&&ze!==0?ze&-ze:om.transition!==null?(Xs===0&&(Xs=yu()),Xs):(e=de,e!==0||(e=window.event,e=e===void 0?16:Su(e.type)),e):1}function Dt(e,t,n,r){if(50<zr)throw zr=0,ii=null,Error(O(185));us(e,n,r),(!(ae&2)||e!==Ue)&&(e===Ue&&(!(ae&2)&&(Mo|=n),Oe===4&&Jt(e,ze)),st(e,r),n===1&&ae===0&&!(t.mode&1)&&(dr=Ce()+500,Po&&hn()))}function st(e,t){var n=e.callbackNode;oh(e,t);var r=so(e,e===Ue?ze:0);if(r===0)n!==null&&Ea(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ea(n),t===1)e.tag===0?sm(wc.bind(null,e)):Gu(wc.bind(null,e)),em(function(){!(ae&6)&&hn()}),n=null;else{switch(vu(r)){case 1:n=Si;break;case 4:n=gu;break;case 16:n=ro;break;case 536870912:n=xu;break;default:n=ro}n=Bd(n,Ld.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ld(e,t){if(Js=-1,Xs=0,ae&6)throw Error(O(327));var n=e.callbackNode;if(sr()&&e.callbackNode!==n)return null;var r=so(e,e===Ue?ze:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=_o(e,r);else{t=r;var o=ae;ae|=2;var l=Ad();(Ue!==e||ze!==t)&&(At=null,dr=Ce()+500,_n(e,t));do try{Sm();break}catch(a){Md(e,a)}while(!0);Ui(),wo.current=l,ae=o,Te!==null?t=0:(Ue=null,ze=0,t=Oe)}if(t!==0){if(t===2&&(o=Ol(e),o!==0&&(r=o,t=ai(e,o))),t===1)throw n=ss,_n(e,0),Jt(e,r),st(e,Ce()),n;if(t===6)Jt(e,r);else{if(o=e.current.alternate,!(r&30)&&!_m(o)&&(t=_o(e,r),t===2&&(l=Ol(e),l!==0&&(r=l,t=ai(e,l))),t===1))throw n=ss,_n(e,0),Jt(e,r),st(e,Ce()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(O(345));case 2:xn(e,et,At);break;case 3:if(Jt(e,r),(r&130023424)===r&&(t=Zi+500-Ce(),10<t)){if(so(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){qe(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Bl(xn.bind(null,e,et,At),t);break}xn(e,et,At);break;case 4:if(Jt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-Et(r);l=1<<i,i=t[i],i>o&&(o=i),r&=~l}if(r=o,r=Ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nm(r/1960))-r,10<r){e.timeoutHandle=Bl(xn.bind(null,e,et,At),r);break}xn(e,et,At);break;case 5:xn(e,et,At);break;default:throw Error(O(329))}}}return st(e,Ce()),e.callbackNode===n?Ld.bind(null,e):null}function ai(e,t){var n=$r;return e.current.memoizedState.isDehydrated&&(_n(e,t).flags|=256),e=_o(e,t),e!==2&&(t=et,et=n,t!==null&&ci(t)),e}function ci(e){et===null?et=e:et.push.apply(et,e)}function _m(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],l=o.getSnapshot;o=o.value;try{if(!It(l(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jt(e,t){for(t&=~Xi,t&=~Mo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Et(t),r=1<<n;e[n]=-1,t&=~r}}function wc(e){if(ae&6)throw Error(O(327));sr();var t=so(e,0);if(!(t&1))return st(e,Ce()),null;var n=_o(e,t);if(e.tag!==0&&n===2){var r=Ol(e);r!==0&&(t=r,n=ai(e,r))}if(n===1)throw n=ss,_n(e,0),Jt(e,t),st(e,Ce()),n;if(n===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xn(e,et,At),st(e,Ce()),null}function ea(e,t){var n=ae;ae|=1;try{return e(t)}finally{ae=n,ae===0&&(dr=Ce()+500,Po&&hn())}}function In(e){Zt!==null&&Zt.tag===0&&!(ae&6)&&sr();var t=ae;ae|=1;var n=vt.transition,r=de;try{if(vt.transition=null,de=1,e)return e()}finally{de=r,vt.transition=n,ae=t,!(ae&6)&&hn()}}function ta(){ot=Xn.current,ge(Xn)}function _n(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Zh(n)),Te!==null)for(n=Te.return;n!==null;){var r=n;switch(Li(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&co();break;case 3:cr(),ge(nt),ge(Ve),Gi();break;case 5:Hi(r);break;case 4:cr();break;case 13:ge(ve);break;case 19:ge(ve);break;case 10:$i(r.type._context);break;case 22:case 23:ta()}n=n.return}if(Ue=e,Te=e=an(e.current,null),ze=ot=t,Oe=0,ss=null,Xi=Mo=Tn=0,et=$r=null,wn!==null){for(t=0;t<wn.length;t++)if(n=wn[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,l=n.pending;if(l!==null){var i=l.next;l.next=o,r.next=i}n.pending=r}wn=null}return e}function Md(e,t){do{var n=Te;try{if(Ui(),qs.current=vo,yo){for(var r=be.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}yo=!1}if(Dn=0,Ae=Re=be=null,Ar=!1,ts=0,Ji.current=null,n===null||n.return===null){Oe=1,ss=t,Te=null;break}e:{var l=e,i=n.return,a=n,c=t;if(t=ze,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=ic(i);if(y!==null){y.flags&=-257,ac(y,i,a,l,t),y.mode&1&&lc(l,u,t),t=y,c=u;var w=t.updateQueue;if(w===null){var k=new Set;k.add(c),t.updateQueue=k}else w.add(c);break e}else{if(!(t&1)){lc(l,u,t),na();break e}c=Error(O(426))}}else if(xe&&a.mode&1){var C=ic(i);if(C!==null){!(C.flags&65536)&&(C.flags|=256),ac(C,i,a,l,t),Mi(ur(c,a));break e}}l=c=ur(c,a),Oe!==4&&(Oe=2),$r===null?$r=[l]:$r.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var f=vd(l,c,t);ec(l,f);break e;case 1:a=c;var d=l.type,p=l.stateNode;if(!(l.flags&128)&&(typeof d.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(on===null||!on.has(p)))){l.flags|=65536,t&=-t,l.lanes|=t;var v=wd(l,a,t);ec(l,v);break e}}l=l.return}while(l!==null)}$d(n)}catch(j){t=j,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(!0)}function Ad(){var e=wo.current;return wo.current=vo,e===null?vo:e}function na(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Ue===null||!(Tn&268435455)&&!(Mo&268435455)||Jt(Ue,ze)}function _o(e,t){var n=ae;ae|=2;var r=Ad();(Ue!==e||ze!==t)&&(At=null,_n(e,t));do try{jm();break}catch(o){Md(e,o)}while(!0);if(Ui(),ae=n,wo.current=r,Te!==null)throw Error(O(261));return Ue=null,ze=0,Oe}function jm(){for(;Te!==null;)Ud(Te)}function Sm(){for(;Te!==null&&!Yf();)Ud(Te)}function Ud(e){var t=Fd(e.alternate,e,ot);e.memoizedProps=e.pendingProps,t===null?$d(e):Te=t,Ji.current=null}function $d(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ym(n,t),n!==null){n.flags&=32767,Te=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,Te=null;return}}else if(n=xm(n,t,ot),n!==null){Te=n;return}if(t=t.sibling,t!==null){Te=t;return}Te=t=e}while(t!==null);Oe===0&&(Oe=5)}function xn(e,t,n){var r=de,o=vt.transition;try{vt.transition=null,de=1,km(e,t,n,r)}finally{vt.transition=o,de=r}return null}function km(e,t,n,r){do sr();while(Zt!==null);if(ae&6)throw Error(O(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(lh(e,l),e===Ue&&(Te=Ue=null,ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$s||($s=!0,Bd(ro,function(){return sr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=vt.transition,vt.transition=null;var i=de;de=1;var a=ae;ae|=4,Ji.current=null,wm(e,n),Rd(n,e),Vh(zl),oo=!!$l,zl=$l=null,e.current=n,bm(n),Jf(),ae=a,de=i,vt.transition=l}else e.current=n;if($s&&($s=!1,Zt=e,No=o),l=e.pendingLanes,l===0&&(on=null),eh(n.stateNode),st(e,Ce()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(bo)throw bo=!1,e=li,li=null,e;return No&1&&e.tag!==0&&sr(),l=e.pendingLanes,l&1?e===ii?zr++:(zr=0,ii=e):zr=0,hn(),null}function sr(){if(Zt!==null){var e=vu(No),t=vt.transition,n=de;try{if(vt.transition=null,de=16>e?16:e,Zt===null)var r=!1;else{if(e=Zt,Zt=null,No=0,ae&6)throw Error(O(331));var o=ae;for(ae|=4,F=e.current;F!==null;){var l=F,i=l.child;if(F.flags&16){var a=l.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(F=u;F!==null;){var h=F;switch(h.tag){case 0:case 11:case 15:Ur(8,h,l)}var m=h.child;if(m!==null)m.return=h,F=m;else for(;F!==null;){h=F;var g=h.sibling,y=h.return;if(Td(h),h===u){F=null;break}if(g!==null){g.return=y,F=g;break}F=y}}}var w=l.alternate;if(w!==null){var k=w.child;if(k!==null){w.child=null;do{var C=k.sibling;k.sibling=null,k=C}while(k!==null)}}F=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,F=i;else e:for(;F!==null;){if(l=F,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ur(9,l,l.return)}var f=l.sibling;if(f!==null){f.return=l.return,F=f;break e}F=l.return}}var d=e.current;for(F=d;F!==null;){i=F;var p=i.child;if(i.subtreeFlags&2064&&p!==null)p.return=i,F=p;else e:for(i=d;F!==null;){if(a=F,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Lo(9,a)}}catch(j){_e(a,a.return,j)}if(a===i){F=null;break e}var v=a.sibling;if(v!==null){v.return=a.return,F=v;break e}F=a.return}}if(ae=o,hn(),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(Co,e)}catch{}r=!0}return r}finally{de=n,vt.transition=t}}return!1}function bc(e,t,n){t=ur(n,t),t=vd(e,t,1),e=sn(e,t,1),t=qe(),e!==null&&(us(e,1,t),st(e,t))}function _e(e,t,n){if(e.tag===3)bc(e,e,n);else for(;t!==null;){if(t.tag===3){bc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(on===null||!on.has(r))){e=ur(n,e),e=wd(t,e,1),t=sn(t,e,1),e=qe(),t!==null&&(us(t,1,e),st(t,e));break}}t=t.return}}function Cm(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=qe(),e.pingedLanes|=e.suspendedLanes&n,Ue===e&&(ze&n)===n&&(Oe===4||Oe===3&&(ze&130023424)===ze&&500>Ce()-Zi?_n(e,0):Xi|=n),st(e,t)}function zd(e,t){t===0&&(e.mode&1?(t=Ds,Ds<<=1,!(Ds&130023424)&&(Ds=4194304)):t=1);var n=qe();e=Gt(e,t),e!==null&&(us(e,t,n),st(e,n))}function Em(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),zd(e,n)}function Dm(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(t),zd(e,n)}var Fd;Fd=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||nt.current)tt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return tt=!1,gm(e,t,n);tt=!!(e.flags&131072)}else tt=!1,xe&&t.flags&1048576&&Wu(t,ho,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ys(e,t),e=t.pendingProps;var o=lr(t,Ve.current);rr(t,n),o=Vi(null,t,r,e,o,n);var l=Qi();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rt(r)?(l=!0,uo(t)):l=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Fi(t),o.updater=Oo,t.stateNode=o,o._reactInternals=t,Kl(t,r,e,n),t=Xl(null,t,r,!0,l,n)):(t.tag=0,xe&&l&&Oi(t),Qe(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ys(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=Im(r),e=jt(r,e),o){case 0:t=Jl(null,t,r,e,n);break e;case 1:t=dc(null,t,r,e,n);break e;case 11:t=cc(null,t,r,e,n);break e;case 14:t=uc(null,t,r,jt(r.type,e),n);break e}throw Error(O(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:jt(r,o),Jl(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:jt(r,o),dc(e,t,r,o,n);case 3:e:{if(jd(t),e===null)throw Error(O(387));r=t.pendingProps,l=t.memoizedState,o=l.element,Ju(e,t),go(t,r,null,n);var i=t.memoizedState;if(r=i.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){o=ur(Error(O(423)),t),t=fc(e,t,r,n,o);break e}else if(r!==o){o=ur(Error(O(424)),t),t=fc(e,t,r,n,o);break e}else for(it=rn(t.stateNode.containerInfo.firstChild),dt=t,xe=!0,kt=null,n=Ku(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ir(),r===o){t=Wt(e,t,n);break e}Qe(e,t,r,n)}t=t.child}return t;case 5:return Xu(t),e===null&&Vl(t),r=t.type,o=t.pendingProps,l=e!==null?e.memoizedProps:null,i=o.children,Fl(r,o)?i=null:l!==null&&Fl(r,l)&&(t.flags|=32),_d(e,t),Qe(e,t,i,n),t.child;case 6:return e===null&&Vl(t),null;case 13:return Sd(e,t,n);case 4:return Bi(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ar(t,null,r,n):Qe(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:jt(r,o),cc(e,t,r,o,n);case 7:return Qe(e,t,t.pendingProps,n),t.child;case 8:return Qe(e,t,t.pendingProps.children,n),t.child;case 12:return Qe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,l=t.memoizedProps,i=o.value,he(mo,r._currentValue),r._currentValue=i,l!==null)if(It(l.value,i)){if(l.children===o.children&&!nt.current){t=Wt(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var a=l.dependencies;if(a!==null){i=l.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=Ft(-1,n&-n),c.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),Ql(l.return,n,t),a.lanes|=n;break}c=c.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(O(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Ql(i,n,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Qe(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,rr(t,n),o=wt(o),r=r(o),t.flags|=1,Qe(e,t,r,n),t.child;case 14:return r=t.type,o=jt(r,t.pendingProps),o=jt(r.type,o),uc(e,t,r,o,n);case 15:return bd(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:jt(r,o),Ys(e,t),t.tag=1,rt(r)?(e=!0,uo(t)):e=!1,rr(t,n),yd(t,r,o),Kl(t,r,o,n),Xl(null,t,r,!0,e,n);case 19:return kd(e,t,n);case 22:return Nd(e,t,n)}throw Error(O(156,t.tag))};function Bd(e,t){return pu(e,t)}function Tm(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yt(e,t,n,r){return new Tm(e,t,n,r)}function ra(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Im(e){if(typeof e=="function")return ra(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ni)return 11;if(e===_i)return 14}return 2}function an(e,t){var n=e.alternate;return n===null?(n=yt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Zs(e,t,n,r,o,l){var i=2;if(r=e,typeof e=="function")ra(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Bn:return jn(n.children,o,l,t);case bi:i=8,o|=8;break;case vl:return e=yt(12,n,t,o|2),e.elementType=vl,e.lanes=l,e;case wl:return e=yt(13,n,t,o),e.elementType=wl,e.lanes=l,e;case bl:return e=yt(19,n,t,o),e.elementType=bl,e.lanes=l,e;case Xc:return Ao(n,o,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Yc:i=10;break e;case Jc:i=9;break e;case Ni:i=11;break e;case _i:i=14;break e;case qt:i=16,r=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=yt(i,n,t,o),t.elementType=e,t.type=r,t.lanes=l,t}function jn(e,t,n,r){return e=yt(7,e,r,t),e.lanes=n,e}function Ao(e,t,n,r){return e=yt(22,e,r,t),e.elementType=Xc,e.lanes=n,e.stateNode={isHidden:!1},e}function pl(e,t,n){return e=yt(6,e,null,t),e.lanes=n,e}function gl(e,t,n){return t=yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Pm(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yo(0),this.expirationTimes=Yo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yo(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function sa(e,t,n,r,o,l,i,a,c){return e=new Pm(e,t,n,a,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=yt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fi(l),e}function Rm(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Hd(e){if(!e)return un;e=e._reactInternals;e:{if(Mn(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var n=e.type;if(rt(n))return Hu(e,n,t)}return t}function Gd(e,t,n,r,o,l,i,a,c){return e=sa(n,r,!0,e,o,l,i,a,c),e.context=Hd(null),n=e.current,r=qe(),o=ln(n),l=Ft(r,o),l.callback=t??null,sn(n,l,o),e.current.lanes=o,us(e,o,r),st(e,r),e}function Uo(e,t,n,r){var o=t.current,l=qe(),i=ln(o);return n=Hd(n),t.context===null?t.context=n:t.pendingContext=n,t=Ft(l,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=sn(o,t,i),e!==null&&(Dt(e,o,i,l),Qs(e,o,i)),i}function jo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Nc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function oa(e,t){Nc(e,t),(e=e.alternate)&&Nc(e,t)}function Om(){return null}var Wd=typeof reportError=="function"?reportError:function(e){console.error(e)};function la(e){this._internalRoot=e}$o.prototype.render=la.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));Uo(e,t,null,null)};$o.prototype.unmount=la.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;In(function(){Uo(null,e,null,null)}),t[Ht]=null}};function $o(e){this._internalRoot=e}$o.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Yt.length&&t!==0&&t<Yt[n].priority;n++);Yt.splice(n,0,e),n===0&&ju(e)}};function ia(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function zo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _c(){}function Lm(e,t,n,r,o){if(o){if(typeof r=="function"){var l=r;r=function(){var u=jo(i);l.call(u)}}var i=Gd(t,r,e,0,null,!1,!1,"",_c);return e._reactRootContainer=i,e[Ht]=i.current,Yr(e.nodeType===8?e.parentNode:e),In(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var u=jo(c);a.call(u)}}var c=sa(e,0,!1,null,null,!1,!1,"",_c);return e._reactRootContainer=c,e[Ht]=c.current,Yr(e.nodeType===8?e.parentNode:e),In(function(){Uo(t,c,n,r)}),c}function Fo(e,t,n,r,o){var l=n._reactRootContainer;if(l){var i=l;if(typeof o=="function"){var a=o;o=function(){var c=jo(i);a.call(c)}}Uo(t,i,e,o)}else i=Lm(n,t,e,o,r);return jo(i)}wu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Tr(t.pendingLanes);n!==0&&(ki(t,n|1),st(t,Ce()),!(ae&6)&&(dr=Ce()+500,hn()))}break;case 13:In(function(){var r=Gt(e,1);if(r!==null){var o=qe();Dt(r,e,1,o)}}),oa(e,1)}};Ci=function(e){if(e.tag===13){var t=Gt(e,134217728);if(t!==null){var n=qe();Dt(t,e,134217728,n)}oa(e,134217728)}};bu=function(e){if(e.tag===13){var t=ln(e),n=Gt(e,t);if(n!==null){var r=qe();Dt(n,e,t,r)}oa(e,t)}};Nu=function(){return de};_u=function(e,t){var n=de;try{return de=e,t()}finally{de=n}};Il=function(e,t,n){switch(t){case"input":if(jl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Io(r);if(!o)throw Error(O(90));eu(r),jl(r,o)}}}break;case"textarea":nu(e,n);break;case"select":t=n.value,t!=null&&Zn(e,!!n.multiple,t,!1)}};cu=ea;uu=In;var Mm={usingClientEntryPoint:!1,Events:[fs,Vn,Io,iu,au,ea]},Cr={findFiberByHostInstance:vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Am={bundleType:Cr.bundleType,version:Cr.version,rendererPackageName:Cr.rendererPackageName,rendererConfig:Cr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hu(e),e===null?null:e.stateNode},findFiberByHostInstance:Cr.findFiberByHostInstance||Om,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zs.isDisabled&&zs.supportsFiber)try{Co=zs.inject(Am),Lt=zs}catch{}}ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mm;ht.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ia(t))throw Error(O(200));return Rm(e,t,null,n)};ht.createRoot=function(e,t){if(!ia(e))throw Error(O(299));var n=!1,r="",o=Wd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=sa(e,1,!1,null,null,n,!1,r,o),e[Ht]=t.current,Yr(e.nodeType===8?e.parentNode:e),new la(t)};ht.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=hu(t),e=e===null?null:e.stateNode,e};ht.flushSync=function(e){return In(e)};ht.hydrate=function(e,t,n){if(!zo(t))throw Error(O(200));return Fo(null,e,t,!0,n)};ht.hydrateRoot=function(e,t,n){if(!ia(e))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,o=!1,l="",i=Wd;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Gd(t,null,e,1,n??null,o,!1,l,i),e[Ht]=t.current,Yr(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new $o(t)};ht.render=function(e,t,n){if(!zo(t))throw Error(O(200));return Fo(null,e,t,!1,n)};ht.unmountComponentAtNode=function(e){if(!zo(e))throw Error(O(40));return e._reactRootContainer?(In(function(){Fo(null,null,e,!1,function(){e._reactRootContainer=null,e[Ht]=null})}),!0):!1};ht.unstable_batchedUpdates=ea;ht.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!zo(n))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return Fo(e,t,n,!1,r)};ht.version="18.3.1-next-f1338f8080-20240426";function Vd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vd)}catch(e){console.error(e)}}Vd(),Vc.exports=ht;var Um=Vc.exports,Qd,jc=Um;Qd=jc.createRoot,jc.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $m={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),le=(e,t)=>{const n=x.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:a="",children:c,...u},h)=>x.createElement("svg",{ref:h,...$m,width:o,height:o,stroke:r,strokeWidth:i?Number(l)*24/Number(o):l,className:["lucide",`lucide-${zm(e)}`,a].join(" "),...u},[...t.map(([m,g])=>x.createElement(m,g)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=le("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=le("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=le("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=le("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=le("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=le("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=le("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=le("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=le("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=le("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=le("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=le("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=le("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=le("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=le("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=le("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=le("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);let ct=null;const ms=async()=>{if(ct)return ct;try{const e=await fetch("../config.txt");if(!e.ok)throw new Error("Failed to load configuration");return ct=await e.json(),ct}catch(e){throw console.error("Error loading config:",e),e}},ca=e=>{if(!ct)throw new Error("Configuration not loaded. Call loadConfig() first.");const t=e.startsWith("/")?e.slice(1):e;return`${ct.domain.endsWith("/")?ct.domain.slice(0,-1):ct.domain}/${t}`},Xm=e=>{if(!ct)throw new Error("Configuration not loaded. Call loadConfig() first.");const t=e.startsWith("/")?e.slice(1):e;return`${ct.ai.endsWith("/")?ct.ai.slice(0,-1):ct.ai}/${t}`},hi=()=>ct,je=async(e,t={})=>{await ms();const n=ca(e),{method:r="GET",headers:o={},body:l}=t,i={method:r,headers:{"Content-Type":"application/json",...o}};l&&r!=="GET"&&(i.body=JSON.stringify(l));try{const a=await fetch(n,i);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){throw console.error("API call failed:",a),a}},tf=async(e,t)=>{await ms();const n=ca(e),{method:r="POST",headers:o={},body:l}=t,i={method:r,headers:o,body:l};try{const a=await fetch(n,i);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){throw console.error("API multipart call failed:",a),a}},Zm=async(e,t)=>{var a;await ms();const n=Xm(e);console.log("URL:",n);const{method:r="POST",headers:o={},body:l}=t,i={method:r,headers:o,body:l};try{console.log(":",n),console.log("Request options:",{method:r,hasBody:!!l,bodyType:(a=l==null?void 0:l.constructor)==null?void 0:a.name});const c=await fetch(n,i);if(console.log(":",{status:c.status,statusText:c.statusText,ok:c.ok,headers:Object.fromEntries(c.headers.entries())}),!c.ok){const h=await c.text();throw console.error("API :",h),new Error(`HTTP error! status: ${c.status}, body: ${h}`)}const u=await c.json();return console.log("API :",u),u}catch(c){throw console.error("API multipart call failed:",c),c instanceof TypeError&&c.message==="Failed to fetch"&&(console.error("  CORS "),console.error(""),console.error("1.  CORS headers"),console.error("2. URL :",n),console.error("3. ")),c}},ep=async(e,t={})=>{await ms();const n=ca(e),{method:r="GET",headers:o={},body:l}=t,i={method:r,headers:{"Content-Type":"application/json",...o}};l&&r!=="GET"&&(i.body=JSON.stringify(l));try{const a=await fetch(n,i);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.blob()}catch(a){throw console.error("API blob call failed:",a),a}},tp=async e=>await je("/api/session/login",{method:"POST",body:{Data:e}}),np=e=>(sessionStorage.setItem("user_session",JSON.stringify(e)),sessionStorage.setItem("loggedGUID",e.GUID||""),sessionStorage.setItem("loggedEmployer",e.Employer||""),sessionStorage.setItem("loggedID",e.ID||""),sessionStorage.setItem("loggedName",e.Name||""),sessionStorage.setItem("loggedTime",e.loginTime||""),sessionStorage.setItem("loggedLevel",e.level||""),e),ps=()=>{const e=sessionStorage.getItem("user_session");if(!e)return null;try{const t=JSON.parse(e);if(!t.GUID||!t.ID||!t.Name)return null;if(t.loginTime)try{const n=new Date(t.loginTime).getTime();if((new Date().getTime()-n)/(1e3*60*60)>24)return null}catch{console.warn("Invalid login time format:",t.loginTime)}return t}catch(t){return console.error("Failed to parse user session:",t),null}},rp=()=>!!ps(),sp=()=>{const e=ps();return(e==null?void 0:e.Employer)||sessionStorage.getItem("loggedEmployer")},ua=()=>{const e=ps();return(e==null?void 0:e.ID)||sessionStorage.getItem("loggedID")},lt=()=>{const e=ps();return(e==null?void 0:e.Name)||sessionStorage.getItem("loggedName")},nf=()=>{const e=ps();return(e==null?void 0:e.level)||sessionStorage.getItem("loggedLevel")},ce=({size:e="medium",className:t=""})=>{const n={small:"w-4 h-4",medium:"w-6 h-6",large:"w-8 h-8"};return s.jsx("div",{className:`inline-block animate-spin rounded-full border-2 border-solid border-current border-r-transparent ${n[e]} ${t}`,role:"status","aria-label":"Loading",children:s.jsx("span",{className:"sr-only",children:"Loading..."})})},op={zh:{"app.title":"","app.inspection":"","app.inspection.drugs":"","app.inspection.total":"","app.inspection.today":"","app.inspection.batch_upload":"","app.inspection.excel_upload":"","app.inspection.manual_create":"","app.inspection.barcode_search":"","app.inspection.number_search":"","app.inspection.search_barcode_placeholder":"...","app.inspection.search_number_placeholder":"/...","app.inspection.time_range":"","app.inspection.time_type":"","app.inspection.start_datetime":"","app.inspection.end_datetime":"","app.inspection.search":"","app.inspection.searching":"","app.inspection.operation_time":"","app.inspection.add_time":"","app.inspection.update_time":"","language.zh":"","language.en":"English","error.api":"",logout:"",copyright:"Copyright 2025 ","table.drug_code":"","table.item_number":"","table.drug_name":"","table.manufacturer":"","table.received_expected_qty":"/","table.detail_count":"","table.inspection_number":"","table.purchase_number":"","table.delivery_time":"","table.arrival_time":"","delivery.overdue":"","delivery.remaining":"","delivery.today":"","delivery.days":""},en:{"app.title":"System Login","app.inspection":"Inspection Management","app.inspection.drugs":"Drug Types to Inspect","app.inspection.total":"Total Inspection Orders","app.inspection.today":"Today's Inspections","app.inspection.batch_upload":"Batch Upload Shipping Documents","app.inspection.excel_upload":"Excel Upload","app.inspection.manual_create":"Manual Create","app.inspection.barcode_search":"Barcode Search","app.inspection.number_search":"Number Search","app.inspection.search_barcode_placeholder":"Search barcode...","app.inspection.search_number_placeholder":"Search inspection/purchase order number...","app.inspection.time_range":"Time Range","app.inspection.time_type":"Time Type","app.inspection.start_datetime":"Start Date Time","app.inspection.end_datetime":"End Date Time","app.inspection.search":"Search","app.inspection.searching":"Searching","app.inspection.operation_time":"Operation Time","app.inspection.add_time":"Add Time","app.inspection.update_time":"Update Time","language.zh":"","language.en":"English","error.api":"System error, please try again later",logout:"Logout",copyright:"Copyright 2025 Hongsen Technology","table.drug_code":"Drug Code","table.item_number":"Item Number","table.drug_name":"Drug Name","table.manufacturer":"Manufacturer","table.received_expected_qty":"Received/Expected Qty","table.detail_count":"Detail Count","table.inspection_number":"Inspection No.","table.purchase_number":"Purchase No.","table.delivery_time":"Delivery Time","table.arrival_time":"Arrival Time","delivery.overdue":"Overdue","delivery.remaining":"Remaining","delivery.today":"Today","delivery.days":"days"}},rf=x.createContext(void 0),lp=({children:e})=>{const[t,n]=x.useState("zh"),r=()=>{n(l=>l==="zh"?"en":"zh")},o=(l,i)=>{let a=op[t][l]||l;return i&&Object.entries(i).forEach(([c,u])=>{a=a.replace(`{${c}}`,u.toString())}),a};return s.jsx(rf.Provider,{value:{language:t,toggleLanguage:r,t:o},children:e})},gs=()=>{const e=x.useContext(rf);if(e===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return e},ip=({onLogin:e})=>{const{t}=gs(),[n,r]=x.useState(""),[o,l]=x.useState(""),[i,a]=x.useState(null),[c,u]=x.useState(!1),h=async m=>{m.preventDefault(),a(null),u(!0);try{const g=await tp({ID:n,Password:o});g.Code===200?(np(g.Data),e()):g.Code===-1||g.Code===-2?a(g.Result):a(t("error.api"))}catch(g){console.error("Login error:",g),a(g instanceof Error?g.message:t("error.api"))}finally{u(!1)}};return s.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[s.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-8",children:t("app.title")}),i&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg flex items-center gap-2",children:[s.jsx(at,{size:20}),s.jsx("span",{children:i})]}),s.jsxs("form",{onSubmit:h,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"id",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"text",id:"id",value:n,onChange:m=>r(m.target.value),className:"w-full px-3 py-2 border rounded-lg bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",required:!0,autoComplete:"username"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"password",id:"password",value:o,onChange:m=>l(m.target.value),className:"w-full px-3 py-2 border rounded-lg bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",required:!0,autoComplete:"current-password"})]}),s.jsx("button",{type:"submit",disabled:c,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center ${c?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:c?s.jsxs(s.Fragment,{children:[s.jsx(ce,{size:"small\\",className:"mr-2"}),"..."]}):""})]})]})})};class Sn extends Error{constructor(t,n){const r=new.target.prototype;super(`${t}: Status code '${n}'`),this.statusCode=n,this.__proto__=r}}class da extends Error{constructor(t="A timeout occurred."){const n=new.target.prototype;super(t),this.__proto__=n}}class Ct extends Error{constructor(t="An abort occurred."){const n=new.target.prototype;super(t),this.__proto__=n}}class ap extends Error{constructor(t,n){const r=new.target.prototype;super(t),this.transport=n,this.errorType="UnsupportedTransportError",this.__proto__=r}}class cp extends Error{constructor(t,n){const r=new.target.prototype;super(t),this.transport=n,this.errorType="DisabledTransportError",this.__proto__=r}}class up extends Error{constructor(t,n){const r=new.target.prototype;super(t),this.transport=n,this.errorType="FailedToStartTransportError",this.__proto__=r}}class kc extends Error{constructor(t){const n=new.target.prototype;super(t),this.errorType="FailedToNegotiateWithServerError",this.__proto__=n}}class dp extends Error{constructor(t,n){const r=new.target.prototype;super(t),this.innerErrors=n,this.__proto__=r}}class sf{constructor(t,n,r){this.statusCode=t,this.statusText=n,this.content=r}}class Ho{get(t,n){return this.send({...n,method:"GET",url:t})}post(t,n){return this.send({...n,method:"POST",url:t})}delete(t,n){return this.send({...n,method:"DELETE",url:t})}getCookieString(t){return""}}var _;(function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"})(_||(_={}));class is{constructor(){}log(t,n){}}is.instance=new is;const fp="9.0.6";class De{static isRequired(t,n){if(t==null)throw new Error(`The '${n}' argument is required.`)}static isNotEmpty(t,n){if(!t||t.match(/^\s*$/))throw new Error(`The '${n}' argument should not be empty.`)}static isIn(t,n,r){if(!(t in n))throw new Error(`Unknown ${r} value: ${t}.`)}}class we{static get isBrowser(){return!we.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!we.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!we.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function as(e,t){let n="";return On(e)?(n=`Binary data of length ${e.byteLength}`,t&&(n+=`. Content: '${hp(e)}'`)):typeof e=="string"&&(n=`String data of length ${e.length}`,t&&(n+=`. Content: '${e}'`)),n}function hp(e){const t=new Uint8Array(e);let n="";return t.forEach(r=>{const o=r<16?"0":"";n+=`0x${o}${r.toString(16)} `}),n.substr(0,n.length-1)}function On(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}async function of(e,t,n,r,o,l){const i={},[a,c]=mr();i[a]=c,e.log(_.Trace,`(${t} transport) sending data. ${as(o,l.logMessageContent)}.`);const u=On(o)?"arraybuffer":"text",h=await n.post(r,{content:o,headers:{...i,...l.headers},responseType:u,timeout:l.timeout,withCredentials:l.withCredentials});e.log(_.Trace,`(${t} transport) request complete. Response status: ${h.statusCode}.`)}function mp(e){return e===void 0?new So(_.Information):e===null?is.instance:e.log!==void 0?e:new So(e)}class pp{constructor(t,n){this._subject=t,this._observer=n}dispose(){const t=this._subject.observers.indexOf(this._observer);t>-1&&this._subject.observers.splice(t,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(n=>{})}}class So{constructor(t){this._minLevel=t,this.out=console}log(t,n){if(t>=this._minLevel){const r=`[${new Date().toISOString()}] ${_[t]}: ${n}`;switch(t){case _.Critical:case _.Error:this.out.error(r);break;case _.Warning:this.out.warn(r);break;case _.Information:this.out.info(r);break;default:this.out.log(r);break}}}}function mr(){let e="X-SignalR-User-Agent";return we.isNode&&(e="User-Agent"),[e,gp(fp,xp(),vp(),yp())]}function gp(e,t,n,r){let o="Microsoft SignalR/";const l=e.split(".");return o+=`${l[0]}.${l[1]}`,o+=` (${e}; `,t&&t!==""?o+=`${t}; `:o+="Unknown OS; ",o+=`${n}`,r?o+=`; ${r}`:o+="; Unknown Runtime Version",o+=")",o}function xp(){if(we.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function yp(){if(we.isNode)return process.versions.node}function vp(){return we.isNode?"NodeJS":"Browser"}function xl(e){return e.stack?e.stack:e.message?e.message:`${e}`}function wp(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class bp extends Ho{constructor(t){if(super(),this._logger=t,typeof fetch>"u"||we.isNode){const n=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(n("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=n("node-fetch"):this._fetchType=fetch,this._fetchType=n("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(wp());if(typeof AbortController>"u"){const n=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=n("abort-controller")}else this._abortControllerType=AbortController}async send(t){if(t.abortSignal&&t.abortSignal.aborted)throw new Ct;if(!t.method)throw new Error("No method defined.");if(!t.url)throw new Error("No url defined.");const n=new this._abortControllerType;let r;t.abortSignal&&(t.abortSignal.onabort=()=>{n.abort(),r=new Ct});let o=null;if(t.timeout){const c=t.timeout;o=setTimeout(()=>{n.abort(),this._logger.log(_.Warning,"Timeout from HTTP request."),r=new da},c)}t.content===""&&(t.content=void 0),t.content&&(t.headers=t.headers||{},On(t.content)?t.headers["Content-Type"]="application/octet-stream":t.headers["Content-Type"]="text/plain;charset=UTF-8");let l;try{l=await this._fetchType(t.url,{body:t.content,cache:"no-cache",credentials:t.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...t.headers},method:t.method,mode:"cors",redirect:"follow",signal:n.signal})}catch(c){throw r||(this._logger.log(_.Warning,`Error from HTTP request. ${c}.`),c)}finally{o&&clearTimeout(o),t.abortSignal&&(t.abortSignal.onabort=null)}if(!l.ok){const c=await Cc(l,"text");throw new Sn(c||l.statusText,l.status)}const a=await Cc(l,t.responseType);return new sf(l.status,l.statusText,a)}getCookieString(t){let n="";return we.isNode&&this._jar&&this._jar.getCookies(t,(r,o)=>n=o.join("; ")),n}}function Cc(e,t){let n;switch(t){case"arraybuffer":n=e.arrayBuffer();break;case"text":n=e.text();break;case"blob":case"document":case"json":throw new Error(`${t} is not supported.`);default:n=e.text();break}return n}class Np extends Ho{constructor(t){super(),this._logger=t}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new Ct):t.method?t.url?new Promise((n,r)=>{const o=new XMLHttpRequest;o.open(t.method,t.url,!0),o.withCredentials=t.withCredentials===void 0?!0:t.withCredentials,o.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.content===""&&(t.content=void 0),t.content&&(On(t.content)?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const l=t.headers;l&&Object.keys(l).forEach(i=>{o.setRequestHeader(i,l[i])}),t.responseType&&(o.responseType=t.responseType),t.abortSignal&&(t.abortSignal.onabort=()=>{o.abort(),r(new Ct)}),t.timeout&&(o.timeout=t.timeout),o.onload=()=>{t.abortSignal&&(t.abortSignal.onabort=null),o.status>=200&&o.status<300?n(new sf(o.status,o.statusText,o.response||o.responseText)):r(new Sn(o.response||o.responseText||o.statusText,o.status))},o.onerror=()=>{this._logger.log(_.Warning,`Error from HTTP request. ${o.status}: ${o.statusText}.`),r(new Sn(o.statusText,o.status))},o.ontimeout=()=>{this._logger.log(_.Warning,"Timeout from HTTP request."),r(new da)},o.send(t.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class _p extends Ho{constructor(t){if(super(),typeof fetch<"u"||we.isNode)this._httpClient=new bp(t);else if(typeof XMLHttpRequest<"u")this._httpClient=new Np(t);else throw new Error("No usable HttpClient found.")}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new Ct):t.method?t.url?this._httpClient.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(t){return this._httpClient.getCookieString(t)}}class ut{static write(t){return`${t}${ut.RecordSeparator}`}static parse(t){if(t[t.length-1]!==ut.RecordSeparator)throw new Error("Message is incomplete.");const n=t.split(ut.RecordSeparator);return n.pop(),n}}ut.RecordSeparatorCode=30;ut.RecordSeparator=String.fromCharCode(ut.RecordSeparatorCode);class jp{writeHandshakeRequest(t){return ut.write(JSON.stringify(t))}parseHandshakeResponse(t){let n,r;if(On(t)){const a=new Uint8Array(t),c=a.indexOf(ut.RecordSeparatorCode);if(c===-1)throw new Error("Message is incomplete.");const u=c+1;n=String.fromCharCode.apply(null,Array.prototype.slice.call(a.slice(0,u))),r=a.byteLength>u?a.slice(u).buffer:null}else{const a=t,c=a.indexOf(ut.RecordSeparator);if(c===-1)throw new Error("Message is incomplete.");const u=c+1;n=a.substring(0,u),r=a.length>u?a.substring(u):null}const o=ut.parse(n),l=JSON.parse(o[0]);if(l.type)throw new Error("Expected a handshake response from the server.");return[r,l]}}var re;(function(e){e[e.Invocation=1]="Invocation",e[e.StreamItem=2]="StreamItem",e[e.Completion=3]="Completion",e[e.StreamInvocation=4]="StreamInvocation",e[e.CancelInvocation=5]="CancelInvocation",e[e.Ping=6]="Ping",e[e.Close=7]="Close",e[e.Ack=8]="Ack",e[e.Sequence=9]="Sequence"})(re||(re={}));class Sp{constructor(){this.observers=[]}next(t){for(const n of this.observers)n.next(t)}error(t){for(const n of this.observers)n.error&&n.error(t)}complete(){for(const t of this.observers)t.complete&&t.complete()}subscribe(t){return this.observers.push(t),new pp(this,t)}}class kp{constructor(t,n,r){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=t,this._connection=n,this._bufferSize=r}async _send(t){const n=this._protocol.writeMessage(t);let r=Promise.resolve();if(this._isInvocationMessage(t)){this._totalMessageCount++;let o=()=>{},l=()=>{};On(n)?this._bufferedByteCount+=n.byteLength:this._bufferedByteCount+=n.length,this._bufferedByteCount>=this._bufferSize&&(r=new Promise((i,a)=>{o=i,l=a})),this._messages.push(new Cp(n,this._totalMessageCount,o,l))}try{this._reconnectInProgress||await this._connection.send(n)}catch{this._disconnected()}await r}_ack(t){let n=-1;for(let r=0;r<this._messages.length;r++){const o=this._messages[r];if(o._id<=t.sequenceId)n=r,On(o._message)?this._bufferedByteCount-=o._message.byteLength:this._bufferedByteCount-=o._message.length,o._resolver();else if(this._bufferedByteCount<this._bufferSize)o._resolver();else break}n!==-1&&(this._messages=this._messages.slice(n+1))}_shouldProcessMessage(t){if(this._waitForSequenceMessage)return t.type!==re.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(t))return!0;const n=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,n<=this._latestReceivedSequenceId?(n===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=n,this._ackTimer(),!0)}_resetSequence(t){if(t.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=t.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const t=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:re.Sequence,sequenceId:t}));const n=this._messages;for(const r of n)await this._connection.send(r._message);this._reconnectInProgress=!1}_dispose(t){t??(t=new Error("Unable to reconnect to server."));for(const n of this._messages)n._rejector(t)}_isInvocationMessage(t){switch(t.type){case re.Invocation:case re.StreamItem:case re.Completion:case re.StreamInvocation:case re.CancelInvocation:return!0;case re.Close:case re.Sequence:case re.Ping:case re.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:re.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class Cp{constructor(t,n,r,o){this._message=t,this._id=n,this._resolver=r,this._rejector=o}}const Ep=30*1e3,Dp=15*1e3,Tp=1e5;var fe;(function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Reconnecting="Reconnecting"})(fe||(fe={}));class fa{static create(t,n,r,o,l,i,a){return new fa(t,n,r,o,l,i,a)}constructor(t,n,r,o,l,i,a){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(_.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},De.isRequired(t,"connection"),De.isRequired(n,"logger"),De.isRequired(r,"protocol"),this.serverTimeoutInMilliseconds=l??Ep,this.keepAliveIntervalInMilliseconds=i??Dp,this._statefulReconnectBufferSize=a??Tp,this._logger=n,this._protocol=r,this.connection=t,this._reconnectPolicy=o,this._handshakeProtocol=new jp,this.connection.onreceive=c=>this._processIncomingData(c),this.connection.onclose=c=>this._connectionClosed(c),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=fe.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:re.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(t){if(this._connectionState!==fe.Disconnected&&this._connectionState!==fe.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!t)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=t}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==fe.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=fe.Connecting,this._logger.log(_.Debug,"Starting HubConnection.");try{await this._startInternal(),we.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=fe.Connected,this._connectionStarted=!0,this._logger.log(_.Debug,"HubConnection connected successfully.")}catch(t){return this._connectionState=fe.Disconnected,this._logger.log(_.Debug,`HubConnection failed to start successfully because of error '${t}'.`),Promise.reject(t)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const t=new Promise((n,r)=>{this._handshakeResolver=n,this._handshakeRejecter=r});await this.connection.start(this._protocol.transferFormat);try{let n=this._protocol.version;this.connection.features.reconnect||(n=1);const r={protocol:this._protocol.name,version:n};if(this._logger.log(_.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(r)),this._logger.log(_.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await t,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new kp(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(n){throw this._logger.log(_.Debug,`Hub handshake failed with error '${n}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(n),n}}async stop(){const t=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await t}catch{}}_stopInternal(t){if(this._connectionState===fe.Disconnected)return this._logger.log(_.Debug,`Call to HubConnection.stop(${t}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===fe.Disconnecting)return this._logger.log(_.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const n=this._connectionState;return this._connectionState=fe.Disconnecting,this._logger.log(_.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(_.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(n===fe.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=t||new Ct("The connection was stopped before the hub handshake could complete."),this.connection.stop(t))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(t,...n){const[r,o]=this._replaceStreamingParams(n),l=this._createStreamInvocation(t,n,o);let i;const a=new Sp;return a.cancelCallback=()=>{const c=this._createCancelInvocation(l.invocationId);return delete this._callbacks[l.invocationId],i.then(()=>this._sendWithProtocol(c))},this._callbacks[l.invocationId]=(c,u)=>{if(u){a.error(u);return}else c&&(c.type===re.Completion?c.error?a.error(new Error(c.error)):a.complete():a.next(c.item))},i=this._sendWithProtocol(l).catch(c=>{a.error(c),delete this._callbacks[l.invocationId]}),this._launchStreams(r,i),a}_sendMessage(t){return this._resetKeepAliveInterval(),this.connection.send(t)}_sendWithProtocol(t){return this._messageBuffer?this._messageBuffer._send(t):this._sendMessage(this._protocol.writeMessage(t))}send(t,...n){const[r,o]=this._replaceStreamingParams(n),l=this._sendWithProtocol(this._createInvocation(t,n,!0,o));return this._launchStreams(r,l),l}invoke(t,...n){const[r,o]=this._replaceStreamingParams(n),l=this._createInvocation(t,n,!1,o);return new Promise((a,c)=>{this._callbacks[l.invocationId]=(h,m)=>{if(m){c(m);return}else h&&(h.type===re.Completion?h.error?c(new Error(h.error)):a(h.result):c(new Error(`Unexpected message type: ${h.type}`)))};const u=this._sendWithProtocol(l).catch(h=>{c(h),delete this._callbacks[l.invocationId]});this._launchStreams(r,u)})}on(t,n){!t||!n||(t=t.toLowerCase(),this._methods[t]||(this._methods[t]=[]),this._methods[t].indexOf(n)===-1&&this._methods[t].push(n))}off(t,n){if(!t)return;t=t.toLowerCase();const r=this._methods[t];if(r)if(n){const o=r.indexOf(n);o!==-1&&(r.splice(o,1),r.length===0&&delete this._methods[t])}else delete this._methods[t]}onclose(t){t&&this._closedCallbacks.push(t)}onreconnecting(t){t&&this._reconnectingCallbacks.push(t)}onreconnected(t){t&&this._reconnectedCallbacks.push(t)}_processIncomingData(t){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(t=this._processHandshakeResponse(t),this._receivedHandshakeResponse=!0),t){const n=this._protocol.parseMessages(t,this._logger);for(const r of n)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(r)))switch(r.type){case re.Invocation:this._invokeClientMethod(r).catch(o=>{this._logger.log(_.Error,`Invoke client method threw error: ${xl(o)}`)});break;case re.StreamItem:case re.Completion:{const o=this._callbacks[r.invocationId];if(o){r.type===re.Completion&&delete this._callbacks[r.invocationId];try{o(r)}catch(l){this._logger.log(_.Error,`Stream callback threw error: ${xl(l)}`)}}break}case re.Ping:break;case re.Close:{this._logger.log(_.Information,"Close message received from server.");const o=r.error?new Error("Server returned an error on close: "+r.error):void 0;r.allowReconnect===!0?this.connection.stop(o):this._stopPromise=this._stopInternal(o);break}case re.Ack:this._messageBuffer&&this._messageBuffer._ack(r);break;case re.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(r);break;default:this._logger.log(_.Warning,`Invalid message type: ${r.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(t){let n,r;try{[r,n]=this._handshakeProtocol.parseHandshakeResponse(t)}catch(o){const l="Error parsing handshake response: "+o;this._logger.log(_.Error,l);const i=new Error(l);throw this._handshakeRejecter(i),i}if(n.error){const o="Server returned handshake error: "+n.error;this._logger.log(_.Error,o);const l=new Error(o);throw this._handshakeRejecter(l),l}else this._logger.log(_.Debug,"Server handshake complete.");return this._handshakeResolver(),r}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let t=this._nextKeepAlive-new Date().getTime();t<0&&(t=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===fe.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},t)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(t){const n=t.target.toLowerCase(),r=this._methods[n];if(!r){this._logger.log(_.Warning,`No client method with the name '${n}' found.`),t.invocationId&&(this._logger.log(_.Warning,`No result given for '${n}' method and invocation ID '${t.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null)));return}const o=r.slice(),l=!!t.invocationId;let i,a,c;for(const u of o)try{const h=i;i=await u.apply(this,t.arguments),l&&i&&h&&(this._logger.log(_.Error,`Multiple results provided for '${n}'. Sending error to server.`),c=this._createCompletionMessage(t.invocationId,"Client provided multiple results.",null)),a=void 0}catch(h){a=h,this._logger.log(_.Error,`A callback for the method '${n}' threw error '${h}'.`)}c?await this._sendWithProtocol(c):l?(a?c=this._createCompletionMessage(t.invocationId,`${a}`,null):i!==void 0?c=this._createCompletionMessage(t.invocationId,null,i):(this._logger.log(_.Warning,`No result given for '${n}' method and invocation ID '${t.invocationId}'.`),c=this._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(c)):i&&this._logger.log(_.Error,`Result given for '${n}' method but server is not expecting a result.`)}_connectionClosed(t){this._logger.log(_.Debug,`HubConnection.connectionClosed(${t}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||t||new Ct("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(t||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===fe.Disconnecting?this._completeClose(t):this._connectionState===fe.Connected&&this._reconnectPolicy?this._reconnect(t):this._connectionState===fe.Connected&&this._completeClose(t)}_completeClose(t){if(this._connectionStarted){this._connectionState=fe.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(t??new Error("Connection closed.")),this._messageBuffer=void 0),we.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(n=>n.apply(this,[t]))}catch(n){this._logger.log(_.Error,`An onclose callback called with error '${t}' threw error '${n}'.`)}}}async _reconnect(t){const n=Date.now();let r=0,o=t!==void 0?t:new Error("Attempting to reconnect due to a unknown error."),l=this._getNextRetryDelay(r++,0,o);if(l===null){this._logger.log(_.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(t);return}if(this._connectionState=fe.Reconnecting,t?this._logger.log(_.Information,`Connection reconnecting because of error '${t}'.`):this._logger.log(_.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(i=>i.apply(this,[t]))}catch(i){this._logger.log(_.Error,`An onreconnecting callback called with error '${t}' threw error '${i}'.`)}if(this._connectionState!==fe.Reconnecting){this._logger.log(_.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;l!==null;){if(this._logger.log(_.Information,`Reconnect attempt number ${r} will start in ${l} ms.`),await new Promise(i=>{this._reconnectDelayHandle=setTimeout(i,l)}),this._reconnectDelayHandle=void 0,this._connectionState!==fe.Reconnecting){this._logger.log(_.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=fe.Connected,this._logger.log(_.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(i=>i.apply(this,[this.connection.connectionId]))}catch(i){this._logger.log(_.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${i}'.`)}return}catch(i){if(this._logger.log(_.Information,`Reconnect attempt failed because of error '${i}'.`),this._connectionState!==fe.Reconnecting){this._logger.log(_.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===fe.Disconnecting&&this._completeClose();return}o=i instanceof Error?i:new Error(i.toString()),l=this._getNextRetryDelay(r++,Date.now()-n,o)}}this._logger.log(_.Information,`Reconnect retries have been exhausted after ${Date.now()-n} ms and ${r} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(t,n,r){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:n,previousRetryCount:t,retryReason:r})}catch(o){return this._logger.log(_.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${t}, ${n}) threw error '${o}'.`),null}}_cancelCallbacksWithError(t){const n=this._callbacks;this._callbacks={},Object.keys(n).forEach(r=>{const o=n[r];try{o(null,t)}catch(l){this._logger.log(_.Error,`Stream 'error' callback called with '${t}' threw error: ${xl(l)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(t,n,r,o){if(r)return o.length!==0?{target:t,arguments:n,streamIds:o,type:re.Invocation}:{target:t,arguments:n,type:re.Invocation};{const l=this._invocationId;return this._invocationId++,o.length!==0?{target:t,arguments:n,invocationId:l.toString(),streamIds:o,type:re.Invocation}:{target:t,arguments:n,invocationId:l.toString(),type:re.Invocation}}}_launchStreams(t,n){if(t.length!==0){n||(n=Promise.resolve());for(const r in t)t[r].subscribe({complete:()=>{n=n.then(()=>this._sendWithProtocol(this._createCompletionMessage(r)))},error:o=>{let l;o instanceof Error?l=o.message:o&&o.toString?l=o.toString():l="Unknown error",n=n.then(()=>this._sendWithProtocol(this._createCompletionMessage(r,l)))},next:o=>{n=n.then(()=>this._sendWithProtocol(this._createStreamItemMessage(r,o)))}})}}_replaceStreamingParams(t){const n=[],r=[];for(let o=0;o<t.length;o++){const l=t[o];if(this._isObservable(l)){const i=this._invocationId;this._invocationId++,n[i]=l,r.push(i.toString()),t.splice(o,1)}}return[n,r]}_isObservable(t){return t&&t.subscribe&&typeof t.subscribe=="function"}_createStreamInvocation(t,n,r){const o=this._invocationId;return this._invocationId++,r.length!==0?{target:t,arguments:n,invocationId:o.toString(),streamIds:r,type:re.StreamInvocation}:{target:t,arguments:n,invocationId:o.toString(),type:re.StreamInvocation}}_createCancelInvocation(t){return{invocationId:t,type:re.CancelInvocation}}_createStreamItemMessage(t,n){return{invocationId:t,item:n,type:re.StreamItem}}_createCompletionMessage(t,n,r){return n?{error:n,invocationId:t,type:re.Completion}:{invocationId:t,result:r,type:re.Completion}}_createCloseMessage(){return{type:re.Close}}}const Ip=[0,2e3,1e4,3e4,null];class Ec{constructor(t){this._retryDelays=t!==void 0?[...t,null]:Ip}nextRetryDelayInMilliseconds(t){return this._retryDelays[t.previousRetryCount]}}class kn{}kn.Authorization="Authorization";kn.Cookie="Cookie";class Pp extends Ho{constructor(t,n){super(),this._innerClient=t,this._accessTokenFactory=n}async send(t){let n=!0;this._accessTokenFactory&&(!this._accessToken||t.url&&t.url.indexOf("/negotiate?")>0)&&(n=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(t);const r=await this._innerClient.send(t);return n&&r.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(t),await this._innerClient.send(t)):r}_setAuthorizationHeader(t){t.headers||(t.headers={}),this._accessToken?t.headers[kn.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&t.headers[kn.Authorization]&&delete t.headers[kn.Authorization]}getCookieString(t){return this._innerClient.getCookieString(t)}}var Pe;(function(e){e[e.None=0]="None",e[e.WebSockets=1]="WebSockets",e[e.ServerSentEvents=2]="ServerSentEvents",e[e.LongPolling=4]="LongPolling"})(Pe||(Pe={}));var We;(function(e){e[e.Text=1]="Text",e[e.Binary=2]="Binary"})(We||(We={}));let Rp=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class Dc{get pollAborted(){return this._pollAbort.aborted}constructor(t,n,r){this._httpClient=t,this._logger=n,this._pollAbort=new Rp,this._options=r,this._running=!1,this.onreceive=null,this.onclose=null}async connect(t,n){if(De.isRequired(t,"url"),De.isRequired(n,"transferFormat"),De.isIn(n,We,"transferFormat"),this._url=t,this._logger.log(_.Trace,"(LongPolling transport) Connecting."),n===We.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[r,o]=mr(),l={[r]:o,...this._options.headers},i={abortSignal:this._pollAbort.signal,headers:l,timeout:1e5,withCredentials:this._options.withCredentials};n===We.Binary&&(i.responseType="arraybuffer");const a=`${t}&_=${Date.now()}`;this._logger.log(_.Trace,`(LongPolling transport) polling: ${a}.`);const c=await this._httpClient.get(a,i);c.statusCode!==200?(this._logger.log(_.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),this._closeError=new Sn(c.statusText||"",c.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,i)}async _poll(t,n){try{for(;this._running;)try{const r=`${t}&_=${Date.now()}`;this._logger.log(_.Trace,`(LongPolling transport) polling: ${r}.`);const o=await this._httpClient.get(r,n);o.statusCode===204?(this._logger.log(_.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):o.statusCode!==200?(this._logger.log(_.Error,`(LongPolling transport) Unexpected response code: ${o.statusCode}.`),this._closeError=new Sn(o.statusText||"",o.statusCode),this._running=!1):o.content?(this._logger.log(_.Trace,`(LongPolling transport) data received. ${as(o.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(o.content)):this._logger.log(_.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(r){this._running?r instanceof da?this._logger.log(_.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=r,this._running=!1):this._logger.log(_.Trace,`(LongPolling transport) Poll errored after shutdown: ${r.message}`)}}finally{this._logger.log(_.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(t){return this._running?of(this._logger,"LongPolling",this._httpClient,this._url,t,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(_.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(_.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const t={},[n,r]=mr();t[n]=r;const o={headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let l;try{await this._httpClient.delete(this._url,o)}catch(i){l=i}l?l instanceof Sn&&(l.statusCode===404?this._logger.log(_.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(_.Trace,`(LongPolling transport) Error sending a DELETE request: ${l}`)):this._logger.log(_.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(_.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let t="(LongPolling transport) Firing onclose event.";this._closeError&&(t+=" Error: "+this._closeError),this._logger.log(_.Trace,t),this.onclose(this._closeError)}}}class Op{constructor(t,n,r,o){this._httpClient=t,this._accessToken=n,this._logger=r,this._options=o,this.onreceive=null,this.onclose=null}async connect(t,n){return De.isRequired(t,"url"),De.isRequired(n,"transferFormat"),De.isIn(n,We,"transferFormat"),this._logger.log(_.Trace,"(SSE transport) Connecting."),this._url=t,this._accessToken&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((r,o)=>{let l=!1;if(n!==We.Text){o(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let i;if(we.isBrowser||we.isWebWorker)i=new this._options.EventSource(t,{withCredentials:this._options.withCredentials});else{const a=this._httpClient.getCookieString(t),c={};c.Cookie=a;const[u,h]=mr();c[u]=h,i=new this._options.EventSource(t,{withCredentials:this._options.withCredentials,headers:{...c,...this._options.headers}})}try{i.onmessage=a=>{if(this.onreceive)try{this._logger.log(_.Trace,`(SSE transport) data received. ${as(a.data,this._options.logMessageContent)}.`),this.onreceive(a.data)}catch(c){this._close(c);return}},i.onerror=a=>{l?this._close():o(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},i.onopen=()=>{this._logger.log(_.Information,`SSE connected to ${this._url}`),this._eventSource=i,l=!0,r()}}catch(a){o(a);return}})}async send(t){return this._eventSource?of(this._logger,"SSE",this._httpClient,this._url,t,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(t){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(t))}}class Lp{constructor(t,n,r,o,l,i){this._logger=r,this._accessTokenFactory=n,this._logMessageContent=o,this._webSocketConstructor=l,this._httpClient=t,this.onreceive=null,this.onclose=null,this._headers=i}async connect(t,n){De.isRequired(t,"url"),De.isRequired(n,"transferFormat"),De.isIn(n,We,"transferFormat"),this._logger.log(_.Trace,"(WebSockets transport) Connecting.");let r;return this._accessTokenFactory&&(r=await this._accessTokenFactory()),new Promise((o,l)=>{t=t.replace(/^http/,"ws");let i;const a=this._httpClient.getCookieString(t);let c=!1;if(we.isNode||we.isReactNative){const u={},[h,m]=mr();u[h]=m,r&&(u[kn.Authorization]=`Bearer ${r}`),a&&(u[kn.Cookie]=a),i=new this._webSocketConstructor(t,void 0,{headers:{...u,...this._headers}})}else r&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(r)}`);i||(i=new this._webSocketConstructor(t)),n===We.Binary&&(i.binaryType="arraybuffer"),i.onopen=u=>{this._logger.log(_.Information,`WebSocket connected to ${t}.`),this._webSocket=i,c=!0,o()},i.onerror=u=>{let h=null;typeof ErrorEvent<"u"&&u instanceof ErrorEvent?h=u.error:h="There was an error with the transport",this._logger.log(_.Information,`(WebSockets transport) ${h}.`)},i.onmessage=u=>{if(this._logger.log(_.Trace,`(WebSockets transport) data received. ${as(u.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(u.data)}catch(h){this._close(h);return}},i.onclose=u=>{if(c)this._close(u);else{let h=null;typeof ErrorEvent<"u"&&u instanceof ErrorEvent?h=u.error:h="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",l(new Error(h))}}})}send(t){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(_.Trace,`(WebSockets transport) sending data. ${as(t,this._logMessageContent)}.`),this._webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(t){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(_.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(t)&&(t.wasClean===!1||t.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${t.code} (${t.reason||"no reason given"}).`)):t instanceof Error?this.onclose(t):this.onclose())}_isCloseEvent(t){return t&&typeof t.wasClean=="boolean"&&typeof t.code=="number"}}const Tc=100;class Mp{constructor(t,n={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,De.isRequired(t,"url"),this._logger=mp(n.logger),this.baseUrl=this._resolveUrl(t),n=n||{},n.logMessageContent=n.logMessageContent===void 0?!1:n.logMessageContent,typeof n.withCredentials=="boolean"||n.withCredentials===void 0)n.withCredentials=n.withCredentials===void 0?!0:n.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");n.timeout=n.timeout===void 0?100*1e3:n.timeout;let r=null,o=null;if(we.isNode&&typeof require<"u"){const l=typeof __webpack_require__=="function"?__non_webpack_require__:require;r=l("ws"),o=l("eventsource")}!we.isNode&&typeof WebSocket<"u"&&!n.WebSocket?n.WebSocket=WebSocket:we.isNode&&!n.WebSocket&&r&&(n.WebSocket=r),!we.isNode&&typeof EventSource<"u"&&!n.EventSource?n.EventSource=EventSource:we.isNode&&!n.EventSource&&typeof o<"u"&&(n.EventSource=o),this._httpClient=new Pp(n.httpClient||new _p(this._logger),n.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=n,this.onreceive=null,this.onclose=null}async start(t){if(t=t||We.Binary,De.isIn(t,We,"transferFormat"),this._logger.log(_.Debug,`Starting connection with transfer format '${We[t]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(t),await this._startInternalPromise,this._connectionState==="Disconnecting"){const n="Failed to start the HttpConnection before stop() was called.";return this._logger.log(_.Error,n),await this._stopPromise,Promise.reject(new Ct(n))}else if(this._connectionState!=="Connected"){const n="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(_.Error,n),Promise.reject(new Ct(n))}this._connectionStarted=!0}send(t){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new ha(this.transport)),this._sendQueue.send(t))}async stop(t){if(this._connectionState==="Disconnected")return this._logger.log(_.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(_.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(n=>{this._stopPromiseResolver=n}),await this._stopInternal(t),await this._stopPromise}async _stopInternal(t){this._stopError=t;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(n){this._logger.log(_.Error,`HttpConnection.transport.stop() threw error '${n}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(_.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(t){let n=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Pe.WebSockets)this.transport=this._constructTransport(Pe.WebSockets),await this._startTransport(n,t);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let r=null,o=0;do{if(r=await this._getNegotiationResponse(n),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Ct("The connection was stopped during negotiation.");if(r.error)throw new Error(r.error);if(r.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(r.url&&(n=r.url),r.accessToken){const l=r.accessToken;this._accessTokenFactory=()=>l,this._httpClient._accessToken=l,this._httpClient._accessTokenFactory=void 0}o++}while(r.url&&o<Tc);if(o===Tc&&r.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(n,this._options.transport,r,t)}this.transport instanceof Dc&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(_.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(r){return this._logger.log(_.Error,"Failed to start the connection: "+r),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(r)}}async _getNegotiationResponse(t){const n={},[r,o]=mr();n[r]=o;const l=this._resolveNegotiateUrl(t);this._logger.log(_.Debug,`Sending negotiation request: ${l}.`);try{const i=await this._httpClient.post(l,{content:"",headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(i.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${i.statusCode}'`));const a=JSON.parse(i.content);return(!a.negotiateVersion||a.negotiateVersion<1)&&(a.connectionToken=a.connectionId),a.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new kc("Client didn't negotiate Stateful Reconnect but the server did.")):a}catch(i){let a="Failed to complete negotiation with the server: "+i;return i instanceof Sn&&i.statusCode===404&&(a=a+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(_.Error,a),Promise.reject(new kc(a))}}_createConnectUrl(t,n){return n?t+(t.indexOf("?")===-1?"?":"&")+`id=${n}`:t}async _createTransport(t,n,r,o){let l=this._createConnectUrl(t,r.connectionToken);if(this._isITransport(n)){this._logger.log(_.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=n,await this._startTransport(l,o),this.connectionId=r.connectionId;return}const i=[],a=r.availableTransports||[];let c=r;for(const u of a){const h=this._resolveTransportOrError(u,n,o,(c==null?void 0:c.useStatefulReconnect)===!0);if(h instanceof Error)i.push(`${u.transport} failed:`),i.push(h);else if(this._isITransport(h)){if(this.transport=h,!c){try{c=await this._getNegotiationResponse(t)}catch(m){return Promise.reject(m)}l=this._createConnectUrl(t,c.connectionToken)}try{await this._startTransport(l,o),this.connectionId=c.connectionId;return}catch(m){if(this._logger.log(_.Error,`Failed to start the transport '${u.transport}': ${m}`),c=void 0,i.push(new up(`${u.transport} failed: ${m}`,Pe[u.transport])),this._connectionState!=="Connecting"){const g="Failed to select transport before stop() was called.";return this._logger.log(_.Debug,g),Promise.reject(new Ct(g))}}}}return i.length>0?Promise.reject(new dp(`Unable to connect to the server with any of the available transports. ${i.join(" ")}`,i)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(t){switch(t){case Pe.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Lp(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Pe.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Op(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Pe.LongPolling:return new Dc(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${t}.`)}}_startTransport(t,n){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async r=>{let o=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(t,n),await this.features.resend()}catch{o=!0}else{this._stopConnection(r);return}o&&this._stopConnection(r)}:this.transport.onclose=r=>this._stopConnection(r),this.transport.connect(t,n)}_resolveTransportOrError(t,n,r,o){const l=Pe[t.transport];if(l==null)return this._logger.log(_.Debug,`Skipping transport '${t.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${t.transport}' because it is not supported by this client.`);if(Ap(n,l))if(t.transferFormats.map(a=>We[a]).indexOf(r)>=0){if(l===Pe.WebSockets&&!this._options.WebSocket||l===Pe.ServerSentEvents&&!this._options.EventSource)return this._logger.log(_.Debug,`Skipping transport '${Pe[l]}' because it is not supported in your environment.'`),new ap(`'${Pe[l]}' is not supported in your environment.`,l);this._logger.log(_.Debug,`Selecting transport '${Pe[l]}'.`);try{return this.features.reconnect=l===Pe.WebSockets?o:void 0,this._constructTransport(l)}catch(a){return a}}else return this._logger.log(_.Debug,`Skipping transport '${Pe[l]}' because it does not support the requested transfer format '${We[r]}'.`),new Error(`'${Pe[l]}' does not support ${We[r]}.`);else return this._logger.log(_.Debug,`Skipping transport '${Pe[l]}' because it was disabled by the client.`),new cp(`'${Pe[l]}' is disabled by the client.`,l)}_isITransport(t){return t&&typeof t=="object"&&"connect"in t}_stopConnection(t){if(this._logger.log(_.Debug,`HttpConnection.stopConnection(${t}) called while in state ${this._connectionState}.`),this.transport=void 0,t=this._stopError||t,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(_.Debug,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(_.Warning,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${t}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),t?this._logger.log(_.Error,`Connection disconnected with error '${t}'.`):this._logger.log(_.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(n=>{this._logger.log(_.Error,`TransportSendQueue.stop() threw error '${n}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(t)}catch(n){this._logger.log(_.Error,`HttpConnection.onclose(${t}) threw error '${n}'.`)}}}_resolveUrl(t){if(t.lastIndexOf("https://",0)===0||t.lastIndexOf("http://",0)===0)return t;if(!we.isBrowser)throw new Error(`Cannot resolve '${t}'.`);const n=window.document.createElement("a");return n.href=t,this._logger.log(_.Information,`Normalizing '${t}' to '${n.href}'.`),n.href}_resolveNegotiateUrl(t){const n=new URL(t);n.pathname.endsWith("/")?n.pathname+="negotiate":n.pathname+="/negotiate";const r=new URLSearchParams(n.searchParams);return r.has("negotiateVersion")||r.append("negotiateVersion",this._negotiateVersion.toString()),r.has("useStatefulReconnect")?r.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&r.append("useStatefulReconnect","true"),n.search=r.toString(),n.toString()}}function Ap(e,t){return!e||(t&e)!==0}class ha{constructor(t){this._transport=t,this._buffer=[],this._executing=!0,this._sendBufferedData=new Fs,this._transportResult=new Fs,this._sendLoopPromise=this._sendLoop()}send(t){return this._bufferData(t),this._transportResult||(this._transportResult=new Fs),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(t){if(this._buffer.length&&typeof this._buffer[0]!=typeof t)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof t}`);this._buffer.push(t),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Fs;const t=this._transportResult;this._transportResult=void 0;const n=typeof this._buffer[0]=="string"?this._buffer.join(""):ha._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(n),t.resolve()}catch(r){t.reject(r)}}}static _concatBuffers(t){const n=t.map(l=>l.byteLength).reduce((l,i)=>l+i),r=new Uint8Array(n);let o=0;for(const l of t)r.set(new Uint8Array(l),o),o+=l.byteLength;return r.buffer}}class Fs{constructor(){this.promise=new Promise((t,n)=>[this._resolver,this._rejecter]=[t,n])}resolve(){this._resolver()}reject(t){this._rejecter(t)}}const Up="json";class $p{constructor(){this.name=Up,this.version=2,this.transferFormat=We.Text}parseMessages(t,n){if(typeof t!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];n===null&&(n=is.instance);const r=ut.parse(t),o=[];for(const l of r){const i=JSON.parse(l);if(typeof i.type!="number")throw new Error("Invalid payload.");switch(i.type){case re.Invocation:this._isInvocationMessage(i);break;case re.StreamItem:this._isStreamItemMessage(i);break;case re.Completion:this._isCompletionMessage(i);break;case re.Ping:break;case re.Close:break;case re.Ack:this._isAckMessage(i);break;case re.Sequence:this._isSequenceMessage(i);break;default:n.log(_.Information,"Unknown message type '"+i.type+"' ignored.");continue}o.push(i)}return o}writeMessage(t){return ut.write(JSON.stringify(t))}_isInvocationMessage(t){this._assertNotEmptyString(t.target,"Invalid payload for Invocation message."),t.invocationId!==void 0&&this._assertNotEmptyString(t.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(t){if(this._assertNotEmptyString(t.invocationId,"Invalid payload for StreamItem message."),t.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this._assertNotEmptyString(t.error,"Invalid payload for Completion message."),this._assertNotEmptyString(t.invocationId,"Invalid payload for Completion message.")}_isAckMessage(t){if(typeof t.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(t){if(typeof t.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(t,n){if(typeof t!="string"||t==="")throw new Error(n)}}const zp={trace:_.Trace,debug:_.Debug,info:_.Information,information:_.Information,warn:_.Warning,warning:_.Warning,error:_.Error,critical:_.Critical,none:_.None};function Fp(e){const t=zp[e.toLowerCase()];if(typeof t<"u")return t;throw new Error(`Unknown log level: ${e}`)}class Bp{configureLogging(t){if(De.isRequired(t,"logging"),Hp(t))this.logger=t;else if(typeof t=="string"){const n=Fp(t);this.logger=new So(n)}else this.logger=new So(t);return this}withUrl(t,n){return De.isRequired(t,"url"),De.isNotEmpty(t,"url"),this.url=t,typeof n=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...n}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:n},this}withHubProtocol(t){return De.isRequired(t,"protocol"),this.protocol=t,this}withAutomaticReconnect(t){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return t?Array.isArray(t)?this.reconnectPolicy=new Ec(t):this.reconnectPolicy=t:this.reconnectPolicy=new Ec,this}withServerTimeout(t){return De.isRequired(t,"milliseconds"),this._serverTimeoutInMilliseconds=t,this}withKeepAliveInterval(t){return De.isRequired(t,"milliseconds"),this._keepAliveIntervalInMilliseconds=t,this}withStatefulReconnect(t){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=t==null?void 0:t.bufferSize,this}build(){const t=this.httpConnectionOptions||{};if(t.logger===void 0&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const n=new Mp(this.url,t);return fa.create(n,this.logger||is.instance,this.protocol||new $p,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function Hp(e){return e.log!==void 0}class Gp{constructor(){$n(this,"connection",null);$n(this,"messageCallbacks",[]);$n(this,"reconnectAttempts",0);$n(this,"maxReconnectAttempts",5);$n(this,"isIntentionallyClosed",!1)}connect(){if(this.connection&&this.connection.state===fe.Connected){console.log("SignalR already connected");return}try{const n=`${hi().domain}/chatHub`;console.log("=== SignalR Connection ==="),console.log("URL:",n),this.isIntentionallyClosed=!1,this.connection=new Bp().withUrl(n).withAutomaticReconnect().configureLogging(_.Information).build(),this.connection.on("ReceiveMessage",r=>{console.log("=== SignalR ReceiveMessage ==="),console.log("Message:",r),this.messageCallbacks.forEach(o=>{try{o(r)}catch(l){console.error("Error in message callback:",l)}})}),this.connection.onclose(r=>{console.warn("SignalR connection closed:",r),!this.isIntentionallyClosed&&this.reconnectAttempts<this.maxReconnectAttempts&&(this.reconnectAttempts++,console.log(`Attempting to reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts})...`),setTimeout(()=>{this.connect()},3e3))}),this.connection.start().then(()=>{console.log(" SignalR connected successfully"),this.reconnectAttempts=0}).catch(r=>{console.error(" SignalR connection failed:",r)})}catch(t){throw console.error(" SignalR initialization failed:",t),t}}disconnect(){this.connection&&(this.isIntentionallyClosed=!0,this.connection.stop(),this.connection=null,console.log("SignalR disconnected"))}onMessage(t){return this.messageCallbacks.push(t),()=>{this.messageCallbacks=this.messageCallbacks.filter(n=>n!==t)}}async sendMessage(){try{const n=`${hi().domain}/api/Message`;console.log("=== Send Message API ==="),console.log("URL:",n);const r=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const o=await r.json();return console.log("Send Message Response:",o),o}catch(t){throw console.error("Send Message failed:",t),t}}isConnected(){return this.connection!==null&&this.connection.state===fe.Connected}getReadyState(){var t;return((t=this.connection)==null?void 0:t.state)??null}}const yn=new Gp,Wp=["sub_content_add","sub_content_update","sub_contents_delete_by_GUID"],Vp=e=>!e||!e.Method?!1:Wp.includes(e.Method),ma=async e=>{if(Vp(e))try{console.log("=== Trigger WebSocket Broadcast ==="),console.log("Method:",e.Method),console.log("Response:",e),await yn.sendMessage(),console.log(" WebSocket broadcast triggered successfully")}catch(t){console.error(" Failed to trigger WebSocket broadcast:",t)}},Qp=async(e,t)=>{const n={ValueAry:[e,t]};return console.log("=== API Request Debug ==="),console.log("URL:","/api/inspection/content_get_by_addTime"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(n,null,2)),console.log("========================"),await je("/api/inspection/content_get_by_addTime",{method:"POST",body:n})},Ic=()=>{const e=new Date,t=new Date;t.setMonth(e.getMonth()-1);const n=(r,o=!1)=>{const l=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0"),a=String(r.getDate()).padStart(2,"0");return o?`${l}-${i}-${a} 23:59:59`:`${l}-${i}-${a} 00:00:00`};return[n(t),n(e,!0)]},qp=(e,t=!1)=>{const n=new Map;return(t?e:e.filter(o=>!o.Sub_content||o.Sub_content.length===0?!0:!o.Sub_content.some(l=>l.STATE===""))).forEach(o=>{var a;const l=`${o.CODE}-${o.SKDIACODE}`,i=((a=o.Sub_content)==null?void 0:a.reduce((c,u)=>c+(parseInt(u.END_QTY)||0),0))||0;if(n.has(l)){const c=n.get(l);c.totalStartQty+=parseInt(o.START_QTY)||0,c.totalReceivedQty+=i,c.items.push(o)}else n.set(l,{CODE:o.CODE,SKDIACODE:o.SKDIACODE,CHT_NAME:o.CHT_NAME,NAME:o.NAME,BRD:o.BRD,PAKAGE:o.PAKAGE,totalStartQty:parseInt(o.START_QTY)||0,totalReceivedQty:i,items:[o]})}),Array.from(n.values()).sort((o,l)=>o.CODE.localeCompare(l.CODE))},pa=async(e,t,n,r,o)=>{const l={Data:{Master_GUID:e,LOT:t,END_QTY:n,VAL:r,OP:o}};console.log("=== API Request Debug ==="),console.log("URL:","/api/inspection/sub_content_add"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(l,null,2)),console.log("========================");const i=await je("/api/inspection/sub_content_add",{method:"POST",body:l});return await ma(i),i},lf=async(e,t)=>{const n={Data:[{GUID:e,Master_GUID:t}]};console.log("=== Delete API Request Debug ==="),console.log("URL:","/api/inspection/sub_contents_delete_by_GUID"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(n,null,2)),console.log("================================");const r=await je("/api/inspection/sub_contents_delete_by_GUID",{method:"POST",body:n});return await ma(r),r},Fr=async e=>{const t=new Date,n=t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+" "+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0"),r={Data:[{...e,OP_TIME:n}]};console.log("=== Update API Request Debug ==="),console.log("URL:","/api/inspection/sub_content_update"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(r,null,2)),console.log("================================");const o=await je("/api/inspection/sub_content_update",{method:"POST",body:r});return await ma(o),o},Kp=async(e,t,n,r)=>{const o={Data:{GUID:e.GUID,Master_GUID:e.Master_GUID,PON:e.PON,IC_SN:e.IC_SN,CODE:e.CODE,NAME:e.NAME,BRD:e.BRD||"",SKDIACODE:e.SKDIACODE,BARCODE1:e.BARCODE1||"",BARCODE2:e.BARCODE2||"",START_QTY:e.START_QTY,ADD_TIME:e.ADD_TIME,SEQ:e.SEQ||"",FREE_CHARGE_FLAG:e.FREE_CHARGE_FLAG||"",API_RETURN_NOTE:e.API_RETURN_NOTE||"",NOTE:e.NOTE||"",CHT_NAME:e.CHT_NAME,PAKAGE:e.PAKAGE,END_QTY:e.END_QTY||e.START_QTY,textVision:{op_id:n,op_name:r,base64:t}}};return console.log("=== Text Vision API Request Debug ==="),console.log("URL:","/api/pcmpo/analyze_single"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(o,null,2)),console.log("====================================="),await je("/api/pcmpo/analyze_single",{method:"POST",body:o})},Yp=async e=>{const t={ValueAry:[e]};return console.log("=== Get Inspection by IC_SN API Request Debug ==="),console.log("URL:","/api/inspection/content_get_by_IC_SN"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(t,null,2)),console.log("================================================"),await je("/api/inspection/content_get_by_IC_SN",{method:"POST",body:t})},Jp=async(e,t,n)=>{const r={Data:{GUID:e,Master_GUID:t.GUID,IC_SN:t.IC_SN,op_name:n.op_name,op_id:n.op_id,op_time:n.op_time,batch_num:n.batch_num,po_num:n.po_num,name:t.NAME,cht_name:t.CHT_NAME,qty:t.START_QTY,expirydate:n.expirydate,code:t.CODE}};return console.log("=== Update Text Vision API Request Debug ==="),console.log("URL:","/api/pcmpo/update"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(r,null,2)),console.log("==========================================="),await je("/api/pcmpo/update",{method:"POST",body:r})},af=async e=>{const t={ValueAry:[e]};return console.log("=== Get by MasterGUID API Request Debug ==="),console.log("URL:","/api/pcmpo/get_by_MasterGUID"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(t,null,2)),console.log("====================================="),await je("/api/pcmpo/get_by_MasterGUID",{method:"POST",body:t})},Xp=async e=>{const t={ValueAry:[e]};return console.log("=== Get by GUID API Request Debug ==="),console.log("URL:","/api/pcmpo/get_by_GUID"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(t,null,2)),console.log("====================================="),await je("/api/pcmpo/get_by_GUID",{method:"POST",body:t})},Zp=async e=>{const t={Data:e};return console.log("=== Update Text Vision Data API Request Debug ==="),console.log("URL:","/api/pcmpo/update"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(t,null,2)),console.log("================================================"),await je("/api/pcmpo/update",{method:"POST",body:t})},Pc=async e=>{const t={Value:e};return console.log("=== Search by Barcode API Request Debug ==="),console.log("URL:","/api/MED_page/serch_by_BarCode"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(t,null,2)),console.log("=========================================="),await je("/api/MED_page/serch_by_BarCode",{method:"POST",body:t})},Rc=async(e,t)=>{const n={ValueAry:[e,t]};return console.log("=== Today Inspection Count API Request Debug ==="),console.log("URL:","/api/inspection/content_get_by_sub_content_addTime"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(n,null,2)),console.log("Date Range:",e,"to",t),console.log("=================================================="),await je("/api/inspection/content_get_by_sub_content_addTime",{method:"POST",body:n})},eg=async(e,t,n)=>{const r=new FormData;return r.append("file",e),r.append("op_id",t),r.append("op_name",n),console.log("=== Excel Upload API Request Debug ==="),console.log("URL:","/api/inspection/excel_upload_extra"),console.log("Method:","POST (multipart/form-data)"),console.log("File Name:",e.name),console.log("File Size:",e.size,"bytes"),console.log("Operator ID:",t),console.log("Operator Name:",n),console.log("FormData entries:",Array.from(r.entries())),console.log("=========================================="),await tf("/api/inspection/excel_upload_extra",{method:"POST",body:r})},cf=async()=>{const e={};return console.log("=== Get Med Cloud API Request Debug ==="),console.log("URL:","/api/med_page/get_med_cloud"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(e,null,2)),console.log("=========================================="),await je("/api/med_page/get_med_cloud",{method:"POST",body:e})},tg=async(e,t,n,r,o,l,i)=>{const a={Data:[{PON:e,IC_SN:t,CODE:n,NAME:r,BRD:o,SKDIACODE:l,START_QTY:i}]};return console.log("=== Manual Create Inspection API Request Debug ==="),console.log("URL:","/api/inspection/content_add"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(a,null,2)),console.log("=================================================="),await je("/api/inspection/content_add",{method:"POST",body:a})},ng=async e=>{const t={Data:[{GUID:e}]};return console.log("=== Delete Inspection Content API Request Debug ==="),console.log("URL:","/api/inspection/contents_delete_by_GUID"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(t,null,2)),console.log("=================================================="),await je("/api/inspection/contents_delete_by_GUID",{method:"POST",body:t})},rg=async e=>{const t={Data:e};return console.log("=== Download Excel API Request Debug ==="),console.log("URL:","/api/inspection/download_excle_by_content"),console.log("Method:","POST"),console.log("Request Data:",t),console.log("=========================================="),await ep("/api/inspection/download_excle_by_content",{method:"POST",body:t})},sg=async(e,t)=>{const n=new FormData;return n.append("file",e),n.append("CT",t),console.log("=== Upload Sub Content Excel API Request Debug ==="),console.log("URL:","/api/inspection/excel_upload_sub_content_extra"),console.log("Method:","POST (multipart/form-data)"),console.log("File Name:",e.name),console.log("File Size:",e.size,"bytes"),console.log("CT (Operator):",t),console.log("FormData entries:",Array.from(n.entries())),console.log("===================================================="),await tf("/api/inspection/excel_upload_sub_content_extra",{method:"POST",body:n})},og=async e=>(console.log("=== Barcode Scan API Request ==="),console.log("URL:","/barcode"),console.log("Method:","POST (multipart/form-data)"),console.log("=========================================="),await Zm("/barcode",{method:"POST",body:e})),lg=({data:e,loading:t,onRowClick:n})=>{const{t:r}=gs(),o=i=>{if(!i)return"";try{const a=new Date(i),c=new Date;a.setHours(0,0,0,0),c.setHours(0,0,0,0);const u=a.getTime()-c.getTime(),h=Math.ceil(u/(1e3*60*60*24)),m=a.toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/");return h===0?`${m} (${r("delivery.today")})`:h<0?`${m} (${r("delivery.overdue")} ${Math.abs(h)} ${r("delivery.days")})`:`${m} (${r("delivery.remaining")} ${h} ${r("delivery.days")})`}catch(a){return console.error("Error formatting arrival time:",a),i}},l=i=>{if(!i)return"text-gray-500";try{const a=new Date(i),c=new Date;a.setHours(0,0,0,0),c.setHours(0,0,0,0);const u=a.getTime()-c.getTime(),h=Math.ceil(u/(1e3*60*60*24));return h===0?"text-blue-600 font-medium":h<0?"text-red-600 font-medium":"text-green-600 font-medium"}catch{return"text-gray-500"}};return t?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"..."})]}):e.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8 text-center",children:[s.jsx(Pn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:""})]}):s.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden mb-6",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r("table.drug_code")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r("table.item_number")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r("table.drug_name")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r("table.manufacturer")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r("table.arrival_time")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r("table.received_expected_qty")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r("table.detail_count")}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((i,a)=>s.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>n(i),children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"text-sm font-medium text-gray-900",children:i.CODE})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"text-sm text-gray-900",children:i.SKDIACODE})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[s.jsx("div",{className:"font-medium",children:i.CHT_NAME||i.NAME}),i.CHT_NAME&&i.NAME&&i.CHT_NAME!==i.NAME&&s.jsx("div",{className:"text-gray-500 text-xs mt-1",children:i.NAME})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"text-sm text-gray-900",children:i.BRD||""})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm space-y-1",children:i.items.map((c,u)=>s.jsxs("div",{className:`flex items-center ${l(c.DELIVERY_TIME)}`,children:[s.jsx(os,{className:"w-4 h-4 mr-1 text-gray-400"}),o(c.DELIVERY_TIME)]},u))})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[s.jsx("span",{className:"font-semibold text-green-600",children:i.totalReceivedQty.toLocaleString()}),s.jsx("span",{className:"text-gray-400 mx-1",children:"/"}),s.jsx("span",{className:"font-semibold text-blue-600",children:i.totalStartQty.toLocaleString()}),s.jsx("span",{className:"text-gray-500 ml-1",children:i.PAKAGE})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.items.length," "]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:s.jsx(Kd,{className:"w-5 h-5 text-gray-400"})})]},`${i.CODE}-${i.SKDIACODE}`))})]})})})},ig=({isOpen:e,onClose:t,inspectionItem:n,onSuccess:r})=>{const[o,l]=x.useState({lot:"",endQty:"",val:""}),[i,a]=x.useState(!1),[c,u]=x.useState(null),[h,m]=x.useState(""),[g,y]=x.useState(null),[w,k]=x.useState(null),C=()=>n!=null&&n.Sub_content?n.Sub_content.reduce((I,Y)=>I+(parseInt(Y.END_QTY)||0),0):0,f=()=>{const I=parseInt((n==null?void 0:n.START_QTY)||"0"),Y=C();return Math.max(0,I-Y)},d=()=>{l({lot:"",endQty:f().toString(),val:""}),u(null),m(""),y(null),k(null)};ke.useEffect(()=>{if(n){const I=f();l(Y=>({...Y,endQty:I.toString()}))}},[n,C()]);const p=()=>{d(),t()},v=I=>{m(Y=>Y+I)},j=I=>{h&&(w!==null&&g?E():k(parseFloat(h)),y(I),m(""))},E=()=>{if(w!==null&&g&&h){const I=parseFloat(h);let Y=0;switch(g){case"+":Y=w+I;break;case"-":Y=w-I;break;case"*":Y=w*I;break;case"/":Y=w/I;break;default:return}m(Y.toString()),y(null),k(null)}},D=()=>{m(""),y(null),k(null)},R=()=>{h&&l(I=>({...I,endQty:h}))},U=async I=>{if(I.preventDefault(),!n)return;const Y=parseInt(o.endQty)||0,L=f();if(Y>L){u(` ${L}`);return}const T=lt();if(!T){u("");return}a(!0),u(null);try{const z=await pa(n.GUID,o.lot,o.endQty,o.val,T);z.Code===200?(r(),p()):u(z.Result||"")}catch(z){console.error("Add sub content error:",z),u(z instanceof Error?z.message:"")}finally{a(!1)}};return!e||!n?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(fr,{className:"w-5 h-5 mr-2"}),""]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.CHT_NAME||n.NAME})]}),s.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ie,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:U,className:"p-6",children:[c&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:c}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),s.jsx("input",{type:"text",value:o.lot,onChange:I=>l({...o,lot:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:""})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),s.jsx("input",{type:"date",value:o.val,onChange:I=>l({...o,val:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:o.endQty,onChange:I=>l({...o,endQty:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0",step:"1",placeholder:""}),s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:s.jsx("span",{className:"text-gray-500 text-sm",children:n.PAKAGE})})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[": ",n.START_QTY," ",n.PAKAGE]}),s.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[": ",C()," ",n.PAKAGE," | : ",f()," ",n.PAKAGE]}),s.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:""}),s.jsx("div",{className:"flex-1 mx-3",children:s.jsx("input",{type:"text",value:h,readOnly:!0,className:"w-full px-2 py-1 text-right border border-gray-300 rounded bg-white text-sm",placeholder:"0"})}),s.jsx("button",{type:"button",onClick:R,disabled:!h,className:"px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[s.jsx("button",{type:"button",onClick:D,className:"p-2 bg-red-500 text-white rounded text-sm hover:bg-red-600",children:"C"}),s.jsx("button",{type:"button",onClick:()=>m(I=>I.slice(0,-1)),className:"p-2 bg-gray-300 text-gray-700 rounded text-sm hover:bg-gray-400",children:""}),s.jsx("button",{type:"button",onClick:()=>j("/"),className:"p-2 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:""}),s.jsx("button",{type:"button",onClick:()=>j("*"),className:"p-2 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:""}),s.jsx("button",{type:"button",onClick:()=>v("7"),className:"p-2 bg-white border border-gray-300 rounded text-sm hover:bg-gray-50",children:"7"}),s.jsx("button",{type:"button",onClick:()=>v("8"),className:"p-2 bg-white border border-gray-300 rounded text-sm hover:bg-gray-50",children:"8"}),s.jsx("button",{type:"button",onClick:()=>v("9"),className:"p-2 bg-white border border-gray-300 rounded text-sm hover:bg-gray-50",children:"9"}),s.jsx("button",{type:"button",onClick:()=>j("-"),className:"p-2 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:"-"}),s.jsx("button",{type:"button",onClick:()=>v("4"),className:"p-2 bg-white border border-gray-300 rounded text-sm hover:bg-gray-50",children:"4"}),s.jsx("button",{type:"button",onClick:()=>v("5"),className:"p-2 bg-white border border-gray-300 rounded text-sm hover:bg-gray-50",children:"5"}),s.jsx("button",{type:"button",onClick:()=>v("6"),className:"p-2 bg-white border border-gray-300 rounded text-sm hover:bg-gray-50",children:"6"}),s.jsx("button",{type:"button",onClick:()=>j("+"),className:"p-2 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:"+"}),s.jsx("button",{type:"button",onClick:()=>v("1"),className:"p-2 bg-white border border-gray-300 rounded text-sm hover:bg-gray-50",children:"1"}),s.jsx("button",{type:"button",onClick:()=>v("2"),className:"p-2 bg-white border border-gray-300 rounded text-sm hover:bg-gray-50",children:"2"}),s.jsx("button",{type:"button",onClick:()=>v("3"),className:"p-2 bg-white border border-gray-300 rounded text-sm hover:bg-gray-50",children:"3"}),s.jsx("button",{type:"button",onClick:E,className:"p-2 bg-green-500 text-white rounded text-sm hover:bg-green-600 row-span-2",children:"="}),s.jsx("button",{type:"button",onClick:()=>v("0"),className:"p-2 bg-white border border-gray-300 rounded text-sm hover:bg-gray-50 col-span-2",children:"0"}),s.jsx("button",{type:"button",onClick:()=>v("."),className:"p-2 bg-white border border-gray-300 rounded text-sm hover:bg-gray-50",children:"."})]})]})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{type:"button",onClick:p,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",disabled:i,children:""}),s.jsx("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:i?s.jsxs(s.Fragment,{children:[s.jsx(ce,{size:"small",className:"mr-2"}),"..."]}):""})]})]})]})})},ag=({isOpen:e,onClose:t,onConfirm:n,subContentData:r})=>{const[o,l]=x.useState(!1),[i,a]=x.useState(null),c=async()=>{if(r){l(!0),a(null);try{const u=await lf(r.subContentGuid,r.masterGuid);console.log("Response Data",u),u.Code===200?n():a(u.Result||"")}catch(u){console.error("Delete sub content error:",u),a(u instanceof Error?u.message:"")}finally{l(!1)}}};return!e||!r?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 mx-auto bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(qd,{className:"w-6 h-6 text-red-600"})}),s.jsx("div",{className:"ml-4",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""})})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:o,children:s.jsx(Ie,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6",children:[i&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:i}),s.jsxs("div",{className:"mb-6",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:""}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:":"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:r.itemName})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:":"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:r.lot})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:":"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:r.qty})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",disabled:o,children:""}),s.jsx("button",{onClick:c,disabled:o,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:o?s.jsxs(s.Fragment,{children:[s.jsx(ce,{size:"small",className:"mr-2"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Rn,{className:"w-4 h-4 mr-2"}),""]})})]})]})]})})},cg=({isOpen:e,onClose:t,subContentData:n,onSuccess:r,inspectionItem:o})=>{const[l,i]=x.useState({lot:"",endQty:"",val:""}),[a,c]=x.useState(!1),[u,h]=x.useState(null),m=()=>o!=null&&o.Sub_content?o.Sub_content.reduce((C,f)=>f.GUID===(n==null?void 0:n.GUID)?C:C+(parseInt(f.END_QTY)||0),0):0,g=()=>{if(!o)return 0;const C=parseInt(o.START_QTY||"0"),f=m();return Math.max(0,C-f)};x.useEffect(()=>{if(n){let C="";if(n.VAL)try{C=new Date(n.VAL).toISOString().split("T")[0]}catch{console.warn("Invalid date format:",n.VAL)}i({lot:n.LOT||"",endQty:n.END_QTY||"",val:C})}},[n]);const y=()=>{i({lot:"",endQty:"",val:""}),h(null)},w=()=>{y(),t()},k=async C=>{if(C.preventDefault(),!n)return;const f=parseInt(l.endQty)||0,d=g();if(f>d){h(` ${d}`);return}const p=lt();if(!p){h("");return}c(!0),h(null);try{const v=l.val?`${l.val} 00:00:00`:"",j={...n,LOT:l.lot,END_QTY:l.endQty,VAL:v,OP:p},E=await Fr(j);console.log("Response Data",E),E.Code===200?(r(),w()):h(E.Result||"")}catch(v){console.error("Update sub content error:",v),h(v instanceof Error?v.message:"")}finally{c(!1)}};return!e||!n?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(aa,{className:"w-5 h-5 mr-2"}),""]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.CHT_NAME||n.NAME})]}),s.jsx("button",{onClick:w,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ie,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:k,className:"p-6",children:[u&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:u}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),s.jsx("input",{type:"text",value:l.lot,onChange:C=>i({...l,lot:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:""})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),s.jsx("input",{type:"date",value:l.val,onChange:C=>i({...l,val:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:l.endQty,onChange:C=>i({...l,endQty:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0",step:"1",placeholder:""}),s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:s.jsx("span",{className:"text-gray-500 text-sm",children:n.PAKAGE})})]}),o&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[": ",o.START_QTY," ",o.PAKAGE]}),s.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[": ",m()," ",o.PAKAGE," | : ",g()," ",o.PAKAGE]})]})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{type:"button",onClick:w,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",disabled:a,children:""}),s.jsx("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:a?s.jsxs(s.Fragment,{children:[s.jsx(ce,{size:"small",className:"mr-2"}),"..."]}):""})]})]})]})})},ug=({isOpen:e,onClose:t,result:n,onConfirmSubmit:r})=>{const[o,l]=ke.useState(!1),[i,a]=ke.useState(null);if(!e||!n)return null;const c=h=>{if(!h)return"";try{return new Date(h).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/")}catch{return h}},u=async()=>{if(!n)return;const h=lt();if(!h){a("");return}l(!0),a(null);try{console.log("=== Check API Request Debug ===");const m={ValueAry:[n.batch_id,n.GUID]};console.log("Check Request Data:",JSON.stringify(m,null,2));const g=await je("/api/pcmpo/check",{method:"POST",body:m});if(console.log("Check Response:",JSON.stringify(g,null,2)),g.Code!==200){a(g.Result||"");return}console.log("=== Add Sub Content API Request Debug ===");const y=n.expirydate?`${n.expirydate} 00:00:00`:"",w=await pa(n.Master_GUID,n.batch_num,n.qty,y,h);console.log("Add Sub Content Response:",JSON.stringify(w,null,2)),w.Code===200?(console.log(" "),r&&r(),t()):a(w.Result||"")}catch(m){console.error("Confirm submit error:",m),console.log(" "),a(m instanceof Error?m.message:"")}finally{l(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gray-50",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:""}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx(Tt,{className:"w-4 h-4 text-green-500 mr-1"}),s.jsx("span",{className:"text-sm text-gray-600",children:n.Result})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:u,disabled:o,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:o?s.jsxs(s.Fragment,{children:[s.jsx(ce,{size:"small",className:"mr-2"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Xd,{className:"w-4 h-4 mr-2"}),""]})}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ie,{className:"w-6 h-6"})})]})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:""}),n.base64?s.jsx("div",{className:"border rounded-lg overflow-hidden",children:s.jsx("img",{src:n.base64.startsWith("data:")?n.base64:`data:image/jpeg;base64,${n.base64}`,alt:"",className:"w-full h-auto max-h-96 object-contain"})}):s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[s.jsx(Bo,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:""})]})]}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:""}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:[s.jsxs("h5",{className:"text-sm font-medium text-blue-800 mb-2 flex items-center",children:[s.jsx(Pn,{className:"w-4 h-4 mr-1"}),""]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-blue-600",children:":"}),s.jsx("span",{className:"text-sm font-medium text-blue-900 ml-2",children:n.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-blue-600",children:":"}),s.jsx("span",{className:"text-sm font-medium text-blue-900 ml-2",children:n.cht_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-blue-600",children:":"}),s.jsx("span",{className:"text-sm font-medium text-blue-900 ml-2",children:n.code})]})]})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-4 mb-4 border-2 border-green-200",children:[s.jsx("h5",{className:"text-sm font-medium text-green-800 mb-2",children:""}),s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-3xl font-bold text-green-700 mb-1",children:n.qty})})]}),s.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 mb-4",children:[s.jsx("h5",{className:"text-sm font-medium text-yellow-800 mb-2",children:""}),s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:n.batch_num})})]}),s.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 mb-4",children:[s.jsx("h5",{className:"text-sm font-medium text-purple-800 mb-2",children:""}),s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-2xl font-bold text-purple-900",children:c(n.expirydate)})})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h5",{className:"text-sm font-medium text-gray-800 mb-2",children:""}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:":"}),s.jsx("span",{className:"font-medium text-gray-900",children:n.po_num})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:":"}),s.jsx("span",{className:"font-medium text-gray-900",children:n.op_name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:":"}),s.jsx("span",{className:"font-medium text-gray-900",children:n.op_time})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:":"}),s.jsx("span",{className:`font-medium ${n.check===""?"text-yellow-600":"text-green-600"}`,children:n.check})]})]})]})]})})]})}),i&&s.jsxs("div",{className:"mx-6 mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm flex items-center",children:[s.jsx(Tt,{className:"w-4 h-4 mr-2 flex-shrink-0"}),i]}),s.jsx("div",{className:"flex justify-end p-6 border-t bg-gray-50",children:s.jsx("button",{onClick:t,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:""})})]})})},dg=({isOpen:e,onClose:t,inspectionItem:n,onDataUpdate:r})=>{const[o,l]=x.useState(null),[i,a]=x.useState(null),[c,u]=x.useState(!1),[h,m]=x.useState(null),[g,y]=x.useState(null),[w,k]=x.useState(!1),C=x.useRef(null),f=()=>{l(null),a(null),m(null),y(null),C.current&&(C.current.value="")},d=()=>{f(),t()},p=E=>{var U;const D=(U=E.target.files)==null?void 0:U[0];if(!D)return;if(!D.type.startsWith("image/")){m("");return}if(D.size>10*1024*1024){m(" 10MB");return}l(D),m(null);const R=new FileReader;R.onload=I=>{var Y;a((Y=I.target)==null?void 0:Y.result)},R.readAsDataURL(D)},v=E=>new Promise((D,R)=>{const U=new FileReader;U.onload=()=>{const Y=U.result.split(",")[1];D(Y)},U.onerror=R,U.readAsDataURL(E)}),j=async()=>{if(!o||!n)return;const E=ua(),D=lt();if(!E||!D){m("");return}u(!0),m(null);try{const R=await v(o);console.log("=== Upload Shipping Document Debug ==="),console.log("Selected file:",o.name,o.size,"bytes"),console.log("Base64 length:",R.length),console.log("Operator ID:",E),console.log("Operator Name:",D),console.log("Inspection Item:",n);const U=await Kp(n,R,E,D);console.log("=== API Response Debug ==="),console.log("Response Code:",U.Code),console.log("Response Result:",U.Result),console.log("Response Data:",U.Data),console.log("Full Response:",JSON.stringify(U,null,2)),console.log("====================================="),U.Code===200&&U.Data&&U.Data.length>0?(console.log(" Analysis successful, opening result modal"),y(U.Data[0]),k(!0)):(console.log(" Analysis failed or no data returned"),m(U.Result||""))}catch(R){console.error("Upload and analyze error:",R),console.log(" Exception occurred during upload/analysis"),m(R instanceof Error?R.message:"")}finally{u(!1)}};return!e||!n?null:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(hr,{className:"w-5 h-5 mr-2"}),""]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.CHT_NAME||n.NAME})]}),s.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ie,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6",children:[h&&s.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm flex items-center",children:[s.jsx(at,{className:"w-4 h-4 mr-2 flex-shrink-0"}),h]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors cursor-pointer",onClick:()=>{var E;return(E=C.current)==null?void 0:E.click()},children:[s.jsx("input",{ref:C,type:"file",accept:"image/*",onChange:p,className:"hidden"}),i?s.jsxs("div",{className:"space-y-2",children:[s.jsx("img",{src:i,alt:"",className:"max-w-full max-h-48 mx-auto rounded-lg shadow-sm"}),s.jsx("p",{className:"text-sm text-gray-600",children:o==null?void 0:o.name}),s.jsx("p",{className:"text-xs text-gray-500",children:""})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(Jd,{className:"w-12 h-12 text-gray-400 mx-auto"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:""}),s.jsx("p",{className:"text-xs text-gray-500",children:" JPG, PNG, GIF  10MB"})]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[s.jsx(Bo,{className:"w-4 h-4 mr-1"}),""]}),s.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[s.jsxs("div",{children:[": ",n.IC_SN]}),s.jsxs("div",{children:[": ",n.CODE]}),s.jsxs("div",{children:[": ",n.SKDIACODE]}),s.jsxs("div",{children:[": ",n.START_QTY," ",n.PAKAGE]})]})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{type:"button",onClick:d,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",disabled:c,children:""}),s.jsx("button",{onClick:j,disabled:c||!o,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:c?s.jsxs(s.Fragment,{children:[s.jsx(ce,{size:"small",className:"mr-2"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(hr,{className:"w-4 h-4 mr-2"}),""]})})]})]})]})}),s.jsx(ug,{isOpen:w,onClose:()=>{k(!1),y(null),d()},result:g,onConfirmSubmit:()=>{r&&r(),k(!1),y(null),d()}})]})},fg=({isOpen:e,onClose:t,onConfirm:n,inspectionContent:r})=>{const[o,l]=x.useState(!1),[i,a]=x.useState(null),c=async()=>{if(r){l(!0),a(null);try{const u=await ng(r.GUID);u.Code===200?n():a(u.Result||"")}catch(u){console.error("Delete inspection content error:",u),a(u instanceof Error?u.message:"")}finally{l(!1)}}};return!e||!r?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 mx-auto bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(qd,{className:"w-6 h-6 text-red-600"})}),s.jsx("div",{className:"ml-4",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""})})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:o,children:s.jsx(Ie,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6",children:[i&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:i}),s.jsxs("div",{className:"mb-6",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:""}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:":"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:r.IC_SN})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:":"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:r.PON})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:":"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:r.CHT_NAME||r.NAME})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:":"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:r.CODE})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:":"}),s.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[r.START_QTY," ",r.PAKAGE]})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",disabled:o,children:""}),s.jsx("button",{onClick:c,disabled:o,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:o?s.jsxs(s.Fragment,{children:[s.jsx(ce,{size:"small",className:"mr-2"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Rn,{className:"w-4 h-4 mr-2"}),""]})})]})]})]})})},hg=({isOpen:e,onClose:t,imageUrl:n,title:r})=>e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-[60]",children:s.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh]",children:[s.jsx("button",{onClick:t,className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",children:s.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("img",{src:n,alt:r,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl"}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white p-2 rounded-b-lg",children:s.jsx("p",{className:"text-center text-sm",children:r})})]})}):null,mg=({groupedData:e,isOpen:t,onClose:n,onDataUpdate:r})=>{const[o,l]=x.useState(!1),[i,a]=x.useState(null),[c,u]=x.useState(!1),[h,m]=x.useState(!1),[g,y]=x.useState(null),[w,k]=x.useState(null),[C,f]=x.useState(!1),[d,p]=x.useState(null),[v,j]=x.useState(!1),[E,D]=x.useState(null),[R,U]=x.useState({isOpen:!1,imageUrl:"",title:""}),[I,Y]=x.useState(null),[L,T]=x.useState(new Set),[z,ne]=x.useState(null),V=nf()==="20",S=G=>{a(G),l(!0)},A=G=>{p(G),f(!0)},M=()=>{r&&r(),l(!1)},Q=x.useCallback(G=>{y(G),m(!0)},[]),te=x.useCallback(()=>{r&&r(),m(!1),y(null)},[r]),Le=x.useCallback((G,W,ie,J,Ee)=>{k({subContentGuid:G,masterGuid:W,itemName:ie,lot:J,qty:Ee}),u(!0)},[]),b=x.useCallback(()=>{r&&r(),u(!1),k(null)},[r]),X=G=>{D(G),j(!0)},N=()=>{r&&r(),j(!1),D(null),n()},B=async(G,W)=>{Y(G);try{console.log("===  ==="),console.log("Item GUID:",G);const ie=await af(G);if(console.log("API Response:",ie),console.log("API Response Data:",JSON.stringify(ie.Data,null,2)),ie.Code===200&&ie.Data){const J=ie.Data;if(console.log("Image Data:",J),console.log("Base64 field exists:",!!J.base64),console.log("Base64 length:",J.base64?J.base64.length:0),J.base64){const Ee=J.base64.startsWith("data:")?J.base64:`data:image/jpeg;base64,${J.base64}`;console.log("Final image URL (first 100 chars):",Ee.substring(0,100)),U({isOpen:!0,imageUrl:Ee,title:`${W} - `})}else console.log("No base64 data found in response"),console.log("Available fields:",Object.keys(J)),alert("")}else console.log("API response failed or no data"),alert("")}catch(ie){console.error(":",ie),alert("")}finally{Y(null)}},ue=async(G,W)=>{if(!V){ne("");return}T(ie=>new Set([...ie,G.GUID])),ne(null);try{console.log("=== Lock/Unlock Sub Content Debug ==="),console.log("Sub Content GUID:",G.GUID),console.log("Current State:",G.STATE),console.log("New State:",W);const ie={...G,STATE:W};console.log("Update Data:",JSON.stringify(ie,null,2));const J=await Fr(ie);console.log("Lock/Unlock Response:",JSON.stringify(J,null,2)),J.Code===200?(console.log(` ${W===""?"":""}`),r&&r()):ne(J.Result||`${W===""?"":""}`)}catch(ie){console.error("Lock/Unlock error:",ie),ne(ie instanceof Error?ie.message:`${W===""?"":""}`)}finally{T(ie=>{const J=new Set(ie);return J.delete(G.GUID),J})}};return!t||!e?null:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gray-50",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:""}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center",children:[": ",e.CODE]}),s.jsxs("div",{className:"flex items-center",children:[": ",e.SKDIACODE]}),s.jsxs("div",{className:"flex items-center",children:[": ",e.BRD||""]})]}),z&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:z})]}),s.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:e.items.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Vm,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:""})]}):s.jsx("div",{className:"space-y-6",children:e.items.map(G=>s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:[": ",G.PON]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>S(G),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:[s.jsx(fr,{className:"w-4 h-4 mr-2"}),""]}),s.jsxs("button",{onClick:()=>A(G),className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 text-sm font-medium rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),""]}),s.jsx("button",{onClick:()=>X(G),className:"inline-flex items-center px-3 py-2 bg-white border border-red-300 text-red-700 text-sm font-medium rounded-md hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors",title:"",children:s.jsx(Rn,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[s.jsx(Bo,{className:"w-4 h-4 mr-2"}),""]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",s.jsx("span",{className:"font-medium",children:G.IC_SN})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",s.jsxs("span",{className:"font-medium text-blue-600",children:[G.START_QTY," ",G.PAKAGE]})]}),G.END_QTY&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",s.jsxs("span",{className:"font-medium text-green-600",children:[G.END_QTY," ",G.PAKAGE]})]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[s.jsx(os,{className:"w-4 h-4 mr-2"}),""]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",s.jsx("span",{className:"font-medium",children:G.ADD_TIME})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",s.jsx("span",{className:"font-medium",children:G.DELIVERY_TIME?G.DELIVERY_TIME.split(" ")[0].replace(/-/g,"/"):""})]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[s.jsx(at,{className:"w-4 h-4 mr-2"}),""]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[G.SEQ&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",G.SEQ]}),G.FREE_CHARGE_FLAG&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",G.FREE_CHARGE_FLAG]}),G.NOTE&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",G.NOTE]})]})]})]}),G.Sub_content&&G.Sub_content.length>0&&s.jsxs("div",{className:"border-t pt-4 mt-4",children:[s.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:""}),s.jsx("div",{className:"space-y-3",children:G.Sub_content.map(W=>s.jsxs("div",{className:"bg-white rounded-md p-4 border border-gray-200",children:[s.jsx("div",{className:"flex justify-between items-start mb-3",children:s.jsxs("div",{className:"flex gap-2",children:[W.STATE!==""&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>Q(W),className:"inline-flex items-center px-2 py-1 text-xs font-medium text-gray-600 bg-white border border-gray-300 rounded hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500 transition-colors",title:"",children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),""]}),s.jsx("button",{onClick:()=>Le(W.GUID,W.Master_GUID,G.CHT_NAME||G.NAME,W.LOT,`${W.END_QTY}`),className:"inline-flex items-center px-2 py-1 text-xs font-medium text-red-600 bg-white border border-red-300 rounded hover:bg-red-50 focus:outline-none focus:ring-1 focus:ring-red-500 transition-colors",title:"",children:s.jsx(Rn,{className:"w-3 h-3"})})]}),V&&s.jsx("div",{className:"flex gap-1",children:W.STATE===""?s.jsx("button",{onClick:()=>ue(W,""),disabled:L.has(W.GUID),className:"inline-flex items-center px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"",children:L.has(W.GUID)?s.jsx(ce,{size:"small",className:"w-3 h-3"}):s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}):s.jsx("button",{onClick:()=>ue(W,""),disabled:L.has(W.GUID),className:"inline-flex items-center px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"",children:L.has(W.GUID)?s.jsx(ce,{size:"small",className:"w-3 h-3"}):s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"})})})}),s.jsx("button",{onClick:()=>B(G.GUID,G.CHT_NAME||G.NAME),disabled:I===G.GUID,className:"inline-flex items-center px-2 py-1 text-xs font-medium text-blue-600 bg-white border border-blue-300 rounded hover:bg-blue-50 focus:outline-none focus:ring-1 focus:ring-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"",children:I===G.GUID?s.jsx(ce,{size:"small",className:"w-3 h-3"}):s.jsx(Yd,{className:"w-3 h-3"})})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("h6",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:""}),s.jsx("div",{className:"text-sm space-y-1",children:s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",s.jsxs("span",{className:"font-medium text-green-600",children:[W.END_QTY," ",W.PAKAGE]})]})})]}),s.jsxs("div",{children:[s.jsx("h6",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:""}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",W.VAL?new Date(W.VAL).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/"):""]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",W.LOT]})]})]}),s.jsxs("div",{children:[s.jsx("h6",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:""}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Zd,{className:"w-3 h-3 text-gray-400 mr-1"}),W.OP]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(os,{className:"w-3 h-3 text-gray-400 mr-1"}),W.OP_TIME?new Date(W.OP_TIME).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/"):""]})]})]}),s.jsxs("div",{children:[s.jsx("h6",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:""}),s.jsx("div",{className:"text-sm",children:s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${W.STATE===""?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:W.STATE})})]})]}),(W.BARCODE1||W.BARCODE2||W.NOTE)&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[(W.BARCODE1||W.BARCODE2)&&s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase",children:""}),s.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[W.BARCODE1&&s.jsxs("div",{children:["1: ",W.BARCODE1]}),W.BARCODE2&&s.jsxs("div",{children:["2: ",W.BARCODE2]})]})]}),W.NOTE&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase",children:""}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:W.NOTE})]})]})]},W.GUID))})]})]},G.GUID))})})]})}),s.jsx(ig,{isOpen:o,onClose:()=>l(!1),inspectionItem:i,onSuccess:M}),s.jsx(dg,{isOpen:C,onClose:()=>{f(!1),p(null)},inspectionItem:d,onDataUpdate:r}),s.jsx(cg,{isOpen:h,onClose:()=>{m(!1),y(null)},subContentData:g,onSuccess:te,inspectionItem:e.items.find(G=>{var W;return(W=G.Sub_content)==null?void 0:W.some(ie=>ie.GUID===(g==null?void 0:g.GUID))})}),s.jsx(ag,{isOpen:c,onClose:()=>{u(!1),k(null)},onConfirm:b,subContentData:w}),s.jsx(fg,{isOpen:v,onClose:()=>{j(!1),D(null)},onConfirm:N,inspectionContent:E}),s.jsx(hg,{isOpen:R.isOpen,onClose:()=>U({isOpen:!1,imageUrl:"",title:""}),imageUrl:R.imageUrl,title:R.title})]})},pg=({startDate:e,endDate:t,onDateChange:n,onSearch:r,onReset:o,loading:l})=>{const{t:i}=gs(),[a,c]=x.useState(!1),[u,h]=x.useState(i("app.inspection.operation_time")),[m,g]=x.useState(e.split(" ")[0]),[y,w]=x.useState("00:00:00"),[k,C]=x.useState(t.split(" ")[0]),[f,d]=x.useState("23:59:59"),p=[i("app.inspection.operation_time"),i("app.inspection.add_time"),i("app.inspection.update_time")],v=()=>{const j=`${m} ${y}`,E=`${k} ${f}`;n(j,E),r()};return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>c(!a),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fm,{className:"w-5 h-5 text-gray-600"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:i("app.inspection.time_range")})]}),s.jsx(Nn,{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${a?"rotate-180":""}`})]}),a&&s.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 items-end mt-4",children:[s.jsxs("div",{className:"lg:col-span-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i("app.inspection.time_type")}),s.jsxs("div",{className:"relative",children:[s.jsx("select",{value:u,onChange:j=>h(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white appearance-none",children:p.map(j=>s.jsx("option",{value:j,children:j},j))}),s.jsx(Nn,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),s.jsxs("div",{className:"lg:col-span-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i("app.inspection.start_datetime")}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("input",{type:"date",value:m,onChange:j=>g(j.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("input",{type:"time",value:y,onChange:j=>w(j.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",step:"1"})]})]}),s.jsxs("div",{className:"lg:col-span-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i("app.inspection.end_datetime")}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("input",{type:"date",value:k,onChange:j=>C(j.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("input",{type:"time",value:f,onChange:j=>d(j.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",step:"1"})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("button",{onClick:v,disabled:l,className:"w-full inline-flex items-center justify-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(ls,{className:"w-4 h-4"}),s.jsx("span",{className:"ml-1 hidden xl:inline",children:i(l?"app.inspection.searching":"app.inspection.search")})]})})]})})]})},gg=({isOpen:e,onClose:t,analysisResult:n,onSuccess:r})=>{const[o,l]=x.useState([]),[i,a]=x.useState(null),[c,u]=x.useState(!1),[h,m]=x.useState(!1),[g,y]=x.useState(null);x.useEffect(()=>{e&&(n!=null&&n.po_num)&&w()},[e,n]);const w=async()=>{if(n!=null&&n.po_num){m(!0),y(null);try{console.log(":",n.po_num);const f=await Yp(n.po_num);if(f.Code===200&&f.Data){l(f.Data),console.log(":",f.Data.length,"");const d=f.Data.filter(p=>{const v=p.Sub_content&&p.Sub_content.length>0;return v&&console.log(":",p.IC_SN,":",p.Sub_content.length),!v});l(d),console.log(":",d.length,"")}else y(f.Result||""),l([])}catch(f){console.error(":",f),y(f instanceof Error?f.message:""),l([])}finally{m(!1)}}},k=async()=>{if(!(!i||!n)){u(!0),y(null);try{console.log(":",{selectedItem:i.GUID,analysisResult:n.GUID});const f=await Jp(n.GUID,i,n);console.log(" API :",f),f.Code===200?(console.log(""),r(n.GUID)):y(f.Result||"")}catch(f){console.error(":",f),y(f instanceof Error?f.message:"")}finally{u(!1)}}},C=f=>{if(!f)return"";try{return new Date(f).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/")}catch{return f}};return!e||!n?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gray-50",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(fi,{className:"w-5 h-5 mr-2"}),""]}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[": ",n.po_num]})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ie,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:""}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:[n.base64&&s.jsx("img",{src:n.base64.startsWith("data:")?n.base64:`data:image/jpeg;base64,${n.base64}`,alt:"",className:"w-full h-48 object-cover rounded mb-4"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-white rounded p-3",children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",n.code]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",n.cht_name]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",n.name]})]})]}),s.jsxs("div",{className:"bg-white rounded p-3",children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",n.batch_num]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",C(n.expirydate)]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",n.qty]})]})]})]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-md font-medium text-gray-900 mb-4",children:["",h&&s.jsx(ce,{size:"small",className:"ml-2"})]}),g&&s.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm flex items-center",children:[s.jsx(at,{className:"w-4 h-4 mr-2 flex-shrink-0"}),g]}),h?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ce,{size:"medium",className:"mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"..."})]}):o.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Pn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:""})]}):s.jsx("div",{className:"space-y-3",children:o.map(f=>s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-colors ${(i==null?void 0:i.GUID)===f.GUID?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>a(f),children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h5",{className:"font-medium text-gray-900",children:f.CHT_NAME||f.NAME}),s.jsxs("p",{className:"text-sm text-gray-600",children:[": ",f.IC_SN]})]}),(i==null?void 0:i.GUID)===f.GUID&&s.jsx(Tt,{className:"w-5 h-5 text-blue-500 flex-shrink-0"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"ml-1 font-medium",children:f.CODE})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"ml-1 font-medium",children:f.SKDIACODE})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsxs("span",{className:"ml-1 font-medium",children:[f.START_QTY," ",f.PAKAGE]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"}),s.jsx("span",{className:"ml-1 font-medium",children:f.BRD||""})]})]})]},f.GUID))})]})]})}),s.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t bg-gray-50",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",disabled:c,children:""}),s.jsx("button",{onClick:k,disabled:c||!i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:c?s.jsxs(s.Fragment,{children:[s.jsx(ce,{size:"small",className:"mr-2"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(fi,{className:"w-4 h-4 mr-2"}),""]})})]})]})})},xg=({isOpen:e,onClose:t,imageUrl:n,title:r})=>e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-[60]",children:s.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh]",children:[s.jsx("button",{onClick:t,className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",children:s.jsx(Ie,{className:"w-8 h-8"})}),s.jsx("img",{src:n,alt:r,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl"}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white p-2 rounded-b-lg",children:s.jsx("p",{className:"text-center text-sm",children:r})})]})}):null,yg=({isOpen:e,onClose:t,results:n,onDataUpdate:r})=>{const[o,l]=x.useState([]),[i,a]=x.useState(!1),[c,u]=x.useState(null),[h,m]=x.useState(null),[g,y]=x.useState({isOpen:!1,result:null}),[w,k]=x.useState(new Set),[C,f]=x.useState(null),[d,p]=x.useState({po_num:"",qty:"",batch_num:"",expirydate:""}),[v,j]=x.useState(null),[E,D]=x.useState(!1),[R,U]=x.useState(null),[I,Y]=x.useState(new Set);x.useEffect(()=>{n&&n.length>0&&o.length===0&&l(n)},[n,o.length]);const L=async b=>{try{console.log("===  ==="),console.log("GUID:",b);const X=await Xp(b);if(console.log("API Response:",X),X.Code===200&&X.Data&&X.Data.length>0){const N=X.Data[0];console.log(":",N),l(B=>{const ue=B.findIndex(W=>W.GUID===b);if(ue<0)return console.warn(" GUID:",b),B;const G=[...B];return G[ue]={...B[ue],...N,base64:B[ue].base64},console.log(" :",ue),console.log(":",G[ue]),G})}else console.error(":",X.Result),u(X.Result||"")}catch(X){console.error(":",X),u(X instanceof Error?X.message:"")}},T=(b,X)=>{console.log("Image clicked:",{index:X,hasBase64:!!b.base64});const N=b.base64||b.image||b.img||b.picture;if(!N){console.warn("No image data found for result:",b);return}const B=N.startsWith("data:")?N:`data:image/jpeg;base64,${N}`;console.log("Setting zoom image:",{url:B.substring(0,50)+"...",title:` #${X+1}`}),m({url:B,title:` #${X+1}`})},z=b=>{console.log(":",b),y({isOpen:!0,result:b})},ne=b=>{f(b.GUID),p({po_num:b.po_num||"",qty:b.qty||"",batch_num:b.batch_num||"",expirydate:b.expirydate?b.expirydate.split(" ")[0]:""})},H=()=>{f(null),p({po_num:"",qty:"",batch_num:"",expirydate:""})},V=async b=>{j(b.GUID),u(null);try{console.log("===  ==="),console.log("GUID:",b.GUID),console.log(":",d);const X=d.expirydate?`${d.expirydate} 00:00:00`:"",N=await Zp({GUID:b.GUID,po_num:d.po_num,qty:d.qty,batch_num:d.batch_num,expirydate:X});console.log(" API :",N),N.Code===200?(console.log(" "),await L(b.GUID),f(null)):u(N.Result||"")}catch(X){console.error(":",X),u(X instanceof Error?X.message:"")}finally{j(null)}},S=b=>w.has(b.GUID)?{canPair:!1,reason:""}:b.check===""?{canPair:!1,reason:""}:{canPair:!0,reason:""},A=b=>{console.log("GUID:",b),L(b),y({isOpen:!1,result:null})},M=b=>I.has(b.GUID)?!1:!!(b.po_num&&b.qty&&b.batch_num&&b.expirydate),Q=async()=>{const b=o.filter(N=>M(N)&&!I.has(N.GUID));if(b.length===0){U("");return}const X=lt();if(!X){U("");return}D(!0),U(null);try{console.log(` GUID  ${b.length} :`,b.map(J=>J.GUID));const B={ValueAry:[null,b.map(J=>J.GUID).join(";")]},ue=await je("/api/pcmpo/check",{method:"POST",body:B});if(ue.Code!==200){U(ue.Result||"");return}const G=b.map(J=>({GUID:J.GUID,Master_GUID:J.Master_GUID,LOT:J.batch_num,END_QTY:J.qty,VAL:J.expirydate?`${J.expirydate.split(" ")[0]} 00:00:00`:"",OP:X})),W=[],ie=[];for(const J of G)try{const Ee=await pa(J.Master_GUID,J.LOT,J.END_QTY,J.VAL,J.OP);Ee.Code===200?(W.push(J.GUID),console.log(` : ${J.Master_GUID}`)):(ie.push(`${J.Master_GUID}: ${Ee.Result}`),console.log(` : ${J.Master_GUID} - ${Ee.Result}`))}catch(Ee){const yr=Ee instanceof Error?Ee.message:"";ie.push(`${J.Master_GUID}: ${yr}`),console.error(` : ${J.Master_GUID}`,Ee)}W.length>0&&(Y(J=>new Set([...J,...W])),l(J=>J.map(Ee=>W.includes(Ee.GUID)?{...Ee,_locked:!0}:Ee))),ie.length===0?(U(null),r&&r()):W.length>0?(U(`${W.length} ${ie.length} ${ie.join("; ")}`),r&&r()):U(`${ie.join("; ")}`)}catch(N){console.error(":",N),U(N instanceof Error?N.message:"")}finally{D(!1)}},te=async()=>{const b=o.filter(X=>!I.has(X.GUID));if(b.length>0)try{console.log("===  ==="),console.log(":",b.length),console.log(" GUIDs:",b.map(ue=>ue.GUID));const N={ValueAry:[b.map(ue=>ue.GUID).join(";")]};console.log("=== Delete API Request Debug ==="),console.log("URL:","/api/pcmpo/delete_by_GUID"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(N,null,2));const B=await je("/api/pcmpo/delete_by_GUID",{method:"POST",body:N});console.log("Delete API Response:",JSON.stringify(B,null,2)),B.Code===200?console.log(" "):console.log(" :",B.Result)}catch(X){console.error(":",X)}I.size>0&&r&&r(),t()};if(!e||!n||n.length===0)return null;const Le=b=>{if(!b)return"";try{return new Date(b).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/")}catch{return b}};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gray-50",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx(Tt,{className:"w-4 h-4 text-green-500 mr-1"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[" ",o.length," "]})]})]}),s.jsx("button",{onClick:te,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ie,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[c&&s.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm flex items-center",children:[s.jsx(at,{className:"w-4 h-4 mr-2 flex-shrink-0"}),c]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:o.map((b,X)=>s.jsxs("div",{className:`border rounded-lg p-4 ${I.has(b.GUID)?"bg-blue-50 border-blue-200":"bg-gray-50"}`,children:[s.jsx("div",{className:"mb-2",children:M(b)?b.Result===""||b.check===""||b._isFailed?s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[s.jsx(Tt,{className:"w-3 h-3 mr-1"}),b._isFailed?"":""]}):s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[s.jsx(Tt,{className:"w-3 h-3 mr-1"}),""]}):s.jsx(s.Fragment,{children:b.Result===""||b.check===""?s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[s.jsx(at,{className:"w-3 h-3 mr-1"}),""]}):s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[s.jsx(at,{className:"w-3 h-3 mr-1"}),""]})})}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h4",{className:"text-md font-medium text-gray-900",children:[" #",X+1]}),s.jsx("div",{className:"flex gap-2",children:C===b.GUID?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>V(b),disabled:v===b.GUID,className:"px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700 transition-colors flex items-center",children:[v===b.GUID?s.jsx(ce,{size:"small",className:"mr-1"}):s.jsx(Qm,{className:"w-3 h-3 mr-1"}),""]}),s.jsxs("button",{onClick:H,disabled:v===b.GUID,className:"px-2 py-1 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 transition-colors flex items-center",children:[s.jsx(ef,{className:"w-3 h-3 mr-1"}),""]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>ne(b),className:"px-2 py-1 bg-orange-600 text-white text-xs rounded hover:bg-orange-700 transition-colors flex items-center",children:[s.jsx(aa,{className:"w-3 h-3 mr-1"}),""]}),(()=>{const N=S(b);return s.jsxs("button",{onClick:()=>z(b),className:`px-2 py-1 text-xs rounded transition-colors flex items-center ${N.canPair?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-400 text-white cursor-not-allowed"}`,disabled:!N.canPair,title:N.canPair?"":N.reason,children:[s.jsx(fi,{className:"w-3 h-3 mr-1"}),N.canPair?"":N.reason]})})()]})})]}),b.base64&&s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>T(b,X),children:[s.jsx("img",{src:b.base64.startsWith("data:")?b.base64:`data:image/jpeg;base64,${b.base64}`,alt:` ${X+1}`,className:"w-full h-32 object-cover rounded border hover:opacity-80 transition-opacity"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black bg-opacity-30 rounded pointer-events-none",children:s.jsx(Jm,{className:"w-8 h-8 text-white"})})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[s.jsxs("h5",{className:"text-sm font-medium text-blue-800 mb-2 flex items-center",children:[s.jsx(Pn,{className:"w-4 h-4 mr-1"}),""]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-600",children:":"}),s.jsx("span",{className:"font-medium text-blue-900 ml-1",children:b.name})]}),b.cht_name&&s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-600",children:":"}),s.jsx("span",{className:"font-medium text-blue-900 ml-1",children:b.cht_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-600",children:":"}),s.jsx("span",{className:"font-medium text-blue-900 ml-1",children:b.code})]})]})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border-2 border-green-200",children:[s.jsx("h5",{className:"text-sm font-medium text-green-800 mb-2",children:""}),C===b.GUID?s.jsx("input",{type:"text",value:d.po_num,onChange:N=>p(B=>({...B,po_num:N.target.value})),className:"w-full px-2 py-1 text-center text-lg font-bold border border-green-300 rounded focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:""}):s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-2xl font-bold text-green-700",children:b.po_num})})]}),b.qty&&s.jsxs("div",{className:"bg-orange-50 rounded-lg p-3 border-2 border-orange-200",children:[s.jsx("h5",{className:"text-sm font-medium text-orange-800 mb-2",children:""}),C===b.GUID?s.jsx("input",{type:"number",value:d.qty,onChange:N=>p(B=>({...B,qty:N.target.value})),className:"w-full px-2 py-1 text-center text-2xl font-bold border border-orange-300 rounded focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:""}):s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-3xl font-bold text-orange-700",children:b.qty})})]}),s.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[s.jsx("h5",{className:"text-sm font-medium text-yellow-800 mb-2",children:""}),b._isFailed?s.jsxs("div",{className:"text-xs text-red-600 bg-red-50 px-2 py-1 rounded",children:[": ",b._failureReason]}):C===b.GUID?s.jsx("input",{type:"text",value:d.batch_num,onChange:N=>p(B=>({...B,batch_num:N.target.value})),className:"w-full px-2 py-1 text-center text-lg font-bold border border-yellow-300 rounded focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:""}):s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-lg font-bold text-yellow-900",children:b.batch_num})})]}),s.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[s.jsx("h5",{className:"text-sm font-medium text-purple-800 mb-2",children:""}),C===b.GUID?s.jsx("input",{type:"date",value:d.expirydate,onChange:N=>p(B=>({...B,expirydate:N.target.value})),className:"w-full px-2 py-1 text-center text-lg font-bold border border-purple-300 rounded focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}):s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-lg font-bold text-purple-900",children:Le(b.expirydate)})})]}),s.jsxs("div",{className:"bg-gray-100 rounded-lg p-3",children:[s.jsx("h5",{className:"text-sm font-medium text-gray-800 mb-2",children:""}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:":"}),s.jsx("span",{className:"font-medium text-gray-900",children:b.IC_SN})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:":"}),s.jsx("span",{className:"font-medium text-gray-900",children:b.op_name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:":"}),s.jsx("span",{className:"font-medium text-gray-900",children:b.op_time})]})]})]})]})]},X))})]}),R&&s.jsxs("div",{className:"mx-6 mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm flex items-center",children:[s.jsx(at,{className:"w-4 h-4 mr-2 flex-shrink-0"}),R]}),s.jsxs("div",{className:"flex justify-end p-6 border-t bg-gray-50",children:[s.jsx("div",{className:"text-sm text-gray-600 flex items-center",children:s.jsxs("div",{className:"mr-4",children:[": ",o.filter(b=>M(b)&&!I.has(b.GUID)).length,"  | : ",I.size,"  | : ",o.filter(b=>!I.has(b.GUID)).length," "]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:Q,disabled:E||o.filter(b=>M(b)&&!I.has(b.GUID)).length===0,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:E?s.jsxs(s.Fragment,{children:[s.jsx(ce,{size:"small",className:"mr-2"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Xd,{className:"w-4 h-4 mr-2"})," (",o.filter(b=>M(b)&&!I.has(b.GUID)).length,")"]})}),s.jsx("button",{onClick:te,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",disabled:E,children:""})]})]})]})}),s.jsx(xg,{isOpen:!!h,onClose:()=>m(null),imageUrl:(h==null?void 0:h.url)||"",title:(h==null?void 0:h.title)||""}),s.jsx(gg,{isOpen:g.isOpen,onClose:()=>y({isOpen:!1,result:null}),analysisResult:g.result,onSuccess:b=>A(b)})]})},vg=({message:e,type:t="success",duration:n=3e3,onClose:r})=>{const[o,l]=x.useState(!1),[i,a]=x.useState(!1);x.useEffect(()=>{setTimeout(()=>l(!0),10);const m=setTimeout(()=>{c()},n);return()=>clearTimeout(m)},[n]);const c=()=>{a(!0),setTimeout(()=>{r()},300)},u=()=>{switch(t){case"success":return s.jsx(Tt,{className:"w-5 h-5 text-green-500"});case"error":return s.jsx(ef,{className:"w-5 h-5 text-red-500"});case"warning":return s.jsx(at,{className:"w-5 h-5 text-yellow-500"});case"info":return s.jsx(Gm,{className:"w-5 h-5 text-blue-500"});default:return s.jsx(Tt,{className:"w-5 h-5 text-green-500"})}},h=()=>{switch(t){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-green-50 border-green-200"}};return s.jsx("div",{className:`fixed top-4 right-4 z-[9999] transition-all duration-300 ease-out ${o&&!i?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:s.jsxs("div",{className:`flex items-center gap-3 min-w-[300px] max-w-md p-4 rounded-lg shadow-lg border ${h()}`,children:[s.jsx("div",{className:"flex-shrink-0",children:u()}),s.jsx("div",{className:"flex-1 text-sm text-gray-800",children:e}),s.jsx("button",{onClick:c,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ie,{className:"w-4 h-4"})})]})})},wg=({toasts:e,onRemove:t})=>s.jsx(s.Fragment,{children:e.map((n,r)=>s.jsx("div",{style:{top:`${4+r*80}px`},children:s.jsx(vg,{message:n.message,type:n.type,duration:n.duration,onClose:()=>t(n.id)})},n.id))}),bg=()=>{const[e,t]=x.useState([]);return{toasts:e,showToast:(o,l="success",i=3e3)=>{const a=`toast-${Date.now()}-${Math.random()}`;t(c=>[...c,{id:a,message:o,type:l,duration:i}])},removeToast:o=>{t(l=>l.filter(i=>i.id!==o))}}},Ng=({isOpen:e,onClose:t,onDataUpdate:n})=>{const[r,o]=x.useState([]),[l,i]=x.useState(!1),[a,c]=x.useState(null),[u,h]=x.useState([]),[m,g]=x.useState(!1),y=x.useRef(null),w=x.useRef(null),[k,C]=x.useState(!1),{toasts:f,showToast:d,removeToast:p}=bg(),v=()=>{o([]),c(null),h([]),y.current&&(y.current.value="")},j=()=>{v(),t()},E=T=>{const z=Array.from(T.target.files||[]);if(z.length===0)return;const ne=z.map((H,V)=>H.type.startsWith("image/")?H.size>10*1024*1024?{id:`${Date.now()}-${V}`,file:H,previewUrl:"",status:"error",error:" 10MB"}:{id:`${Date.now()}-${V}`,file:H,previewUrl:"",status:"pending"}:{id:`${Date.now()}-${V}`,file:H,previewUrl:"",status:"error",error:""});ne.forEach(H=>{if(H.status==="pending"){const V=new FileReader;V.onload=S=>{o(A=>A.map(M=>{var Q;return M.id===H.id?{...M,previewUrl:(Q=S.target)==null?void 0:Q.result}:M}))},V.readAsDataURL(H.file)}}),o(H=>[...H,...ne]),c(null)},D=T=>{o(z=>z.filter(ne=>ne.id!==T))},R=T=>new Promise((z,ne)=>{const H=new FileReader;H.onload=()=>{const S=H.result.split(",")[1];z(S)},H.onerror=ne,H.readAsDataURL(T)}),U=async T=>{const z=ua(),ne=lt();if(!z||!ne)throw new Error("");try{o(A=>A.map(M=>M.id===T.id?{...M,status:"uploading"}:M));const H=await R(T.file),V={Data:[{op_id:z,op_name:ne,base64:H}]};console.log("=== PreSave API Request Debug ==="),console.log("File:",T.file.name),console.log("Request Data:",JSON.stringify(V,null,2));const S=await je("/api/pcmpo/preSave",{method:"POST",body:V});if(console.log("PreSave Response:",JSON.stringify(S,null,2)),S.Code===200&&S.Data&&S.Data.length>0){const A=S.Data[0].GUID;return o(M=>M.map(Q=>Q.id===T.id?{...Q,status:"uploaded",guid:A}:Q)),A}else throw new Error(S.Result||"")}catch(H){throw console.error("Upload error:",H),o(V=>V.map(S=>S.id===T.id?{...S,status:"error",error:H instanceof Error?H.message:""}:S)),H}},I=async()=>{const T=r.filter(z=>z.status==="pending"&&z.previewUrl);if(T.length===0){c("");return}i(!0),c(null);try{console.log("===  ==="),console.log(":",T.length),console.log("");const z=[];for(const H of T)try{const V=await U(H);V&&(z.push({imageId:H.id,guid:V,imageItem:H}),console.log(`  ${H.file.name} GUID: ${V}`))}catch(V){console.error(`  ${H.file.name} :`,V)}if(console.log(":",z.length),console.log(":",z.map(H=>({fileName:H.imageItem.file.name,guid:H.guid}))),z.length===0){c("");return}console.log(""),console.log(":",z.length),console.log("GUIDs:",z.map(H=>H.guid));const ne=[];for(const H of z){const{imageItem:V,guid:S}=H;console.log(`: ${V.file.name}, GUID: ${S}`);try{o(Q=>Q.map(te=>te.id===V.id?{...te,status:"analyzing"}:te));const A={ValueAry:[S]};console.log("=== Analyze Batch API Request Debug ==="),console.log("API URL:","/api/pcmpo/analyze_batch"),console.log("Method:","POST"),console.log("Request Data:",JSON.stringify(A,null,2)),console.log(" API ...");const M=await je("/api/pcmpo/analyze_batch",{method:"POST",body:A});console.log("API ..."),console.log("Analyze Batch Response:",JSON.stringify(M,null,2)),M.Code===200&&M.Data?(console.log(`  ${V.file.name} `),o(Q=>Q.map(te=>te.id===V.id?{...te,status:"analyzed",analysisResult:M.Data}:te)),Array.isArray(M.Data)?ne.push(...M.Data):(ne.push(M.Data),M.Data?Array.isArray(M.Data)?ne.push(...M.Data):ne.push(M.Data):ne.push({GUID:S,Result:M.Result||"",check:"",base64:V.previewUrl,op_name:lt(),op_time:new Date().toLocaleString("zh-TW"),po_num:"",qty:"",batch_num:"",expirydate:"",name:"",cht_name:"",code:""}))):(console.log(`  ${V.file.name} :`,M.Result),o(Q=>Q.map(te=>te.id===V.id?{...te,status:"error",error:M.Result||""}:te)),ne.push({GUID:S,Result:M.Result||"",check:"",base64:V.previewUrl,op_name:lt(),create_time:new Date().toLocaleString("zh-TW"),po_num:"",qty:"",batch_num:"",expirydate:"",name:"",cht_name:"",code:"",_isFailed:!0,_failureReason:M.Result||""}))}catch(A){console.error(`  ${V.file.name} :`,A),o(M=>M.map(Q=>Q.id===V.id?{...Q,status:"error",error:A instanceof Error?A.message:""}:Q)),ne.push({GUID:S,Result:A instanceof Error?A.message:"",check:"",base64:V.previewUrl,op_name:lt(),create_time:new Date().toLocaleString("zh-TW"),po_num:"",qty:"",batch_num:"",expirydate:"",name:"",cht_name:"",code:"",_isFailed:!0,_failureReason:A instanceof Error?A.message:""})}}console.log(":",ne.length),console.log(":",ne),console.log("===  ==="),ne.length>0?(h(ne),g(!0)):c("")}catch(z){console.error("Batch process error:",z),c(z instanceof Error?z.message:"")}finally{i(!1)}},Y=async T=>{var H;const z=(H=T.target.files)==null?void 0:H[0];if(!z)return;if(!z.name.endsWith(".xlsx")&&!z.name.endsWith(".xls")){d(" Excel  (.xlsx  .xls)","error"),w.current&&(w.current.value="");return}const ne=lt();if(!ne){d("","error");return}C(!0),c(null);try{console.log("===  Excel ==="),console.log(":",z.name),console.log(":",ne);const V=await sg(z,ne);console.log(":",V),V.Code===200?(d(V.Result||"Excel ","success"),n&&n(),w.current&&(w.current.value=""),setTimeout(()=>{j()},500)):d(V.Result||"Excel ","error")}catch(V){console.error("Excel :",V);const S=V instanceof Error?V.message:"Excel ";d(S,"error")}finally{C(!1)}},L=(T,z)=>{switch(T){case"pending":return s.jsx("span",{className:"text-gray-500",children:""});case"uploading":return s.jsxs("span",{className:"text-blue-500 flex items-center",children:[s.jsx(ce,{size:"small",className:"mr-1"}),""]});case"uploaded":return s.jsxs("span",{className:"text-green-500 flex items-center",children:[s.jsx(Tt,{className:"w-4 h-4 mr-1"}),""]});case"analyzing":return s.jsxs("span",{className:"text-blue-500 flex items-center",children:[s.jsx(ce,{size:"small",className:"mr-1"}),""]});case"analyzed":return s.jsxs("span",{className:"text-green-500 flex items-center",children:[s.jsx(Tt,{className:"w-4 h-4 mr-1"}),""]});case"error":return s.jsxs("span",{className:"text-red-500 flex items-center",children:[s.jsx(at,{className:"w-4 h-4 mr-1"}),z||""]});default:return null}};return e?s.jsxs(s.Fragment,{children:[s.jsx(wg,{toasts:f,onRemove:p}),s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(hr,{className:"w-5 h-5 mr-2"}),""]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:""})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{children:[s.jsx("input",{ref:w,type:"file",accept:".xlsx,.xls",onChange:Y,className:"hidden"}),s.jsx("button",{onClick:()=>{var T;return(T=w.current)==null?void 0:T.click()},disabled:k||l,className:"inline-flex items-center px-3 py-2 text-sm font-medium rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:" Excel",children:k?s.jsxs(s.Fragment,{children:[s.jsx(ce,{size:"small",className:"mr-2"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(di,{className:"w-4 h-4 mr-2"})," Excel"]})})]}),s.jsx("button",{onClick:j,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ie,{className:"w-6 h-6"})})]})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[a&&s.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm flex items-center",children:[s.jsx(at,{className:"w-4 h-4 mr-2 flex-shrink-0"}),a]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors cursor-pointer",onClick:()=>{var T;return(T=y.current)==null?void 0:T.click()},children:[s.jsx("input",{ref:y,type:"file",accept:"image/*",multiple:!0,onChange:E,className:"hidden"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Jd,{className:"w-12 h-12 text-gray-400 mx-auto"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:""}),s.jsx("p",{className:"text-xs text-gray-500",children:" JPG, PNG, GIF "})]})]})]})]}),r.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:[" (",r.length," )"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(T=>s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:T.file.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[(T.file.size/1024/1024).toFixed(2)," MB"]})]}),s.jsx("button",{onClick:()=>D(T.id),className:"ml-2 text-red-500 hover:text-red-700",disabled:l,children:s.jsx(Rn,{className:"w-4 h-4"})})]}),T.previewUrl&&s.jsx("img",{src:T.previewUrl,alt:"",className:"w-full h-32 object-cover rounded mb-2"}),s.jsx("div",{className:"text-xs",children:L(T.status,T.error)})]},T.id))})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center p-6 border-t bg-gray-50",children:[s.jsx("div",{className:"text-sm text-gray-600",children:r.length>0&&s.jsxs("span",{children:[" ",r.length,"  | : ",r.filter(T=>T.status==="pending").length," | : ",r.filter(T=>T.status==="analyzed").length," | : ",r.filter(T=>T.status==="error").length]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",disabled:l,children:""}),s.jsx("button",{onClick:I,disabled:l||r.filter(T=>T.status==="pending").length===0,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:l?s.jsxs(s.Fragment,{children:[s.jsx(ce,{size:"small",className:"mr-2"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(hr,{className:"w-4 h-4 mr-2"}),""]})})]})]})]})}),s.jsx(yg,{isOpen:m,onClose:()=>{g(!1),h([]),j()},results:u,onDataUpdate:n})]}):null},Oc=({isOpen:e,onClose:t,inspections:n,title:r="",onDataUpdate:o,isToday:l=!1,onDateRangeChange:i,initialDateRange:a})=>{var mn,ws,bs,Ns,_s;const[c,u]=ke.useState(new Set),[h,m]=ke.useState(new Set),[g,y]=ke.useState(null),[w,k]=ke.useState(!1),[C,f]=ke.useState(!1),[d,p]=ke.useState(""),[v,j]=ke.useState("00:00:00"),[E,D]=ke.useState(""),[R,U]=ke.useState("23:59:59"),[I,Y]=ke.useState(null),[L,T]=ke.useState({lot:"",endQty:"",val:""}),[z,ne]=ke.useState(null),[H,V]=ke.useState({isOpen:!1,subContent:null,inspectionItem:null}),[S,A]=ke.useState(null),[M,Q]=ke.useState({isOpen:!1,imageUrl:"",title:""}),[te,Le]=ke.useState(null),[b,X]=ke.useState(!1),{t:N}=gs();ke.useEffect(()=>{if(l){const q=new Date().toISOString().split("T")[0];p(q),D(q),j("00:00:00"),U("23:59:59")}else if(a){const[P,q]=a,K=P.split(" "),ee=q.split(" ");p(K[0]),j(K[1]||"00:00:00"),D(ee[0]),U(ee[1]||"23:59:59")}},[l,a]);const ue=nf()==="20",G=P=>{if(!P)return"";try{const q=new Date(P),K=new Date;q.setHours(0,0,0,0),K.setHours(0,0,0,0);const ee=q.getTime()-K.getTime(),ye=Math.ceil(ee/(1e3*60*60*24)),Z=q.toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/");return ye===0?`${Z} (${N("delivery.today")})`:ye<0?`${Z} (${N("delivery.overdue")} ${Math.abs(ye)} ${N("delivery.days")})`:`${Z} (${N("delivery.remaining")} ${ye} ${N("delivery.days")})`}catch(q){return console.error("Error formatting arrival time:",q),P}},W=P=>{if(!P)return"text-gray-500";try{const q=new Date(P),K=new Date;q.setHours(0,0,0,0),K.setHours(0,0,0,0);const ee=q.getTime()-K.getTime(),ye=Math.ceil(ee/(1e3*60*60*24));return ye===0?"text-blue-600 font-medium":ye<0?"text-red-600 font-medium":"text-green-600 font-medium"}catch{return"text-gray-500"}},ie=P=>{u(q=>{const K=new Set(q);return K.has(P)?K.delete(P):K.add(P),K})},J=async(P,q)=>{if(!ue){y("");return}m(K=>new Set([...K,P.GUID])),y(null);try{console.log("=== Lock/Unlock Sub Content Debug ==="),console.log("Sub Content GUID:",P.GUID),console.log("Current State:",P.STATE),console.log("New State:",q);const K={...P,STATE:q};console.log("Update Data:",JSON.stringify(K,null,2));const ee=await Fr(K);console.log("Lock/Unlock Response:",JSON.stringify(ee,null,2)),ee.Code===200?(console.log(` ${q===""?"":""}`),o&&o()):y(ee.Result||`${q===""?"":""}`)}catch(K){console.error("Lock/Unlock error:",K),y(K instanceof Error?K.message:`${q===""?"":""}`)}finally{m(K=>{const ee=new Set(K);return ee.delete(P.GUID),ee})}},Ee=async()=>{if(!ue){y("");return}const P=[];if(n.forEach(ee=>{ee.Sub_content&&ee.Sub_content.length>0&&P.push(...ee.Sub_content)}),P.length===0){y("");return}const q="",K="";k(!0),y(null);try{console.log(`=== ${K} Debug ===`),console.log(":",P.length),console.log(":",q);let ee=0,ye=0;const Z=[];for(const Xe of P)try{const Ze={...Xe,STATE:q},$=await Fr(Ze);$.Code===200?(ee++,console.log(` ${Xe.GUID} ${K}`)):(ye++,Z.push(`${Xe.GUID}: ${$.Result}`),console.log(` ${Xe.GUID} ${K}:`,$.Result))}catch(Ze){ye++;const $=Ze instanceof Error?Ze.message:"";Z.push(`${Xe.GUID}: ${$}`),console.error(` ${Xe.GUID} ${K}:`,Ze)}console.log(`=== ${K} ===`),console.log(":",ee),console.log(":",ye),ee>0?(o&&o(),ye===0?console.log(` ${K}`):y(`${ee} ${ye} ${Z.join("; ")}`)):y(`${K}${Z.join("; ")}`)}catch(ee){console.error(`${K}:`,ee),y(ee instanceof Error?ee.message:`${K}`)}finally{k(!1)}},yr=P=>{Y(P);let q="";if(P.VAL)try{q=new Date(P.VAL).toISOString().split("T")[0]}catch{console.warn("Invalid date format:",P.VAL)}T({lot:P.LOT||"",endQty:P.END_QTY||"",val:q})},Go=()=>{Y(null),T({lot:"",endQty:"",val:""})},An=async P=>{ne(P.GUID),y(null);try{const q=lt();if(!q){y("");return}const K=L.val?`${L.val} 00:00:00`:"",ee={...P,LOT:L.lot,END_QTY:L.endQty,VAL:K,OP:q},ye=await Fr(ee);ye.Code===200?(console.log(" "),o&&o(),Y(null)):y(ye.Result||"")}catch(q){console.error(":",q),y(q instanceof Error?q.message:"")}finally{ne(null)}},vr=(P,q)=>{V({isOpen:!0,subContent:P,inspectionItem:q})},xs=async()=>{const{subContent:P}=H;if(P){A(P.GUID),y(null);try{const q=await lf(P.GUID,P.Master_GUID);q.Code===200?(console.log(" "),o&&o(),V({isOpen:!1,subContent:null,inspectionItem:null})):y(q.Result||"")}catch(q){console.error(":",q),y(q instanceof Error?q.message:"")}finally{A(null)}}},ys=async(P,q)=>{Le(P);try{console.log("===  ==="),console.log("Item GUID:",P);const K=await af(P);if(console.log("API Response:",K),K.Code===200&&K.Data){const ee=K.Data;if(console.log("Image Data:",ee),ee.base64){const ye=ee.base64.startsWith("data:")?ee.base64:`data:image/jpeg;base64,${ee.base64}`;Q({isOpen:!0,imageUrl:ye,title:`${q} - `})}else alert("")}else alert("")}catch(K){console.error(":",K),alert("")}finally{Le(null)}},Je=()=>{if(i&&d&&E){const P=`${d} ${v}`,q=`${E} ${R}`;i(P,q),f(!1)}},Un=async()=>{if(n.length===0){alert("");return}X(!0),y(null);try{console.log("===  ==="),console.log(":",n.length);const P=await rg(n);console.log(" Blob:",P);const q=`_${d||"all"}_${E||"all"}.xlsx`,K=window.URL.createObjectURL(P),ee=document.createElement("a");ee.href=K,ee.download=q,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),window.URL.revokeObjectURL(K),console.log(" ")}catch(P){console.error(":",P),y(P instanceof Error?P.message:"")}finally{X(!1)}},vs=({isOpen:P,onClose:q,imageUrl:K,title:ee})=>P?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-[60]",children:s.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh]",children:[s.jsx("button",{onClick:q,className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",children:s.jsx(Ie,{className:"w-8 h-8"})}),s.jsx("img",{src:K,alt:ee,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl"}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white p-2 rounded-b-lg",children:s.jsx("p",{className:"text-center text-sm",children:ee})})]})}):null;return e?s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gray-50",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(Bo,{className:"w-5 h-5 mr-2"}),r,s.jsx("button",{onClick:()=>f(!C),className:"ml-2 text-gray-400 hover:text-gray-600 transition-colors",title:"",children:s.jsx(qm,{className:"w-5 h-5"})})]}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[" ",n.length," "]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:Un,disabled:b||n.length===0,className:"inline-flex items-center px-3 py-2 text-sm font-medium rounded-md bg-green-600 text-white hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:" Excel",children:b?s.jsxs(s.Fragment,{children:[s.jsx(ce,{size:"small",className:"mr-2"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Bm,{className:"w-4 h-4 mr-2"}),""]})}),s.jsx("button",{onClick:Ee,disabled:!ue||w||n.length===0,className:`inline-flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${ue?"bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:ue?"/":"",children:w?s.jsxs(s.Fragment,{children:[s.jsx(ce,{size:"small",className:"mr-2"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Sc,{className:"w-4 h-4 mr-2"}),""]})}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ie,{className:"w-6 h-6"})})]})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[C&&s.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:""}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("input",{type:"date",value:d,onChange:P=>p(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("input",{type:"time",value:v,onChange:P=>j(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",step:"1"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("input",{type:"date",value:E,onChange:P=>D(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("input",{type:"time",value:R,onChange:P=>U(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",step:"1"})]})]})]}),s.jsx("div",{className:"flex justify-end gap-2 mt-4",children:s.jsx("button",{onClick:Je,disabled:!d||!E||!v||!R,className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""})})]}),g&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:g}),n.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Pn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:""})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:N("table.inspection_number")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:N("table.purchase_number")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:N("table.drug_code")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:N("table.item_number")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:N("table.drug_name")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:N("table.manufacturer")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:N("table.arrival_time")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:N("table.received_expected_qty")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(P=>{var ye;const q=((ye=P.Sub_content)==null?void 0:ye.reduce((Z,Xe)=>Z+(parseInt(Xe.END_QTY)||0),0))||0,K=c.has(P.GUID),ee=P.Sub_content&&P.Sub_content.length>0;return s.jsxs(s.Fragment,{children:[s.jsxs("tr",{className:`hover:bg-gray-50 ${ee?"cursor-pointer":""}`,onClick:()=>ee&&ie(P.GUID),children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"text-sm font-medium text-gray-900",children:P.IC_SN})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"text-sm text-gray-900",children:P.PON})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"text-sm text-gray-900",children:P.CODE})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"text-sm text-gray-900",children:P.SKDIACODE})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[s.jsx("div",{className:"font-medium",children:P.CHT_NAME||P.NAME}),P.CHT_NAME&&P.NAME&&P.CHT_NAME!==P.NAME&&s.jsx("div",{className:"text-gray-500 text-xs mt-1",children:P.NAME})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"text-sm text-gray-900",children:P.BRD||""})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:`text-sm flex items-center ${W(P.DELIVERY_TIME)}`,children:[s.jsx(os,{className:"w-4 h-4 mr-1 text-gray-400"}),G(P.DELIVERY_TIME)]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[s.jsx("span",{className:"font-semibold text-green-600",children:q.toLocaleString()}),s.jsx("span",{className:"text-gray-400 mx-1",children:"/"}),s.jsx("span",{className:"font-semibold text-blue-600",children:parseInt(P.START_QTY).toLocaleString()}),s.jsx("span",{className:"text-gray-500 ml-1",children:P.PAKAGE})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:ee&&(K?s.jsx(Nn,{className:"w-5 h-5 text-gray-400"}):s.jsx(Kd,{className:"w-5 h-5 text-gray-400"}))})]},P.GUID),K&&ee&&P.Sub_content.map((Z,Xe)=>s.jsx("tr",{className:"bg-gray-50",children:s.jsx("td",{colSpan:9,className:"px-6 py-4",children:s.jsxs("div",{className:"bg-white rounded-md p-4 border border-gray-200 ml-8",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("h6",{className:"text-sm font-medium text-gray-900",children:[" #",Xe+1]}),s.jsxs("div",{className:"flex gap-2",children:[Z.STATE!==""&&s.jsx(s.Fragment,{children:(I==null?void 0:I.GUID)===Z.GUID?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>An(Z),disabled:z===Z.GUID,className:"inline-flex items-center px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[z===Z.GUID?s.jsx(ce,{size:"small",className:"mr-1"}):s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),""]}),s.jsxs("button",{onClick:Go,disabled:z===Z.GUID,className:"inline-flex items-center px-2 py-1 bg-gray-600 text-white text-xs rounded hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(Ie,{className:"w-3 h-3 mr-1"}),""]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>yr(Z),className:"inline-flex items-center px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded hover:bg-gray-200 transition-colors",title:"",children:[s.jsx(aa,{className:"w-3 h-3 mr-1"}),""]}),s.jsxs("button",{onClick:()=>vr(Z,P),disabled:S===Z.GUID,className:"inline-flex items-center px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"",children:[S===Z.GUID?s.jsx(ce,{size:"small",className:"mr-1"}):s.jsx(Rn,{className:"w-3 h-3 mr-1"}),""]})]})}),s.jsxs("button",{onClick:()=>ys(P.GUID,P.CHT_NAME||P.NAME),disabled:te===P.GUID,className:"inline-flex items-center px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"",children:[te===P.GUID?s.jsx(ce,{size:"small",className:"mr-1"}):s.jsx(Yd,{className:"w-3 h-3 mr-1"}),""]}),ue&&s.jsx("div",{className:"flex gap-2",children:Z.STATE===""?s.jsxs("button",{onClick:()=>J(Z,""),disabled:h.has(Z.GUID),className:"inline-flex items-center px-2 py-1 bg-gray-600 text-white text-xs rounded hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"",children:[h.has(Z.GUID)?s.jsx(ce,{size:"small",className:"mr-1"}):s.jsx(Sc,{className:"w-3 h-3 mr-1"}),""]}):s.jsxs("button",{onClick:()=>J(Z,""),disabled:h.has(Z.GUID),className:"inline-flex items-center px-2 py-1 bg-gray-600 text-white text-xs rounded hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"",children:[h.has(Z.GUID)?s.jsx(ce,{size:"small",className:"mr-1"}):s.jsx(Ym,{className:"w-3 h-3 mr-1"}),""]})})]})]}),(I==null?void 0:I.GUID)===Z.GUID?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase mb-1",children:""}),s.jsx("input",{type:"text",value:L.lot,onChange:Ze=>T($=>({...$,lot:Ze.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase mb-1",children:""}),s.jsx("input",{type:"number",value:L.endQty,onChange:Ze=>T($=>({...$,endQty:Ze.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase mb-1",children:""}),s.jsx("input",{type:"date",value:L.val,onChange:Ze=>T($=>({...$,val:Ze.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("h6",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:""}),s.jsx("div",{className:"text-sm space-y-1",children:s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",s.jsxs("span",{className:"font-medium text-green-600",children:[Z.END_QTY," ",Z.PAKAGE]})]})})]}),s.jsxs("div",{children:[s.jsx("h6",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:""}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",Z.VAL?new Date(Z.VAL).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"/"):""]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:":"})," ",Z.LOT]})]})]}),s.jsxs("div",{children:[s.jsx("h6",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:""}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Zd,{className:"w-3 h-3 text-gray-400 mr-1"}),Z.OP]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(os,{className:"w-3 h-3 text-gray-400 mr-1"}),Z.OP_TIME]})]})]}),s.jsxs("div",{children:[s.jsx("h6",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:""}),s.jsx("div",{className:"text-sm",children:s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Z.STATE===""?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:Z.STATE})})]})]}),(Z.BARCODE1||Z.BARCODE2||Z.NOTE)&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[(Z.BARCODE1||Z.BARCODE2)&&s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase",children:""}),s.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[Z.BARCODE1&&s.jsxs("div",{children:["1: ",Z.BARCODE1]}),Z.BARCODE2&&s.jsxs("div",{children:["2: ",Z.BARCODE2]})]})]}),Z.NOTE&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase",children:""}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Z.NOTE})]})]})]})})},`${P.GUID}-sub-${Xe}`))]})})})]})})]}),s.jsx("div",{className:"flex justify-end p-6 border-t bg-gray-50",children:s.jsx("button",{onClick:t,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:""})})]}),H.isOpen&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""}),s.jsx("button",{onClick:()=>V({isOpen:!1,subContent:null,inspectionItem:null}),className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ie,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:""}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 mb-6",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:":"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:((mn=H.inspectionItem)==null?void 0:mn.CHT_NAME)||((ws=H.inspectionItem)==null?void 0:ws.NAME)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:":"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:(bs=H.subContent)==null?void 0:bs.LOT})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:":"}),s.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[(Ns=H.subContent)==null?void 0:Ns.END_QTY," ",(_s=H.subContent)==null?void 0:_s.PAKAGE]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>V({isOpen:!1,subContent:null,inspectionItem:null}),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",disabled:S,children:""}),s.jsx("button",{onClick:xs,disabled:S,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:S?s.jsxs(s.Fragment,{children:[s.jsx(ce,{size:"small",className:"mr-2"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Rn,{className:"w-4 h-4 mr-2"}),""]})})]})]})]})}),s.jsx(vs,{isOpen:M.isOpen,onClose:()=>Q({isOpen:!1,imageUrl:"",title:""}),imageUrl:M.imageUrl,title:M.title})]}):null},_g=({isOpen:e,onClose:t,onDataUpdate:n})=>{const[r,o]=x.useState(null),[l,i]=x.useState(!1),[a,c]=x.useState(null),[u,h]=x.useState(null),m=x.useRef(null),g=()=>{o(null),c(null),h(null),m.current&&(m.current.value="")},y=()=>{g(),t()},w=C=>{var v;const f=(v=C.target.files)==null?void 0:v[0];if(!f)return;if(!["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",".xls",".xlsx"].some(j=>f.type===j||f.name.toLowerCase().endsWith(j))){c(" Excel  (.xls  .xlsx)");return}if(f.size>50*1024*1024){c(" 50MB");return}o(f),c(null),h(null)},k=async()=>{if(!r)return;const C=ua(),f=lt();if(!C||!f){c("");return}i(!0),c(null),h(null);try{console.log("=== Excel Upload Debug ==="),console.log("Selected file:",r.name,r.size,"bytes"),console.log("Operator ID:",C),console.log("Operator Name:",f);const d=await eg(r,C,f);console.log("Response Data:",d),console.log("==============================="),d.Code===200?(console.log(" Excel upload successful"),h(d.Result||"Excel "),n&&n(),setTimeout(()=>{y()},3e3)):(console.log(" Excel upload failed"),c(d.Result||""))}catch(d){console.error("Excel upload error:",d),console.log(" Exception occurred during upload"),c(d instanceof Error?d.message:"")}finally{i(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(hr,{className:"w-5 h-5 mr-2"}),""]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:" Excel "})]}),s.jsx("button",{onClick:y,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ie,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6",children:[a&&s.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm flex items-center",children:[s.jsx(at,{className:"w-4 h-4 mr-2 flex-shrink-0"}),a]}),u&&s.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 text-green-700 rounded-lg text-sm flex items-center",children:[s.jsx(Tt,{className:"w-4 h-4 mr-2 flex-shrink-0"}),u]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Excel "}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors cursor-pointer",onClick:()=>{var C;return(C=m.current)==null?void 0:C.click()},children:[s.jsx("input",{ref:m,type:"file",accept:".xls,.xlsx,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",onChange:w,className:"hidden"}),r?s.jsxs("div",{className:"space-y-2",children:[s.jsx(di,{className:"w-12 h-12 text-green-500 mx-auto"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[(r.size/1024/1024).toFixed(2)," MB"]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(di,{className:"w-12 h-12 text-gray-400 mx-auto"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:" Excel "}),s.jsx("p",{className:"text-xs text-gray-500",children:" .xls  .xlsx  50MB"})]})]})]})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:""}),s.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[s.jsx("li",{children:"  Excel "}),s.jsx("li",{children:"  50MB"}),s.jsx("li",{children:" "}),s.jsx("li",{children:" "})]})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{type:"button",onClick:y,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",disabled:l,children:""}),s.jsx("button",{onClick:k,disabled:l||!r,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:l?s.jsxs(s.Fragment,{children:[s.jsx(ce,{size:"small",className:"mr-2"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(hr,{className:"w-4 h-4 mr-2"}),""]})})]})]})]})}):null},jg=({isOpen:e,onClose:t,onDataUpdate:n})=>{const[r,o]=x.useState([]),[l,i]=x.useState(!1),[a,c]=x.useState(!1),[u,h]=x.useState(null),[m,g]=x.useState(null),[y,w]=x.useState({pon:"",icSn:"",code:"",name:"",brd:"",skdiacode:"",startQty:""}),[k,C]=x.useState([]),[f,d]=x.useState(!1),[p,v]=x.useState(!1),j=async()=>{c(!0);try{const L=await cf();L.Code===200&&L.Data?(o(L.Data),console.log(":",L.Data.length,"")):(console.error(":",L.Result),h(L.Result||""))}catch(L){console.error(":",L),h(L instanceof Error?L.message:"")}finally{c(!1)}};x.useEffect(()=>{e&&r.length===0&&j()},[e]);const E=()=>{w({pon:"",icSn:"",code:"",name:"",brd:"",skdiacode:"",startQty:""}),h(null),g(null),d(!1),v(!1),C([])},D=()=>{E(),t()},R=L=>{if(w(T=>({...T,code:L})),L.trim()){const T=r.filter(z=>z.CODE.toLowerCase().includes(L.toLowerCase()));C(T),d(!0),v(!1)}else d(!1),C([])},U=L=>{if(w(T=>({...T,name:L})),L.trim()){const T=r.filter(z=>z.NAME.toLowerCase().includes(L.toLowerCase())||z.CHT_NAME&&z.CHT_NAME.toLowerCase().includes(L.toLowerCase())||z.DIANAME.toLowerCase().includes(L.toLowerCase())||z.TRADENAME.toLowerCase().includes(L.toLowerCase()));C(T),v(!0),d(!1)}else v(!1),C([])},I=L=>{w(T=>({...T,code:L.CODE,name:L.NAME,skdiacode:L.SKDIACODE,brd:L.BRD||T.brd})),d(!1),v(!1),C([])},Y=async L=>{L.preventDefault(),i(!0),h(null),g(null);try{const T=await tg(y.pon,y.icSn,y.code,y.name,y.brd,y.skdiacode,y.startQty);T.Code===200?(g(""),n&&n(),setTimeout(()=>{D()},3e3)):h(T.Result||"")}catch(T){console.error(":",T),h(T instanceof Error?T.message:"")}finally{i(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(fr,{className:"w-5 h-5 mr-2"}),""]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:""})]}),s.jsx("button",{onClick:D,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ie,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:Y,className:"p-6",children:[a&&s.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 text-blue-700 rounded-lg text-sm flex items-center",children:[s.jsx(ce,{size:"small",className:"mr-2"}),"..."]}),u&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:u}),m&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 text-green-700 rounded-lg text-sm",children:m}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),s.jsx("input",{type:"text",value:y.pon,onChange:L=>w({...y,pon:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:""})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"text",value:y.icSn,onChange:L=>w({...y,icSn:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:y.code,onChange:L=>R(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:""}),s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:s.jsx(ls,{className:"h-4 w-4 text-gray-400"})})]}),f&&k.length>0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:k.slice(0,10).map((L,T)=>s.jsxs("div",{onClick:()=>I(L),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0",children:[s.jsx("div",{className:"font-medium text-sm",children:L.CODE}),s.jsx("div",{className:"text-xs text-gray-600",children:L.CHT_NAME||L.NAME}),s.jsxs("div",{className:"text-xs text-gray-500",children:[": ",L.SKDIACODE]})]},T))})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:y.name,onChange:L=>U(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:""}),s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:s.jsx(ls,{className:"h-4 w-4 text-gray-400"})})]}),p&&k.length>0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:k.slice(0,10).map((L,T)=>s.jsxs("div",{onClick:()=>I(L),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0",children:[s.jsx("div",{className:"font-medium text-sm",children:L.NAME}),s.jsxs("div",{className:"text-xs text-gray-600",children:[": ",L.CODE]}),s.jsxs("div",{className:"text-xs text-gray-500",children:[": ",L.SKDIACODE]})]},T))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),s.jsx("input",{type:"text",value:y.skdiacode,onChange:L=>w({...y,skdiacode:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:""})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),s.jsx("input",{type:"text",value:y.brd,onChange:L=>w({...y,brd:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),s.jsx("input",{type:"number",value:y.startQty,onChange:L=>w({...y,startQty:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,min:"1",step:"1",placeholder:""})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{type:"button",onClick:D,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",disabled:l,children:""}),s.jsx("button",{type:"submit",disabled:l||a,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:l?s.jsxs(s.Fragment,{children:[s.jsx(ce,{size:"small",className:"mr-2"}),"..."]}):s.jsxs(s.Fragment,{children:[s.jsx(fr,{className:"w-4 h-4 mr-2"}),""]})})]})]})]})}):null},Sg=({isOpen:e,onClose:t,onBarcodeDetected:n})=>{const r=x.useRef(null),o=x.useRef(null),[l,i]=x.useState(null),[a,c]=x.useState(!1),[u,h]=x.useState(window.innerWidth<768);return x.useEffect(()=>{const m=()=>h(window.innerWidth<768);return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),x.useEffect(()=>{let m=null,g=null;const y=()=>{g&&clearInterval(g),m&&m.getTracks().forEach(C=>C.stop())},w=async()=>{var v,j,E;if(!r.current||!o.current)return;const C=r.current,f=o.current,d=f.getContext("2d");if(!d||C.readyState<2)return;f.width=C.videoWidth,f.height=C.videoHeight,d.drawImage(C,0,0,f.width,f.height);const p=await new Promise(D=>f.toBlob(D,"image/jpeg",.8));if(p)try{const D=new FormData;D.append("file",p);const R=await og(D),U=(E=(j=(v=R==null?void 0:R.results)==null?void 0:v[0])==null?void 0:j.code)==null?void 0:E.trim();U&&(y(),n(U),t())}catch(D){console.error(":",D)}};return e?(async()=>{try{m=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),r.current&&(r.current.srcObject=m),c(!0),g=setInterval(w,600)}catch{i("")}})():y(),()=>y()},[e,n,t]),e?u?s.jsxs("div",{className:"fixed inset-0 bg-black text-white flex flex-col z-50",children:[s.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover"}),s.jsxs("div",{className:"relative z-10 p-4 flex justify-between items-center bg-black bg-opacity-40 backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ui,{className:"w-5 h-5 text-blue-400 mr-2"}),s.jsx("h2",{className:"text-lg font-semibold",children:""})]}),s.jsx("button",{onClick:t,children:s.jsx(Ie,{className:"w-6 h-6 text-gray-300"})})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:l&&s.jsx("div",{className:"bg-red-600 bg-opacity-60 text-sm px-4 py-2 rounded-lg",children:l})}),s.jsxs("div",{className:"relative z-10 bg-black bg-opacity-60 text-center py-3 pb-[env(safe-area-inset-bottom)]",children:[!l&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm",children:""}),s.jsx("p",{className:"text-xs text-gray-400",children:"QR Code"})]}),s.jsx("button",{onClick:t,className:"mt-3 px-4 py-2 border border-gray-400 rounded-lg text-gray-300 hover:bg-gray-700",children:""})]}),s.jsx("canvas",{ref:o,className:"hidden"})]}):s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ui,{className:"w-6 h-6 text-blue-600 mr-2"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ie,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-4",children:[l&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:l}),s.jsx("div",{className:"relative bg-black rounded-lg overflow-hidden",style:{aspectRatio:"16/9"},children:s.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),s.jsx("canvas",{ref:o,className:"hidden"}),s.jsxs("div",{className:"mt-4 text-center text-sm text-gray-600",children:[s.jsx("p",{children:""}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"QR Code"})]}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:""})})]})]})}):null},kg=({isOpen:e,onClose:t,barcode:n,onSuccess:r})=>{const[o,l]=x.useState([]),[i,a]=x.useState(!0),[c,u]=x.useState(!1),[h,m]=x.useState(null),[g,y]=x.useState(""),[w,k]=x.useState(""),[C,f]=x.useState(""),[d,p]=x.useState(""),[v,j]=x.useState(null),[E,D]=x.useState(!1),[R,U]=x.useState(!1),[I,Y]=x.useState(!1),[L,T]=x.useState(!1),z=x.useRef(null),ne=x.useRef(null),H=x.useRef(null),V=x.useRef(null);x.useEffect(()=>{e?A():S()},[e]);const S=()=>{y(""),k(""),f(""),p(""),j(null),m(null),D(!1),U(!1),Y(!1),T(!1)};x.useEffect(()=>{const N=B=>{z.current&&!z.current.contains(B.target)&&D(!1),ne.current&&!ne.current.contains(B.target)&&U(!1),H.current&&!H.current.contains(B.target)&&Y(!1),V.current&&!V.current.contains(B.target)&&T(!1)};return document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[]);const A=async()=>{a(!0),m(null);try{const N=await cf();console.log(":",N),N.Code===200&&N.Data?l(N.Data):m(N.Result||"")}catch(N){console.error(":",N),m("")}finally{a(!1)}},M=x.useMemo(()=>!o.length||!g?[]:o.filter(N=>{var B;return(B=N.NAME)==null?void 0:B.toLowerCase().includes(g.toLowerCase())}),[o,g]),Q=x.useMemo(()=>!o.length||!w?[]:o.filter(N=>{var B;return(B=N.CHT_NAME)==null?void 0:B.toLowerCase().includes(w.toLowerCase())}),[o,w]),te=x.useMemo(()=>!o.length||!C?[]:o.filter(N=>{var B;return(B=N.CODE)==null?void 0:B.toLowerCase().includes(C.toLowerCase())}),[o,C]),Le=x.useMemo(()=>!o.length||!d?[]:o.filter(N=>{var B;return(B=N.SKDIACODE)==null?void 0:B.toLowerCase().includes(d.toLowerCase())}),[o,d]),b=N=>{j(N),y(N.NAME||""),k(N.CHT_NAME||""),f(N.CODE||""),p(N.SKDIACODE||""),D(!1),U(!1),Y(!1),T(!1)},X=async N=>{if(N.preventDefault(),!C){m("");return}u(!0),m(null);try{const B={Data:[{BARCODE:[n],CODE:C,BARCODE2:JSON.stringify([n])}]};console.log(":",B);const ue=await je("/api/med_page/add_med_clouds",{method:"POST",body:B});console.log(":",ue),ue.Code===200?(r(),t()):m(ue.Result||"")}catch(B){console.error(":",B),m("")}finally{u(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(fr,{className:"w-6 h-6 text-blue-600 mr-2"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ie,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:X,className:"p-6",children:[h&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:h}),i&&s.jsx("div",{className:"text-center py-8 text-gray-500",children:"..."}),!i&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),s.jsx("input",{type:"text",value:n,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),s.jsxs("div",{ref:z,className:"relative",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:g,onChange:N=>{y(N.target.value),D(!0)},onFocus:()=>D(!0),placeholder:"",disabled:c,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx(Nn,{className:"absolute right-3 top-2.5 w-5 h-5 text-gray-400 pointer-events-none"})]}),E&&g&&M.length>0&&s.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-64 overflow-y-auto",children:[M.slice(0,50).map((N,B)=>s.jsxs("div",{onClick:()=>b(N),className:`px-4 py-2 cursor-pointer hover:bg-blue-50 border-b border-gray-100 last:border-b-0 ${(v==null?void 0:v.CODE)===N.CODE?"bg-blue-50":""}`,children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.NAME}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[": ",N.CODE," | : ",N.SKDIACODE]})]},B)),M.length>50&&s.jsx("div",{className:"px-4 py-2 text-sm text-gray-500 bg-gray-50 text-center",children:" 50 "})]}),E&&g&&M.length===0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:s.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:""})})]}),s.jsxs("div",{ref:ne,className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:w,onChange:N=>{k(N.target.value),U(!0)},onFocus:()=>U(!0),placeholder:"",disabled:c,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx(Nn,{className:"absolute right-3 top-2.5 w-5 h-5 text-gray-400 pointer-events-none"})]}),R&&w&&Q.length>0&&s.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-64 overflow-y-auto",children:[Q.slice(0,50).map((N,B)=>s.jsxs("div",{onClick:()=>b(N),className:`px-4 py-2 cursor-pointer hover:bg-blue-50 border-b border-gray-100 last:border-b-0 ${(v==null?void 0:v.CODE)===N.CODE?"bg-blue-50":""}`,children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.CHT_NAME}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[": ",N.CODE," | : ",N.SKDIACODE]})]},B)),Q.length>50&&s.jsx("div",{className:"px-4 py-2 text-sm text-gray-500 bg-gray-50 text-center",children:" 50 "})]}),R&&w&&Q.length===0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:s.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:""})})]}),s.jsxs("div",{ref:H,className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:C,onChange:N=>{f(N.target.value),Y(!0)},onFocus:()=>Y(!0),placeholder:"",disabled:c,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx(Nn,{className:"absolute right-3 top-2.5 w-5 h-5 text-gray-400 pointer-events-none"})]}),I&&C&&te.length>0&&s.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-64 overflow-y-auto",children:[te.slice(0,50).map((N,B)=>s.jsxs("div",{onClick:()=>b(N),className:`px-4 py-2 cursor-pointer hover:bg-blue-50 border-b border-gray-100 last:border-b-0 ${(v==null?void 0:v.CODE)===N.CODE?"bg-blue-50":""}`,children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.CODE}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[": ",N.NAME," | : ",N.SKDIACODE]})]},B)),te.length>50&&s.jsx("div",{className:"px-4 py-2 text-sm text-gray-500 bg-gray-50 text-center",children:" 50 "})]}),I&&C&&te.length===0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:s.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:""})})]}),s.jsxs("div",{ref:V,className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:d,onChange:N=>{p(N.target.value),T(!0)},onFocus:()=>T(!0),placeholder:"",disabled:c,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx(Nn,{className:"absolute right-3 top-2.5 w-5 h-5 text-gray-400 pointer-events-none"})]}),L&&d&&Le.length>0&&s.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-64 overflow-y-auto",children:[Le.slice(0,50).map((N,B)=>s.jsxs("div",{onClick:()=>b(N),className:`px-4 py-2 cursor-pointer hover:bg-blue-50 border-b border-gray-100 last:border-b-0 ${(v==null?void 0:v.CODE)===N.CODE?"bg-blue-50":""}`,children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.SKDIACODE}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[": ",N.NAME," | : ",N.CODE]})]},B)),Le.length>50&&s.jsx("div",{className:"px-4 py-2 text-sm text-gray-500 bg-gray-50 text-center",children:" 50 "})]}),L&&d&&Le.length===0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:s.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:""})})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[s.jsx("button",{type:"button",onClick:t,disabled:c,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors disabled:opacity-50",children:""}),s.jsx("button",{type:"submit",disabled:c||!C||i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"...":""})]})]})]})}):null},Cg=(e={})=>{const{onMessage:t,autoConnect:n=!0}=e;x.useEffect(()=>{let a=null;return(()=>{try{n&&yn.connect(),t&&(a=yn.onMessage(t))}catch(u){console.error("WebSocket initialization error:",u)}})(),()=>{a&&a()}},[t,n]);const r=x.useCallback(()=>{try{yn.connect()}catch(a){throw console.error("WebSocket connect error:",a),a}},[]),o=x.useCallback(()=>{try{yn.disconnect()}catch(a){throw console.error("WebSocket disconnect error:",a),a}},[]),l=x.useCallback(async()=>{try{return await yn.sendMessage()}catch(a){throw console.error("WebSocket send message error:",a),a}},[]),i=x.useCallback(()=>yn.isConnected(),[]);return{connect:r,disconnect:o,sendMessage:l,isConnected:i}},Eg=()=>{const{t:e,language:t,toggleLanguage:n}=gs(),[r,o]=x.useState([]),[l,i]=x.useState([]),[a,c]=x.useState(!0),[u,h]=x.useState(null),[m,g]=x.useState(null),[y,w]=x.useState(!1),[k,C]=x.useState(!1),[f,d]=x.useState(!1),[p,v]=x.useState(!1),[j,E]=x.useState(!1),[D,R]=x.useState([]),[U,I]=x.useState(0),[Y,L]=x.useState([]),[T,z]=x.useState(""),[ne,H]=x.useState(!1),[V,S]=x.useState([]),[A,M]=x.useState(!1),[Q,te]=x.useState(""),[Le,b]=x.useState(!1),[X,N]=x.useState(!1),[B,ue]=x.useState(!1),[G,W]=x.useState(!1),[ie,J]=x.useState(!1),[Ee,yr]=x.useState(""),Go=()=>{const $=hi();$!=null&&$.domain&&(window.location.href=$.domain)},[An,vr]=x.useState(Ic()),[xs,ys]=An;Cg({onMessage:$=>{console.log("=== Received WebSocket Message ==="),console.log("Message:",$),Je(),Un()},autoConnect:!0});const Je=async($,se)=>{c(!0),h(null);try{const[me,Me]=$&&se?[$,se]:An,Se=await Qp(me,Me);if(console.log("Response Data:",Se),Se.Code===200){o(Se.Data);const pt=qp(Se.Data,B);if(i(pt),m){const pn=pt.find(Nt=>Nt.CODE===m.CODE&&Nt.SKDIACODE===m.SKDIACODE);pn&&g(pn)}}else h(Se.Result||""),o([]),i([])}catch(me){console.error("Failed to load inspections:",me),h(me instanceof Error?me.message:""),o([]),i([])}finally{c(!1)}},Un=async()=>{try{const se=new Date().toLocaleDateString("zh-TW",{timeZone:"Asia/Taipei",year:"numeric",month:"2-digit",day:"2-digit"}),[me,Me,Se]=se.split("/"),pt=`${me}-${Me.padStart(2,"0")}-${Se.padStart(2,"0")} 00:00:00`,pn=`${me}-${Me.padStart(2,"0")}-${Se.padStart(2,"0")} 23:59:59`,Nt=await Rc(pt,pn);Nt.Code===200?(I(Nt.Data.length),R(Nt.Data),L(Nt.Data)):(Nt.Result&&Nt.Result.includes("")?console.warn("No inspection data found for today:",Nt.Result):console.error("Failed to load today inspection count:",Nt.Result),I(0),R([]),L([]))}catch($){console.error("Failed to load today inspection count:",$),I(0),R([]),L([])}},vs=async($,se)=>{try{console.log("=== Custom Date Range Query ==="),console.log("Start Date:",$),console.log("End Date:",se);const me=await Rc($,se);me.Code===200?(L(me.Data),console.log("Custom query result:",me.Data.length,"")):(console.error("Custom date range query failed:",me.Result),L([]))}catch(me){console.error("Custom date range query error:",me),L([])}},mn=async $=>{if(!$.trim()){X||S(l),M(!1);return}H(!0),M(!0);try{if(console.log("===  ==="),console.log(":",$),a||l.length===0){console.log(" ..."),H(!1);return}const se=await Pc($);if(console.log(":",se),se.Code===200&&se.Data&&se.Data.length>0){console.log("API :",se.Data),console.log("API :",se.Data[0]);const me=se.Data.map(Se=>Se.CODE).filter(Boolean);console.log(":",me),console.log(" CODE:",l.map(Se=>Se.CODE));const Me=l.filter(Se=>{const pt=me.includes(Se.CODE);return pt&&console.log(" :",Se.CODE),pt});console.log(":",Me.length,""),console.log(":",Me),S(Me)}else se.Code===-200&&se.Result===""?(console.log(""),yr($),J(!0),S([])):(console.log(""),S([]))}catch(se){console.error(":",se),S([])}finally{H(!1)}},ws=$=>{if(!$.trim()){if(!A)S(l);else if(T.trim()){mn(T);return}N(!1);return}b(!0),N(!0);try{console.log("===  ==="),console.log(":",$);const se=l.filter(me=>me.items.some(Me=>{var Se,pt;return((Se=Me.IC_SN)==null?void 0:Se.toLowerCase().includes($.toLowerCase()))||((pt=Me.PON)==null?void 0:pt.toLowerCase().includes($.toLowerCase()))}));console.log(":",se.length,""),S(se)}catch(se){console.error(":",se),S([])}finally{b(!1)}},bs=$=>{z($)},Ns=$=>{$.key==="Enter"&&mn(T)},_s=$=>{te($);const se=setTimeout(()=>{ws($)},300);return()=>clearTimeout(se)},P=x.useCallback($=>{console.log("===  ==="),console.log(":",$),z($),mn($)},[]);x.useEffect(()=>{Je(),Un()},[]),x.useEffect(()=>{if(!A&&!X)S(l);else if(A&&T.trim()&&l.length>0)Pc(T).then($=>{if($.Code===200&&$.Data&&$.Data.length>0){const se=$.Data.map(Me=>Me.CODE).filter(Boolean),me=l.filter(Me=>se.includes(Me.CODE));S(me)}else S([])});else if(X&&Q.trim()&&l.length>0){const $=l.filter(se=>{var me,Me,Se;return se.CODE.includes(Q)||((me=se.NAME_CH)==null?void 0:me.includes(Q))||((Me=se.NAME_E)==null?void 0:Me.includes(Q))||((Se=se.KSKLOT)==null?void 0:Se.some(pt=>{var pn;return(pn=pt.KS_num)==null?void 0:pn.includes(Q)}))});S($)}},[l,A,X,T,Q]),x.useEffect(()=>{Je()},[B]);const q=($,se)=>{vr([$,se])},K=()=>{Je(xs,ys)},ee=()=>{const $=Ic();vr($),Je($[0],$[1])},ye=r.length,Z=A?V.length:l.length,Xe=lt(),Ze=sp();return s.jsxs("div",{className:"min-h-screen flex flex-col bg-white",children:[s.jsx("main",{className:"flex-1 p-4 md:p-6 lg:p-8 pb-24",children:s.jsxs("div",{className:"max-w-screen-xl mx-auto",children:[s.jsx("header",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:Go,className:"flex items-center justify-center w-12 h-12 hover:bg-slate-200 rounded-lg transition-colors",children:s.jsx(Wm,{size:24,className:"text-slate-700"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-semibold text-gray-800",children:e("app.inspection")}),s.jsx("p",{className:"text-slate-600",children:Xe&&Ze?`${Xe}-${Ze}`:""})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:n,className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:[s.jsx(Hm,{className:"w-4 h-4 mr-2"}),e(`language.${t}`)]}),s.jsxs("button",{onClick:()=>{sessionStorage.clear(),window.location.reload()},className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e("logout")]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(Pn,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:e("app.inspection.drugs")}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Z})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6 cursor-pointer hover:shadow-md hover:bg-gray-50 transition-all duration-200",onClick:()=>v(!0),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(Km,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:e("app.inspection.total")}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:ye})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6 cursor-pointer hover:shadow-md hover:bg-gray-50 transition-all duration-200",onClick:()=>{Un(),E(!0)},children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(Pn,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:e("app.inspection.today")}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:U})]})]})})]}),s.jsx(pg,{startDate:xs,endDate:ys,onDateChange:q,onSearch:K,onReset:ee,loading:a}),s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"mb-4",children:s.jsxs("label",{className:"inline-flex items-center",children:[s.jsx("input",{type:"checkbox",checked:B,onChange:$=>ue($.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:""})]})}),s.jsxs("div",{className:"flex flex-col xl:flex-row gap-4 xl:items-end",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs("button",{onClick:()=>w(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e("app.inspection.batch_upload")]}),s.jsxs("button",{onClick:()=>C(!0),className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e("app.inspection.excel_upload")]}),s.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:[s.jsx(fr,{className:"w-5 h-5 mr-2"}),e("app.inspection.manual_create")]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 xl:flex-1 xl:justify-end",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:[e("app.inspection.barcode_search"),":"]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(ls,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",value:T,onChange:$=>bs($.target.value),onKeyPress:Ns,placeholder:e("app.inspection.search_barcode_placeholder"),className:"block w-full pl-10 pr-20 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center",children:ne?s.jsx("div",{className:"pr-3",children:s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})}):s.jsx("button",{onClick:()=>W(!0),className:"pr-3 flex items-center justify-center text-blue-600 hover:text-blue-700 transition-colors",title:"",children:s.jsx(ui,{className:"h-5 w-5"})})})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:[e("app.inspection.number_search"),":"]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(ls,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",value:Q,onChange:$=>_s($.target.value),placeholder:e("app.inspection.search_number_placeholder"),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),Le&&s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]})]})]})]})]}),u&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:s.jsxs("div",{className:"flex",children:[s.jsx(at,{className:"h-5 w-5 text-red-400"}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-800",children:u})})]})}),s.jsx(lg,{data:V,loading:a,onRowClick:g})]})}),s.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 py-2 px-6 text-center text-gray-600 text-sm z-10",children:"Copyright 2025 "}),s.jsx(mg,{groupedData:m,isOpen:!!m,onClose:()=>g(null),onDataUpdate:()=>Je()}),s.jsx(Ng,{isOpen:y,onClose:()=>w(!1),onDataUpdate:()=>{Je(),Un()}}),s.jsx(_g,{isOpen:k,onClose:()=>C(!1),onDataUpdate:()=>Je()}),s.jsx(jg,{isOpen:f,onClose:()=>d(!1),onDataUpdate:()=>Je()}),s.jsx(Oc,{isOpen:p,onClose:()=>v(!1),inspections:r,initialDateRange:An,onDateRangeChange:($,se)=>{vr([$,se]),Je($,se)},onDataUpdate:()=>Je()}),s.jsx(Oc,{isOpen:j,onClose:()=>E(!1),inspections:Y,title:"",isToday:!0,onDateRangeChange:vs,onDataUpdate:()=>{const[$,se]=An;Je(),vs($,se)}}),s.jsx(Sg,{isOpen:G,onClose:()=>W(!1),onBarcodeDetected:P}),s.jsx(kg,{isOpen:ie,onClose:()=>J(!1),barcode:Ee,onSuccess:()=>{J(!1),T&&mn(T)}})]})};function Dg(){const[e,t]=x.useState(!1),[n,r]=x.useState(!1),[o,l]=x.useState(!0);x.useEffect(()=>{(async()=>{try{await ms(),t(!0);const c=rp();r(c),console.log("Authentication check:",{authenticated:c,userSession:sessionStorage.getItem("user_session")?"exists":"missing"})}catch(c){console.error("Failed to load configuration:",c)}finally{l(!1)}})()},[]);const i=()=>{r(!0)};return!e||o?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"text-gray-600",children:"Loading..."})}):s.jsx(lp,{children:n?s.jsx(Eg,{}):s.jsx(ip,{onLogin:i})})}Qd(document.getElementById("root")).render(s.jsx(x.StrictMode,{children:s.jsx(Dg,{})}));
//# sourceMappingURL=index-C1ztNu_R.js.map
