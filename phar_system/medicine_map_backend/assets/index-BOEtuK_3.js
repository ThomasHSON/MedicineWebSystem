(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function Dd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Zi={exports:{}},oo={},ec={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zr=Symbol.for("react.element"),Ed=Symbol.for("react.portal"),Pd=Symbol.for("react.fragment"),Id=Symbol.for("react.strict_mode"),Td=Symbol.for("react.profiler"),Rd=Symbol.for("react.provider"),Ad=Symbol.for("react.context"),$d=Symbol.for("react.forward_ref"),Ld=Symbol.for("react.suspense"),Od=Symbol.for("react.memo"),Ud=Symbol.for("react.lazy"),Ba=Symbol.iterator;function zd(e){return e===null||typeof e!="object"?null:(e=Ba&&e[Ba]||e["@@iterator"],typeof e=="function"?e:null)}var tc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nc=Object.assign,rc={};function dr(e,t,n){this.props=e,this.context=t,this.refs=rc,this.updater=n||tc}dr.prototype.isReactComponent={};dr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};dr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function sc(){}sc.prototype=dr.prototype;function Hl(e,t,n){this.props=e,this.context=t,this.refs=rc,this.updater=n||tc}var Vl=Hl.prototype=new sc;Vl.constructor=Hl;nc(Vl,dr.prototype);Vl.isPureReactComponent=!0;var Fa=Array.isArray,oc=Object.prototype.hasOwnProperty,Wl={current:null},lc={key:!0,ref:!0,__self:!0,__source:!0};function ac(e,t,n){var r,s={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)oc.call(t,r)&&!lc.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),p=0;p<i;p++)c[p]=arguments[p+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:Zr,type:e,key:l,ref:a,props:s,_owner:Wl.current}}function Bd(e,t){return{$$typeof:Zr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Xl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zr}function Fd(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ga=/\/+/g;function jo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Fd(""+e.key):t.toString(36)}function js(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Zr:case Ed:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+jo(a,0):r,Fa(s)?(n="",e!=null&&(n=e.replace(Ga,"$&/")+"/"),js(s,t,n,"",function(p){return p})):s!=null&&(Xl(s)&&(s=Bd(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Ga,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Fa(e))for(var i=0;i<e.length;i++){l=e[i];var c=r+jo(l,i);a+=js(l,t,n,c,s)}else if(c=zd(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=r+jo(l,i++),a+=js(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function os(e,t,n){if(e==null)return e;var r=[],s=0;return js(e,r,"","",function(l){return t.call(n,l,s++)}),r}function Gd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qe={current:null},bs={transition:null},Hd={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:bs,ReactCurrentOwner:Wl};function ic(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:os,forEach:function(e,t,n){os(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return os(e,function(){t++}),t},toArray:function(e){return os(e,function(t){return t})||[]},only:function(e){if(!Xl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xe.Component=dr;xe.Fragment=Pd;xe.Profiler=Td;xe.PureComponent=Hl;xe.StrictMode=Id;xe.Suspense=Ld;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hd;xe.act=ic;xe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=nc({},e.props),s=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=Wl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)oc.call(t,c)&&!lc.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var p=0;p<c;p++)i[p]=arguments[p+2];r.children=i}return{$$typeof:Zr,type:e.type,key:s,ref:l,props:r,_owner:a}};xe.createContext=function(e){return e={$$typeof:Ad,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Rd,_context:e},e.Consumer=e};xe.createElement=ac;xe.createFactory=function(e){var t=ac.bind(null,e);return t.type=e,t};xe.createRef=function(){return{current:null}};xe.forwardRef=function(e){return{$$typeof:$d,render:e}};xe.isValidElement=Xl;xe.lazy=function(e){return{$$typeof:Ud,_payload:{_status:-1,_result:e},_init:Gd}};xe.memo=function(e,t){return{$$typeof:Od,type:e,compare:t===void 0?null:t}};xe.startTransition=function(e){var t=bs.transition;bs.transition={};try{e()}finally{bs.transition=t}};xe.unstable_act=ic;xe.useCallback=function(e,t){return qe.current.useCallback(e,t)};xe.useContext=function(e){return qe.current.useContext(e)};xe.useDebugValue=function(){};xe.useDeferredValue=function(e){return qe.current.useDeferredValue(e)};xe.useEffect=function(e,t){return qe.current.useEffect(e,t)};xe.useId=function(){return qe.current.useId()};xe.useImperativeHandle=function(e,t,n){return qe.current.useImperativeHandle(e,t,n)};xe.useInsertionEffect=function(e,t){return qe.current.useInsertionEffect(e,t)};xe.useLayoutEffect=function(e,t){return qe.current.useLayoutEffect(e,t)};xe.useMemo=function(e,t){return qe.current.useMemo(e,t)};xe.useReducer=function(e,t,n){return qe.current.useReducer(e,t,n)};xe.useRef=function(e){return qe.current.useRef(e)};xe.useState=function(e){return qe.current.useState(e)};xe.useSyncExternalStore=function(e,t,n){return qe.current.useSyncExternalStore(e,t,n)};xe.useTransition=function(){return qe.current.useTransition()};xe.version="18.3.1";ec.exports=xe;var v=ec.exports;const Ha=Dd(v);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd=v,Wd=Symbol.for("react.element"),Xd=Symbol.for("react.fragment"),Yd=Object.prototype.hasOwnProperty,Kd=Vd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qd={key:!0,ref:!0,__self:!0,__source:!0};function cc(e,t,n){var r,s={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Yd.call(t,r)&&!Qd.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Wd,type:e,key:l,ref:a,props:s,_owner:Kd.current}}oo.Fragment=Xd;oo.jsx=cc;oo.jsxs=cc;Zi.exports=oo;var o=Zi.exports,uc={exports:{}},ft={},dc={exports:{}},fc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(y,_){var O=y.length;y.push(_);e:for(;0<O;){var R=O-1>>>1,z=y[R];if(0<s(z,_))y[R]=_,y[O]=z,O=R;else break e}}function n(y){return y.length===0?null:y[0]}function r(y){if(y.length===0)return null;var _=y[0],O=y.pop();if(O!==_){y[0]=O;e:for(var R=0,z=y.length,q=z>>>1;R<q;){var ee=2*(R+1)-1,ie=y[ee],P=ee+1,le=y[P];if(0>s(ie,O))P<z&&0>s(le,ie)?(y[R]=le,y[P]=O,R=P):(y[R]=ie,y[ee]=O,R=ee);else if(P<z&&0>s(le,O))y[R]=le,y[P]=O,R=P;else break e}}return _}function s(y,_){var O=y.sortIndex-_.sortIndex;return O!==0?O:y.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],p=[],h=1,g=null,x=3,C=!1,j=!1,E=!1,U=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(y){for(var _=n(p);_!==null;){if(_.callback===null)r(p);else if(_.startTime<=y)r(p),_.sortIndex=_.expirationTime,t(c,_);else break;_=n(p)}}function k(y){if(E=!1,m(y),!j)if(n(c)!==null)j=!0,ue(D);else{var _=n(p);_!==null&&T(k,_.startTime-y)}}function D(y,_){j=!1,E&&(E=!1,u(G),G=-1),C=!0;var O=x;try{for(m(_),g=n(c);g!==null&&(!(g.expirationTime>_)||y&&!te());){var R=g.callback;if(typeof R=="function"){g.callback=null,x=g.priorityLevel;var z=R(g.expirationTime<=_);_=e.unstable_now(),typeof z=="function"?g.callback=z:g===n(c)&&r(c),m(_)}else r(c);g=n(c)}if(g!==null)var q=!0;else{var ee=n(p);ee!==null&&T(k,ee.startTime-_),q=!1}return q}finally{g=null,x=O,C=!1}}var w=!1,M=null,G=-1,Q=5,Y=-1;function te(){return!(e.unstable_now()-Y<Q)}function he(){if(M!==null){var y=e.unstable_now();Y=y;var _=!0;try{_=M(!0,y)}finally{_?S():(w=!1,M=null)}}else w=!1}var S;if(typeof d=="function")S=function(){d(he)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,oe=K.port2;K.port1.onmessage=he,S=function(){oe.postMessage(null)}}else S=function(){U(he,0)};function ue(y){M=y,w||(w=!0,S())}function T(y,_){G=U(function(){y(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(y){y.callback=null},e.unstable_continueExecution=function(){j||C||(j=!0,ue(D))},e.unstable_forceFrameRate=function(y){0>y||125<y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<y?Math.floor(1e3/y):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(y){switch(x){case 1:case 2:case 3:var _=3;break;default:_=x}var O=x;x=_;try{return y()}finally{x=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(y,_){switch(y){case 1:case 2:case 3:case 4:case 5:break;default:y=3}var O=x;x=y;try{return _()}finally{x=O}},e.unstable_scheduleCallback=function(y,_,O){var R=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?R+O:R):O=R,y){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=O+z,y={id:h++,callback:_,priorityLevel:y,startTime:O,expirationTime:z,sortIndex:-1},O>R?(y.sortIndex=O,t(p,y),n(c)===null&&y===n(p)&&(E?(u(G),G=-1):E=!0,T(k,O-R))):(y.sortIndex=z,t(c,y),j||C||(j=!0,ue(D))),y},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(y){var _=x;return function(){var O=x;x=_;try{return y.apply(this,arguments)}finally{x=O}}}})(fc);dc.exports=fc;var Jd=dc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qd=v,dt=Jd;function W(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pc=new Set,$r={};function En(e,t){sr(e,t),sr(e+"Capture",t)}function sr(e,t){for($r[e]=t,e=0;e<t.length;e++)pc.add(t[e])}var Ht=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jo=Object.prototype.hasOwnProperty,Zd=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Va={},Wa={};function ef(e){return Jo.call(Wa,e)?!0:Jo.call(Va,e)?!1:Zd.test(e)?Wa[e]=!0:(Va[e]=!0,!1)}function tf(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function nf(e,t,n,r){if(t===null||typeof t>"u"||tf(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ze(e,t,n,r,s,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){He[e]=new Ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];He[t]=new Ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){He[e]=new Ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){He[e]=new Ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){He[e]=new Ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){He[e]=new Ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){He[e]=new Ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){He[e]=new Ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){He[e]=new Ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yl=/[\-:]([a-z])/g;function Kl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yl,Kl);He[t]=new Ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yl,Kl);He[t]=new Ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yl,Kl);He[t]=new Ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){He[e]=new Ze(e,1,!1,e.toLowerCase(),null,!1,!1)});He.xlinkHref=new Ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){He[e]=new Ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ql(e,t,n,r){var s=He.hasOwnProperty(t)?He[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(nf(t,n,s,r)&&(n=null),r||s===null?ef(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Yt=qd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ls=Symbol.for("react.element"),zn=Symbol.for("react.portal"),Bn=Symbol.for("react.fragment"),Jl=Symbol.for("react.strict_mode"),qo=Symbol.for("react.profiler"),mc=Symbol.for("react.provider"),hc=Symbol.for("react.context"),ql=Symbol.for("react.forward_ref"),Zo=Symbol.for("react.suspense"),el=Symbol.for("react.suspense_list"),Zl=Symbol.for("react.memo"),Jt=Symbol.for("react.lazy"),gc=Symbol.for("react.offscreen"),Xa=Symbol.iterator;function hr(e){return e===null||typeof e!="object"?null:(e=Xa&&e[Xa]||e["@@iterator"],typeof e=="function"?e:null)}var Re=Object.assign,bo;function jr(e){if(bo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);bo=t&&t[1]||""}return`
`+bo+e}var Co=!1;function ko(e,t){if(!e||Co)return"";Co=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var r=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){r=p}e.call(t.prototype)}else{try{throw Error()}catch(p){r=p}e()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),l=r.stack.split(`
`),a=s.length-1,i=l.length-1;1<=a&&0<=i&&s[a]!==l[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==l[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==l[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{Co=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?jr(e):""}function rf(e){switch(e.tag){case 5:return jr(e.type);case 16:return jr("Lazy");case 13:return jr("Suspense");case 19:return jr("SuspenseList");case 0:case 2:case 15:return e=ko(e.type,!1),e;case 11:return e=ko(e.type.render,!1),e;case 1:return e=ko(e.type,!0),e;default:return""}}function tl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bn:return"Fragment";case zn:return"Portal";case qo:return"Profiler";case Jl:return"StrictMode";case Zo:return"Suspense";case el:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case hc:return(e.displayName||"Context")+".Consumer";case mc:return(e._context.displayName||"Context")+".Provider";case ql:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Zl:return t=e.displayName||null,t!==null?t:tl(e.type)||"Memo";case Jt:t=e._payload,e=e._init;try{return tl(e(t))}catch{}}return null}function sf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tl(t);case 8:return t===Jl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function of(e){var t=xc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function as(e){e._valueTracker||(e._valueTracker=of(e))}function yc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=xc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function As(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nl(e,t){var n=t.checked;return Re({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ya(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=pn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function vc(e,t){t=t.checked,t!=null&&Ql(e,"checked",t,!1)}function rl(e,t){vc(e,t);var n=pn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?sl(e,t.type,n):t.hasOwnProperty("defaultValue")&&sl(e,t.type,pn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ka(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function sl(e,t,n){(t!=="number"||As(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var br=Array.isArray;function qn(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+pn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ol(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(W(91));return Re({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qa(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(W(92));if(br(n)){if(1<n.length)throw Error(W(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:pn(n)}}function wc(e,t){var n=pn(t.value),r=pn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ja(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Nc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ll(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Nc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var is,Sc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(is=is||document.createElement("div"),is.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=is.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var _r={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lf=["Webkit","ms","Moz","O"];Object.keys(_r).forEach(function(e){lf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_r[t]=_r[e]})});function jc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||_r.hasOwnProperty(e)&&_r[e]?(""+t).trim():t+"px"}function bc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=jc(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var af=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function al(e,t){if(t){if(af[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(W(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(W(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(W(61))}if(t.style!=null&&typeof t.style!="object")throw Error(W(62))}}function il(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cl=null;function ea(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ul=null,Zn=null,er=null;function qa(e){if(e=ns(e)){if(typeof ul!="function")throw Error(W(280));var t=e.stateNode;t&&(t=uo(t),ul(e.stateNode,e.type,t))}}function Cc(e){Zn?er?er.push(e):er=[e]:Zn=e}function kc(){if(Zn){var e=Zn,t=er;if(er=Zn=null,qa(e),t)for(e=0;e<t.length;e++)qa(t[e])}}function _c(e,t){return e(t)}function Mc(){}var _o=!1;function Dc(e,t,n){if(_o)return e(t,n);_o=!0;try{return _c(e,t,n)}finally{_o=!1,(Zn!==null||er!==null)&&(Mc(),kc())}}function Or(e,t){var n=e.stateNode;if(n===null)return null;var r=uo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(W(231,t,typeof n));return n}var dl=!1;if(Ht)try{var gr={};Object.defineProperty(gr,"passive",{get:function(){dl=!0}}),window.addEventListener("test",gr,gr),window.removeEventListener("test",gr,gr)}catch{dl=!1}function cf(e,t,n,r,s,l,a,i,c){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(h){this.onError(h)}}var Mr=!1,$s=null,Ls=!1,fl=null,uf={onError:function(e){Mr=!0,$s=e}};function df(e,t,n,r,s,l,a,i,c){Mr=!1,$s=null,cf.apply(uf,arguments)}function ff(e,t,n,r,s,l,a,i,c){if(df.apply(this,arguments),Mr){if(Mr){var p=$s;Mr=!1,$s=null}else throw Error(W(198));Ls||(Ls=!0,fl=p)}}function Pn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ec(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Za(e){if(Pn(e)!==e)throw Error(W(188))}function pf(e){var t=e.alternate;if(!t){if(t=Pn(e),t===null)throw Error(W(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return Za(s),e;if(l===r)return Za(s),t;l=l.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=l;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=l;break}if(i===r){a=!0,r=s,n=l;break}i=i.sibling}if(!a){for(i=l.child;i;){if(i===n){a=!0,n=l,r=s;break}if(i===r){a=!0,r=l,n=s;break}i=i.sibling}if(!a)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?e:t}function Pc(e){return e=pf(e),e!==null?Ic(e):null}function Ic(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ic(e);if(t!==null)return t;e=e.sibling}return null}var Tc=dt.unstable_scheduleCallback,ei=dt.unstable_cancelCallback,mf=dt.unstable_shouldYield,hf=dt.unstable_requestPaint,$e=dt.unstable_now,gf=dt.unstable_getCurrentPriorityLevel,ta=dt.unstable_ImmediatePriority,Rc=dt.unstable_UserBlockingPriority,Os=dt.unstable_NormalPriority,xf=dt.unstable_LowPriority,Ac=dt.unstable_IdlePriority,lo=null,$t=null;function yf(e){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(lo,e,void 0,(e.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:Nf,vf=Math.log,wf=Math.LN2;function Nf(e){return e>>>=0,e===0?32:31-(vf(e)/wf|0)|0}var cs=64,us=4194304;function Cr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Us(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=Cr(i):(l&=a,l!==0&&(r=Cr(l)))}else a=n&~s,a!==0?r=Cr(a):l!==0&&(r=Cr(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Mt(t),s=1<<n,r|=e[n],t&=~s;return r}function Sf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jf(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-Mt(l),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=Sf(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function pl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $c(){var e=cs;return cs<<=1,!(cs&4194240)&&(cs=64),e}function Mo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function es(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mt(t),e[t]=n}function bf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Mt(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function na(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Mt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ce=0;function Lc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Oc,ra,Uc,zc,Bc,ml=!1,ds=[],sn=null,on=null,ln=null,Ur=new Map,zr=new Map,Zt=[],Cf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ti(e,t){switch(e){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":Ur.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zr.delete(t.pointerId)}}function xr(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=ns(t),t!==null&&ra(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function kf(e,t,n,r,s){switch(t){case"focusin":return sn=xr(sn,e,t,n,r,s),!0;case"dragenter":return on=xr(on,e,t,n,r,s),!0;case"mouseover":return ln=xr(ln,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return Ur.set(l,xr(Ur.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,zr.set(l,xr(zr.get(l)||null,e,t,n,r,s)),!0}return!1}function Fc(e){var t=wn(e.target);if(t!==null){var n=Pn(t);if(n!==null){if(t=n.tag,t===13){if(t=Ec(n),t!==null){e.blockedOn=t,Bc(e.priority,function(){Uc(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=hl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);cl=r,n.target.dispatchEvent(r),cl=null}else return t=ns(n),t!==null&&ra(t),e.blockedOn=n,!1;t.shift()}return!0}function ni(e,t,n){Cs(e)&&n.delete(t)}function _f(){ml=!1,sn!==null&&Cs(sn)&&(sn=null),on!==null&&Cs(on)&&(on=null),ln!==null&&Cs(ln)&&(ln=null),Ur.forEach(ni),zr.forEach(ni)}function yr(e,t){e.blockedOn===t&&(e.blockedOn=null,ml||(ml=!0,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,_f)))}function Br(e){function t(s){return yr(s,e)}if(0<ds.length){yr(ds[0],e);for(var n=1;n<ds.length;n++){var r=ds[n];r.blockedOn===e&&(r.blockedOn=null)}}for(sn!==null&&yr(sn,e),on!==null&&yr(on,e),ln!==null&&yr(ln,e),Ur.forEach(t),zr.forEach(t),n=0;n<Zt.length;n++)r=Zt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Zt.length&&(n=Zt[0],n.blockedOn===null);)Fc(n),n.blockedOn===null&&Zt.shift()}var tr=Yt.ReactCurrentBatchConfig,zs=!0;function Mf(e,t,n,r){var s=Ce,l=tr.transition;tr.transition=null;try{Ce=1,sa(e,t,n,r)}finally{Ce=s,tr.transition=l}}function Df(e,t,n,r){var s=Ce,l=tr.transition;tr.transition=null;try{Ce=4,sa(e,t,n,r)}finally{Ce=s,tr.transition=l}}function sa(e,t,n,r){if(zs){var s=hl(e,t,n,r);if(s===null)Oo(e,t,r,Bs,n),ti(e,r);else if(kf(s,e,t,n,r))r.stopPropagation();else if(ti(e,r),t&4&&-1<Cf.indexOf(e)){for(;s!==null;){var l=ns(s);if(l!==null&&Oc(l),l=hl(e,t,n,r),l===null&&Oo(e,t,r,Bs,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else Oo(e,t,r,null,n)}}var Bs=null;function hl(e,t,n,r){if(Bs=null,e=ea(r),e=wn(e),e!==null)if(t=Pn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ec(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bs=e,null}function Gc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gf()){case ta:return 1;case Rc:return 4;case Os:case xf:return 16;case Ac:return 536870912;default:return 16}default:return 16}}var nn=null,oa=null,ks=null;function Hc(){if(ks)return ks;var e,t=oa,n=t.length,r,s="value"in nn?nn.value:nn.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[l-r];r++);return ks=s.slice(e,1<r?1-r:void 0)}function _s(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fs(){return!0}function ri(){return!1}function pt(e){function t(n,r,s,l,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?fs:ri,this.isPropagationStopped=ri,this}return Re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),t}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},la=pt(fr),ts=Re({},fr,{view:0,detail:0}),Ef=pt(ts),Do,Eo,vr,ao=Re({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vr&&(vr&&e.type==="mousemove"?(Do=e.screenX-vr.screenX,Eo=e.screenY-vr.screenY):Eo=Do=0,vr=e),Do)},movementY:function(e){return"movementY"in e?e.movementY:Eo}}),si=pt(ao),Pf=Re({},ao,{dataTransfer:0}),If=pt(Pf),Tf=Re({},ts,{relatedTarget:0}),Po=pt(Tf),Rf=Re({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),Af=pt(Rf),$f=Re({},fr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Lf=pt($f),Of=Re({},fr,{data:0}),oi=pt(Of),Uf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ff(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Bf[e])?!!t[e]:!1}function aa(){return Ff}var Gf=Re({},ts,{key:function(e){if(e.key){var t=Uf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_s(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aa,charCode:function(e){return e.type==="keypress"?_s(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_s(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hf=pt(Gf),Vf=Re({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),li=pt(Vf),Wf=Re({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aa}),Xf=pt(Wf),Yf=Re({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kf=pt(Yf),Qf=Re({},ao,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jf=pt(Qf),qf=[9,13,27,32],ia=Ht&&"CompositionEvent"in window,Dr=null;Ht&&"documentMode"in document&&(Dr=document.documentMode);var Zf=Ht&&"TextEvent"in window&&!Dr,Vc=Ht&&(!ia||Dr&&8<Dr&&11>=Dr),ai=" ",ii=!1;function Wc(e,t){switch(e){case"keyup":return qf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fn=!1;function ep(e,t){switch(e){case"compositionend":return Xc(t);case"keypress":return t.which!==32?null:(ii=!0,ai);case"textInput":return e=t.data,e===ai&&ii?null:e;default:return null}}function tp(e,t){if(Fn)return e==="compositionend"||!ia&&Wc(e,t)?(e=Hc(),ks=oa=nn=null,Fn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vc&&t.locale!=="ko"?null:t.data;default:return null}}var np={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ci(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!np[e.type]:t==="textarea"}function Yc(e,t,n,r){Cc(r),t=Fs(t,"onChange"),0<t.length&&(n=new la("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Er=null,Fr=null;function rp(e){ou(e,0)}function io(e){var t=Vn(e);if(yc(t))return e}function sp(e,t){if(e==="change")return t}var Kc=!1;if(Ht){var Io;if(Ht){var To="oninput"in document;if(!To){var ui=document.createElement("div");ui.setAttribute("oninput","return;"),To=typeof ui.oninput=="function"}Io=To}else Io=!1;Kc=Io&&(!document.documentMode||9<document.documentMode)}function di(){Er&&(Er.detachEvent("onpropertychange",Qc),Fr=Er=null)}function Qc(e){if(e.propertyName==="value"&&io(Fr)){var t=[];Yc(t,Fr,e,ea(e)),Dc(rp,t)}}function op(e,t,n){e==="focusin"?(di(),Er=t,Fr=n,Er.attachEvent("onpropertychange",Qc)):e==="focusout"&&di()}function lp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return io(Fr)}function ap(e,t){if(e==="click")return io(t)}function ip(e,t){if(e==="input"||e==="change")return io(t)}function cp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Et=typeof Object.is=="function"?Object.is:cp;function Gr(e,t){if(Et(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Jo.call(t,s)||!Et(e[s],t[s]))return!1}return!0}function fi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pi(e,t){var n=fi(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fi(n)}}function Jc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Jc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qc(){for(var e=window,t=As();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=As(e.document)}return t}function ca(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function up(e){var t=qc(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Jc(n.ownerDocument.documentElement,n)){if(r!==null&&ca(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=pi(n,l);var a=pi(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dp=Ht&&"documentMode"in document&&11>=document.documentMode,Gn=null,gl=null,Pr=null,xl=!1;function mi(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xl||Gn==null||Gn!==As(r)||(r=Gn,"selectionStart"in r&&ca(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pr&&Gr(Pr,r)||(Pr=r,r=Fs(gl,"onSelect"),0<r.length&&(t=new la("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Gn)))}function ps(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Hn={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionend:ps("Transition","TransitionEnd")},Ro={},Zc={};Ht&&(Zc=document.createElement("div").style,"AnimationEvent"in window||(delete Hn.animationend.animation,delete Hn.animationiteration.animation,delete Hn.animationstart.animation),"TransitionEvent"in window||delete Hn.transitionend.transition);function co(e){if(Ro[e])return Ro[e];if(!Hn[e])return e;var t=Hn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Zc)return Ro[e]=t[n];return e}var eu=co("animationend"),tu=co("animationiteration"),nu=co("animationstart"),ru=co("transitionend"),su=new Map,hi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hn(e,t){su.set(e,t),En(t,[e])}for(var Ao=0;Ao<hi.length;Ao++){var $o=hi[Ao],fp=$o.toLowerCase(),pp=$o[0].toUpperCase()+$o.slice(1);hn(fp,"on"+pp)}hn(eu,"onAnimationEnd");hn(tu,"onAnimationIteration");hn(nu,"onAnimationStart");hn("dblclick","onDoubleClick");hn("focusin","onFocus");hn("focusout","onBlur");hn(ru,"onTransitionEnd");sr("onMouseEnter",["mouseout","mouseover"]);sr("onMouseLeave",["mouseout","mouseover"]);sr("onPointerEnter",["pointerout","pointerover"]);sr("onPointerLeave",["pointerout","pointerover"]);En("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));En("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));En("onBeforeInput",["compositionend","keypress","textInput","paste"]);En("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));En("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));En("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mp=new Set("cancel close invalid load scroll toggle".split(" ").concat(kr));function gi(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,ff(r,t,void 0,e),e.currentTarget=null}function ou(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,p=i.currentTarget;if(i=i.listener,c!==l&&s.isPropagationStopped())break e;gi(s,i,p),l=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,p=i.currentTarget,i=i.listener,c!==l&&s.isPropagationStopped())break e;gi(s,i,p),l=c}}}if(Ls)throw e=fl,Ls=!1,fl=null,e}function De(e,t){var n=t[Sl];n===void 0&&(n=t[Sl]=new Set);var r=e+"__bubble";n.has(r)||(lu(t,e,2,!1),n.add(r))}function Lo(e,t,n){var r=0;t&&(r|=4),lu(n,e,r,t)}var ms="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[ms]){e[ms]=!0,pc.forEach(function(n){n!=="selectionchange"&&(mp.has(n)||Lo(n,!1,e),Lo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ms]||(t[ms]=!0,Lo("selectionchange",!1,t))}}function lu(e,t,n,r){switch(Gc(t)){case 1:var s=Mf;break;case 4:s=Df;break;default:s=sa}n=s.bind(null,t,n,e),s=void 0,!dl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Oo(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=wn(i),a===null)return;if(c=a.tag,c===5||c===6){r=l=a;continue e}i=i.parentNode}}r=r.return}Dc(function(){var p=l,h=ea(n),g=[];e:{var x=su.get(e);if(x!==void 0){var C=la,j=e;switch(e){case"keypress":if(_s(n)===0)break e;case"keydown":case"keyup":C=Hf;break;case"focusin":j="focus",C=Po;break;case"focusout":j="blur",C=Po;break;case"beforeblur":case"afterblur":C=Po;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=si;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=If;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=Xf;break;case eu:case tu:case nu:C=Af;break;case ru:C=Kf;break;case"scroll":C=Ef;break;case"wheel":C=Jf;break;case"copy":case"cut":case"paste":C=Lf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=li}var E=(t&4)!==0,U=!E&&e==="scroll",u=E?x!==null?x+"Capture":null:x;E=[];for(var d=p,m;d!==null;){m=d;var k=m.stateNode;if(m.tag===5&&k!==null&&(m=k,u!==null&&(k=Or(d,u),k!=null&&E.push(Vr(d,k,m)))),U)break;d=d.return}0<E.length&&(x=new C(x,j,null,n,h),g.push({event:x,listeners:E}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",x&&n!==cl&&(j=n.relatedTarget||n.fromElement)&&(wn(j)||j[Vt]))break e;if((C||x)&&(x=h.window===h?h:(x=h.ownerDocument)?x.defaultView||x.parentWindow:window,C?(j=n.relatedTarget||n.toElement,C=p,j=j?wn(j):null,j!==null&&(U=Pn(j),j!==U||j.tag!==5&&j.tag!==6)&&(j=null)):(C=null,j=p),C!==j)){if(E=si,k="onMouseLeave",u="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(E=li,k="onPointerLeave",u="onPointerEnter",d="pointer"),U=C==null?x:Vn(C),m=j==null?x:Vn(j),x=new E(k,d+"leave",C,n,h),x.target=U,x.relatedTarget=m,k=null,wn(h)===p&&(E=new E(u,d+"enter",j,n,h),E.target=m,E.relatedTarget=U,k=E),U=k,C&&j)t:{for(E=C,u=j,d=0,m=E;m;m=Un(m))d++;for(m=0,k=u;k;k=Un(k))m++;for(;0<d-m;)E=Un(E),d--;for(;0<m-d;)u=Un(u),m--;for(;d--;){if(E===u||u!==null&&E===u.alternate)break t;E=Un(E),u=Un(u)}E=null}else E=null;C!==null&&xi(g,x,C,E,!1),j!==null&&U!==null&&xi(g,U,j,E,!0)}}e:{if(x=p?Vn(p):window,C=x.nodeName&&x.nodeName.toLowerCase(),C==="select"||C==="input"&&x.type==="file")var D=sp;else if(ci(x))if(Kc)D=ip;else{D=lp;var w=op}else(C=x.nodeName)&&C.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(D=ap);if(D&&(D=D(e,p))){Yc(g,D,n,h);break e}w&&w(e,x,p),e==="focusout"&&(w=x._wrapperState)&&w.controlled&&x.type==="number"&&sl(x,"number",x.value)}switch(w=p?Vn(p):window,e){case"focusin":(ci(w)||w.contentEditable==="true")&&(Gn=w,gl=p,Pr=null);break;case"focusout":Pr=gl=Gn=null;break;case"mousedown":xl=!0;break;case"contextmenu":case"mouseup":case"dragend":xl=!1,mi(g,n,h);break;case"selectionchange":if(dp)break;case"keydown":case"keyup":mi(g,n,h)}var M;if(ia)e:{switch(e){case"compositionstart":var G="onCompositionStart";break e;case"compositionend":G="onCompositionEnd";break e;case"compositionupdate":G="onCompositionUpdate";break e}G=void 0}else Fn?Wc(e,n)&&(G="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(G="onCompositionStart");G&&(Vc&&n.locale!=="ko"&&(Fn||G!=="onCompositionStart"?G==="onCompositionEnd"&&Fn&&(M=Hc()):(nn=h,oa="value"in nn?nn.value:nn.textContent,Fn=!0)),w=Fs(p,G),0<w.length&&(G=new oi(G,e,null,n,h),g.push({event:G,listeners:w}),M?G.data=M:(M=Xc(n),M!==null&&(G.data=M)))),(M=Zf?ep(e,n):tp(e,n))&&(p=Fs(p,"onBeforeInput"),0<p.length&&(h=new oi("onBeforeInput","beforeinput",null,n,h),g.push({event:h,listeners:p}),h.data=M))}ou(g,t)})}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fs(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=Or(e,n),l!=null&&r.unshift(Vr(e,l,s)),l=Or(e,t),l!=null&&r.push(Vr(e,l,s))),e=e.return}return r}function Un(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xi(e,t,n,r,s){for(var l=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,p=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&p!==null&&(i=p,s?(c=Or(n,l),c!=null&&a.unshift(Vr(n,c,i))):s||(c=Or(n,l),c!=null&&a.push(Vr(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var hp=/\r\n?/g,gp=/\u0000|\uFFFD/g;function yi(e){return(typeof e=="string"?e:""+e).replace(hp,`
`).replace(gp,"")}function hs(e,t,n){if(t=yi(t),yi(e)!==t&&n)throw Error(W(425))}function Gs(){}var yl=null,vl=null;function wl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nl=typeof setTimeout=="function"?setTimeout:void 0,xp=typeof clearTimeout=="function"?clearTimeout:void 0,vi=typeof Promise=="function"?Promise:void 0,yp=typeof queueMicrotask=="function"?queueMicrotask:typeof vi<"u"?function(e){return vi.resolve(null).then(e).catch(vp)}:Nl;function vp(e){setTimeout(function(){throw e})}function Uo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Br(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Br(t)}function an(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wi(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var pr=Math.random().toString(36).slice(2),At="__reactFiber$"+pr,Wr="__reactProps$"+pr,Vt="__reactContainer$"+pr,Sl="__reactEvents$"+pr,wp="__reactListeners$"+pr,Np="__reactHandles$"+pr;function wn(e){var t=e[At];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Vt]||n[At]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=wi(e);e!==null;){if(n=e[At])return n;e=wi(e)}return t}e=n,n=e.parentNode}return null}function ns(e){return e=e[At]||e[Vt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(W(33))}function uo(e){return e[Wr]||null}var jl=[],Wn=-1;function gn(e){return{current:e}}function Ee(e){0>Wn||(e.current=jl[Wn],jl[Wn]=null,Wn--)}function _e(e,t){Wn++,jl[Wn]=e.current,e.current=t}var mn={},Ye=gn(mn),rt=gn(!1),Cn=mn;function or(e,t){var n=e.type.contextTypes;if(!n)return mn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function st(e){return e=e.childContextTypes,e!=null}function Hs(){Ee(rt),Ee(Ye)}function Ni(e,t,n){if(Ye.current!==mn)throw Error(W(168));_e(Ye,t),_e(rt,n)}function au(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(W(108,sf(e)||"Unknown",s));return Re({},n,r)}function Vs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mn,Cn=Ye.current,_e(Ye,e),_e(rt,rt.current),!0}function Si(e,t,n){var r=e.stateNode;if(!r)throw Error(W(169));n?(e=au(e,t,Cn),r.__reactInternalMemoizedMergedChildContext=e,Ee(rt),Ee(Ye),_e(Ye,e)):Ee(rt),_e(rt,n)}var zt=null,fo=!1,zo=!1;function iu(e){zt===null?zt=[e]:zt.push(e)}function Sp(e){fo=!0,iu(e)}function xn(){if(!zo&&zt!==null){zo=!0;var e=0,t=Ce;try{var n=zt;for(Ce=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}zt=null,fo=!1}catch(s){throw zt!==null&&(zt=zt.slice(e+1)),Tc(ta,xn),s}finally{Ce=t,zo=!1}}return null}var Xn=[],Yn=0,Ws=null,Xs=0,mt=[],ht=0,kn=null,Bt=1,Ft="";function yn(e,t){Xn[Yn++]=Xs,Xn[Yn++]=Ws,Ws=e,Xs=t}function cu(e,t,n){mt[ht++]=Bt,mt[ht++]=Ft,mt[ht++]=kn,kn=e;var r=Bt;e=Ft;var s=32-Mt(r)-1;r&=~(1<<s),n+=1;var l=32-Mt(t)+s;if(30<l){var a=s-s%5;l=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Bt=1<<32-Mt(t)+s|n<<s|r,Ft=l+e}else Bt=1<<l|n<<s|r,Ft=e}function ua(e){e.return!==null&&(yn(e,1),cu(e,1,0))}function da(e){for(;e===Ws;)Ws=Xn[--Yn],Xn[Yn]=null,Xs=Xn[--Yn],Xn[Yn]=null;for(;e===kn;)kn=mt[--ht],mt[ht]=null,Ft=mt[--ht],mt[ht]=null,Bt=mt[--ht],mt[ht]=null}var ct=null,it=null,Pe=!1,_t=null;function uu(e,t){var n=gt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ji(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ct=e,it=an(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ct=e,it=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=kn!==null?{id:Bt,overflow:Ft}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=gt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ct=e,it=null,!0):!1;default:return!1}}function bl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Cl(e){if(Pe){var t=it;if(t){var n=t;if(!ji(e,t)){if(bl(e))throw Error(W(418));t=an(n.nextSibling);var r=ct;t&&ji(e,t)?uu(r,n):(e.flags=e.flags&-4097|2,Pe=!1,ct=e)}}else{if(bl(e))throw Error(W(418));e.flags=e.flags&-4097|2,Pe=!1,ct=e}}}function bi(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ct=e}function gs(e){if(e!==ct)return!1;if(!Pe)return bi(e),Pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!wl(e.type,e.memoizedProps)),t&&(t=it)){if(bl(e))throw du(),Error(W(418));for(;t;)uu(e,t),t=an(t.nextSibling)}if(bi(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(W(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){it=an(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}it=null}}else it=ct?an(e.stateNode.nextSibling):null;return!0}function du(){for(var e=it;e;)e=an(e.nextSibling)}function lr(){it=ct=null,Pe=!1}function fa(e){_t===null?_t=[e]:_t.push(e)}var jp=Yt.ReactCurrentBatchConfig;function wr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var i=s.refs;a===null?delete i[l]:i[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,e))}return e}function xs(e,t){throw e=Object.prototype.toString.call(t),Error(W(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ci(e){var t=e._init;return t(e._payload)}function fu(e){function t(u,d){if(e){var m=u.deletions;m===null?(u.deletions=[d],u.flags|=16):m.push(d)}}function n(u,d){if(!e)return null;for(;d!==null;)t(u,d),d=d.sibling;return null}function r(u,d){for(u=new Map;d!==null;)d.key!==null?u.set(d.key,d):u.set(d.index,d),d=d.sibling;return u}function s(u,d){return u=fn(u,d),u.index=0,u.sibling=null,u}function l(u,d,m){return u.index=m,e?(m=u.alternate,m!==null?(m=m.index,m<d?(u.flags|=2,d):m):(u.flags|=2,d)):(u.flags|=1048576,d)}function a(u){return e&&u.alternate===null&&(u.flags|=2),u}function i(u,d,m,k){return d===null||d.tag!==6?(d=Xo(m,u.mode,k),d.return=u,d):(d=s(d,m),d.return=u,d)}function c(u,d,m,k){var D=m.type;return D===Bn?h(u,d,m.props.children,k,m.key):d!==null&&(d.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Jt&&Ci(D)===d.type)?(k=s(d,m.props),k.ref=wr(u,d,m),k.return=u,k):(k=Rs(m.type,m.key,m.props,null,u.mode,k),k.ref=wr(u,d,m),k.return=u,k)}function p(u,d,m,k){return d===null||d.tag!==4||d.stateNode.containerInfo!==m.containerInfo||d.stateNode.implementation!==m.implementation?(d=Yo(m,u.mode,k),d.return=u,d):(d=s(d,m.children||[]),d.return=u,d)}function h(u,d,m,k,D){return d===null||d.tag!==7?(d=bn(m,u.mode,k,D),d.return=u,d):(d=s(d,m),d.return=u,d)}function g(u,d,m){if(typeof d=="string"&&d!==""||typeof d=="number")return d=Xo(""+d,u.mode,m),d.return=u,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case ls:return m=Rs(d.type,d.key,d.props,null,u.mode,m),m.ref=wr(u,null,d),m.return=u,m;case zn:return d=Yo(d,u.mode,m),d.return=u,d;case Jt:var k=d._init;return g(u,k(d._payload),m)}if(br(d)||hr(d))return d=bn(d,u.mode,m,null),d.return=u,d;xs(u,d)}return null}function x(u,d,m,k){var D=d!==null?d.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return D!==null?null:i(u,d,""+m,k);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ls:return m.key===D?c(u,d,m,k):null;case zn:return m.key===D?p(u,d,m,k):null;case Jt:return D=m._init,x(u,d,D(m._payload),k)}if(br(m)||hr(m))return D!==null?null:h(u,d,m,k,null);xs(u,m)}return null}function C(u,d,m,k,D){if(typeof k=="string"&&k!==""||typeof k=="number")return u=u.get(m)||null,i(d,u,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ls:return u=u.get(k.key===null?m:k.key)||null,c(d,u,k,D);case zn:return u=u.get(k.key===null?m:k.key)||null,p(d,u,k,D);case Jt:var w=k._init;return C(u,d,m,w(k._payload),D)}if(br(k)||hr(k))return u=u.get(m)||null,h(d,u,k,D,null);xs(d,k)}return null}function j(u,d,m,k){for(var D=null,w=null,M=d,G=d=0,Q=null;M!==null&&G<m.length;G++){M.index>G?(Q=M,M=null):Q=M.sibling;var Y=x(u,M,m[G],k);if(Y===null){M===null&&(M=Q);break}e&&M&&Y.alternate===null&&t(u,M),d=l(Y,d,G),w===null?D=Y:w.sibling=Y,w=Y,M=Q}if(G===m.length)return n(u,M),Pe&&yn(u,G),D;if(M===null){for(;G<m.length;G++)M=g(u,m[G],k),M!==null&&(d=l(M,d,G),w===null?D=M:w.sibling=M,w=M);return Pe&&yn(u,G),D}for(M=r(u,M);G<m.length;G++)Q=C(M,u,G,m[G],k),Q!==null&&(e&&Q.alternate!==null&&M.delete(Q.key===null?G:Q.key),d=l(Q,d,G),w===null?D=Q:w.sibling=Q,w=Q);return e&&M.forEach(function(te){return t(u,te)}),Pe&&yn(u,G),D}function E(u,d,m,k){var D=hr(m);if(typeof D!="function")throw Error(W(150));if(m=D.call(m),m==null)throw Error(W(151));for(var w=D=null,M=d,G=d=0,Q=null,Y=m.next();M!==null&&!Y.done;G++,Y=m.next()){M.index>G?(Q=M,M=null):Q=M.sibling;var te=x(u,M,Y.value,k);if(te===null){M===null&&(M=Q);break}e&&M&&te.alternate===null&&t(u,M),d=l(te,d,G),w===null?D=te:w.sibling=te,w=te,M=Q}if(Y.done)return n(u,M),Pe&&yn(u,G),D;if(M===null){for(;!Y.done;G++,Y=m.next())Y=g(u,Y.value,k),Y!==null&&(d=l(Y,d,G),w===null?D=Y:w.sibling=Y,w=Y);return Pe&&yn(u,G),D}for(M=r(u,M);!Y.done;G++,Y=m.next())Y=C(M,u,G,Y.value,k),Y!==null&&(e&&Y.alternate!==null&&M.delete(Y.key===null?G:Y.key),d=l(Y,d,G),w===null?D=Y:w.sibling=Y,w=Y);return e&&M.forEach(function(he){return t(u,he)}),Pe&&yn(u,G),D}function U(u,d,m,k){if(typeof m=="object"&&m!==null&&m.type===Bn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case ls:e:{for(var D=m.key,w=d;w!==null;){if(w.key===D){if(D=m.type,D===Bn){if(w.tag===7){n(u,w.sibling),d=s(w,m.props.children),d.return=u,u=d;break e}}else if(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Jt&&Ci(D)===w.type){n(u,w.sibling),d=s(w,m.props),d.ref=wr(u,w,m),d.return=u,u=d;break e}n(u,w);break}else t(u,w);w=w.sibling}m.type===Bn?(d=bn(m.props.children,u.mode,k,m.key),d.return=u,u=d):(k=Rs(m.type,m.key,m.props,null,u.mode,k),k.ref=wr(u,d,m),k.return=u,u=k)}return a(u);case zn:e:{for(w=m.key;d!==null;){if(d.key===w)if(d.tag===4&&d.stateNode.containerInfo===m.containerInfo&&d.stateNode.implementation===m.implementation){n(u,d.sibling),d=s(d,m.children||[]),d.return=u,u=d;break e}else{n(u,d);break}else t(u,d);d=d.sibling}d=Yo(m,u.mode,k),d.return=u,u=d}return a(u);case Jt:return w=m._init,U(u,d,w(m._payload),k)}if(br(m))return j(u,d,m,k);if(hr(m))return E(u,d,m,k);xs(u,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,d!==null&&d.tag===6?(n(u,d.sibling),d=s(d,m),d.return=u,u=d):(n(u,d),d=Xo(m,u.mode,k),d.return=u,u=d),a(u)):n(u,d)}return U}var ar=fu(!0),pu=fu(!1),Ys=gn(null),Ks=null,Kn=null,pa=null;function ma(){pa=Kn=Ks=null}function ha(e){var t=Ys.current;Ee(Ys),e._currentValue=t}function kl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function nr(e,t){Ks=e,pa=Kn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(nt=!0),e.firstContext=null)}function Nt(e){var t=e._currentValue;if(pa!==e)if(e={context:e,memoizedValue:t,next:null},Kn===null){if(Ks===null)throw Error(W(308));Kn=e,Ks.dependencies={lanes:0,firstContext:e}}else Kn=Kn.next=e;return t}var Nn=null;function ga(e){Nn===null?Nn=[e]:Nn.push(e)}function mu(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ga(t)):(n.next=s.next,s.next=n),t.interleaved=n,Wt(e,r)}function Wt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var qt=!1;function xa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Wt(e,n)}return s=r.interleaved,s===null?(t.next=t,ga(r)):(t.next=s.next,s.next=t),r.interleaved=t,Wt(e,n)}function Ms(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,na(e,n)}}function ki(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Qs(e,t,n,r){var s=e.updateQueue;qt=!1;var l=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,p=c.next;c.next=null,a===null?l=p:a.next=p,a=c;var h=e.alternate;h!==null&&(h=h.updateQueue,i=h.lastBaseUpdate,i!==a&&(i===null?h.firstBaseUpdate=p:i.next=p,h.lastBaseUpdate=c))}if(l!==null){var g=s.baseState;a=0,h=p=c=null,i=l;do{var x=i.lane,C=i.eventTime;if((r&x)===x){h!==null&&(h=h.next={eventTime:C,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var j=e,E=i;switch(x=t,C=n,E.tag){case 1:if(j=E.payload,typeof j=="function"){g=j.call(C,g,x);break e}g=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=E.payload,x=typeof j=="function"?j.call(C,g,x):j,x==null)break e;g=Re({},g,x);break e;case 2:qt=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,x=s.effects,x===null?s.effects=[i]:x.push(i))}else C={eventTime:C,lane:x,tag:i.tag,payload:i.payload,callback:i.callback,next:null},h===null?(p=h=C,c=g):h=h.next=C,a|=x;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;x=i,i=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(h===null&&(c=g),s.baseState=c,s.firstBaseUpdate=p,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);Mn|=a,e.lanes=a,e.memoizedState=g}}function _i(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var rs={},Lt=gn(rs),Xr=gn(rs),Yr=gn(rs);function Sn(e){if(e===rs)throw Error(W(174));return e}function ya(e,t){switch(_e(Yr,t),_e(Xr,e),_e(Lt,rs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ll(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ll(t,e)}Ee(Lt),_e(Lt,t)}function ir(){Ee(Lt),Ee(Xr),Ee(Yr)}function gu(e){Sn(Yr.current);var t=Sn(Lt.current),n=ll(t,e.type);t!==n&&(_e(Xr,e),_e(Lt,n))}function va(e){Xr.current===e&&(Ee(Lt),Ee(Xr))}var Ie=gn(0);function Js(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bo=[];function wa(){for(var e=0;e<Bo.length;e++)Bo[e]._workInProgressVersionPrimary=null;Bo.length=0}var Ds=Yt.ReactCurrentDispatcher,Fo=Yt.ReactCurrentBatchConfig,_n=0,Te=null,Oe=null,ze=null,qs=!1,Ir=!1,Kr=0,bp=0;function Ve(){throw Error(W(321))}function Na(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Et(e[n],t[n]))return!1;return!0}function Sa(e,t,n,r,s,l){if(_n=l,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ds.current=e===null||e.memoizedState===null?Mp:Dp,e=n(r,s),Ir){l=0;do{if(Ir=!1,Kr=0,25<=l)throw Error(W(301));l+=1,ze=Oe=null,t.updateQueue=null,Ds.current=Ep,e=n(r,s)}while(Ir)}if(Ds.current=Zs,t=Oe!==null&&Oe.next!==null,_n=0,ze=Oe=Te=null,qs=!1,t)throw Error(W(300));return e}function ja(){var e=Kr!==0;return Kr=0,e}function Rt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Te.memoizedState=ze=e:ze=ze.next=e,ze}function St(){if(Oe===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Oe.next;var t=ze===null?Te.memoizedState:ze.next;if(t!==null)ze=t,Oe=e;else{if(e===null)throw Error(W(310));Oe=e,e={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},ze===null?Te.memoizedState=ze=e:ze=ze.next=e}return ze}function Qr(e,t){return typeof t=="function"?t(e):t}function Go(e){var t=St(),n=t.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=e;var r=Oe,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var a=s.next;s.next=l.next,l.next=a}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var i=a=null,c=null,p=l;do{var h=p.lane;if((_n&h)===h)c!==null&&(c=c.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:e(r,p.action);else{var g={lane:h,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};c===null?(i=c=g,a=r):c=c.next=g,Te.lanes|=h,Mn|=h}p=p.next}while(p!==null&&p!==l);c===null?a=r:c.next=i,Et(r,t.memoizedState)||(nt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,Te.lanes|=l,Mn|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ho(e){var t=St(),n=t.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do l=e(l,a.action),a=a.next;while(a!==s);Et(l,t.memoizedState)||(nt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function xu(){}function yu(e,t){var n=Te,r=St(),s=t(),l=!Et(r.memoizedState,s);if(l&&(r.memoizedState=s,nt=!0),r=r.queue,ba(Nu.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,Jr(9,wu.bind(null,n,r,s,t),void 0,null),Be===null)throw Error(W(349));_n&30||vu(n,t,s)}return s}function vu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function wu(e,t,n,r){t.value=n,t.getSnapshot=r,Su(t)&&ju(e)}function Nu(e,t,n){return n(function(){Su(t)&&ju(e)})}function Su(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Et(e,n)}catch{return!0}}function ju(e){var t=Wt(e,1);t!==null&&Dt(t,e,1,-1)}function Mi(e){var t=Rt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:e},t.queue=e,e=e.dispatch=_p.bind(null,Te,e),[t.memoizedState,e]}function Jr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function bu(){return St().memoizedState}function Es(e,t,n,r){var s=Rt();Te.flags|=e,s.memoizedState=Jr(1|t,n,void 0,r===void 0?null:r)}function po(e,t,n,r){var s=St();r=r===void 0?null:r;var l=void 0;if(Oe!==null){var a=Oe.memoizedState;if(l=a.destroy,r!==null&&Na(r,a.deps)){s.memoizedState=Jr(t,n,l,r);return}}Te.flags|=e,s.memoizedState=Jr(1|t,n,l,r)}function Di(e,t){return Es(8390656,8,e,t)}function ba(e,t){return po(2048,8,e,t)}function Cu(e,t){return po(4,2,e,t)}function ku(e,t){return po(4,4,e,t)}function _u(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mu(e,t,n){return n=n!=null?n.concat([e]):null,po(4,4,_u.bind(null,t,e),n)}function Ca(){}function Du(e,t){var n=St();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Na(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Eu(e,t){var n=St();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Na(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Pu(e,t,n){return _n&21?(Et(n,t)||(n=$c(),Te.lanes|=n,Mn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,nt=!0),e.memoizedState=n)}function Cp(e,t){var n=Ce;Ce=n!==0&&4>n?n:4,e(!0);var r=Fo.transition;Fo.transition={};try{e(!1),t()}finally{Ce=n,Fo.transition=r}}function Iu(){return St().memoizedState}function kp(e,t,n){var r=dn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Tu(e))Ru(t,n);else if(n=mu(e,t,n,r),n!==null){var s=Je();Dt(n,e,r,s),Au(n,t,r)}}function _p(e,t,n){var r=dn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Tu(e))Ru(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,i=l(a,n);if(s.hasEagerState=!0,s.eagerState=i,Et(i,a)){var c=t.interleaved;c===null?(s.next=s,ga(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=mu(e,t,s,r),n!==null&&(s=Je(),Dt(n,e,r,s),Au(n,t,r))}}function Tu(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function Ru(e,t){Ir=qs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Au(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,na(e,n)}}var Zs={readContext:Nt,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useInsertionEffect:Ve,useLayoutEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useMutableSource:Ve,useSyncExternalStore:Ve,useId:Ve,unstable_isNewReconciler:!1},Mp={readContext:Nt,useCallback:function(e,t){return Rt().memoizedState=[e,t===void 0?null:t],e},useContext:Nt,useEffect:Di,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Es(4194308,4,_u.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Es(4194308,4,e,t)},useInsertionEffect:function(e,t){return Es(4,2,e,t)},useMemo:function(e,t){var n=Rt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Rt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=kp.bind(null,Te,e),[r.memoizedState,e]},useRef:function(e){var t=Rt();return e={current:e},t.memoizedState=e},useState:Mi,useDebugValue:Ca,useDeferredValue:function(e){return Rt().memoizedState=e},useTransition:function(){var e=Mi(!1),t=e[0];return e=Cp.bind(null,e[1]),Rt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Te,s=Rt();if(Pe){if(n===void 0)throw Error(W(407));n=n()}else{if(n=t(),Be===null)throw Error(W(349));_n&30||vu(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,Di(Nu.bind(null,r,l,e),[e]),r.flags|=2048,Jr(9,wu.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Rt(),t=Be.identifierPrefix;if(Pe){var n=Ft,r=Bt;n=(r&~(1<<32-Mt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Kr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=bp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Dp={readContext:Nt,useCallback:Du,useContext:Nt,useEffect:ba,useImperativeHandle:Mu,useInsertionEffect:Cu,useLayoutEffect:ku,useMemo:Eu,useReducer:Go,useRef:bu,useState:function(){return Go(Qr)},useDebugValue:Ca,useDeferredValue:function(e){var t=St();return Pu(t,Oe.memoizedState,e)},useTransition:function(){var e=Go(Qr)[0],t=St().memoizedState;return[e,t]},useMutableSource:xu,useSyncExternalStore:yu,useId:Iu,unstable_isNewReconciler:!1},Ep={readContext:Nt,useCallback:Du,useContext:Nt,useEffect:ba,useImperativeHandle:Mu,useInsertionEffect:Cu,useLayoutEffect:ku,useMemo:Eu,useReducer:Ho,useRef:bu,useState:function(){return Ho(Qr)},useDebugValue:Ca,useDeferredValue:function(e){var t=St();return Oe===null?t.memoizedState=e:Pu(t,Oe.memoizedState,e)},useTransition:function(){var e=Ho(Qr)[0],t=St().memoizedState;return[e,t]},useMutableSource:xu,useSyncExternalStore:yu,useId:Iu,unstable_isNewReconciler:!1};function Ct(e,t){if(e&&e.defaultProps){t=Re({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function _l(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Re({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var mo={isMounted:function(e){return(e=e._reactInternals)?Pn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Je(),s=dn(e),l=Gt(r,s);l.payload=t,n!=null&&(l.callback=n),t=cn(e,l,s),t!==null&&(Dt(t,e,s,r),Ms(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Je(),s=dn(e),l=Gt(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=cn(e,l,s),t!==null&&(Dt(t,e,s,r),Ms(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Je(),r=dn(e),s=Gt(n,r);s.tag=2,t!=null&&(s.callback=t),t=cn(e,s,r),t!==null&&(Dt(t,e,r,n),Ms(t,e,r))}};function Ei(e,t,n,r,s,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!Gr(n,r)||!Gr(s,l):!0}function $u(e,t,n){var r=!1,s=mn,l=t.contextType;return typeof l=="object"&&l!==null?l=Nt(l):(s=st(t)?Cn:Ye.current,r=t.contextTypes,l=(r=r!=null)?or(e,s):mn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function Pi(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function Ml(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},xa(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Nt(l):(l=st(t)?Cn:Ye.current,s.context=or(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(_l(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&mo.enqueueReplaceState(s,s.state,null),Qs(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function cr(e,t){try{var n="",r=t;do n+=rf(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function Vo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Dl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Pp=typeof WeakMap=="function"?WeakMap:Map;function Lu(e,t,n){n=Gt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){to||(to=!0,Ul=r),Dl(e,t)},n}function Ou(e,t,n){n=Gt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Dl(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Dl(e,t),typeof r!="function"&&(un===null?un=new Set([this]):un.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Ii(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Pp;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Vp.bind(null,e,t,n),t.then(e,e))}function Ti(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ri(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Gt(-1,1),t.tag=2,cn(n,t,1))),n.lanes|=1),e)}var Ip=Yt.ReactCurrentOwner,nt=!1;function Qe(e,t,n,r){t.child=e===null?pu(t,null,n,r):ar(t,e.child,n,r)}function Ai(e,t,n,r,s){n=n.render;var l=t.ref;return nr(t,s),r=Sa(e,t,n,r,l,s),n=ja(),e!==null&&!nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Xt(e,t,s)):(Pe&&n&&ua(t),t.flags|=1,Qe(e,t,r,s),t.child)}function $i(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!Ta(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Uu(e,t,l,r,s)):(e=Rs(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:Gr,n(a,r)&&e.ref===t.ref)return Xt(e,t,s)}return t.flags|=1,e=fn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Uu(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(Gr(l,r)&&e.ref===t.ref)if(nt=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(nt=!0);else return t.lanes=e.lanes,Xt(e,t,s)}return El(e,t,n,r,s)}function zu(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Jn,at),at|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(Jn,at),at|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,_e(Jn,at),at|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,_e(Jn,at),at|=r;return Qe(e,t,s,n),t.child}function Bu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function El(e,t,n,r,s){var l=st(n)?Cn:Ye.current;return l=or(t,l),nr(t,s),n=Sa(e,t,n,r,l,s),r=ja(),e!==null&&!nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Xt(e,t,s)):(Pe&&r&&ua(t),t.flags|=1,Qe(e,t,n,s),t.child)}function Li(e,t,n,r,s){if(st(n)){var l=!0;Vs(t)}else l=!1;if(nr(t,s),t.stateNode===null)Ps(e,t),$u(t,n,r),Ml(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,p=n.contextType;typeof p=="object"&&p!==null?p=Nt(p):(p=st(n)?Cn:Ye.current,p=or(t,p));var h=n.getDerivedStateFromProps,g=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==p)&&Pi(t,a,r,p),qt=!1;var x=t.memoizedState;a.state=x,Qs(t,r,a,s),c=t.memoizedState,i!==r||x!==c||rt.current||qt?(typeof h=="function"&&(_l(t,n,h,r),c=t.memoizedState),(i=qt||Ei(t,n,i,r,x,c,p))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=p,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,hu(e,t),i=t.memoizedProps,p=t.type===t.elementType?i:Ct(t.type,i),a.props=p,g=t.pendingProps,x=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Nt(c):(c=st(n)?Cn:Ye.current,c=or(t,c));var C=n.getDerivedStateFromProps;(h=typeof C=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==g||x!==c)&&Pi(t,a,r,c),qt=!1,x=t.memoizedState,a.state=x,Qs(t,r,a,s);var j=t.memoizedState;i!==g||x!==j||rt.current||qt?(typeof C=="function"&&(_l(t,n,C,r),j=t.memoizedState),(p=qt||Ei(t,n,p,r,x,j,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,j,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,j,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=j),a.props=r,a.state=j,a.context=c,r=p):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),r=!1)}return Pl(e,t,n,r,l,s)}function Pl(e,t,n,r,s,l){Bu(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Si(t,n,!1),Xt(e,t,l);r=t.stateNode,Ip.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ar(t,e.child,null,l),t.child=ar(t,null,i,l)):Qe(e,t,i,l),t.memoizedState=r.state,s&&Si(t,n,!0),t.child}function Fu(e){var t=e.stateNode;t.pendingContext?Ni(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ni(e,t.context,!1),ya(e,t.containerInfo)}function Oi(e,t,n,r,s){return lr(),fa(s),t.flags|=256,Qe(e,t,n,r),t.child}var Il={dehydrated:null,treeContext:null,retryLane:0};function Tl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Gu(e,t,n){var r=t.pendingProps,s=Ie.current,l=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),_e(Ie,s&1),e===null)return Cl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=xo(a,r,0,null),e=bn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Tl(n),t.memoizedState=Il,e):ka(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return Tp(e,t,a,r,i,s,n);if(l){l=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=fn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?l=fn(i,l):(l=bn(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?Tl(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=Il,r}return l=e.child,e=l.sibling,r=fn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ka(e,t){return t=xo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ys(e,t,n,r){return r!==null&&fa(r),ar(t,e.child,null,n),e=ka(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Tp(e,t,n,r,s,l,a){if(n)return t.flags&256?(t.flags&=-257,r=Vo(Error(W(422))),ys(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=xo({mode:"visible",children:r.children},s,0,null),l=bn(l,s,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&ar(t,e.child,null,a),t.child.memoizedState=Tl(a),t.memoizedState=Il,l);if(!(t.mode&1))return ys(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(W(419)),r=Vo(l,r,void 0),ys(e,t,a,r)}if(i=(a&e.childLanes)!==0,nt||i){if(r=Be,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,Wt(e,s),Dt(r,e,s,-1))}return Ia(),r=Vo(Error(W(421))),ys(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Wp.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,it=an(s.nextSibling),ct=t,Pe=!0,_t=null,e!==null&&(mt[ht++]=Bt,mt[ht++]=Ft,mt[ht++]=kn,Bt=e.id,Ft=e.overflow,kn=t),t=ka(t,r.children),t.flags|=4096,t)}function Ui(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),kl(e.return,t,n)}function Wo(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function Hu(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(Qe(e,t,r.children,n),r=Ie.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ui(e,n,t);else if(e.tag===19)Ui(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_e(Ie,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Js(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Wo(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Js(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Wo(t,!0,n,null,l);break;case"together":Wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ps(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Mn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(W(153));if(t.child!==null){for(e=t.child,n=fn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=fn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Rp(e,t,n){switch(t.tag){case 3:Fu(t),lr();break;case 5:gu(t);break;case 1:st(t.type)&&Vs(t);break;case 4:ya(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;_e(Ys,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(_e(Ie,Ie.current&1),t.flags|=128,null):n&t.child.childLanes?Gu(e,t,n):(_e(Ie,Ie.current&1),e=Xt(e,t,n),e!==null?e.sibling:null);_e(Ie,Ie.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Hu(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Ie,Ie.current),r)break;return null;case 22:case 23:return t.lanes=0,zu(e,t,n)}return Xt(e,t,n)}var Vu,Rl,Wu,Xu;Vu=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rl=function(){};Wu=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Sn(Lt.current);var l=null;switch(n){case"input":s=nl(e,s),r=nl(e,r),l=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),l=[];break;case"textarea":s=ol(e,s),r=ol(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Gs)}al(n,r);var a;n=null;for(p in s)if(!r.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var i=s[p];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&($r.hasOwnProperty(p)?l||(l=[]):(l=l||[]).push(p,null));for(p in r){var c=r[p];if(i=s!=null?s[p]:void 0,r.hasOwnProperty(p)&&c!==i&&(c!=null||i!=null))if(p==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(l||(l=[]),l.push(p,n)),n=c;else p==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(p,c)):p==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(p,""+c):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&($r.hasOwnProperty(p)?(c!=null&&p==="onScroll"&&De("scroll",e),l||i===c||(l=[])):(l=l||[]).push(p,c))}n&&(l=l||[]).push("style",n);var p=l;(t.updateQueue=p)&&(t.flags|=4)}};Xu=function(e,t,n,r){n!==r&&(t.flags|=4)};function Nr(e,t){if(!Pe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function We(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ap(e,t,n){var r=t.pendingProps;switch(da(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(t),null;case 1:return st(t.type)&&Hs(),We(t),null;case 3:return r=t.stateNode,ir(),Ee(rt),Ee(Ye),wa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(gs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_t!==null&&(Fl(_t),_t=null))),Rl(e,t),We(t),null;case 5:va(t);var s=Sn(Yr.current);if(n=t.type,e!==null&&t.stateNode!=null)Wu(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(W(166));return We(t),null}if(e=Sn(Lt.current),gs(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[At]=t,r[Wr]=l,e=(t.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(s=0;s<kr.length;s++)De(kr[s],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":Ya(r,l),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},De("invalid",r);break;case"textarea":Qa(r,l),De("invalid",r)}al(n,l),s=null;for(var a in l)if(l.hasOwnProperty(a)){var i=l[a];a==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&hs(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&hs(r.textContent,i,e),s=["children",""+i]):$r.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&De("scroll",r)}switch(n){case"input":as(r),Ka(r,l,!0);break;case"textarea":as(r),Ja(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Gs)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Nc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[At]=t,e[Wr]=r,Vu(e,t,!1,!1),t.stateNode=e;e:{switch(a=il(n,r),n){case"dialog":De("cancel",e),De("close",e),s=r;break;case"iframe":case"object":case"embed":De("load",e),s=r;break;case"video":case"audio":for(s=0;s<kr.length;s++)De(kr[s],e);s=r;break;case"source":De("error",e),s=r;break;case"img":case"image":case"link":De("error",e),De("load",e),s=r;break;case"details":De("toggle",e),s=r;break;case"input":Ya(e,r),s=nl(e,r),De("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),De("invalid",e);break;case"textarea":Qa(e,r),s=ol(e,r),De("invalid",e);break;default:s=r}al(n,s),i=s;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?bc(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Sc(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Lr(e,c):typeof c=="number"&&Lr(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&($r.hasOwnProperty(l)?c!=null&&l==="onScroll"&&De("scroll",e):c!=null&&Ql(e,l,c,a))}switch(n){case"input":as(e),Ka(e,r,!1);break;case"textarea":as(e),Ja(e);break;case"option":r.value!=null&&e.setAttribute("value",""+pn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?qn(e,!!r.multiple,l,!1):r.defaultValue!=null&&qn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Gs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return We(t),null;case 6:if(e&&t.stateNode!=null)Xu(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(W(166));if(n=Sn(Yr.current),Sn(Lt.current),gs(t)){if(r=t.stateNode,n=t.memoizedProps,r[At]=t,(l=r.nodeValue!==n)&&(e=ct,e!==null))switch(e.tag){case 3:hs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hs(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[At]=t,t.stateNode=r}return We(t),null;case 13:if(Ee(Ie),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pe&&it!==null&&t.mode&1&&!(t.flags&128))du(),lr(),t.flags|=98560,l=!1;else if(l=gs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(W(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(W(317));l[At]=t}else lr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;We(t),l=!1}else _t!==null&&(Fl(_t),_t=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ie.current&1?Ue===0&&(Ue=3):Ia())),t.updateQueue!==null&&(t.flags|=4),We(t),null);case 4:return ir(),Rl(e,t),e===null&&Hr(t.stateNode.containerInfo),We(t),null;case 10:return ha(t.type._context),We(t),null;case 17:return st(t.type)&&Hs(),We(t),null;case 19:if(Ee(Ie),l=t.memoizedState,l===null)return We(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)Nr(l,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Js(e),a!==null){for(t.flags|=128,Nr(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _e(Ie,Ie.current&1|2),t.child}e=e.sibling}l.tail!==null&&$e()>ur&&(t.flags|=128,r=!0,Nr(l,!1),t.lanes=4194304)}else{if(!r)if(e=Js(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Nr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!Pe)return We(t),null}else 2*$e()-l.renderingStartTime>ur&&n!==1073741824&&(t.flags|=128,r=!0,Nr(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=$e(),t.sibling=null,n=Ie.current,_e(Ie,r?n&1|2:n&1),t):(We(t),null);case 22:case 23:return Pa(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?at&1073741824&&(We(t),t.subtreeFlags&6&&(t.flags|=8192)):We(t),null;case 24:return null;case 25:return null}throw Error(W(156,t.tag))}function $p(e,t){switch(da(t),t.tag){case 1:return st(t.type)&&Hs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ir(),Ee(rt),Ee(Ye),wa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return va(t),null;case 13:if(Ee(Ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(W(340));lr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ee(Ie),null;case 4:return ir(),null;case 10:return ha(t.type._context),null;case 22:case 23:return Pa(),null;case 24:return null;default:return null}}var vs=!1,Xe=!1,Lp=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Qn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(e,t,r)}else n.current=null}function Al(e,t,n){try{n()}catch(r){Ae(e,t,r)}}var zi=!1;function Op(e,t){if(yl=zs,e=qc(),ca(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var a=0,i=-1,c=-1,p=0,h=0,g=e,x=null;t:for(;;){for(var C;g!==n||s!==0&&g.nodeType!==3||(i=a+s),g!==l||r!==0&&g.nodeType!==3||(c=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(C=g.firstChild)!==null;)x=g,g=C;for(;;){if(g===e)break t;if(x===n&&++p===s&&(i=a),x===l&&++h===r&&(c=a),(C=g.nextSibling)!==null)break;g=x,x=g.parentNode}g=C}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(vl={focusedElem:e,selectionRange:n},zs=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var E=j.memoizedProps,U=j.memoizedState,u=t.stateNode,d=u.getSnapshotBeforeUpdate(t.elementType===t.type?E:Ct(t.type,E),U);u.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(k){Ae(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return j=zi,zi=!1,j}function Tr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&Al(t,n,l)}s=s.next}while(s!==r)}}function ho(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function $l(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Yu(e){var t=e.alternate;t!==null&&(e.alternate=null,Yu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[At],delete t[Wr],delete t[Sl],delete t[wp],delete t[Np])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ku(e){return e.tag===5||e.tag===3||e.tag===4}function Bi(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ku(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ll(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Gs));else if(r!==4&&(e=e.child,e!==null))for(Ll(e,t,n),e=e.sibling;e!==null;)Ll(e,t,n),e=e.sibling}function Ol(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ol(e,t,n),e=e.sibling;e!==null;)Ol(e,t,n),e=e.sibling}var Fe=null,kt=!1;function Qt(e,t,n){for(n=n.child;n!==null;)Qu(e,t,n),n=n.sibling}function Qu(e,t,n){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(lo,n)}catch{}switch(n.tag){case 5:Xe||Qn(n,t);case 6:var r=Fe,s=kt;Fe=null,Qt(e,t,n),Fe=r,kt=s,Fe!==null&&(kt?(e=Fe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Fe.removeChild(n.stateNode));break;case 18:Fe!==null&&(kt?(e=Fe,n=n.stateNode,e.nodeType===8?Uo(e.parentNode,n):e.nodeType===1&&Uo(e,n),Br(e)):Uo(Fe,n.stateNode));break;case 4:r=Fe,s=kt,Fe=n.stateNode.containerInfo,kt=!0,Qt(e,t,n),Fe=r,kt=s;break;case 0:case 11:case 14:case 15:if(!Xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&Al(n,t,a),s=s.next}while(s!==r)}Qt(e,t,n);break;case 1:if(!Xe&&(Qn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Ae(n,t,i)}Qt(e,t,n);break;case 21:Qt(e,t,n);break;case 22:n.mode&1?(Xe=(r=Xe)||n.memoizedState!==null,Qt(e,t,n),Xe=r):Qt(e,t,n);break;default:Qt(e,t,n)}}function Fi(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Lp),t.forEach(function(r){var s=Xp.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function bt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:Fe=i.stateNode,kt=!1;break e;case 3:Fe=i.stateNode.containerInfo,kt=!0;break e;case 4:Fe=i.stateNode.containerInfo,kt=!0;break e}i=i.return}if(Fe===null)throw Error(W(160));Qu(l,a,s),Fe=null,kt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(p){Ae(s,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ju(t,e),t=t.sibling}function Ju(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bt(t,e),It(e),r&4){try{Tr(3,e,e.return),ho(3,e)}catch(E){Ae(e,e.return,E)}try{Tr(5,e,e.return)}catch(E){Ae(e,e.return,E)}}break;case 1:bt(t,e),It(e),r&512&&n!==null&&Qn(n,n.return);break;case 5:if(bt(t,e),It(e),r&512&&n!==null&&Qn(n,n.return),e.flags&32){var s=e.stateNode;try{Lr(s,"")}catch(E){Ae(e,e.return,E)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&vc(s,l),il(i,a);var p=il(i,l);for(a=0;a<c.length;a+=2){var h=c[a],g=c[a+1];h==="style"?bc(s,g):h==="dangerouslySetInnerHTML"?Sc(s,g):h==="children"?Lr(s,g):Ql(s,h,g,p)}switch(i){case"input":rl(s,l);break;case"textarea":wc(s,l);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var C=l.value;C!=null?qn(s,!!l.multiple,C,!1):x!==!!l.multiple&&(l.defaultValue!=null?qn(s,!!l.multiple,l.defaultValue,!0):qn(s,!!l.multiple,l.multiple?[]:"",!1))}s[Wr]=l}catch(E){Ae(e,e.return,E)}}break;case 6:if(bt(t,e),It(e),r&4){if(e.stateNode===null)throw Error(W(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(E){Ae(e,e.return,E)}}break;case 3:if(bt(t,e),It(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Br(t.containerInfo)}catch(E){Ae(e,e.return,E)}break;case 4:bt(t,e),It(e);break;case 13:bt(t,e),It(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(Da=$e())),r&4&&Fi(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Xe=(p=Xe)||h,bt(t,e),Xe=p):bt(t,e),It(e),r&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!h&&e.mode&1)for(ne=e,h=e.child;h!==null;){for(g=ne=h;ne!==null;){switch(x=ne,C=x.child,x.tag){case 0:case 11:case 14:case 15:Tr(4,x,x.return);break;case 1:Qn(x,x.return);var j=x.stateNode;if(typeof j.componentWillUnmount=="function"){r=x,n=x.return;try{t=r,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(E){Ae(r,n,E)}}break;case 5:Qn(x,x.return);break;case 22:if(x.memoizedState!==null){Hi(g);continue}}C!==null?(C.return=x,ne=C):Hi(g)}h=h.sibling}e:for(h=null,g=e;;){if(g.tag===5){if(h===null){h=g;try{s=g.stateNode,p?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=jc("display",a))}catch(E){Ae(e,e.return,E)}}}else if(g.tag===6){if(h===null)try{g.stateNode.nodeValue=p?"":g.memoizedProps}catch(E){Ae(e,e.return,E)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;h===g&&(h=null),g=g.return}h===g&&(h=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:bt(t,e),It(e),r&4&&Fi(e);break;case 21:break;default:bt(t,e),It(e)}}function It(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ku(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Lr(s,""),r.flags&=-33);var l=Bi(e);Ol(e,l,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=Bi(e);Ll(e,i,a);break;default:throw Error(W(161))}}catch(c){Ae(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Up(e,t,n){ne=e,qu(e)}function qu(e,t,n){for(var r=(e.mode&1)!==0;ne!==null;){var s=ne,l=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||vs;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||Xe;i=vs;var p=Xe;if(vs=a,(Xe=c)&&!p)for(ne=s;ne!==null;)a=ne,c=a.child,a.tag===22&&a.memoizedState!==null?Vi(s):c!==null?(c.return=a,ne=c):Vi(s);for(;l!==null;)ne=l,qu(l),l=l.sibling;ne=s,vs=i,Xe=p}Gi(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,ne=l):Gi(e)}}function Gi(e){for(;ne!==null;){var t=ne;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xe||ho(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Xe)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ct(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&_i(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}_i(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var h=p.memoizedState;if(h!==null){var g=h.dehydrated;g!==null&&Br(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Xe||t.flags&512&&$l(t)}catch(x){Ae(t,t.return,x)}}if(t===e){ne=null;break}if(n=t.sibling,n!==null){n.return=t.return,ne=n;break}ne=t.return}}function Hi(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ne=n;break}ne=t.return}}function Vi(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ho(4,t)}catch(c){Ae(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ae(t,s,c)}}var l=t.return;try{$l(t)}catch(c){Ae(t,l,c)}break;case 5:var a=t.return;try{$l(t)}catch(c){Ae(t,a,c)}}}catch(c){Ae(t,t.return,c)}if(t===e){ne=null;break}var i=t.sibling;if(i!==null){i.return=t.return,ne=i;break}ne=t.return}}var zp=Math.ceil,eo=Yt.ReactCurrentDispatcher,_a=Yt.ReactCurrentOwner,yt=Yt.ReactCurrentBatchConfig,Ne=0,Be=null,Le=null,Ge=0,at=0,Jn=gn(0),Ue=0,qr=null,Mn=0,go=0,Ma=0,Rr=null,tt=null,Da=0,ur=1/0,Ut=null,to=!1,Ul=null,un=null,ws=!1,rn=null,no=0,Ar=0,zl=null,Is=-1,Ts=0;function Je(){return Ne&6?$e():Is!==-1?Is:Is=$e()}function dn(e){return e.mode&1?Ne&2&&Ge!==0?Ge&-Ge:jp.transition!==null?(Ts===0&&(Ts=$c()),Ts):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:Gc(e.type)),e):1}function Dt(e,t,n,r){if(50<Ar)throw Ar=0,zl=null,Error(W(185));es(e,n,r),(!(Ne&2)||e!==Be)&&(e===Be&&(!(Ne&2)&&(go|=n),Ue===4&&en(e,Ge)),ot(e,r),n===1&&Ne===0&&!(t.mode&1)&&(ur=$e()+500,fo&&xn()))}function ot(e,t){var n=e.callbackNode;jf(e,t);var r=Us(e,e===Be?Ge:0);if(r===0)n!==null&&ei(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ei(n),t===1)e.tag===0?Sp(Wi.bind(null,e)):iu(Wi.bind(null,e)),yp(function(){!(Ne&6)&&xn()}),n=null;else{switch(Lc(r)){case 1:n=ta;break;case 4:n=Rc;break;case 16:n=Os;break;case 536870912:n=Ac;break;default:n=Os}n=ld(n,Zu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Zu(e,t){if(Is=-1,Ts=0,Ne&6)throw Error(W(327));var n=e.callbackNode;if(rr()&&e.callbackNode!==n)return null;var r=Us(e,e===Be?Ge:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ro(e,r);else{t=r;var s=Ne;Ne|=2;var l=td();(Be!==e||Ge!==t)&&(Ut=null,ur=$e()+500,jn(e,t));do try{Gp();break}catch(i){ed(e,i)}while(!0);ma(),eo.current=l,Ne=s,Le!==null?t=0:(Be=null,Ge=0,t=Ue)}if(t!==0){if(t===2&&(s=pl(e),s!==0&&(r=s,t=Bl(e,s))),t===1)throw n=qr,jn(e,0),en(e,r),ot(e,$e()),n;if(t===6)en(e,r);else{if(s=e.current.alternate,!(r&30)&&!Bp(s)&&(t=ro(e,r),t===2&&(l=pl(e),l!==0&&(r=l,t=Bl(e,l))),t===1))throw n=qr,jn(e,0),en(e,r),ot(e,$e()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(W(345));case 2:vn(e,tt,Ut);break;case 3:if(en(e,r),(r&130023424)===r&&(t=Da+500-$e(),10<t)){if(Us(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Je(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Nl(vn.bind(null,e,tt,Ut),t);break}vn(e,tt,Ut);break;case 4:if(en(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Mt(r);l=1<<a,a=t[a],a>s&&(s=a),r&=~l}if(r=s,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zp(r/1960))-r,10<r){e.timeoutHandle=Nl(vn.bind(null,e,tt,Ut),r);break}vn(e,tt,Ut);break;case 5:vn(e,tt,Ut);break;default:throw Error(W(329))}}}return ot(e,$e()),e.callbackNode===n?Zu.bind(null,e):null}function Bl(e,t){var n=Rr;return e.current.memoizedState.isDehydrated&&(jn(e,t).flags|=256),e=ro(e,t),e!==2&&(t=tt,tt=n,t!==null&&Fl(t)),e}function Fl(e){tt===null?tt=e:tt.push.apply(tt,e)}function Bp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!Et(l(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function en(e,t){for(t&=~Ma,t&=~go,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Mt(t),r=1<<n;e[n]=-1,t&=~r}}function Wi(e){if(Ne&6)throw Error(W(327));rr();var t=Us(e,0);if(!(t&1))return ot(e,$e()),null;var n=ro(e,t);if(e.tag!==0&&n===2){var r=pl(e);r!==0&&(t=r,n=Bl(e,r))}if(n===1)throw n=qr,jn(e,0),en(e,t),ot(e,$e()),n;if(n===6)throw Error(W(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vn(e,tt,Ut),ot(e,$e()),null}function Ea(e,t){var n=Ne;Ne|=1;try{return e(t)}finally{Ne=n,Ne===0&&(ur=$e()+500,fo&&xn())}}function Dn(e){rn!==null&&rn.tag===0&&!(Ne&6)&&rr();var t=Ne;Ne|=1;var n=yt.transition,r=Ce;try{if(yt.transition=null,Ce=1,e)return e()}finally{Ce=r,yt.transition=n,Ne=t,!(Ne&6)&&xn()}}function Pa(){at=Jn.current,Ee(Jn)}function jn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,xp(n)),Le!==null)for(n=Le.return;n!==null;){var r=n;switch(da(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hs();break;case 3:ir(),Ee(rt),Ee(Ye),wa();break;case 5:va(r);break;case 4:ir();break;case 13:Ee(Ie);break;case 19:Ee(Ie);break;case 10:ha(r.type._context);break;case 22:case 23:Pa()}n=n.return}if(Be=e,Le=e=fn(e.current,null),Ge=at=t,Ue=0,qr=null,Ma=go=Mn=0,tt=Rr=null,Nn!==null){for(t=0;t<Nn.length;t++)if(n=Nn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=s,r.next=a}n.pending=r}Nn=null}return e}function ed(e,t){do{var n=Le;try{if(ma(),Ds.current=Zs,qs){for(var r=Te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}qs=!1}if(_n=0,ze=Oe=Te=null,Ir=!1,Kr=0,_a.current=null,n===null||n.return===null){Ue=1,qr=t,Le=null;break}e:{var l=e,a=n.return,i=n,c=t;if(t=Ge,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var p=c,h=i,g=h.tag;if(!(h.mode&1)&&(g===0||g===11||g===15)){var x=h.alternate;x?(h.updateQueue=x.updateQueue,h.memoizedState=x.memoizedState,h.lanes=x.lanes):(h.updateQueue=null,h.memoizedState=null)}var C=Ti(a);if(C!==null){C.flags&=-257,Ri(C,a,i,l,t),C.mode&1&&Ii(l,p,t),t=C,c=p;var j=t.updateQueue;if(j===null){var E=new Set;E.add(c),t.updateQueue=E}else j.add(c);break e}else{if(!(t&1)){Ii(l,p,t),Ia();break e}c=Error(W(426))}}else if(Pe&&i.mode&1){var U=Ti(a);if(U!==null){!(U.flags&65536)&&(U.flags|=256),Ri(U,a,i,l,t),fa(cr(c,i));break e}}l=c=cr(c,i),Ue!==4&&(Ue=2),Rr===null?Rr=[l]:Rr.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var u=Lu(l,c,t);ki(l,u);break e;case 1:i=c;var d=l.type,m=l.stateNode;if(!(l.flags&128)&&(typeof d.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(un===null||!un.has(m)))){l.flags|=65536,t&=-t,l.lanes|=t;var k=Ou(l,i,t);ki(l,k);break e}}l=l.return}while(l!==null)}rd(n)}catch(D){t=D,Le===n&&n!==null&&(Le=n=n.return);continue}break}while(!0)}function td(){var e=eo.current;return eo.current=Zs,e===null?Zs:e}function Ia(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),Be===null||!(Mn&268435455)&&!(go&268435455)||en(Be,Ge)}function ro(e,t){var n=Ne;Ne|=2;var r=td();(Be!==e||Ge!==t)&&(Ut=null,jn(e,t));do try{Fp();break}catch(s){ed(e,s)}while(!0);if(ma(),Ne=n,eo.current=r,Le!==null)throw Error(W(261));return Be=null,Ge=0,Ue}function Fp(){for(;Le!==null;)nd(Le)}function Gp(){for(;Le!==null&&!mf();)nd(Le)}function nd(e){var t=od(e.alternate,e,at);e.memoizedProps=e.pendingProps,t===null?rd(e):Le=t,_a.current=null}function rd(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=$p(n,t),n!==null){n.flags&=32767,Le=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ue=6,Le=null;return}}else if(n=Ap(n,t,at),n!==null){Le=n;return}if(t=t.sibling,t!==null){Le=t;return}Le=t=e}while(t!==null);Ue===0&&(Ue=5)}function vn(e,t,n){var r=Ce,s=yt.transition;try{yt.transition=null,Ce=1,Hp(e,t,n,r)}finally{yt.transition=s,Ce=r}return null}function Hp(e,t,n,r){do rr();while(rn!==null);if(Ne&6)throw Error(W(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(W(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(bf(e,l),e===Be&&(Le=Be=null,Ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ws||(ws=!0,ld(Os,function(){return rr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=yt.transition,yt.transition=null;var a=Ce;Ce=1;var i=Ne;Ne|=4,_a.current=null,Op(e,n),Ju(n,e),up(vl),zs=!!yl,vl=yl=null,e.current=n,Up(n),hf(),Ne=i,Ce=a,yt.transition=l}else e.current=n;if(ws&&(ws=!1,rn=e,no=s),l=e.pendingLanes,l===0&&(un=null),yf(n.stateNode),ot(e,$e()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(to)throw to=!1,e=Ul,Ul=null,e;return no&1&&e.tag!==0&&rr(),l=e.pendingLanes,l&1?e===zl?Ar++:(Ar=0,zl=e):Ar=0,xn(),null}function rr(){if(rn!==null){var e=Lc(no),t=yt.transition,n=Ce;try{if(yt.transition=null,Ce=16>e?16:e,rn===null)var r=!1;else{if(e=rn,rn=null,no=0,Ne&6)throw Error(W(331));var s=Ne;for(Ne|=4,ne=e.current;ne!==null;){var l=ne,a=l.child;if(ne.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var p=i[c];for(ne=p;ne!==null;){var h=ne;switch(h.tag){case 0:case 11:case 15:Tr(8,h,l)}var g=h.child;if(g!==null)g.return=h,ne=g;else for(;ne!==null;){h=ne;var x=h.sibling,C=h.return;if(Yu(h),h===p){ne=null;break}if(x!==null){x.return=C,ne=x;break}ne=C}}}var j=l.alternate;if(j!==null){var E=j.child;if(E!==null){j.child=null;do{var U=E.sibling;E.sibling=null,E=U}while(E!==null)}}ne=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,ne=a;else e:for(;ne!==null;){if(l=ne,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Tr(9,l,l.return)}var u=l.sibling;if(u!==null){u.return=l.return,ne=u;break e}ne=l.return}}var d=e.current;for(ne=d;ne!==null;){a=ne;var m=a.child;if(a.subtreeFlags&2064&&m!==null)m.return=a,ne=m;else e:for(a=d;ne!==null;){if(i=ne,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:ho(9,i)}}catch(D){Ae(i,i.return,D)}if(i===a){ne=null;break e}var k=i.sibling;if(k!==null){k.return=i.return,ne=k;break e}ne=i.return}}if(Ne=s,xn(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(lo,e)}catch{}r=!0}return r}finally{Ce=n,yt.transition=t}}return!1}function Xi(e,t,n){t=cr(n,t),t=Lu(e,t,1),e=cn(e,t,1),t=Je(),e!==null&&(es(e,1,t),ot(e,t))}function Ae(e,t,n){if(e.tag===3)Xi(e,e,n);else for(;t!==null;){if(t.tag===3){Xi(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(un===null||!un.has(r))){e=cr(n,e),e=Ou(t,e,1),t=cn(t,e,1),e=Je(),t!==null&&(es(t,1,e),ot(t,e));break}}t=t.return}}function Vp(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Je(),e.pingedLanes|=e.suspendedLanes&n,Be===e&&(Ge&n)===n&&(Ue===4||Ue===3&&(Ge&130023424)===Ge&&500>$e()-Da?jn(e,0):Ma|=n),ot(e,t)}function sd(e,t){t===0&&(e.mode&1?(t=us,us<<=1,!(us&130023424)&&(us=4194304)):t=1);var n=Je();e=Wt(e,t),e!==null&&(es(e,t,n),ot(e,n))}function Wp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),sd(e,n)}function Xp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(t),sd(e,n)}var od;od=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||rt.current)nt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return nt=!1,Rp(e,t,n);nt=!!(e.flags&131072)}else nt=!1,Pe&&t.flags&1048576&&cu(t,Xs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ps(e,t),e=t.pendingProps;var s=or(t,Ye.current);nr(t,n),s=Sa(null,t,r,e,s,n);var l=ja();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,st(r)?(l=!0,Vs(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xa(t),s.updater=mo,t.stateNode=s,s._reactInternals=t,Ml(t,r,e,n),t=Pl(null,t,r,!0,l,n)):(t.tag=0,Pe&&l&&ua(t),Qe(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ps(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Kp(r),e=Ct(r,e),s){case 0:t=El(null,t,r,e,n);break e;case 1:t=Li(null,t,r,e,n);break e;case 11:t=Ai(null,t,r,e,n);break e;case 14:t=$i(null,t,r,Ct(r.type,e),n);break e}throw Error(W(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ct(r,s),El(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ct(r,s),Li(e,t,r,s,n);case 3:e:{if(Fu(t),e===null)throw Error(W(387));r=t.pendingProps,l=t.memoizedState,s=l.element,hu(e,t),Qs(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=cr(Error(W(423)),t),t=Oi(e,t,r,n,s);break e}else if(r!==s){s=cr(Error(W(424)),t),t=Oi(e,t,r,n,s);break e}else for(it=an(t.stateNode.containerInfo.firstChild),ct=t,Pe=!0,_t=null,n=pu(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(lr(),r===s){t=Xt(e,t,n);break e}Qe(e,t,r,n)}t=t.child}return t;case 5:return gu(t),e===null&&Cl(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,a=s.children,wl(r,s)?a=null:l!==null&&wl(r,l)&&(t.flags|=32),Bu(e,t),Qe(e,t,a,n),t.child;case 6:return e===null&&Cl(t),null;case 13:return Gu(e,t,n);case 4:return ya(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ar(t,null,r,n):Qe(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ct(r,s),Ai(e,t,r,s,n);case 7:return Qe(e,t,t.pendingProps,n),t.child;case 8:return Qe(e,t,t.pendingProps.children,n),t.child;case 12:return Qe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,a=s.value,_e(Ys,r._currentValue),r._currentValue=a,l!==null)if(Et(l.value,a)){if(l.children===s.children&&!rt.current){t=Xt(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){a=l.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=Gt(-1,n&-n),c.tag=2;var p=l.updateQueue;if(p!==null){p=p.shared;var h=p.pending;h===null?c.next=c:(c.next=h.next,h.next=c),p.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),kl(l.return,n,t),i.lanes|=n;break}c=c.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(W(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),kl(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}Qe(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,nr(t,n),s=Nt(s),r=r(s),t.flags|=1,Qe(e,t,r,n),t.child;case 14:return r=t.type,s=Ct(r,t.pendingProps),s=Ct(r.type,s),$i(e,t,r,s,n);case 15:return Uu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ct(r,s),Ps(e,t),t.tag=1,st(r)?(e=!0,Vs(t)):e=!1,nr(t,n),$u(t,r,s),Ml(t,r,s,n),Pl(null,t,r,!0,e,n);case 19:return Hu(e,t,n);case 22:return zu(e,t,n)}throw Error(W(156,t.tag))};function ld(e,t){return Tc(e,t)}function Yp(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(e,t,n,r){return new Yp(e,t,n,r)}function Ta(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Kp(e){if(typeof e=="function")return Ta(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ql)return 11;if(e===Zl)return 14}return 2}function fn(e,t){var n=e.alternate;return n===null?(n=gt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rs(e,t,n,r,s,l){var a=2;if(r=e,typeof e=="function")Ta(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Bn:return bn(n.children,s,l,t);case Jl:a=8,s|=8;break;case qo:return e=gt(12,n,t,s|2),e.elementType=qo,e.lanes=l,e;case Zo:return e=gt(13,n,t,s),e.elementType=Zo,e.lanes=l,e;case el:return e=gt(19,n,t,s),e.elementType=el,e.lanes=l,e;case gc:return xo(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mc:a=10;break e;case hc:a=9;break e;case ql:a=11;break e;case Zl:a=14;break e;case Jt:a=16,r=null;break e}throw Error(W(130,e==null?e:typeof e,""))}return t=gt(a,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function bn(e,t,n,r){return e=gt(7,e,r,t),e.lanes=n,e}function xo(e,t,n,r){return e=gt(22,e,r,t),e.elementType=gc,e.lanes=n,e.stateNode={isHidden:!1},e}function Xo(e,t,n){return e=gt(6,e,null,t),e.lanes=n,e}function Yo(e,t,n){return t=gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qp(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mo(0),this.expirationTimes=Mo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ra(e,t,n,r,s,l,a,i,c){return e=new Qp(e,t,n,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=gt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xa(l),e}function Jp(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ad(e){if(!e)return mn;e=e._reactInternals;e:{if(Pn(e)!==e||e.tag!==1)throw Error(W(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(st(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(W(171))}if(e.tag===1){var n=e.type;if(st(n))return au(e,n,t)}return t}function id(e,t,n,r,s,l,a,i,c){return e=Ra(n,r,!0,e,s,l,a,i,c),e.context=ad(null),n=e.current,r=Je(),s=dn(n),l=Gt(r,s),l.callback=t??null,cn(n,l,s),e.current.lanes=s,es(e,s,r),ot(e,r),e}function yo(e,t,n,r){var s=t.current,l=Je(),a=dn(s);return n=ad(n),t.context===null?t.context=n:t.pendingContext=n,t=Gt(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=cn(s,t,a),e!==null&&(Dt(e,s,a,l),Ms(e,s,a)),a}function so(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Yi(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Aa(e,t){Yi(e,t),(e=e.alternate)&&Yi(e,t)}function qp(){return null}var cd=typeof reportError=="function"?reportError:function(e){console.error(e)};function $a(e){this._internalRoot=e}vo.prototype.render=$a.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(W(409));yo(e,t,null,null)};vo.prototype.unmount=$a.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dn(function(){yo(null,e,null,null)}),t[Vt]=null}};function vo(e){this._internalRoot=e}vo.prototype.unstable_scheduleHydration=function(e){if(e){var t=zc();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Zt.length&&t!==0&&t<Zt[n].priority;n++);Zt.splice(n,0,e),n===0&&Fc(e)}};function La(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ki(){}function Zp(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var p=so(a);l.call(p)}}var a=id(t,r,e,0,null,!1,!1,"",Ki);return e._reactRootContainer=a,e[Vt]=a.current,Hr(e.nodeType===8?e.parentNode:e),Dn(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var p=so(c);i.call(p)}}var c=Ra(e,0,!1,null,null,!1,!1,"",Ki);return e._reactRootContainer=c,e[Vt]=c.current,Hr(e.nodeType===8?e.parentNode:e),Dn(function(){yo(t,c,n,r)}),c}function No(e,t,n,r,s){var l=n._reactRootContainer;if(l){var a=l;if(typeof s=="function"){var i=s;s=function(){var c=so(a);i.call(c)}}yo(t,a,e,s)}else a=Zp(n,t,e,s,r);return so(a)}Oc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Cr(t.pendingLanes);n!==0&&(na(t,n|1),ot(t,$e()),!(Ne&6)&&(ur=$e()+500,xn()))}break;case 13:Dn(function(){var r=Wt(e,1);if(r!==null){var s=Je();Dt(r,e,1,s)}}),Aa(e,1)}};ra=function(e){if(e.tag===13){var t=Wt(e,134217728);if(t!==null){var n=Je();Dt(t,e,134217728,n)}Aa(e,134217728)}};Uc=function(e){if(e.tag===13){var t=dn(e),n=Wt(e,t);if(n!==null){var r=Je();Dt(n,e,t,r)}Aa(e,t)}};zc=function(){return Ce};Bc=function(e,t){var n=Ce;try{return Ce=e,t()}finally{Ce=n}};ul=function(e,t,n){switch(t){case"input":if(rl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=uo(r);if(!s)throw Error(W(90));yc(r),rl(r,s)}}}break;case"textarea":wc(e,n);break;case"select":t=n.value,t!=null&&qn(e,!!n.multiple,t,!1)}};_c=Ea;Mc=Dn;var em={usingClientEntryPoint:!1,Events:[ns,Vn,uo,Cc,kc,Ea]},Sr={findFiberByHostInstance:wn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tm={bundleType:Sr.bundleType,version:Sr.version,rendererPackageName:Sr.rendererPackageName,rendererConfig:Sr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Pc(e),e===null?null:e.stateNode},findFiberByHostInstance:Sr.findFiberByHostInstance||qp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ns=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ns.isDisabled&&Ns.supportsFiber)try{lo=Ns.inject(tm),$t=Ns}catch{}}ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=em;ft.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!La(t))throw Error(W(200));return Jp(e,t,null,n)};ft.createRoot=function(e,t){if(!La(e))throw Error(W(299));var n=!1,r="",s=cd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ra(e,1,!1,null,null,n,!1,r,s),e[Vt]=t.current,Hr(e.nodeType===8?e.parentNode:e),new $a(t)};ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(W(188)):(e=Object.keys(e).join(","),Error(W(268,e)));return e=Pc(t),e=e===null?null:e.stateNode,e};ft.flushSync=function(e){return Dn(e)};ft.hydrate=function(e,t,n){if(!wo(t))throw Error(W(200));return No(null,e,t,!0,n)};ft.hydrateRoot=function(e,t,n){if(!La(e))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",a=cd;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=id(t,null,e,1,n??null,s,!1,l,a),e[Vt]=t.current,Hr(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new vo(t)};ft.render=function(e,t,n){if(!wo(t))throw Error(W(200));return No(null,e,t,!1,n)};ft.unmountComponentAtNode=function(e){if(!wo(e))throw Error(W(40));return e._reactRootContainer?(Dn(function(){No(null,null,e,!1,function(){e._reactRootContainer=null,e[Vt]=null})}),!0):!1};ft.unstable_batchedUpdates=Ea;ft.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!wo(n))throw Error(W(200));if(e==null||e._reactInternals===void 0)throw Error(W(38));return No(e,t,n,!1,r)};ft.version="18.3.1-next-f1338f8080-20240426";function ud(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ud)}catch(e){console.error(e)}}ud(),uc.exports=ft;var nm=uc.exports,dd,Qi=nm;dd=Qi.createRoot,Qi.hydrateRoot;class rm{constructor(){this.config=null,this.isConfigLoaded=!1}async loadConfig(){var t;if(this.config&&this.isConfigLoaded)return this.config;try{const n=await fetch("../config.txt");if(!n.ok)throw new Error(`Failed to load config: ${n.status}`);const r=await n.text();if(this.config=JSON.parse(r),this.isConfigLoaded=!0,!((t=this.config)!=null&&t.domain))throw new Error("Invalid config: missing domain");return this.config}catch(n){throw console.error("Failed to load API config:",n),new Error("API configuration not available")}}async request(t,n={}){const s=`${(await this.loadConfig()).domain}${t}`,l={method:"POST",headers:{"Content-Type":"application/json",...n.headers},...n},a=new Date().toISOString();if(console.log(""),console.log(` API Request [${a}]`),console.log(" Endpoint:",t),console.log(" Full URL:",s),console.log(" Method:",l.method),console.log(" Headers:",l.headers),l.body){console.log(" Request Body:",l.body);try{const i=JSON.parse(l.body);console.log(" Parsed Body:",i)}catch{console.log(" Body (raw):",l.body)}}console.log("");try{const i=await fetch(s,l);if(console.log(""),console.log(` API Response [${new Date().toISOString()}]`),console.log(" Endpoint:",t),console.log(" Status:",i.status,i.statusText),console.log(" Response Headers:",Object.fromEntries(i.headers.entries())),!i.ok)throw console.log(" HTTP Error:",i.status),console.log(""),new Error(`HTTP error! status: ${i.status}`);const c=await i.json();return console.log(" Response Data:",c),console.log(""),c}catch(i){throw console.log(""),console.log(" API Request Failed"),console.log(" Endpoint:",t),console.log(" Error:",i),console.log(""),i}}async login(t){const n={Data:{ID:t.ID.trim(),Password:t.Password}};return this.request("/api/session/login",{method:"POST",body:JSON.stringify(n)})}async getDepartments(t={}){return this.request("/api/ServerSetting/get_name",{method:"POST",body:JSON.stringify(t)})}async getMedicineCloud(t={}){return this.request("/api/MED_page/get_med_cloud",{method:"POST",body:JSON.stringify({})})}async searchMedicine(t="",n="N"){try{const r=await this.getMedicineCloud();if(r.Code!==200||!r.Data)return console.error("API returned error:",r),[];let s=r.Data;if(s=s.filter(l=>l.DRUGKIND===n),s=s.filter(l=>l.FILE_STATUS!==""),t.trim()){const l=t.toLowerCase();s=s.filter(a=>a.CODE&&a.CODE.toLowerCase().includes(l)||a.CHT_NAME&&a.CHT_NAME.toLowerCase().includes(l)||a.NAME&&a.NAME.toLowerCase().includes(l))}return s}catch(r){return console.error("Medicine search failed:",r),[]}}async getMedMapByDepartment(t){const n={Data:{},ValueAry:[t]};return this.request("/api/medMap/get_medMap_by_department",{method:"POST",body:JSON.stringify(n)})}async updateContainerPosition(t){const n={Data:[t]};return this.request("/api/medMap/update_medMap_section",{method:"POST",body:JSON.stringify(n)})}async addMedMapBox(t){const n={Data:t};return this.request("/api/medMap/add_medMap_box",{method:"POST",body:JSON.stringify(n)})}async updateMedMapBox(t){const n={Data:t};return this.request("/api/medMap/update_medMap_box",{method:"POST",body:JSON.stringify(n)})}async updateEpd266Storages(t,n,r){const s={ServerName:t,ServerType:n,Data:r};return this.request("/api/device/update_epd266_storages",{method:"POST",body:JSON.stringify(s)})}async updateMedMapDrawer(t){const n={Data:t};return this.request("/api/medMap/update_medMap_drawer",{method:"POST",body:JSON.stringify(n)})}async updateMedMapShelf(t){const n={Data:t};return this.request("/api/medMap/update_medMap_shelf",{method:"POST",body:JSON.stringify(n)})}async addMedMapSection(t,n){const r={ValueAry:[t,n]};return this.request("/api/medMap/add_medMap_section",{method:"POST",body:JSON.stringify(r)})}async addMedMapShelf(t){const n={Data:t};return this.request("/api/medMap/add_medMap_shelf",{method:"POST",body:JSON.stringify(n)})}async addMedMapDrawer(t){const n={Data:t};return this.request("/api/medMap/add_medMap_drawer",{method:"POST",body:JSON.stringify(n)})}async addSubSection(t,n){const r={ValueAry:[t,n]};return this.request("/api/medMap/add_sub_section",{method:"POST",body:JSON.stringify(r)})}async updateSubSection(t){const n={Data:t};return this.request("/api/medMap/update_sub_section",{method:"POST",body:JSON.stringify(n)})}async updateEpd266Medcode(t,n,r,s){const l={ServerName:t,ServerType:n,ValueAry:[`code=${r}`],Data:s};return this.request("/api/device/update_epd266_medcode",{method:"POST",body:JSON.stringify(l)})}async getConfig(){return this.loadConfig()}async checkConnection(){try{return await this.loadConfig(),!0}catch(t){return console.error("API connection check failed:",t),!1}}async addStock(t){const n={Data:t};return console.log(n),this.request("/api/medMap/add_stock",{method:"POST",body:JSON.stringify(n)})}async updateStock(t){const n={Data:t};return this.request("/api/medMap/update_stock",{method:"POST",body:JSON.stringify(n)})}async addMedMap(t,n,r){const s={ValueAry:[t,n,r,"0,0"]};return this.request("/api/medMap/add_medMap",{method:"POST",body:JSON.stringify(s)})}resetConfig(){this.config=null,this.isConfigLoaded=!1}}const je=new rm;class sm{convertMedMapApiToFakeData(t){console.log("  MedMap API "),console.log("  API :",t);try{Array.isArray(t)||(console.warn(" API "),t=[t]);const r=t.map((s,l)=>this.convertSingleDepartment(s,l)).filter(s=>{if(Object.keys(s).length!==0)return s});return console.log(" MedMap :",r),r}catch(n){return console.error(" MedMap :",n),[]}}convertSingleDepartment(t,n){if(Object.keys(t).length!==0){let r;t.absolute_position?r=t.absolute_position.split(","):r=[0,0];const s={GUID:t.GUID||t.guid||`dept_${n}_${Date.now()}`,Master_GUID:t.Master_GUID,type:t.sys_ServerSetting.type||"",name:t.sys_ServerSetting.name||"",gird_position:t.position,position:{x:r[0],y:r[1]},contents:t.medMap_Section,department_type:t.sys_ServerSetting["department_type "],class:0};return Array.isArray(t.medMap_Section)&&t.medMap_Section.forEach((l,a)=>{let i;l.absolute_position?i=l.absolute_position.split(","):i=[0,0],s.contents[a]={GUID:l.GUID,MASTER_GUID:l.Master_GUID,name:`${a}`,type:"parent_container",class:1,gird_position:l.position,position:{x:i[0],y:i[1]},serverName:t.sys_ServerSetting.name,serverType:t.sys_ServerSetting.type,contents:[]},Array.isArray(l.sub_section)&&l.sub_section.forEach((c,p)=>{let h={GUID:c.GUID,MASTER_GUID:c.Master_GUID,name:c.name,type:"sub_container",class:2,gird_position:c.position,contents:[],serverName:t.sys_ServerSetting.name,serverType:t.sys_ServerSetting.type,oriMaxCol:0};s.contents[a].contents[p]=h;let g=0;Array.isArray(c.shelf)&&Array.isArray(c.drawer)&&(c.shelf.forEach((x,C)=>{let j={GUID:x.GUID,MASTER_GUID:x.Master_GUID,name:`_${C}`,class:3,gird_position:x.position,serverName:x.serverName,serverType:x.serverType,type:x.type,contents:[]};if(j.serverName&&(j.serverName=t.sys_ServerSetting.name),j.serverType&&(j.serverType=t.sys_ServerSetting.type),x.type=="dispensing_shelves"||x.type=="shelf")x.type=="shelf"&&(j.type="dispensing_shelves"),Array.isArray(x.medMapBox)&&x.medMapBox.forEach((U,u)=>{let d={GUID:U.GUID,MASTER_GUID:U.Master_GUID,name:"",class:4,gird_position:U.position,ip:U.ip_box,box_type:"",width:U.width,height:U.height,serverType:U.serverType,serverName:U.serverName,med_info:[],type:"med_box"},m={};if(U.storage){switch(d.device_type=U.storage.DeviceType,d.storage=U.storage,+d.device_type){case 10:d.box_type="2.9";break;case 118:d.box_type="2.13";break;case 13:d.box_type="4.2";break}m.name=U.storage.Name,m.code=U.storage.Code,m.cht_name=U.storage.ChineseName}else d.device_type=10,d.box_type="2.9",m.name="",m.code="",m.cht_name="";d.med_info[0]=m,j.contents.push(d)});else{j.type="store_shelves",j.ip=x.ip_light,j.width=x.width,j.height=x.height;const U=x.medMapStock.sort((u,d)=>{const[m]=u.location.split(",").map(Number),[k]=d.location.split(",").map(Number);return m-k});j.medMapStock=U,j.name=x.name}let E=x.position.split(",")[1];g<+E&&(g=+E,s.contents[a].contents[p].oriMaxCol=+g),s.contents[a].contents[p].contents.push(j)}),c.drawer.forEach((x,C)=>{let j={GUID:x.GUID,MASTER_GUID:x.Master_GUID,name:` ${C}`,class:3,gird_position:x.position,ip:x.ip_drawer,serverName:x.serverName,serverType:x.serverType};j.serverName&&(j.serverName=t.sys_ServerSetting.name),j.serverType&&(j.serverType=t.sys_ServerSetting.type),x.drawer?(j.drawer=x.drawer,x.drawer.Boxes&&(j.type="grid_draw",j.name=x.drawer.Name,j.Boxes=[],Array.isArray(x.drawer.Boxes)?x.drawer.Boxes.forEach((u,d)=>{let m=[];Array.isArray(u)&&u.forEach((k,D)=>{let w={Row:k.Row,Column:k.Column,Width:1,Height:1,Slave:k.Slave,SlaveBox_Row:k.SlaveBox_Row,SlaveBox_Column:k.SlaveBox_Column,MasterBox_Column:k.MasterBox_Column,MasterBox_Row:k.MasterBox_Row,Name:k.Name,Code:k.Code,ChineseName:k.ChineseName,GUID:k.GUID};m.push(w)}),j.Boxes.push(m)}):j.Boxes=x.drawer.Boxes)):(j.type="list_draw",j.name=` ${C}`);let E=x.position.split(",")[1];g<+E&&(g=+E,s.contents[a].contents[p].oriMaxCol=+g),s.contents[a].contents[p].contents.push(j)}))})}),s}else return{}}convertSingleComponent(t,n,r){var l,a,i,c,p;const s={GUID:t.GUID||t.guid||`comp_${n}_${Date.now()}`,type:this.mapComponentType(t.type||t.component_type||"unknown"),name:t.name||t.component_name||`_${n}`,position:{x:((l=t.position)==null?void 0:l.x)||t.x||50+n*200,y:((a=t.position)==null?void 0:a.y)||t.y||50+n*150},dimensions:{width:((i=t.dimensions)==null?void 0:i.width)||t.width||180,height:((c=t.dimensions)==null?void 0:c.height)||t.height||120,depth:((p=t.dimensions)==null?void 0:p.depth)||t.depth||30},med_box:t.med_box||t.medBox||t.medicine_boxes||[],MASTER_GUID:r};return t.components&&Array.isArray(t.components)&&(s.components=t.components.map((h,g)=>this.convertSingleComponent(h,g,s.GUID))),Object.keys(t).forEach(h=>{["GUID","type","name","position","dimensions","med_box","components"].includes(h)||(s[h]=t[h])}),s}mapDepartmentType(t){return{dispensing_station:"",warehouse:"",pharmacy:"",storage:""}[t]||t}mapComponentType(t){return{medicine_box_shelf:"med_box_shelf",medicine_shelf:"normal_shelf",grid_drawer:"grid_draw",list_drawer:"list_draw",medicine_box:"med_box",parent_container:"parent_container",sub_container:"sub_container",dispensing_shelves:"dispensing_shelves",store_shelves:"store_shelves"}[t]||t}validateConvertedData(t){try{if(!Array.isArray(t))return console.error(" "),!1;for(const n of t){if(!n.GUID||!n.type||!n.name)return console.error(" :",n),!1;if(!n.gird_position||typeof n.gird_position!="string")return console.error(" :",n.gird_position),!1;if(n.components&&Array.isArray(n.components)){for(const r of n.components)if(!r.GUID||!r.type)return console.error(" :",r),!1}}return console.log(" "),!0}catch(n){return console.error(" :",n),!1}}generateConversionReport(t,n){const r={timestamp:new Date().toISOString(),originalDataCount:Array.isArray(t)?t.length:0,convertedDataCount:n.length,conversionSuccess:n.length>0,totalComponents:n.reduce((s,l)=>{var a;return s+(((a=l.components)==null?void 0:a.length)||0)},0),departmentTypes:[...new Set(n.map(s=>s.type))],componentTypes:[...new Set(n.flatMap(s=>{var l;return((l=s.components)==null?void 0:l.map(a=>a.type))||[]}))]};return console.log(" :",r),r}}const vt=new sm,om=Object.freeze(Object.defineProperty({__proto__:null,default:vt},Symbol.toStringTag,{value:"Module"})),fd=v.createContext(void 0),lm=({children:e})=>{const[t,n]=v.useState(!1),[r,s]=v.useState(null),[l,a]=v.useState(!1),[i,c]=v.useState(null),[p,h]=v.useState(null),[g,x]=v.useState("medicine"),[C,j]=v.useState(0),[E,U]=v.useState({message:"",type:"success",isVisible:!1}),[u,d]=v.useState(!1),[m,k]=v.useState(null),[D,w]=v.useState("edit"),[M,G]=v.useState(!1),[Q,Y]=v.useState(null),[te,he]=v.useState(!1),[S,K]=v.useState(null),[oe,ue]=v.useState(!1),[T,y]=v.useState(!1),[_,O]=v.useState(null),[R,z]=v.useState(!1),[q,ee]=v.useState(null),[ie,P]=v.useState(!1),[le,ge]=v.useState(null),[B,V]=v.useState(!1),[pe,me]=v.useState(null),[ke,Se]=v.useState(null),[lt,F]=v.useState("add"),[Z,ce]=v.useState(!1),[fe,ae]=v.useState([]),[de,ye]=v.useState([]),[f,A]=v.useState(!1),b=()=>{sessionStorage.removeItem("user_session"),n(!1),s(null)},N=v.useCallback(()=>{j(ve=>ve+1)},[]),I=v.useCallback((ve,Pt)=>{U({message:ve,type:Pt,isVisible:!0})},[]),L=v.useCallback(()=>{U(ve=>({...ve,isVisible:!1}))},[]),J=ve=>{k(ve),w("edit"),d(!0)},X=()=>{const ve={GUID:`new_medbox_${Date.now()}`,name:"",box_type:"",width:[],width_index:0,med_info:[],parentShelf:null};k(ve),w("add"),d(!0)},H=()=>{d(!1),k(null),w("edit")},$=ve=>{Y(ve),G(!0)},se=()=>{G(!1),Y(null)},re=ve=>{K(ve),he(!0)},we=()=>{he(!1),K(null)},be=ve=>{O(ve),y(!0)},Ot=()=>{y(!1),O(null)},In=ve=>{ee(ve),z(!0)},mr=()=>{z(!1),ee(null)},vd=ve=>{ge(ve),P(!0)},wd=()=>{P(!1),ge(null)},Nd=ve=>{me(ve),Se(null),F("add"),V(!0)},Sd=(ve,Pt)=>{me(ve),Se(Pt),F("edit"),V(!0)},jd=()=>{V(!1),me(null),Se(null),F("add")},bd=()=>{ce(!0)},Cd=()=>{ce(!1)},kd=v.useCallback(async()=>{if(!i){console.warn("");return}console.log(" :",i),ue(!0);try{const ve=await je.getMedMapByDepartment(i);if(ve.Code===200&&ve.Data){console.log(" :",ve.Data);const Pt=vt.convertMedMapApiToFakeData(ve.Data);if(!vt.validateConvertedData(Pt)){console.error(" "),h(null);return}h(Pt),console.log(" ")}else console.error(" API :",ve),h(null)}catch(ve){console.error(" :",ve),h(null)}finally{ue(!1)}},[i,ue,h]),_d=v.useCallback((ve,Pt)=>{h(Tn=>Tn&&Tn.map(Ua=>{const Rn={...Ua};return Rn.contents&&(Rn.contents=Rn.contents.map(An=>{const $n={...An};return $n.contents&&($n.contents=$n.contents.map(Ln=>{const On={...Ln};return On.contents&&(On.contents=On.contents.map(Kt=>{if(Kt.GUID===ve){const jt={...Kt};return jt.medMapStock||(jt.medMapStock=[]),jt.medMapStock=[...jt.medMapStock,Pt],jt}return Kt})),On})),$n})),Rn}))},[]),Md=v.useCallback((ve,Pt,Tn)=>{h(ss=>ss&&ss.map(Rn=>{const An={...Rn};return An.contents&&(An.contents=An.contents.map($n=>{const Ln={...$n};return Ln.contents&&(Ln.contents=Ln.contents.map(On=>{const Kt={...On};return Kt.contents&&(Kt.contents=Kt.contents.map(jt=>{if(jt.GUID===ve&&jt.medMapStock){const za={...jt};return za.medMapStock=jt.medMapStock.map(So=>So.GUID===Pt?{...So,...Tn}:So),za}return jt})),Kt})),Ln})),An}))},[]);return o.jsx(fd.Provider,{value:{isAuthenticated:t,setIsAuthenticated:n,currentUser:r,setCurrentUser:s,logout:b,sidebarOpen:l,setSidebarOpen:a,selectedDepartmentType:i,setSelectedDepartmentType:c,apiDepartmentData:p,setApiDepartmentData:h,viewMode:g,setViewMode:x,refreshTrigger:C,triggerRefresh:N,addStockToShelf:_d,notification:E,showNotification:I,hideNotification:L,medBoxModalOpen:u,setMedBoxModalOpen:d,selectedMedBox:m,setSelectedMedBox:k,openMedBoxModal:J,closeMedBoxModal:H,modalMode:D,setModalMode:w,openAddMedBoxModal:X,listDrawModalOpen:M,setListDrawModalOpen:G,selectedListDraw:Q,setSelectedListDraw:Y,openListDrawModal:$,closeListDrawModal:se,gridDrawModalOpen:te,setGridDrawModalOpen:he,selectedGridDraw:S,setSelectedGridDraw:K,openGridDrawModal:re,closeGridDrawModal:we,isLoadingMedMap:oe,setIsLoadingMedMap:ue,addParentContainerModalOpen:T,setAddParentContainerModalOpen:y,selectedDepartmentForAdd:_,setSelectedDepartmentForAdd:O,openAddParentContainerModal:be,closeAddParentContainerModal:Ot,addShelfDrawContainerModalOpen:R,setAddShelfDrawContainerModalOpen:z,selectedSubContainerForAdd:q,setSelectedSubContainerForAdd:ee,openAddShelfDrawContainerModal:In,closeAddShelfDrawContainerModal:mr,addSubContainerModalOpen:ie,setAddSubContainerModalOpen:P,selectedParentContainerForAdd:le,setSelectedParentContainerForAdd:ge,openAddSubContainerModal:vd,closeAddSubContainerModal:wd,addStoreItemModalOpen:B,setAddStoreItemModalOpen:V,selectedStoreShelfForAdd:pe,setSelectedStoreShelfForAdd:me,selectedStockItemForEdit:ke,setSelectedStockItemForEdit:Se,storeItemModalMode:lt,setStoreItemModalMode:F,openAddStoreItemModal:Nd,openEditStoreItemModal:Sd,closeAddStoreItemModal:jd,updateStockInShelf:Md,addDepartmentModalOpen:Z,setAddDepartmentModalOpen:ce,allDepartmentsList:fe,setAllDepartmentsList:ae,openAddDepartmentModal:bd,closeAddDepartmentModal:Cd,reloadMedMapData:kd,medicineList:de,setMedicineList:ye,isLoadingMedicines:f,setIsLoadingMedicines:A},children:e})},Ke=()=>{const e=v.useContext(fd);if(e===void 0)throw new Error("useDrugMap must be used within a DrugMapProvider");return e},am={"zh-TW":{"nav.title":"","nav.home":"","nav.expandSidebar":"","nav.collapseSidebar":"","topbar.medicine":"","topbar.department":"","topbar.language":"","topbar.logout":"","sidebar.drugMap":"","sidebar.closeSidebar":"","sidebar.departmentCategories":"","sidebar.departments":"","canvas.lockCanvas":"","canvas.unlockCanvas":"","type.dispensingStation":"","type.warehouse":"","type.medBoxShelf":"","type.storeShelf":"","type.parentContainer":"","type.subContainer":"","type.gridDraw":"","type.listDraw":"","type.medBox":"","type.containers":"","modal.medBoxSettings":"","modal.addMedBox":"","modal.listDrawSettings":"","modal.gridDrawSettings":"","modal.settings":"","modal.add":"","form.medBoxName":"","form.medBoxType":"","form.widthSelection":"","form.ipAddress":"IP ","form.drugInfo":"","form.drawerName":"","form.drugList":"","form.drugCode":"","form.drugName":"","form.chineseName":"","form.drugSearch":"","placeholder.medBoxName":"  ","placeholder.ipAddress":" IP ","placeholder.drawerName":"","placeholder.gridDrawName":"","placeholder.drugSearch":" //","button.cancel":"","button.save":"","button.add":"","button.edit":"","button.change":"","button.remove":"","button.search":"","button.merge":"","button.unmerge":"","status.noDrugData":"","status.newMedBoxNoDrug":"","status.drawerNoDrug":"","status.gridDrawNotConfigured":"","status.noDrugInfo":"","status.drugListEmpty":"","status.noContent":"No content available","status.notSet":"","status.notAdded":"","status.searchResults":"","status.selectCellsForDrug":"","status.selectedCellsNoDrug":"","status.loadingMedMapData":"...","status.loadingMedMapHint":"","footer.copyright":"Copyright 2025 ","login.title":"","login.subtitle":"","login.userId":"","login.userIdPlaceholder":"","login.password":"","login.passwordPlaceholder":"","login.loginButton":"","login.loggingIn":"..."},en:{"nav.title":"Drug Map","nav.home":"Back to Home","nav.expandSidebar":"Expand Sidebar","nav.collapseSidebar":"Collapse Sidebar","topbar.medicine":"Medicine","topbar.department":"Department","topbar.language":"English","topbar.logout":"Logout","sidebar.drugMap":"Drug Map","sidebar.closeSidebar":"Close Sidebar","sidebar.departmentCategories":"Department Categories","sidebar.departments":"Departments","canvas.lockCanvas":"Lock Canvas","canvas.unlockCanvas":"Unlock Canvas","type.dispensingStation":"Dispensing Station","type.warehouse":"Warehouse","type.medBoxShelf":"Medicine Box Shelf","type.parentContainer":"Cabinet","type.subContainer":"sub container","type.gridDraw":"Grid Drawer","type.listDraw":"List Drawer","type.medBox":"Medicine Box","type.containers":"Containers","modal.medBoxSettings":"Medicine Box Settings","modal.addMedBox":"Add Medicine Box","modal.listDrawSettings":"Drawer Settings","modal.gridDrawSettings":"Grid Drawer Settings","modal.settings":"Edit Settings","modal.add":"Add Medicine Box","form.medBoxName":"Medicine Box Name","form.medBoxType":"Medicine Box Type","form.widthSelection":"Width Selection","form.ipAddress":"IP Address","form.drugInfo":"Drug Information","form.drawerName":"Drawer Name","form.drugList":"Drug List","form.drugCode":"Drug Code","form.drugName":"Drug Name","form.chineseName":"Chinese Name","form.drugSearch":"Drug Search","placeholder.medBoxName":"Enter medicine box name","placeholder.ipAddress":"Enter IP address","placeholder.drawerName":"Enter drawer name","placeholder.gridDrawName":"Enter grid drawer name","placeholder.drugSearch":"Enter drug code/name/Chinese name","button.cancel":"Cancel","button.save":"Save","button.add":"Add","button.edit":"Edit","button.change":"Change","button.remove":"Remove Drug","button.search":"Search","button.merge":"Merge","button.unmerge":"Unmerge","status.noDrugData":"This medicine box has no drug data configured","status.newMedBoxNoDrug":"New medicine box has no drug data configured","status.drawerNoDrug":"This drawer has no drugs configured","status.gridDrawNotConfigured":"This grid drawer is not configured","status.noDrugInfo":"No drug information","status.drugListEmpty":"Drug list is empty","status.noContent":"No content available","status.notSet":"Not set","status.notAdded":"No drugs added","status.searchResults":"Search results will be displayed here","status.selectCellsForDrug":"Select merged cells to display drug information","status.selectedCellsNoDrug":"Selected cells have no drug data","status.searching":"Searching...","status.noSearchResults":"No search results found","status.loadingMedMapData":"Loading medicine map data...","status.loadingMedMapHint":"Please wait while we process department data","footer.copyright":"Copyright 2025 Hongsen Intelligent Technology","login.title":"Drug Map System","login.subtitle":"Please login to continue","login.userId":"ID","login.userIdPlaceholder":"Enter your user ID","login.password":"Password","login.passwordPlaceholder":"Enter your password","login.loginButton":"Login","login.loggingIn":"Logging in..."}},pd=v.createContext(void 0),im=({children:e})=>{const[t,n]=v.useState("zh-TW"),r=s=>am[t][s]||s;return o.jsx(pd.Provider,{value:{language:t,setLanguage:n,t:r},children:e})},et=()=>{const e=v.useContext(pd);if(e===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Me=(e,t)=>{const n=v.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:a,className:i="",children:c,...p},h)=>v.createElement("svg",{ref:h,...cm,width:s,height:s,stroke:r,strokeWidth:a?Number(l)*24/Number(s):l,className:["lucide",`lucide-${um(e)}`,i].join(" "),...p},[...t.map(([g,x])=>v.createElement(g,x)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=Me("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=Me("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=Me("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=Me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=Me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=Me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=Me("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=Me("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=Me("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=Me("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=Me("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=Me("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=Me("ListX",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"m19 10-4 4",key:"1tz659"}],["path",{d:"m15 10 4 4",key:"1n7nei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=Me("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=Me("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=Me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=Me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=Me("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=Me("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=Me("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=Me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=Me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=Me("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=Me("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=Me("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=Me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),bm=()=>{const{sidebarOpen:e,setSidebarOpen:t}=Ke(),{t:n}=et();return o.jsx("div",{className:"fixed top-4 left-4 z-30",children:o.jsx("nav",{className:"bg-white/95 backdrop-blur-sm border border-gray-200/50 rounded-xl shadow-lg px-2 py-1",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("a",{href:"../frontpage",className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg transition-colors",title:n("nav.home"),children:o.jsx(Oa,{className:"w-5 h-5"})}),o.jsx("div",{className:"ml-2 text-lg font-semibold text-gray-900",children:n("nav.title")}),o.jsx("button",{onClick:()=>t(!e),className:"ml-8 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg transition-colors",title:n(e?"nav.collapseSidebar":"nav.expandSidebar"),children:e?o.jsx(Gl,{className:"w-6 h-6"}):o.jsx(Gl,{className:"w-6 h-6"})})]})})})},Cm=()=>{const{viewMode:e,setViewMode:t,logout:n,currentUser:r,selectedDepartmentType:s,openAddDepartmentModal:l,apiDepartmentData:a,allDepartmentsList:i}=Ke(),{language:c,setLanguage:p,t:h}=et(),[g,x]=Ha.useState(!1),C=()=>{p(c==="zh-TW"?"en":"zh-TW")},j=Ha.useMemo(()=>{if(!s||!i||!a)return!1;const E=a.map(d=>d.name);return i.filter(d=>d["department_type "]===s).filter(d=>!E.includes(d.name)).length>0},[s,i,a]);return o.jsx("div",{className:"fixed top-4 right-4 z-30",children:o.jsx("div",{className:"bg-white/95 backdrop-blur-sm border border-gray-200/50 rounded-xl shadow-lg px-2 py-1 sm:px-3 sm:py-2",children:o.jsxs("div",{className:"flex items-center gap-2 lg:gap-0 lg:space-x-2 flex-col lg:flex-row relative",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[o.jsxs("button",{onClick:()=>t("medicine"),className:`flex items-center space-x-2 px-3 py-1.5 rounded-md transition-all duration-300 ease-in-out transform ${e==="medicine"?"bg-white text-green-600 shadow-sm scale-105":"text-gray-600 hover:text-gray-900 hover:bg-gray-50 hover:scale-102"}`,children:[o.jsx(Nm,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:h("topbar.medicine")})]}),o.jsxs("button",{onClick:()=>t("department"),className:`flex items-center space-x-2 px-3 py-1.5 rounded-md transition-all duration-300 ease-in-out transform ${e==="department"?"bg-white text-blue-600 shadow-sm scale-105":"text-gray-600 hover:text-gray-900 hover:bg-gray-50 hover:scale-102"}`,children:[o.jsx(md,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:h("topbar.department")})]})]}),o.jsx("button",{onClick:()=>x(!g),className:"lg:hidden flex items-center justify-center p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg transition-colors",children:g?o.jsx(mm,{className:"w-4 h-4"}):o.jsx(hd,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:`
            flex items-center gap-2 lg:gap-0 lg:space-x-2 flex-col lg:flex-row
            lg:flex lg:opacity-100 lg:max-h-none
            transition-all duration-300 ease-in-out overflow-hidden
            ${g?"flex opacity-100 max-h-96":"hidden opacity-0 max-h-0 lg:flex lg:opacity-100 lg:max-h-none"}
          `,children:[o.jsx("div",{className:"mx-1 w-full lg:w-px lg:h-6 h-px bg-gray-300"}),s&&j&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>l(),className:"w-full lg:w-auto flex justify-center items-center space-x-2 px-3 py-1.5 text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors border border-green-700",children:[o.jsx(xt,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:""})]}),o.jsx("div",{className:"w-full lg:w-px lg:h-6 h-px bg-gray-300"})]}),o.jsxs("button",{onClick:C,className:"w-full lg:w-auto flex justify-center items-center space-x-2 px-3 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg transition-colors border",children:[o.jsx(xm,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:h("topbar.language")})]}),o.jsx("div",{className:"w-full lg:w-px lg:h-6 h-px bg-gray-300"}),r&&o.jsx("div",{className:"w-full lg:w-auto flex justify-center items-center space-x-2 px-3 py-1.5 bg-gray-50 border border-gray-200 rounded-lg",children:o.jsx("span",{className:"text-sm font-medium text-gray-700",children:r.Name})}),o.jsxs("button",{onClick:n,className:"w-full lg:w-auto flex items-center space-x-2 px-3 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 hover:text-red-700 border border-red-200 rounded-lg transition-colors justify-center",children:[o.jsx(vm,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:h("topbar.logout")})]})]})]})})})},km=()=>{const{sidebarOpen:e,setSidebarOpen:t,selectedDepartmentType:n,setSelectedDepartmentType:r,setApiDepartmentData:s,isLoadingMedMap:l,setIsLoadingMedMap:a,setAllDepartmentsList:i}=Ke(),{t:c}=et(),[p,h]=v.useState(new Set),[g,x]=v.useState([]),[C,j]=v.useState(!0),[E,U]=v.useState([]);v.useEffect(()=>{(async()=>{j(!0);try{const w=await je.getDepartments();w.Code===200&&w.Data?(console.log(w.Data),x(w.Data),i(w.Data)):(console.error("API returned error:",w),x([]),i([]))}catch(w){console.error("Failed to fetch department data:",w),x([]),i([])}finally{j(!1)}})()},[]);const u=g.reduce((D,w)=>{const M=w["department_type "];return D[M]||(D[M]=[]),D[M].push(w),D},{}),d=D=>{const w=new Set(p);w.has(D)?w.delete(D):w.add(D),h(w)},m=async D=>{console.log(" :",D),r(D),await k(D),t(!1)},k=async D=>{console.log(" :",D),a(!0);try{const w=await je.getMedMapByDepartment(D);if(w.Code===200&&w.Data){console.log(" API :",w.Data);const M=vt.convertMedMapApiToFakeData(w.Data);if(!vt.validateConvertedData(M)){console.error(" "),U([]);return}const Q=vt.generateConversionReport(w.Data,M);U(M),s(M),console.log(" "),console.log(" :",M),console.log(" :",Q)}else console.error(" API :",w),U([]),s(null)}catch(w){console.error(" :",w),U([]),s(null)}finally{a(!1)}};return o.jsxs(o.Fragment,{children:[e&&o.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:()=>t(!1)}),o.jsx("div",{className:`fixed w-80 bg-white/95 backdrop-blur-sm shadow-xl border border-gray-200/50 z-50 transform transition-all duration-300 ease-in-out h-screen h-svh ${e?"translate-x-0 opacity-100":"-translate-x-full opacity-0"}`,children:o.jsxs("div",{className:"flex flex-col h-screen h-svh",children:[o.jsx("div",{className:"flex-shrink-0 px-4 py-2 border-b border-gray-200/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("a",{href:"../front_page",className:"text-gray-600 hover:text-gray-900 transition-colors p-2 rounded-lg hover:bg-gray-100/50",title:c("nav.home"),children:o.jsx(Oa,{className:"w-5 h-5"})}),o.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:c("sidebar.drugMap")})]}),o.jsx("button",{onClick:()=>t(!e),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg transition-colors",title:c("sidebar.closeSidebar"),children:o.jsx(ym,{className:"w-6 h-6"})})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:C?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"text-gray-500",children:"Loading departments..."})}):o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-700 mb-4",children:c("sidebar.departmentCategories")}),Object.entries(u).map(([D,w])=>o.jsxs("div",{className:"space-y-1",children:[o.jsxs("button",{onClick:()=>m(D),disabled:l,className:`w-full flex items-center justify-between p-3 rounded-lg transition-all duration-200 border ${n===D?"bg-blue-50 text-blue-700 border-blue-200 shadow-sm":"text-gray-700 hover:bg-gray-50 hover:shadow-sm border-transparent"} ${l?"opacity-50 cursor-not-allowed":""}`,children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[D==="B1F"?o.jsx(md,{className:"w-4 h-4"}):o.jsx(Sm,{className:"w-4 h-4"}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-medium",children:D}),o.jsxs("div",{className:"text-xs text-gray-500",children:[w.length," ",c("sidebar.departments")]})]})]}),o.jsx("div",{onClick:M=>{M.stopPropagation(),d(D)},className:"p-1 hover:bg-gray-200/50 rounded transition-colors",children:p.has(D)?o.jsx(hd,{className:"w-4 h-4"}):o.jsx(pm,{className:"w-4 h-4"})})]}),p.has(D)&&o.jsx("div",{className:"ml-6 space-y-2",children:w.map(M=>o.jsx("div",{className:"p-3 text-base text-gray-600 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"font-medium text-gray-800",children:M.name}),o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${M.type===""?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:M.type})]})},M.GUID))})]},D))]})})]})})]})},_m=()=>{const{t:e}=et();return o.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-30",children:o.jsx("div",{className:"bg-white/95 backdrop-blur-sm border border-gray-200/50 rounded-xl shadow-lg px-4 py-2",children:o.jsx("p",{className:"text-sm text-gray-600 font-medium whitespace-nowrap",children:e("footer.copyright")})})})},Mm=({component:e,scale:t,isLocked:n})=>{const r=v.useRef(null),{t:s}=et(),{apiDepartmentData:l,setApiDepartmentData:a,showNotification:i}=Ke(),[c,p]=v.useState(!1),[h,g]=v.useState({x:0,y:0}),[x,C]=v.useState(e.position),[j,E]=v.useState(null),[U,u]=v.useState({x:0,y:0}),d=v.useCallback(async(y,_)=>{if(!l)return;console.log(" :",y,_);const O=JSON.parse(JSON.stringify(l)),R=q=>{for(const ee of q){if(ee.GUID===y)return ee.position={x:_.x.toFixed(3),y:_.y.toFixed(3)},console.log(" :",ee.name,_.x.toFixed(3),_.y.toFixed(3)),!0;if(ee.components&&Array.isArray(ee.components)&&R(ee.components)||ee.contents&&Array.isArray(ee.contents)&&R(ee.contents))return!0}return!1};if(R(O)){a(O),console.log(" ");try{console.log(" ...");const q=await je.updateContainerPosition({GUID:y,absolute_position:`${_.x.toFixed(3)},${_.y.toFixed(3)}`});q.Code===200?(console.log(" ",q),i("","success")):(console.error(" :",q),i(`: ${q.Result||""}`,"error"))}catch(q){console.error(" :",q),i(": ","error")}}else console.warn(" :",y)},[l,a,i]),{position:m,dimensions:k,name:D,type:w}=e,M=v.useCallback(y=>{if(!n)return;y.preventDefault(),y.stopPropagation();const _=r.current;if(!_)return;_.setPointerCapture(y.pointerId);const O=_.getBoundingClientRect(),R=y.clientX-O.left,z=y.clientY-O.top;g({x:R,y:z}),p(!0)},[n]),G=v.useCallback(y=>{if(!c||!n)return;y.preventDefault(),y.stopPropagation();const _=r.current;if(!_)return;const O=_.closest("[data-canvas-content]");if(!O)return;const R=O.getBoundingClientRect(),z=(y.clientX-R.left-h.x)/t,q=(y.clientY-R.top-h.y)/t;C({x:z,y:q})},[c,h,t,n]),Q=v.useCallback(y=>{if(!c||!n)return;y.preventDefault(),y.stopPropagation();const _=r.current;_&&_.releasePointerCapture(y.pointerId),p(!1),d(e.GUID,x)},[c,n,d,e.GUID,x]),Y=v.useCallback(y=>{if(!n)return;y.preventDefault(),y.stopPropagation();const _=r.current;if(!_)return;const O=y.touches[0];if(!O)return;E(O.identifier);const R=_.getBoundingClientRect(),z=O.clientX-R.left,q=O.clientY-R.top;g({x:z,y:q}),u({x:O.clientX,y:O.clientY}),p(!0)},[n]),te=v.useCallback(y=>{if(!c||!n||j===null)return;y.preventDefault(),y.stopPropagation();const _=r.current;if(!_)return;const O=Array.from(y.touches).find(ie=>ie.identifier===j);if(!O)return;const R=_.closest("[data-canvas-content]");if(!R)return;const z=R.getBoundingClientRect(),q=(O.clientX-z.left-h.x)/t,ee=(O.clientY-z.top-h.y)/t;C({x:q,y:ee})},[c,h,t,n,j]),he=v.useCallback(y=>{!c||!n||j===null||!Array.from(y.changedTouches).some(O=>O.identifier===j)||(y.preventDefault(),y.stopPropagation(),p(!1),E(null),u({x:0,y:0}),console.log(e.GUID),d(e.GUID,x))},[c,n,j,d,e.GUID,x]),S=v.useCallback(y=>{!c||!n||j===null||!Array.from(y.changedTouches).some(O=>O.identifier===j)||(y.preventDefault(),y.stopPropagation(),C(e.position),p(!1),E(null),u({x:0,y:0}))},[c,n,j,e.position]),K=y=>{switch(y){case"":return"bg-orange-50 border-orange-400";case"":return"bg-indigo-50 border-indigo-400";case"parent_container":return"bg-indigo-50 border-indigo-400";default:return"bg-gray-50 border-gray-400"}},oe=y=>{switch(y){case"":return"bg-orange-200 text-gray-900";case"":return"bg-indigo-200 text-gray-900";case"parent_container":return"bg-indigo-200 text-gray-900";default:return"bg-gray-100 text-gray-800"}},ue=y=>{switch(y){case"":return"bg-orange-600 text-white";case"":return"bg-indigo-600 text-white";case"parent_container":return"bg-indigo-600 text-white";default:return"bg-gray-600 text-white"}},T=y=>{const _=y===""?"type.dispensingStation":y===""?"type.warehouse":y==="parent_container"?"":"type."+y;return s(_)||y};return o.jsx("div",{ref:r,className:`flex flex-col absolute border-2 rounded-lg shadow-lg hover:shadow-xl ${K(w)} overflow-hidden ${n?"cursor-move":"cursor-default"} ${c?"shadow-2xl scale-105 z-50":""}`,style:{left:`${x.x}px`,top:`${x.y}px`,minWidth:w===""||w===""?"120px":"180px",minHeight:w===""||w===""?"60px":"120px",userSelect:"none",touchAction:"none",transition:c?"none":"transform 0.2s ease-out, box-shadow 0.2s ease-out"},onPointerDown:M,onPointerMove:G,onPointerUp:Q,onTouchStart:Y,onTouchMove:te,onTouchEnd:he,onTouchCancel:S,children:o.jsx("div",{className:`w-full min-w-[400px] h-auto flex items-start flex-1 justify-between p-2 border-b border-gray-200 ${oe(w)}`,children:o.jsx("div",{className:"flex space-x-2 flex-1 min-w-0",children:o.jsxs("div",{className:"min-w-0 flex gap-4",children:[o.jsx("div",{className:"font-semibold text-lg truncate",children:D}),o.jsx("div",{className:`text-sm truncate py-1 px-3 rounded-2xl ${ue(w)}`,children:T(w)})]})})})})},Dm=({children:e})=>{const t=v.useRef(null),{selectedDepartmentType:n,apiDepartmentData:r}=Ke(),{t:s}=et(),[l,a]=v.useState({x:0,y:0,scale:1}),[i,c]=v.useState(!1),[p,h]=v.useState(!1),[g,x]=v.useState({x:0,y:0}),[C,j]=v.useState(!1),E=()=>{try{const T=localStorage.getItem("med_map_anchor");return T?JSON.parse(T):[]}catch(T){return console.error("Error reading canvas states from localStorage:",T),[]}},U=(T,y,_,O)=>{try{const R=E(),z=R.findIndex(ee=>ee.department===T&&ee.canvasType===y),q={department:T,canvasType:y,scale:_,position:O};z>=0?R[z]=q:R.push(q),localStorage.setItem("med_map_anchor",JSON.stringify(R))}catch(R){console.error("Error saving canvas state to localStorage:",R)}},u=(T,y)=>E().find(O=>O.department===T&&O.canvasType===y)||null;v.useEffect(()=>{if(n){const T=u(n,"InfiniteCanvas");if(T)a({x:T.position.x,y:T.position.y,scale:T.scale});else{const y={x:0,y:0,scale:1};a(y),U(n,"InfiniteCanvas",y.scale,y)}}},[n]),v.useEffect(()=>{if(!n)return;const T=setTimeout(()=>{U(n,"InfiniteCanvas",l.scale,{x:l.x,y:l.y})},500);return()=>clearTimeout(T)},[l,n]),v.useEffect(()=>{const T=_=>{_.code==="Space"&&!_.repeat&&(_.preventDefault(),j(!0))},y=_=>{_.code==="Space"&&(_.preventDefault(),j(!1),c(!1))};return window.addEventListener("keydown",T),window.addEventListener("keyup",y),()=>{window.removeEventListener("keydown",T),window.removeEventListener("keyup",y)}},[]);const d=v.useCallback(T=>{var _;if(p)return;if(T.altKey&&!navigator.userAgent.includes("Mac")||T.metaKey&&navigator.userAgent.includes("Mac")){T.preventDefault();const O=(_=t.current)==null?void 0:_.getBoundingClientRect();if(!O)return;const R=T.clientX-O.left,z=T.clientY-O.top,q=T.deltaY>0?.9:1.1,ee=Math.max(.1,Math.min(5,l.scale*q)),ie=ee/l.scale,P=R-(R-l.x)*ie,le=z-(z-l.y)*ie;a({x:P,y:le,scale:ee})}},[l,p]),m=v.useCallback(T=>{p||!C||(c(!0),x({x:T.clientX,y:T.clientY}),T.preventDefault())},[p,C]),k=v.useCallback(T=>{if(!i||p)return;const y=T.clientX-g.x,_=T.clientY-g.y;a(O=>({...O,x:O.x+y,y:O.y+_})),x({x:T.clientX,y:T.clientY})},[i,g,p]),D=v.useCallback(()=>{c(!1)},[]),[w,M]=v.useState(null),[G,Q]=v.useState({x:0,y:0}),Y=T=>{if(T.length<2)return null;const y=T[0],_=T[1];return Math.sqrt(Math.pow(_.clientX-y.clientX,2)+Math.pow(_.clientY-y.clientY,2))},te=T=>{if(T.length===1)return{x:T[0].clientX,y:T[0].clientY};const y=T[0],_=T[1];return{x:(y.clientX+_.clientX)/2,y:(y.clientY+_.clientY)/2}},he=v.useCallback(T=>{if(!p){if(T.touches.length===2){const y=Y(T.touches),_=te(T.touches);M(y),Q(_)}else if(T.touches.length===1){const y=T.touches[0];x({x:y.clientX,y:y.clientY}),c(!0)}}},[p]),S=v.useCallback(T=>{var y;if(!p){if(T.preventDefault(),T.touches.length===2&&w!==null){const _=Y(T.touches),O=te(T.touches);if(_&&w){const R=(y=t.current)==null?void 0:y.getBoundingClientRect();if(!R)return;const z=_/w,q=Math.max(.1,Math.min(5,l.scale*z)),ee=O.x-R.left,ie=O.y-R.top,P=q/l.scale,le=ee-(ee-l.x)*P,ge=ie-(ie-l.y)*P;a({x:le,y:ge,scale:q}),M(_),Q(O)}}else if(T.touches.length===1&&i){const _=T.touches[0],O=_.clientX-g.x,R=_.clientY-g.y;a(z=>({...z,x:z.x+O,y:z.y+R})),x({x:_.clientX,y:_.clientY})}}},[l,w,i,g,p]),K=v.useCallback(()=>{M(null),c(!1)},[]);v.useEffect(()=>{const T=t.current;if(T)return T.addEventListener("wheel",d,{passive:!1}),()=>T.removeEventListener("wheel",d)},[d]),v.useCallback(()=>{a({x:0,y:0,scale:1})},[]);const ue=(()=>{if(!r||r.length===0)return[];const T=r,y=[];for(const _ of T)if(_.type===""||_.type==="")for(const O of _.contents)y.push({GUID:O.GUID,type:O.type,name:`${_.name}-${O.name}`,position:O.position,dimensions:O.dimensions,med_box:[],MASTER_GUID:_.GUID,components:_.components||[]});else _.components&&_.components.length>0&&y.push(..._.components);return y})();return o.jsxs("div",{className:"relative w-full h-full overflow-hidden bg-gray-50",children:[o.jsx("div",{className:"absolute bottom-4 right-4 z-10 flex gap-2",children:o.jsx("button",{onClick:()=>h(!p),className:`p-3 rounded-lg shadow-lg transition-colors ${p?"bg-red-500 text-white hover:bg-red-600":"bg-white text-gray-700 hover:bg-gray-50"}`,title:s(p?"canvas.unlockCanvas":"canvas.lockCanvas"),children:p?o.jsx(xd,{className:"w-6 h-6"}):o.jsx(yd,{className:"w-6 h-6"})})}),o.jsx("div",{ref:t,className:`w-full h-full relative ${C&&!p?"cursor-grab":"cursor-default"} ${i?"cursor-grabbing":""}`,onMouseDown:m,onMouseMove:k,onMouseUp:D,onMouseLeave:D,onTouchStart:he,onTouchMove:S,onTouchEnd:K,children:o.jsxs("div",{className:"absolute inset-0 origin-top-left",style:{transform:`translate(${l.x}px, ${l.y}px) scale(${l.scale})`,transformOrigin:"0 0"},children:[o.jsx("div",{className:"absolute",style:{left:-1e4,top:-1e4,width:2e4,height:2e4,backgroundImage:`
                linear-gradient(to right, #e5e7eb 1px, transparent 1px),
                linear-gradient(to bottom, #e5e7eb 1px, transparent 1px)
              `,backgroundSize:"50px 50px"}}),o.jsxs("div",{className:"relative","data-canvas-content":!0,children:[ue.map(T=>o.jsx(Mm,{component:T,scale:l.scale,isLocked:p},T.GUID)),e]})]})})]})},Ss=({content:e})=>{const{openMedBoxModal:t,openAddMedBoxModal:n,openListDrawModal:r,openGridDrawModal:s,openAddShelfDrawContainerModal:l,openAddSubContainerModal:a,openAddStoreItemModal:i,setSelectedMedBox:c,setModalMode:p,setMedBoxModalOpen:h,showNotification:g,triggerRefresh:x}=Ke(),{t:C}=et(),[j,E]=v.useState(!1),[U,u]=v.useState(""),[d,m]=v.useState(!1),[k,D]=v.useState(e.name);v.useEffect(()=>{D(e.name)},[e.name]);const w=S=>{S.stopPropagation(),u(e.name||""),E(!0)},M=S=>{S.stopPropagation(),E(!1),u("")},G=async S=>{if(S.stopPropagation(),!U.trim()){g("","error");return}if(U===e.name){E(!1);return}m(!0);try{const K=[{GUID:e.GUID,name:U.trim(),MASTER_GUID:e.MASTER_GUID,position:e.gird_position,serverName:e.serverName,serverType:e.serverType}];let oe;if(e.type==="store_shelves"||e.type==="dispensing_shelves")oe=await je.updateMedMapShelf(K);else if(e.type==="sub_container")oe=await je.updateSubSection(K);else{g("","error"),m(!1);return}if(oe.Code===200){const ue=U.trim();e.name=ue,D(ue),g("","success"),E(!1),x()}else g(oe.Result||"","error")}catch(K){console.error(":",K),g("","error")}finally{m(!1)}},Q=S=>{switch(S){case"parent_container":return"bg-pink-100";case"sub_container":return"bg-blue-100";case"dispensing_shelves":case"store_shelves":return"bg-green-100";case"med_box":return"bg-yellow-100";case"grid_draw":case"list_draw":return"bg-violet-100";default:return"bg-gray-100"}},Y=S=>{switch(S){case"parent_container":return"border-pink-200";case"sub_container":return"border-blue-200";case"dispensing_shelves":case"store_shelves":return"border-green-200";case"med_box":return"border-yellow-200";case"grid_draw":case"list_draw":return"border-violet-200";default:return"border-gray-200"}},te=S=>{switch(S){case"parent_container":return"bg-pink-400";case"sub_container":return"bg-blue-400";case"dispensing_shelves":case"store_shelves":return"bg-green-400";case"med_box":return"bg-yellow-400";case"grid_draw":case"list_draw":return"bg-violet-400";default:return"bg-gray-200"}},he=S=>{switch(S){case"parent_container":return C("type.parentContainer");case"sub_container":return C("type.subContainer");case"dispensing_shelves":return C("type.medBoxShelf");case"store_shelves":return C("type.storeShelf");case"grid_draw":return C("type.gridDraw");case"list_draw":return C("type.listDraw");case"med_box":return C("type.medBox");default:return S}};switch(e.type){case"sub_container":return o.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${Q(e.type||0)} ${Y(e.type||0)}`,children:[o.jsxs("div",{className:"flex items-center space-x-2 mr-6 flex-1",children:[j?o.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[o.jsx("input",{type:"text",value:U,onChange:S=>u(S.target.value),onClick:S=>S.stopPropagation(),className:"text-base font-semibold text-gray-800 border-2 border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:d,autoFocus:!0}),o.jsx("button",{onClick:G,disabled:d,className:"p-1 hover:bg-green-100 rounded transition-colors disabled:opacity-50",title:"",children:o.jsx(Ko,{className:"w-5 h-5 text-green-600"})}),o.jsx("button",{onClick:M,disabled:d,className:"p-1 hover:bg-red-100 rounded transition-colors disabled:opacity-50",title:"",children:o.jsx(ut,{className:"w-5 h-5 text-red-600"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-base font-semibold text-gray-800 whitespace-nowrap",children:k}),o.jsx("button",{onClick:w,className:"p-1 hover:bg-black/10 rounded transition-colors",title:"",children:o.jsx(Qo,{className:"w-4 h-4 text-gray-600"})})]}),e.type!="parent_container"&&!j&&o.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${te(e.type)}`,children:he(e.type)})]}),e.type!=="none"&&!j&&o.jsx("div",{className:"flex items-center space-x-1",children:o.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:S=>{S.stopPropagation(),l(e)},title:C("modal.add"),children:o.jsx(xt,{className:"w-6 h-6 text-green-700"})})})]});case"parent_container":return o.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${Q(e.type||0)} ${Y(e.type||0)}`,children:[o.jsxs("div",{className:"flex items-center space-x-2 mr-6",children:[o.jsx("span",{className:"text-base font-semibold text-gray-800 whitespace-nowrap",children:e.name}),e.type!="parent_container"?o.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${te(e.type)}`,children:he(e.type)}):null]}),e.type!=="none"&&o.jsx("div",{className:"flex items-center space-x-1",children:o.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:S=>{S.stopPropagation(),a(e)},title:C("modal.add"),children:o.jsx(xt,{className:"w-6 h-6 text-green-700"})})})]});case"med_box":return o.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${Q(e.type||0)} ${Y(e.type||0)}`,children:[o.jsx("div",{className:"flex items-center mr-4",children:e.type!="parent_container"?o.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${te(e.type)}`,children:he(e.type)}):null}),o.jsx("div",{className:"flex items-center space-x-1",children:o.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:S=>{S.stopPropagation(),t(e)},title:C("modal.settings"),children:o.jsx(tn,{className:"w-6 h-6 text-gray-600"})})})]});case"dispensing_shelves":return o.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${Q(e.type||0)} ${Y(e.type||0)}`,children:[o.jsxs("div",{className:"flex items-center space-x-2 mr-6 flex-1",children:[j?o.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[o.jsx("input",{type:"text",value:U,onChange:S=>u(S.target.value),onClick:S=>S.stopPropagation(),className:"text-base font-semibold text-gray-800 border-2 border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:d,autoFocus:!0}),o.jsx("button",{onClick:G,disabled:d,className:"p-1 hover:bg-green-100 rounded transition-colors disabled:opacity-50",title:"",children:o.jsx(Ko,{className:"w-5 h-5 text-green-600"})}),o.jsx("button",{onClick:M,disabled:d,className:"p-1 hover:bg-red-100 rounded transition-colors disabled:opacity-50",title:"",children:o.jsx(ut,{className:"w-5 h-5 text-red-600"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-base font-semibold text-gray-800 whitespace-nowrap",children:k}),o.jsx("button",{onClick:w,className:"p-1 hover:bg-black/10 rounded transition-colors",title:"",children:o.jsx(Qo,{className:"w-4 h-4 text-gray-600"})})]}),e.type!="parent_container"&&!j&&o.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${te(e.type)}`,children:he(e.type)})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:S=>{S.stopPropagation();const K={GUID:`new_medbox_${Date.now()}`,name:"",box_type:"",width:[],width_index:0,med_info:[],parentShelf:e};c(K),p("add"),h(!0)},title:C("modal.add"),children:o.jsx(xt,{className:"w-6 h-6 text-green-700"})}),o.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:S=>{},title:C("modal.settings"),children:o.jsx(tn,{className:"w-6 h-6 text-gray-600"})})]})]});case"store_shelves":return o.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${Q(e.type||0)} ${Y(e.type||0)}`,children:[o.jsxs("div",{className:"flex items-center space-x-2 mr-6 flex-1",children:[j?o.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[o.jsx("input",{type:"text",value:U,onChange:S=>u(S.target.value),onClick:S=>S.stopPropagation(),className:"text-base font-semibold text-gray-800 border-2 border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:d,autoFocus:!0}),o.jsx("button",{onClick:G,disabled:d,className:"p-1 hover:bg-green-100 rounded transition-colors disabled:opacity-50",title:"",children:o.jsx(Ko,{className:"w-5 h-5 text-green-600"})}),o.jsx("button",{onClick:M,disabled:d,className:"p-1 hover:bg-red-100 rounded transition-colors disabled:opacity-50",title:"",children:o.jsx(ut,{className:"w-5 h-5 text-red-600"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-base font-semibold text-gray-800 whitespace-nowrap",children:k}),o.jsx("button",{onClick:w,className:"p-1 hover:bg-black/10 rounded transition-colors",title:"",children:o.jsx(Qo,{className:"w-4 h-4 text-gray-600"})})]}),e.type!="parent_container"&&!j&&o.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${te(e.type)}`,children:he(e.type)})]}),o.jsx("div",{className:"flex items-center space-x-1",children:o.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:S=>{S.stopPropagation(),i(e)},title:C("modal.add"),children:o.jsx(xt,{className:"w-6 h-6 text-green-700"})})})]});case"list_draw":return o.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${Q(e.type||0)} ${Y(e.type||0)}`,children:[o.jsxs("div",{className:"flex items-center space-x-2 mr-6",children:[o.jsx("span",{className:"text-base font-semibold text-gray-800 whitespace-nowrap",children:e.name}),e.type!="parent_container"?o.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${te(e.type)}`,children:he(e.type)}):null]}),o.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:S=>{S.stopPropagation(),r(e)},title:C("modal.settings"),children:o.jsx(tn,{className:"w-6 h-6 text-gray-600"})})]});case"grid_draw":return o.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${Q(e.type||0)} ${Y(e.type||0)}`,children:[o.jsxs("div",{className:"flex items-center space-x-2 mr-6",children:[o.jsx("span",{className:"text-base font-semibold text-gray-800 whitespace-nowrap",children:e.name}),e.type!="parent_container"?o.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${te(e.type)}`,children:he(e.type)}):null]}),o.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:S=>{S.stopPropagation(),s(e)},title:C("modal.settings"),children:o.jsx(tn,{className:"w-6 h-6 text-gray-600"})})]});default:return o.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${Q(e.type||0)} ${Y(e.type||0)}`,children:[o.jsx("div",{className:"flex items-center space-x-2 mr-6",children:e.type!="parent_container"?o.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${te(e.type)}`,children:he(e.type)}):null}),e.type!=="none"&&o.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",title:C("modal.settings"),children:o.jsx(tn,{className:"w-6 h-6 text-gray-600"})})]})}},Em=({children:e})=>{const t=v.useRef(null),{selectedDepartmentType:n,apiDepartmentData:r,setSidebarOpen:s,openAddParentContainerModal:l,openEditStoreItemModal:a}=Ke(),[i,c]=v.useState({x:0,y:0,scale:1}),[p,h]=v.useState(!1),[g,x]=v.useState(!1),[C,j]=v.useState({x:0,y:0}),[E,U]=v.useState(!1),[u,d]=v.useState({isDragging:!1,draggedContainer:null,draggedElement:null,floatingElement:null,originalParent:null,originalPosition:"",originalIndex:-1,mouseOffset:{x:0,y:0},isMobileDrag:!1,originalData:null}),[m,k]=v.useState(null),D=v.useRef({}),w=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,M=8,G=()=>{try{const f=localStorage.getItem("med_map_anchor");return f?JSON.parse(f):[]}catch(f){return console.error("Error reading canvas states from localStorage:",f),[]}},Q=(f,A,b,N)=>{try{const I=G(),L=I.findIndex(X=>X.department===f&&X.canvasType===A),J={department:f,canvasType:A,scale:b,position:N};L>=0?I[L]=J:I.push(J),localStorage.setItem("med_map_anchor",JSON.stringify(I))}catch(I){console.error("Error saving canvas state to localStorage:",I)}},Y=(f,A)=>G().find(N=>N.department===f&&N.canvasType===A)||null;v.useEffect(()=>{if(n){const f=Y(n,"drugCanvas");if(f)c({x:f.position.x,y:f.position.y,scale:f.scale});else{const A={x:0,y:0,scale:1};c(A),Q(n,"drugCanvas",A.scale,A)}}},[n]),v.useEffect(()=>{if(!n)return;const f=setTimeout(()=>{Q(n,"drugCanvas",i.scale,{x:i.x,y:i.y})},500);return()=>clearTimeout(f)},[i,n]);const te=f=>["parent_container","sub_container","dispensing_shelves","store_shelves","grid_draw","list_draw","med_box"].includes(f),he=f=>({parent_container:["parent_container","",""],sub_container:["parent_container","sub_container"],dispensing_shelves:["dispensing_shelves","store_shelves","sub_container"],store_shelves:["dispensing_shelves","store_shelves","sub_container"],grid_draw:["grid_draw","list_draw","sub_container"],list_draw:["grid_draw","list_draw","sub_container"],med_box:["med_box","dispensing_shelves"]})[f]||[],S=f=>{const[A,b]=f.split(",").map(Number);return{row:A||0,col:b||0}},K=(f,A)=>`${f},${A}`,oe=(f,A)=>{const b=(I,L=null)=>{if(I.GUID===f)return{container:I,parent:L};if(I.contents)for(const J of I.contents){const X=b(J,I);if(X)return X}return null},N=lt();for(const I of N){const L=b(I);if(L)return L}return null},ue=(f,A)=>{if(!f.contents)return;const{sortedContents:b,maxRow:N,maxCol:I}=F(f.contents),L=A;if(!L)return;const J=S(L.gird_position);console.log(N),console.log(I),console.log(L),console.log(J);for(let X=0;X<b.length;X++){const H=b[X],$=S(H.gird_position);if($.row===J.row&&$.col>J.col)H.gird_position=K($.row,$.col-1),D.current[H.GUID]={GUID:H.GUID,MASTER_GUID:f.GUID,position:`${$.row},${$.col-1}`,serverName:f.serverName,serverType:f.serverType,type:H.type};else if($.row>J.row){const se=$.col===0?I:$.col-1,re=$.col===0?$.row-1:$.row;H.gird_position=K(re,se),D.current[H.GUID]={GUID:H.GUID,MASTER_GUID:f.GUID,position:`${re},${se}`,serverName:f.serverName,serverType:f.serverType,type:H.type}}}return console.log("",b),b},T=(f,A,b,N,I)=>{f.contents||(f.contents=[]);let L=Math.max(1,...f.contents.map(H=>S(H.gird_position||"0,0").col+1)),J=Math.max(1,...f.contents.map(H=>S(H.gird_position||"0,0").row+1));console.log("--------",f),console.log("",L),console.log("",J),(f.type=="sub_container"||f.type=="parent_container"||f.type==""||f.type=="")&&(L=+f.oriMaxCol+1),I!=null&&I==="right"&&A.type!=="med_box"&&N==L&&(b=b+1,f.contents.filter($=>`${b},0`==$.gird_position).length>0?N=L-1:N=0),console.log(b),console.log(N);const X=f.contents.filter(H=>{const $=S(H.gird_position||"0,0");return $.row>b||$.row===b&&$.col>=N});X.sort((H,$)=>{const se=S(H.gird_position||"0,0"),re=S($.gird_position||"0,0");return se.row!==re.row?re.row-se.row:re.col-se.col}),console.log("",X),X.forEach(H=>{const $=S(H.gird_position||"0,0");let se=$.row,re=$.col;H.type==="med_box"||re<L-1?re+=1:(se+=1,re=0),H.gird_position=`${se},${re}`,D.current[H.GUID]={GUID:H.GUID,MASTER_GUID:f.GUID,position:`${se},${re}`,serverName:f.serverName,serverType:f.serverType,type:H.type},console.log(`Shifted container ${H.GUID} from ${$.row},${$.col} to ${se},${re}`)}),f.contents.length==0&&(b=0,N=0),A.gird_position=`${b},${N}`,A.MASTER_GUID=f.GUID,console.log(`Inserted container ${A.GUID} at position ${b},${N}`),f.contents.push(A),D.current[A.GUID]={GUID:A.GUID,MASTER_GUID:f.GUID,position:`${b},${N}`,serverName:f.serverName,serverType:f.serverType,type:A.type},A.type==="dispensing_shelves"&&A.contents&&A.contents.forEach(H=>{H.type==="med_box"&&(D.current[H.GUID]={GUID:H.GUID,MASTER_GUID:H.MASTER_GUID,position:H.gird_position,serverName:f.serverName,serverType:f.serverType,type:H.type})})},y=(f,A,b)=>{const N=f.getBoundingClientRect(),I=N.left+N.width/2,L=N.top+N.height/2,J=A-I,X=b-L;return Math.abs(J)>Math.abs(X)?J>0?"right":"left":X>0?"bottom":"top"},_=(f,A,b)=>{if(!g||!te(f.type))return;D.current={},b.preventDefault(),b.stopPropagation();const N=w(),I="touches"in b?b.touches[0].clientX:("pointerId"in b,b.clientX),L="touches"in b?b.touches[0].clientY:("pointerId"in b,b.clientY),J=A.getBoundingClientRect(),X={x:I-J.left,y:L-J.top},H=oe(f.GUID);if(!H)return;console.log("",f),console.log("",H);const $=A.cloneNode(!0);if($.style.position="fixed",$.style.left=`${I-X.x}px`,$.style.top=`${L-X.y}px`,$.style.width=`${J.width}px`,$.style.height=`${J.height}px`,$.style.zIndex="9999",$.style.opacity="0.8",$.style.boxShadow="0 10px 25px rgba(0,0,0,0.3)",$.style.pointerEvents="none",document.body.appendChild($),N){const se=H.parent.contents.findIndex(re=>re.GUID===f.GUID);d({isDragging:!0,draggedContainer:f,draggedElement:A,floatingElement:$,originalParent:H.parent,originalPosition:f.gird_position,originalIndex:se,mouseOffset:X,isMobileDrag:!0,originalData:JSON.parse(JSON.stringify(H))})}else{const se=H.parent.contents.findIndex(be=>be.GUID===f.GUID);H.parent.contents.splice(se,1),console.log(se);const re=H.parent,we=ue(H.parent,f);H.parent.contents=we,console.log(H.parent),d({isDragging:!0,draggedContainer:f,draggedElement:A,floatingElement:$,originalParent:re,originalPosition:f.gird_position,originalIndex:se,mouseOffset:X,isMobileDrag:!1,originalData:null})}},O=f=>{if(!u.isDragging||!u.floatingElement)return;const A="touches"in f?f.touches[0].clientX:f.clientX,b="touches"in f?f.touches[0].clientY:f.clientY;u.floatingElement.style.left=`${A-u.mouseOffset.x}px`,u.floatingElement.style.top=`${b-u.mouseOffset.y}px`;const N=document.elementFromPoint(A,b),I=N==null?void 0:N.closest("[data-container-guid]");if(I){const L=I.getAttribute("data-container-guid"),J=oe(L);if(J&&he(u.draggedContainer.type).includes(J.container.type)){const H=y(I,A,b);if(u.draggedContainer.type==="med_box"&&!["left","right"].includes(H)){k(null);return}k({container:J.container,direction:H,element:I});return}}k(null)},R=async f=>{if(!u.isDragging)return;u.floatingElement&&document.body.removeChild(u.floatingElement);let A=null,b=null,N=null;if(console.log("Drop Target:",m),console.log("Is Mobile Drag:",u.isMobileDrag),u.isMobileDrag)if(m){A=m.direction,N=m.container;const I=oe(u.draggedContainer.GUID);if(I){const se=I.parent.contents.findIndex(we=>we.GUID===u.draggedContainer.GUID);I.parent.contents.splice(se,1);const re=ue(I.parent,u.draggedContainer);I.parent.contents=re}const L=S(m.container.gird_position||"0,0");let J=L.row,X=L.col;switch(m.direction){case"top":J=Math.max(0,L.row);break;case"bottom":J=L.row+1;break;case"left":X=Math.max(0,L.col);break;case"right":X=L.col+1;break}const H=oe(m.container.MASTER_GUID||m.container.GUID);let $=(H==null?void 0:H.container)||m.container;if(u.draggedContainer.class!=m.class&&($=m),u.draggedContainer.type==="med_box"&&m.container.type!=="med_box")if(console.log(""),$=m.container,$.contents.length>0){let se=0,re=0;$.contents.forEach(we=>{const be=S(we.gird_position||"0,0").row,Ot=S(we.gird_position||"0,0").col;se>be&&(se=be),re>Ot&&(re=Ot)});for(let we=0;we<=re;we++)for(let be=0;be<=se;be++){const Ot=`${we},${be}`;$.contents.filter(mr=>mr.grid_position===Ot).length===0&&(J=we,X=be)}}else J=0,X=0;b=$,T($,u.draggedContainer,J,X,m.direction)}else A=null,N=null,b=u.originalParent;else if(m){A=m.direction,N=m.container;const I=S(m.container.gird_position||"0,0");let L=I.row,J=I.col;switch(m.direction){case"top":L=Math.max(0,I.row);break;case"bottom":L=I.row+1;break;case"left":J=Math.max(0,I.col);break;case"right":J=I.col+1;break}const X=oe(m.container.MASTER_GUID||m.container.GUID);console.log("------",m),console.log("------",u.draggedContainer);let H=(X==null?void 0:X.container)||m.container;if(console.log(u.draggedContainer.class),console.log(m.container.class),console.log(u.draggedContainer.class!=m.container.class),u.draggedContainer.class!=m.container.class&&(H=m.container,console.log("------"),console.log("------",m),console.log("------",u.draggedContainer),console.log("------",H)),u.draggedContainer.type==="med_box"&&m.container.type!=="med_box")if(console.log(""),H=m.container,H.contents.length>0){let $=0,se=0;H.contents.forEach(re=>{const we=S(re.gird_position||"0,0").row,be=S(re.gird_position||"0,0").col;$>we&&($=we),se>be&&(se=be)});for(let re=0;re<=se;re++)for(let we=0;we<=$;we++){const be=`${re},${we}`;H.contents.filter(In=>In.grid_position===be).length===0&&(L=re,J=we)}}else L=0,J=0;b=H,T(H,u.draggedContainer,L,J,m.direction)}else{A=null,N=null,b=u.originalParent,u.draggedContainer.gird_position=u.originalPosition;const I=S(u.originalPosition||"0,0").row,L=S(u.originalPosition||"0,0").col;T(u.originalParent,u.draggedContainer,I,L,null)}d({isDragging:!1,draggedContainer:null,draggedElement:null,floatingElement:null,originalParent:null,originalPosition:"",originalIndex:-1,mouseOffset:{x:0,y:0},isMobileDrag:!1,originalData:null}),k(null),console.log("Drop Direction:",A),console.log("Parent Object:",b),console.log("Target Object:",N),console.log("API",D),await Pm(D)};v.useEffect(()=>{if(u.isDragging)if(w()){const A=I=>{I.preventDefault(),O(I)},b=I=>R(),N=I=>R();return document.addEventListener("pointermove",A,{passive:!1}),document.addEventListener("pointerup",b),document.addEventListener("pointercancel",N),()=>{document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",b),document.removeEventListener("pointercancel",N)}}else{const A=L=>O(L),b=L=>R(),N=L=>{L.preventDefault(),O(L)},I=L=>R();return document.addEventListener("mousemove",A),document.addEventListener("mouseup",b),document.addEventListener("touchmove",N,{passive:!1}),document.addEventListener("touchend",I),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",b),document.removeEventListener("touchmove",N),document.removeEventListener("touchend",I)}}},[u.isDragging,m]),v.useEffect(()=>{const f=b=>{b.code==="Space"&&!b.repeat&&(b.preventDefault(),U(!0))},A=b=>{b.code==="Space"&&(b.preventDefault(),U(!1),h(!1))};return window.addEventListener("keydown",f),window.addEventListener("keyup",A),()=>{window.removeEventListener("keydown",f),window.removeEventListener("keyup",A)}},[]);const z=v.useCallback(f=>{var b;if(g)return;if(f.ctrlKey||f.metaKey){f.preventDefault();const N=(b=t.current)==null?void 0:b.getBoundingClientRect();if(!N)return;const I=f.clientX-N.left,L=f.clientY-N.top,J=f.deltaY>0?.9:1.1,X=Math.max(.1,Math.min(5,i.scale*J)),H=X/i.scale,$=I-(I-i.x)*H,se=L-(L-i.y)*H;c({x:$,y:se,scale:X})}},[i,g]),q=v.useCallback(f=>{g||!E||(h(!0),j({x:f.clientX,y:f.clientY}),f.preventDefault())},[g,E]),ee=v.useCallback(f=>{if(!p||g)return;const A=f.clientX-C.x,b=f.clientY-C.y;c(N=>({...N,x:N.x+A,y:N.y+b})),j({x:f.clientX,y:f.clientY})},[p,C,g]),ie=v.useCallback(()=>{h(!1)},[]),[P,le]=v.useState(null),[ge,B]=v.useState({x:0,y:0}),V=f=>{if(f.length<2)return null;const A=f[0],b=f[1];return Math.sqrt(Math.pow(b.clientX-A.clientX,2)+Math.pow(b.clientY-A.clientY,2))},pe=f=>{if(f.length===1)return{x:f[0].clientX,y:f[0].clientY};const A=f[0],b=f[1];return{x:(A.clientX+b.clientX)/2,y:(A.clientY+b.clientY)/2}},me=v.useCallback(f=>{if(!g){if(f.touches.length===2){const A=V(f.touches),b=pe(f.touches);le(A),B(b)}else if(f.touches.length===1){const A=f.touches[0];j({x:A.clientX,y:A.clientY}),h(!0)}}},[g]),ke=v.useCallback(f=>{var A;if(!g){if(f.preventDefault(),f.touches.length===2&&P!==null){const b=V(f.touches),N=pe(f.touches);if(b&&P){const I=(A=t.current)==null?void 0:A.getBoundingClientRect();if(!I)return;const L=b/P,J=Math.max(.1,Math.min(5,i.scale*L)),X=N.x-I.left,H=N.y-I.top,$=J/i.scale,se=X-(X-i.x)*$,re=H-(H-i.y)*$;c({x:se,y:re,scale:J}),le(b),B(N)}}else if(f.touches.length===1&&p){const b=f.touches[0],N=b.clientX-C.x,I=b.clientY-C.y;c(L=>({...L,x:L.x+N,y:L.y+I})),j({x:b.clientX,y:b.clientY})}}},[i,P,p,C,g]),Se=v.useCallback(()=>{le(null),h(!1)},[]);v.useEffect(()=>{const f=t.current;if(f)return f.addEventListener("wheel",z,{passive:!1}),()=>f.removeEventListener("wheel",z)},[z]);const lt=()=>!r||r.length===0?[]:r,F=f=>{if(!f||f.length===0)return{sortedContents:[],maxRow:0,maxCol:0};const A=f.map(L=>({...L,gridPos:S(L.gird_position||"0,0")})),b=Math.max(...A.map(L=>L.gridPos.row),0),N=Math.max(...A.map(L=>L.gridPos.col),0);return{sortedContents:A.sort((L,J)=>L.gridPos.row!==J.gridPos.row?L.gridPos.row-J.gridPos.row:L.gridPos.col-J.gridPos.col),maxRow:b,maxCol:N}},Z=lt(),ce=Math.max(...Z.map(f=>S(f.gird_position||"0,0").row),0),fe=Math.max(...Z.map(f=>S(f.gird_position||"0,0").col),0),ae=f=>{const A=N=>{if(N.width&&Array.isArray(N.width)&&typeof N.width_index=="number"&&N.width_index>=0&&N.width_index<N.width.length){const L=parseFloat(N.width[N.width_index]);if(!isNaN(L)){const J=L*20;return Math.max(168,J)}}return 168},b=N=>{switch(N){case"parent_container":return"bg-pink-50 border-pink-300";case"sub_container":return"bg-blue-50 border-blue-300";case"dispensing_shelves":case"store_shelves":return"bg-green-50 border-green-300";case"med_box":return"bg-yellow-50 border-yellow-300";case"grid_draw":case"list_draw":return"bg-violet-50 border-violet-300";default:return"bg-gray-50 border-gray-300"}};switch(f.type){case"med_box":return A(f),o.jsxs("div",{"data-container-guid":f.GUID,className:`${f.type!=="sub_container"?"border-2 rounded-lg shadow-sm":""} ${b(f.type||0)} min-h-[80px] flex flex-col flex-shrink-0 h-full overflow-hidden`,children:[o.jsx("div",{onMouseDown:g&&te(f.type)&&!w()?N=>_(f,N.currentTarget.closest("[data-container-guid]"),N):void 0,onTouchStart:g&&te(f.type)&&!w()?N=>_(f,N.currentTarget.closest("[data-container-guid]"),N):void 0,onPointerDown:g&&te(f.type)&&w()?N=>_(f,N.currentTarget.closest("[data-container-guid]"),N):void 0,className:g&&te(f.type)?"cursor-move":"",children:o.jsx(Ss,{content:f})}),o.jsx("div",{className:"flex-1 p-1",children:de(f)})]},f.GUID);case"sub_container":case"parent_container":return o.jsxs("div",{"data-container-guid":f.GUID,className:`${b(f.type||0)} border-2 overflow-hidden rounded-lg shadow-sm min-h-[80px] flex flex-col h-full`,children:[o.jsx("div",{onMouseDown:g&&te(f.type)&&!w()?N=>_(f,N.currentTarget.closest("[data-container-guid]"),N):void 0,onTouchStart:g&&te(f.type)&&!w()?N=>_(f,N.currentTarget.closest("[data-container-guid]"),N):void 0,onPointerDown:g&&te(f.type)&&w()?N=>_(f,N.currentTarget.closest("[data-container-guid]"),N):void 0,className:g&&te(f.type)?"cursor-move":"",children:o.jsx(Ss,{content:f})}),o.jsx("div",{className:"flex-1  p-1",children:de(f)})]},f.GUID);case"grid_draw":return o.jsxs("div",{"data-container-guid":f.GUID,className:`${f.type!=="sub_container"?"border-2 rounded-lg shadow-sm":""} ${b(f.type||0)} min-h-[80px] flex flex-col h-full overflow-hidden`,children:[o.jsx("div",{onMouseDown:g&&te(f.type)&&!w()?N=>_(f,N.currentTarget.closest("[data-container-guid]"),N):void 0,onTouchStart:g&&te(f.type)&&!w()?N=>_(f,N.currentTarget.closest("[data-container-guid]"),N):void 0,onPointerDown:g&&te(f.type)&&w()?N=>_(f,N.currentTarget.closest("[data-container-guid]"),N):void 0,className:g&&te(f.type)?"cursor-move":"",children:o.jsx(Ss,{content:f})}),o.jsx("div",{className:"flex-1 p-1 flex items-center",children:de(f)})]},f.GUID);default:return o.jsxs("div",{"data-container-guid":f.GUID,className:`${f.type!=="sub_container"?"border-2 rounded-lg shadow-sm":""} ${b(f.type||0)} min-h-[80px] flex flex-col h-full overflow-hidden ${f.type=="none"?"opacity-0":""}`,children:[o.jsx("div",{onMouseDown:g&&te(f.type)&&!w()?N=>_(f,N.currentTarget.closest("[data-container-guid]"),N):void 0,onTouchStart:g&&te(f.type)&&!w()?N=>_(f,N.currentTarget.closest("[data-container-guid]"),N):void 0,onPointerDown:g&&te(f.type)&&w()?N=>_(f,N.currentTarget.closest("[data-container-guid]"),N):void 0,className:g&&te(f.type)?"cursor-move":"",children:o.jsx(Ss,{content:f})}),o.jsx("div",{className:"flex-1 p-1",children:de(f)})]},f.GUID)}},de=f=>{const A=(b,N,I)=>{const L=Array(N+1).fill(null).map(()=>Array(I+1).fill(!1)),J={};return b.forEach(X=>{const H=S(X.gird_position||"0,0");J[`${H.row},${H.col}`]=X,L[H.row][H.col]=!0}),o.jsx("table",{className:"w-full h-full",style:{borderCollapse:"none",borderSpacing:"0px"},children:o.jsx("tbody",{children:Array.from({length:N+1},(X,H)=>o.jsx("tr",{className:"h-full",style:{height:`${100/(N+1)}%`,minHeight:"80px"},children:Array.from({length:I+1},($,se)=>{const re=`${H},${se}`,we=J[re];return we?o.jsxs("td",{className:"align-top bg-transparent",style:{width:`${100/(I+1)}%`,height:`${100/(N+1)}%`,minHeight:"80px",border:"none",position:"relative"},children:[ae(we),(m==null?void 0:m.container.GUID)===we.GUID&&o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:`absolute bg-blue-400 opacity-50 ${m.direction==="top"?"top-0 left-0 right-0 h-1":m.direction==="bottom"?"bottom-0 left-0 right-0 h-1":m.direction==="left"?"left-0 top-0 bottom-0 w-1":"right-0 top-0 bottom-0 w-1"}`})})]},se):o.jsx("td",{className:"p-1 align-top bg-transparent",style:{width:`${100/(I+1)}%`,height:`${100/(N+1)}%`,minHeight:"80px",border:"none"},children:o.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm",children:""})},se)})},H))})})};switch(f.type){case"parent_container":case"sub_container":if(f.contents&&f.contents.length>0){const{sortedContents:$,maxRow:se,maxCol:re}=F(f.contents);return A($,se,re)}else return o.jsx("table",{className:"bg-transparent w-full h-full",style:{borderCollapse:"separate",borderSpacing:"1px"},children:o.jsx("tbody",{children:o.jsx("tr",{})})});case"dispensing_shelves":if(f.contents&&f.contents.length>0){const{sortedContents:$,maxRow:se,maxCol:re}=F(f.contents);return A($,se,re)}else return o.jsx("table",{className:"bg-transparent w-full h-full",style:{borderCollapse:"separate",borderSpacing:"0px"},children:o.jsx("tbody",{children:o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center text-gray-500 bg-transparent",children:o.jsx("div",{className:"text-base",children:""})})})})});case"store_shelves":if(f.medMapStock&&f.medMapStock.length>0){const $=f.medMapStock,se=$.length,re=se>0?100/se:100,we=f.width?f.width*5:500;return o.jsx("div",{className:"flex h-full",style:{minWidth:`${we}px`},children:$.map((be,Ot)=>{const[In,mr]=be.location.split(",").map(Number);return o.jsxs("div",{className:"border-r border-gray-300 last:border-r-0 p-2 flex flex-col justify-center items-center cursor-pointer hover:bg-blue-50 transition-colors",style:{width:`${re}%`},onClick:()=>a(f,be),children:[o.jsx("div",{className:"text-sm font-semibold text-gray-800 truncate w-full text-center",children:be.code||be.material_no}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[": ",be.qty||0]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[": ",In,"-",mr]})]},be.GUID||Ot)})})}else if(f.contents&&f.contents.length>0){const{sortedContents:$,maxRow:se,maxCol:re}=F(f.contents);return A($,se,re)}else return o.jsx("table",{className:"bg-transparent w-full h-full",style:{borderCollapse:"separate",borderSpacing:"0px"},children:o.jsx("tbody",{children:o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center text-gray-500 bg-transparent",children:o.jsx("div",{className:"text-base",children:""})})})})});case"none":if(f.contents&&f.contents.length>0){const{sortedContents:$,maxRow:se,maxCol:re}=F(f.contents);return A($,se,re)}else return o.jsx("table",{className:"bg-transparent w-full h-full",style:{borderCollapse:"separate",borderSpacing:"0px"},children:o.jsx("tbody",{children:o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center text-gray-500 bg-transparent",children:o.jsx("div",{className:"text-base",children:""})})})})});case"grid_draw":const b=Math.max(...f.Boxes.flat().map($=>+$.Row+ +$.Height-1)),N=Math.max(...f.Boxes.flat().map($=>+$.Column+ +$.Width-1)),I=b+1,L=N+1,J=f.Boxes.flat(),X=Array(I).fill(null).map(()=>Array(L).fill(!1)),H={};return J.forEach($=>{$.Slave||(H[`${$.Row},${$.Column}`]=$)}),J.forEach($=>{if(!$.Slave&&($.Width>1||$.Height>1))for(let se=$.Row;se<$.Row+$.Height;se++)for(let re=$.Column;re<$.Column+$.Width;re++)(se!==$.Row||re!==$.Column)&&(X[se][re]=!0)}),o.jsxs("div",{className:"bg-violet-100 h-20 flex ml-2 mt-2 mb-6 rounded-xl border-2 border-violet-400 w-[140px] items-center justify-center",children:[o.jsx("div",{className:"h-[60%] bg-violet-400 w-[3%] rounded-xl"}),o.jsx("div",{className:"h-[80%] border-2 border-violet-400 w-[82%] mx-1",children:o.jsx("div",{className:"flex items-center justify-center text-base text-violet-400 h-[100%]"})}),o.jsx("div",{className:"h-[60%] bg-violet-400 w-[3%]"})]});case"list_draw":return o.jsxs("div",{className:"bg-violet-100 h-20 flex ml-2 mt-2 mb-6 rounded-xl border-2 border-violet-400 w-[140px] items-center justify-center",children:[o.jsx("div",{className:"h-[60%] bg-violet-400 w-[3%] rounded-xl"}),o.jsx("div",{className:"h-[80%] border-2 border-violet-400 w-[82%] mx-1",children:o.jsx("div",{className:"flex items-center justify-center text-base text-violet-400 h-[100%]"})}),o.jsx("div",{className:"h-[60%] bg-violet-400 w-[3%]"})]});case"med_box":return f.med_info&&f.med_info.length>0?o.jsxs("div",{className:"text-base text-center min-h-[40px] flex items-center justify-center flex-col",children:[o.jsx("div",{className:"w-full text-gray-700 font-semibold text-left px-1",children:f.name}),o.jsx("div",{className:"text-gray-700",children:f.med_info[0].code}),o.jsxs("div",{className:"text-gray-700 w-full flex justify-between px-1",children:[o.jsxs("div",{children:[f.box_type,""]}),o.jsxs("div",{children:[f.width[f.width_index],"cm"]})]})]}):o.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:o.jsx("div",{className:"text-base",children:""})});default:return f.contents&&f.contents.length>0?o.jsx("div",{className:"space-y-2",children:f.contents.map($=>ae($))}):o.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:o.jsxs("div",{className:"text-base",children:[": ",f.type]})})}},ye=f=>{if(S(f.gird_position||"0,0"),f.type!==""&&f.type!=="")return null;const A=b=>{if(!b||b.length===0)return o.jsx("table",{className:"w-full h-full border-none",children:o.jsx("tbody",{children:o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center text-gray-500",children:o.jsx("div",{className:"text-center",children:o.jsx("div",{className:"text-base",children:""})})})})})});const{sortedContents:N,maxRow:I,maxCol:L}=F(b),J=Array(I+1).fill(null).map(()=>Array(L+1).fill(!1)),X={};return N.forEach(H=>{const $=S(H.gird_position||"0,0");X[`${$.row},${$.col}`]=H,J[$.row][$.col]=!0}),o.jsx("table",{className:"w-full h-full",style:{borderCollapse:"none",borderSpacing:"0px"},children:o.jsx("tbody",{children:Array.from({length:I+1},(H,$)=>o.jsx("tr",{className:"h-full",children:Array.from({length:L+1},(se,re)=>{const we=`${$},${re}`,be=X[we];return be?o.jsx("td",{className:"p-1 align-top bg-transparent",style:{width:`${100/(L+1)}%`,height:`${100/(I+1)}%`,minHeight:"120px",border:"none"},children:ae(be)},re):o.jsx("td",{className:"p-1 align-top bg-transparent",style:{width:`${100/(L+1)}%`,height:`${100/(I+1)}%`,minHeight:"120px",border:"1px dashed #e5e7eb"},children:o.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm",children:""})},re)})},$))})})};return o.jsxs("div",{"data-container-guid":f.GUID,className:"border-2 rounded-lg shadow-lg bg-orange-50 border-orange-300 min-h-[120px] flex flex-col overflow-hidden w-full h-full",children:[o.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b-2 bg-orange-100 border-b-orange-200",children:[o.jsx("div",{className:"flex items-center space-x-2",children:o.jsx("span",{className:"text-lg font-semibold text-gray-800",children:f.name})}),o.jsx("div",{className:"flex items-center space-x-1",children:o.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:b=>{b.stopPropagation(),console.log(" "),console.log(" :",f),f?(console.log("  openAddParentContainerModal"),l(f)):console.warn(" ")},title:"",children:o.jsx(xt,{className:"w-6 h-6 text-green-700"})})})]}),o.jsx("div",{className:`flex-1 bg-orange-50 ${(m==null?void 0:m.container.GUID)===f.GUID?"ring-2 ring-blue-400 ring-inset":""}`,children:A(f.contents||[])})]},f.GUID)};return o.jsxs("div",{className:"relative w-full h-full overflow-hidden bg-gray-50",children:[o.jsx("div",{className:"absolute bottom-4 right-4 z-10 flex gap-2",children:o.jsx("button",{onClick:()=>x(!g),className:`rounded-lg shadow-lg p-2 transition-colors ${g?"bg-red-500 text-white hover:bg-red-600":"bg-white text-gray-700 hover:bg-gray-50"}`,title:g?"Unlock Canvas":"Lock Canvas",children:g?o.jsx(xd,{className:"w-6 h-6"}):o.jsx(yd,{className:"w-6 h-6"})})}),o.jsx("div",{ref:t,className:`w-full h-full relative ${E&&!g?"cursor-grab":"cursor-default"} ${p?"cursor-grabbing":""}`,onMouseDown:q,onMouseMove:ee,onMouseUp:ie,onMouseLeave:ie,onTouchStart:me,onTouchMove:ke,onTouchEnd:Se,children:o.jsxs("div",{className:"absolute inset-0 origin-top-left",style:{transform:`translate(${i.x}px, ${i.y}px) scale(${i.scale})`,transformOrigin:"0 0"},children:[o.jsx("div",{className:"relative","data-canvas-content":!0,children:o.jsx("table",{className:"h-full",style:{borderCollapse:"separate",borderSpacing:`${M}px`,minWidth:"fit-content",minHeight:"fit-content"},children:o.jsx("tbody",{children:Array.from({length:ce+1},(f,A)=>o.jsx("tr",{children:Array.from({length:fe+1},(b,N)=>{const I=Z.find(L=>{const J=S(L.gird_position||"0,0");return J.row===A&&J.col===N});return I?o.jsx("td",{className:"align-top",style:{minWidth:"150px",minHeight:"120px",border:"none"},children:ye(I)},N):o.jsx("td",{className:"align-top",style:{minWidth:"150px",minHeight:"120px",border:"none"},children:o.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-base"})},N)})},A))})})}),e]})})]})},Pm=async e=>{if(console.log(e),Object.keys(e.current).length===0){console.log("");return}console.log(" :",e.current);const t=[],n=[],r=[];Object.values(e.current).forEach(l=>{console.log("API REQ",l);const a={GUID:l.GUID,position:l.position,MASTER_GUID:l.MASTER_GUID,serverName:l.serverName,serverType:l.serverType};switch(l.type){case"med_box":t.push(a);break;case"grid_draw":case"list_draw":n.push(a);break;case"dispensing_shelves":case"store_shelves":r.push(a);break;default:console.warn(":",l.type)}});const s=[];if(t.length>0&&(console.log(" :",t),s.push(je.updateMedMapBox(t).then(l=>({type:"med_box",response:l,count:t.length})).catch(l=>({type:"med_box",error:l,count:t.length})))),n.length>0&&(console.log(" :",n),s.push(je.updateMedMapDrawer(n).then(l=>({type:"drawer",response:l,count:n.length})).catch(l=>({type:"drawer",error:l,count:n.length})))),r.length>0&&(console.log(" :",r),s.push(je.updateMedMapShelf(r).then(l=>({type:"shelf",response:l,count:r.length})).catch(l=>({type:"shelf",error:l,count:r.length})))),s.length===0){console.log(" API");return}try{const l=await Promise.all(s);let a=0,i=0;const c=[];l.forEach(p=>{var h,g;if(p.error)i+=p.count,c.push(`${p.type}: ${p.error.message||""}`),console.error(` ${p.type} API :`,p.error);else if(((h=p.response)==null?void 0:h.Code)===200)a+=p.count,console.log(` ${p.type} API :`,p.response);else{i+=p.count;const x=((g=p.response)==null?void 0:g.Result)||"";c.push(`${p.type}: ${x}`),console.error(` ${p.type} API :`,p.response)}})}catch(l){console.error(" :",l)}finally{console.log("")}},Im="modulepreload",Tm=function(e){return"/"+e},Ji={},Rm=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),i=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=Tm(c),c in Ji)return;Ji[c]=!0;const p=c.endsWith(".css"),h=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":Im,p||(g.as="script"),g.crossOrigin="",g.href=c,i&&g.setAttribute("nonce",i),document.head.appendChild(g),p)return new Promise((x,C)=>{g.addEventListener("load",x),g.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return s.then(a=>{for(const i of a||[])i.status==="rejected"&&l(i.reason);return t().catch(l)})},Tt=[{name:"2.13",box_type:"2.13",width:["7.5"],unit:"cm"},{name:"2.9",type:"2.9",width:["10","15","20"],unit:"cm"},{name:"4.2",type:"4.2",width:["11","16"],unit:"cm"}],Am=()=>{const{medBoxModalOpen:e,closeMedBoxModal:t,selectedMedBox:n,selectedDepartmentType:r,setApiDepartmentData:s,setIsLoadingMedMap:l,showNotification:a,triggerRefresh:i,modalMode:c,medicineList:p}=Ke(),{t:h}=et(),[g,x]=v.useState(0),[C,j]=v.useState({}),[E,U]=v.useState(""),[u,d]=v.useState(""),[m,k]=v.useState("N"),[D,w]=v.useState([]),[M,G]=v.useState(!1),[Q,Y]=v.useState(!1),[te,he]=v.useState(null),[S,K]=v.useState(null),[oe,ue]=v.useState(!1);v.useEffect(()=>{if(n&&e)if(c==="add"){x(0);const B={};Tt.forEach((V,pe)=>{B[pe]=0}),j(B),U(""),Y(!1),T()}else{const B=Tt.findIndex(V=>V.box_type===n.box_type||V.type===n.box_type);if(console.log(n),B>=0){x(B);const pe=Tt[B].width.findIndex(ke=>{var Se;return ke===((Se=n.width)==null?void 0:Se[n.width_index||0])}),me={};Tt.forEach((ke,Se)=>{Se===B?me[Se]=pe>=0?pe:0:me[Se]=0}),j(me)}else{x(0);const V={};Tt.forEach((pe,me)=>{V[me]=0}),j(V)}U(n.ip||""),K({box_type:n.box_type,width:n.width,width_index:n.width_index,ip:n.ip||"",storage:n.storage?JSON.parse(JSON.stringify(n.storage)):null})}},[n,e,c]);const T=()=>{n&&n.parentShelf&&he(n.parentShelf)},y=B=>{if(!B||!B.contents||B.contents.length===0)return"0,0";let V=-1,pe=0;return B.contents.forEach(me=>{if(me.gird_position){const[ke,Se]=me.gird_position.split(",").map(Number);Se>V&&(V=Se,pe=ke)}}),`${pe},${V+1}`},_=()=>{if(!S||c!=="edit")return!1;const B=Tt[g],V=C[g]||0,pe=B.box_type||B.type||B.name;return S.box_type!==pe||S.width_index!==V||S.ip!==E||JSON.stringify(S.storage)!==JSON.stringify(n==null?void 0:n.storage)},O=B=>{x(B)},R=(B,V)=>{j(pe=>({...pe,[B]:V}))},z=()=>{n&&(c==="add"?ee():ie())},q=()=>{t()},ee=async()=>{if(!n||!te){a("","error");return}Y(!0);try{const B=Tt[g],V=C[g]||0,pe=B.width[V],me=y(te),ke={Master_GUID:te.GUID,position:me,width:pe.toString(),height:"60",ip_box:E,serverName:te.serverName||"",serverType:te.serverType||""};console.log("  API :",ke);const Se=await je.addMedMapBox(ke);Se.Code===200?(a("","success"),t(),await P()):a(`${Se.Result||""}`,"error")}catch(B){console.error("Add med box failed:",B),a("","error")}finally{Y(!1)}},ie=async()=>{var B;if(!n||!_()){a("","error");return}ue(!0);try{const V=Tt[g],pe=C[g]||0,me=V.width[pe],ke=V.box_type||V.type||V.name,Se=S.box_type!==ke||S.width_index!==pe||S.ip!==E,lt=JSON.stringify(S.storage)!==JSON.stringify(n==null?void 0:n.storage),F=[];if(Se){const fe={GUID:n.GUID,Master_GUID:n.MASTER_GUID,position:n.gird_position,ip_light:E,serverName:n.serverName,serverType:n.serverType};F.push(je.updateMedMapBox([fe]))}lt&&F.push(je.updateEpd266Storages(n.serverName||"",n.serverType||"",[n.storage]));const Z=await Promise.all(F);if(Z.every(fe=>fe.Code===200))a("","success"),t(),await P();else{const fe=Z.filter(ae=>ae.Code!==200);a(`${((B=fe[0])==null?void 0:B.Result)||""}`,"error")}}catch(V){console.error("Update med box failed:",V),a("","error")}finally{ue(!1)}},P=async()=>{if(!r){console.warn(" ");return}console.log(" :",r),l(!0);try{const B=await je.getMedMapByDepartment(r);if(B.Code===200&&B.Data){console.log(" API ");const V=await Rm(()=>Promise.resolve().then(()=>om),void 0),pe=V.default.convertMedMapApiToFakeData(B.Data);if(!V.default.validateConvertedData(pe)){console.error(" "),a("","error");return}s(pe),console.log(" ")}else console.error(" API :",B),a("API ","error")}catch(B){console.error(" :",B),a("","error")}finally{l(!1)}},le=async()=>{G(!0);try{const B=u.toLowerCase().trim();let V=p;B&&(V=V.filter(pe=>{var me,ke,Se;return((me=pe.CODE)==null?void 0:me.toLowerCase().includes(B))||((ke=pe.NAME)==null?void 0:ke.toLowerCase().includes(B))||((Se=pe.CHT_NAME)==null?void 0:Se.toLowerCase().includes(B))})),m!=="N"&&(V=V.filter(pe=>pe.DRUGKIND===m)),w(V)}catch(B){console.error("Search failed:",B),w([])}finally{G(!1)}},ge=async B=>{if(n)try{console.log(" :",B.CODE);const V=await je.updateEpd266Medcode(n.serverName||"",n.serverType||"",B.CODE,n.storage||{});V.Code===200?(console.log(" :",V.Data),n.storage=V.Data,n.med_info=[{name:B.NAME,cht_name:B.CHT_NAME,code:B.CODE}],a("","success"),i()):(console.error(" :",V),a(`${V.Result||""}`,"error"))}catch(V){console.error(" :",V),a("","error")}};return!e||!n?null:o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:q}),o.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh"},onClick:B=>B.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(tn,{className:"w-6 h-6 text-gray-600"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:h(c==="add"?"modal.addMedBox":"modal.medBoxSettings")})]}),o.jsx("button",{onClick:q,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(ut,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"flex-1 px-4 py-2 overflow-y-auto",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"gap-16 flex",children:o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"text-base font-medium text-gray-900",children:h("form.ipAddress")}),o.jsx("div",{className:"flex items-center",children:o.jsx("input",{type:"text",onChange:B=>U(B.target.value),placeholder:(n==null?void 0:n.ip)||(n==null?void 0:n.name)||h("placeholder.ipAddress"),className:"px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors w-64"})})]})}),o.jsxs("div",{className:"flex gap-16",children:[o.jsxs("div",{className:"space-y-1 min-w-[260px]",children:[o.jsx("h3",{className:"text-base font-medium text-gray-900",children:h("form.medBoxType")}),o.jsx("div",{className:"flex gap-4 justify-between",children:Tt.map((B,V)=>o.jsxs("label",{className:`flex items-center px-4 py-2 border-2 rounded-lg cursor-pointer transition-all ${g===V?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[o.jsx("input",{type:"radio",name:"boxType",value:V,checked:g===V,onChange:()=>O(V),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 hidden"}),o.jsx("div",{children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.name})})]},V))})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"text-base font-medium text-gray-900",children:h("form.widthSelection")}),Tt.map((B,V)=>o.jsx("div",{className:`flex gap-4 ${g===V?"block":"hidden"}`,children:B.width.map((pe,me)=>o.jsxs("label",{className:`flex items-center justify-center px-4 py-2 border-2 rounded-lg cursor-pointer transition-all ${g===V&&(C[V]||0)===me?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[o.jsx("input",{type:"radio",name:`width-${V}`,value:me,checked:g===V&&(C[V]||0)===me,onChange:()=>R(V,me),className:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500 hidden"}),o.jsx("div",{className:"text-center",children:o.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[pe," ",B.unit]})})]},`${V}-${me}`))},V))]})]}),o.jsxs("div",{className:"flex gap-6",children:[c==="edit"&&o.jsxs("div",{className:"space-y-2 w-[50%]",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:h("form.drugInfo")}),o.jsx("div",{children:n!=null&&n.med_info&&n.med_info.length>0?o.jsx("div",{children:n.med_info.map((B,V)=>o.jsxs("div",{className:"space-y-2 p-4 border border-gray-200 rounded-lg min-h-[262px] max-h-[262px]",children:[o.jsxs("div",{children:[o.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[h("form.drugCode"),":"]}),o.jsx("div",{className:"text-base text-gray-900 mt-1",children:B.code||h("status.notSet")})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[h("form.drugName"),":"]}),o.jsx("div",{className:"text-base text-gray-900 mt-1",children:B.name||h("status.notSet")})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[h("form.chineseName"),":"]}),o.jsx("div",{className:"text-base text-gray-900 mt-1",children:B.cht_name||h("status.notSet")})]})]},V))}):o.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg py-8 px-4 text-center space-y-4",children:o.jsx("div",{className:"text-gray-500 text-base",children:h("status.noDrugData")})})})]}),c==="add"&&o.jsxs("div",{className:"space-y-2 w-[50%]",children:[o.jsx("h3",{className:"text-base font-medium text-gray-900",children:h("form.drugInfo")}),o.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg py-2 px-4 min-h-[262px] max-h-[262px]",children:o.jsx("div",{className:"text-center py-8 space-y-4",children:o.jsx("div",{className:"text-gray-500 text-base",children:h("status.newMedBoxNoDrug")})})})]}),o.jsxs("div",{className:"space-y-2 w-[50%]",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:h("form.drugSearch")}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"text",value:u,onChange:B=>d(B.target.value),placeholder:h("placeholder.drugSearch"),className:"border rounded px-3 py-1 flex-1 min-w-0 focus:border-blue-500 focus:outline-none transition-colors"}),o.jsxs("select",{value:m,onChange:B=>k(B.target.value),className:"border rounded px-2 py-1 focus:border-blue-500 focus:outline-none transition-colors",title:"",children:[o.jsx("option",{value:"N",children:"N"}),o.jsx("option",{value:"1",children:"1"}),o.jsx("option",{value:"2",children:"2"}),o.jsx("option",{value:"3",children:"3"}),o.jsx("option",{value:"4",children:"4"})]}),o.jsxs("button",{onClick:le,disabled:M,className:"bg-blue-600 text-white px-4 py-1.5 rounded hover:bg-blue-700 transition-colors whitespace-nowrap disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[M&&o.jsx(wt,{className:"w-4 h-4 animate-spin"}),h("button.search")]})]}),o.jsx("div",{className:"bg-white border rounded p-3 min-h-[220px] max-h-[220px] overflow-y-auto",children:M?o.jsxs("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:[o.jsx(wt,{className:"w-5 h-5 animate-spin mr-2"}),h("status.searching")]}):D.length>0?o.jsx("div",{className:"space-y-1",children:D.map((B,V)=>o.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:B.NAME}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:B.CHT_NAME}),o.jsx("div",{className:"text-xs text-gray-400 font-mono",children:B.CODE})]}),o.jsx("button",{onClick:()=>ge(B),className:"ml-2 p-1 text-green-600 hover:text-green-700 hover:bg-green-50 rounded transition-colors flex-shrink-0",title:h("button.add"),children:o.jsx(xt,{className:"w-4 h-4"})})]},B.GUID||V))}):o.jsx("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:h(u||m!=="N"?"status.noSearchResults":"status.searchResults")})})]})]})]})}),o.jsxs("div",{className:"flex items-center justify-end space-x-3 py-2 px-4 border-t border-gray-200",children:[o.jsx("button",{onClick:q,disabled:Q||oe,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:h("button.cancel")}),o.jsxs("button",{onClick:z,disabled:Q||oe,className:"px-6 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[(Q||oe)&&o.jsx(wt,{className:"w-4 h-4 animate-spin"}),o.jsx("span",{children:Q?"...":oe?"...":h(c==="add"?"button.add":"button.save")})]})]})]})]})},$m=()=>{const{listDrawModalOpen:e,closeListDrawModal:t,selectedListDraw:n,triggerRefresh:r}=Ke(),{t:s}=et(),[l,a]=v.useState(""),[i,c]=v.useState([]),[p,h]=v.useState(""),[g,x]=v.useState("N"),[C,j]=v.useState([]),[E,U]=v.useState(!1);v.useEffect(()=>{n&&e&&(a(n.name||""),c(n.med_info||[]))},[n,e]);const u=w=>{c(M=>M.filter(G=>G.code!==w))},d=async()=>{U(!0);try{const w=await je.searchMedicine(p,g);j(w)}catch(w){console.error("Search failed:",w),j([])}finally{U(!1)}},m=w=>{const M={id:w.GUID||`${Date.now()}_${Math.random()}`,name:w.NAME,cht_name:w.CHT_NAME,code:w.CODE};c(G=>G.some(Y=>Y.code===M.code)?G:[...G,M])},k=()=>{n&&(n.name=l,n.med_info=i,r(),t())},D=()=>{t()};return!e||!n?null:o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:D}),o.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh"},onClick:w=>w.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(tn,{className:"w-6 h-6 text-gray-600"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s("modal.listDrawSettings")})]}),o.jsx("button",{onClick:D,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(ut,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"flex-1 px-4 py-1 overflow-y-auto",children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s("form.drawerName")}),o.jsx("input",{type:"text",value:l,onChange:w=>a(w.target.value),placeholder:(n==null?void 0:n.name)||s("placeholder.drawerName"),className:"w-full px-2 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors text-base"})]}),o.jsxs("div",{className:"flex gap-6",children:[o.jsxs("div",{className:"space-y-2 w-[50%]",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s("form.drugList")}),i.length>0?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-2",children:i.map(w=>o.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-1 hover:border-gray-300 transition-colors",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{children:[w.code&&o.jsx("div",{children:o.jsx("div",{className:"text-sm text-gray-900 font-mono",children:w.code})}),o.jsx("div",{children:o.jsx("div",{className:"text-sm text-gray-900 font-medium",children:w.name||s("status.notSet")})}),o.jsx("div",{children:o.jsx("div",{className:"text-sm text-gray-900",children:w.cht_name||s("status.notSet")})})]})}),o.jsx("button",{onClick:()=>u(w.code),className:"ml-3 p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors flex-shrink-0",title:s("button.remove"),children:o.jsx(ut,{className:"w-5 h-5"})})]})},w.id))}):o.jsx("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg py-12",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-gray-500 text-lg mb-2",children:s("status.drawerNoDrug")}),o.jsx("div",{className:"text-gray-400 text-sm",children:s("status.drugListEmpty")})]})})]}),o.jsxs("div",{className:"space-y-2 w-[50%]",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s("form.drugSearch")}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"text",value:p,onChange:w=>h(w.target.value),placeholder:s("placeholder.drugSearch"),className:"border rounded px-3 py-1 flex-1 min-w-0 focus:border-blue-500 focus:outline-none transition-colors"}),o.jsxs("select",{value:g,onChange:w=>x(w.target.value),className:"border rounded px-2 py-1 focus:border-blue-500 focus:outline-none transition-colors",title:"",children:[o.jsx("option",{value:"N",children:"N"}),o.jsx("option",{value:"1",children:"1"}),o.jsx("option",{value:"2",children:"2"}),o.jsx("option",{value:"3",children:"3"}),o.jsx("option",{value:"4",children:"4"})]}),o.jsxs("button",{onClick:d,disabled:E,className:"bg-blue-600 text-white px-4 py-1.5 rounded hover:bg-blue-700 transition-colors whitespace-nowrap disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[E&&o.jsx(wt,{className:"w-4 h-4 animate-spin"}),s("button.search")]})]}),o.jsx("div",{className:"bg-white border rounded p-3 min-h-[300px] max-h-[300px] overflow-y-auto",children:E?o.jsxs("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:[o.jsx(wt,{className:"w-5 h-5 animate-spin mr-2"}),s("status.searching")]}):C.length>0?o.jsx("div",{className:"space-y-1",children:C.map((w,M)=>o.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:w.NAME}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:w.CHT_NAME}),o.jsx("div",{className:"text-xs text-gray-400 font-mono",children:w.CODE})]}),o.jsx("button",{onClick:()=>m(w),className:"ml-2 p-1 text-green-600 hover:text-green-700 hover:bg-green-50 rounded transition-colors flex-shrink-0",title:s("button.add"),children:o.jsx(xt,{className:"w-4 h-4"})})]},w.GUID||M))}):o.jsx("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:s(p||g!=="N"?"status.noSearchResults":"status.searchResults")})})]})]})]})}),o.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 border-t border-gray-200",children:[o.jsx("button",{onClick:D,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:s("button.cancel")}),o.jsx("button",{onClick:k,className:"px-6 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:s("button.save")})]})]})]})},Lm=()=>{const{gridDrawModalOpen:e,closeGridDrawModal:t,selectedGridDraw:n,triggerRefresh:r,apiDepartmentData:s,setApiDepartmentData:l,showNotification:a,medicineList:i}=Ke(),{t:c}=et(),[p,h]=v.useState(""),[g,x]=v.useState(null),[C,j]=v.useState(!1),[E,U]=v.useState(!1),[u,d]=v.useState(null),[m,k]=v.useState(""),[D,w]=v.useState("N"),[M,G]=v.useState([]),[Q,Y]=v.useState(!1),[te,he]=v.useState(0),[S,K]=v.useState({x:0,y:0});v.useEffect(()=>{if(n&&e)if(h(n.name||""),n.drawer){if(!C){console.log("  drawer :",n);const F=JSON.parse(JSON.stringify(n.drawer));x(F),j(!0),console.log(" :",F)}}else console.log("  drawer "),x(null),j(!1)},[n,e,C]),v.useEffect(()=>{e||(j(!1),x(null),d(null))},[e]);const oe=()=>{n&&Se()},ue=()=>{if(console.log(" ..."),console.log(":",g),console.log(" selectedGridDraw:",n),n&&g&&C){console.log("  drawer ...");const F=JSON.parse(JSON.stringify(g));if(n.drawer=F,s){const Z=fe=>{fe.forEach(ae=>{ae.GUID===n.GUID&&(console.log(" "),ae.drawer=F),ae.contents&&Array.isArray(ae.contents)&&Z(ae.contents),ae.components&&Array.isArray(ae.components)&&Z(ae.components)})},ce=JSON.parse(JSON.stringify(s));Z(ce),l(ce),console.log(" ")}console.log(" :",n.drawer)}else console.log("  - selectedGridDraworiginalDrawerData  hasBackup "),console.log("selectedGridDraw:",!!n),console.log("originalDrawerData:",!!g),console.log("hasBackup:",C);d(null),j(!1),x(null),r(),t()},T=(F,Z)=>{if(!u)return!1;const ce=Math.min(u.startRow,u.endRow),fe=Math.max(u.startRow,u.endRow),ae=Math.min(u.startCol,u.endCol),de=Math.max(u.startCol,u.endCol);return F>=ce&&F<=fe&&Z>=ae&&Z<=de},y=F=>{var A;if(!((A=n==null?void 0:n.drawer)!=null&&A.Boxes)||F.Slave)return{width:1,height:1};const ce=n.drawer.Boxes.flat().filter(b=>b.Slave&&b.MasterBox_Row===F.Row&&b.MasterBox_Column===F.Column);if(ce.length===0)return{width:1,height:1};const fe=[F,...ce],ae=Math.min(...fe.map(b=>b.Row)),de=Math.max(...fe.map(b=>b.Row)),ye=Math.min(...fe.map(b=>b.Column));return{width:Math.max(...fe.map(b=>b.Column))-ye+1,height:de-ae+1}},_=()=>{var ye;if(!u||!((ye=n==null?void 0:n.drawer)!=null&&ye.Boxes))return[];const F=n.drawer.Boxes.flat(),Z=Math.min(u.startRow,u.endRow),ce=Math.max(u.startRow,u.endRow),fe=Math.min(u.startCol,u.endCol),ae=Math.max(u.startCol,u.endCol),de=[];return F.forEach(f=>{if(!f.Slave){const A=y(f),b=f.Row+A.height-1,N=f.Column+A.width-1;f.Row>=Z&&b<=ce&&f.Column>=fe&&N<=ae&&de.push(f)}}),de},O=(F,Z,ce,fe)=>{var N;if(!u||!((N=n==null?void 0:n.drawer)!=null&&N.Boxes))return!1;const ae=n.drawer.Boxes.flat();let de=!0,ye=F,f=Z,A=ce,b=fe;for(;de;)de=!1,ae.forEach(I=>{if(!I.Slave){const L=y(I),J=I.Row+L.height-1,X=I.Column+L.width-1;!(I.Row>f||J<ye||I.Column>b||X<A)&&(I.Row<ye&&(ye=I.Row,de=!0),J>f&&(f=J,de=!0),I.Column<A&&(A=I.Column,de=!0),X>b&&(b=X,de=!0))}});return{minRow:ye,maxRow:f,minCol:A,maxCol:b}},R=()=>{var de;if(!u||!((de=n==null?void 0:n.drawer)!=null&&de.Boxes))return!1;const F=Math.min(u.startRow,u.endRow),Z=Math.max(u.startRow,u.endRow),ce=Math.min(u.startCol,u.endCol),fe=Math.max(u.startCol,u.endCol),ae=n.drawer.Boxes.flat();for(let ye=F;ye<=Z;ye++)for(let f=ce;f<=fe;f++){let A=!1;for(const b of ae)if(!b.Slave){const N=y(b),I=b.Row+N.height-1,L=b.Column+N.width-1;if(ye>=b.Row&&ye<=I&&f>=b.Column&&f<=L){A=!0;break}}if(!A)return!1}return!0},z=()=>{var N,I;const F=_();if(!u)return{canMerge:!1,canUnmerge:!1};if(F.length===0)return{canMerge:!1,canUnmerge:!1};const Z=((I=(N=n==null?void 0:n.drawer)==null?void 0:N.Boxes)==null?void 0:I.flat())||[],ce=F.some(L=>Z.filter(X=>X.Slave&&X.MasterBox_Row===L.Row&&X.MasterBox_Column===L.Column).length>0),fe=Math.min(u.startRow,u.endRow),ae=Math.max(u.startRow,u.endRow),de=Math.min(u.startCol,u.endCol),ye=Math.max(u.startCol,u.endCol),f=Z.some(L=>L.Slave&&L.Row>=fe&&L.Row<=ae&&L.Column>=de&&L.Column<=ye);return{canMerge:F.length>1&&R(),canUnmerge:ce||f}},{canMerge:q,canUnmerge:ee}=z(),ie=async()=>{Y(!0);try{const F=m.toLowerCase().trim();let Z=i;F&&(Z=Z.filter(ce=>{var fe,ae,de;return((fe=ce.CODE)==null?void 0:fe.toLowerCase().includes(F))||((ae=ce.NAME)==null?void 0:ae.toLowerCase().includes(F))||((de=ce.CHT_NAME)==null?void 0:de.toLowerCase().includes(F))})),D!=="N"&&(Z=Z.filter(ce=>ce.DRUGKIND===D)),G(Z)}catch(F){console.error("Search failed:",F),G([])}finally{Y(!1)}},P=async F=>{var ce;if(!u||!((ce=n==null?void 0:n.drawer)!=null&&ce.Boxes))return;const Z=_();if(Z.length!==0)try{const fe={ServerName:n.serverName,ServerType:n.serverType,ValueAry:[`guid=${Z[0].GUID}`,`code=${F.CODE}`],Data:n.drawer};console.log("  API :",fe);const ae=await je.request("/api/device/update_drawer_medcode",{method:"POST",body:JSON.stringify(fe)});if(console.log("  API :",ae),ae.Code===200&&ae.Data){if(n.drawer=ae.Data,ae.Data.Boxes&&(n.Boxes=ae.Data.Boxes),console.log(" "),s){const de=f=>{f.forEach(A=>{A.GUID===n.GUID&&(console.log(" "),A.drawer=n.drawer,n.Boxes&&(A.Boxes=n.Boxes)),A.contents&&Array.isArray(A.contents)&&de(A.contents),A.components&&Array.isArray(A.components)&&de(A.components)})},ye=JSON.parse(JSON.stringify(s));de(ye),l(ye)}d(null),r()}else console.error(" :",ae),a(`${ae.Result||""}`,"error")}catch(fe){console.error("  API :",fe),a("","error")}},le=(F,Z,ce)=>{ce.preventDefault(),ce.stopPropagation(),"touches"in ce&&(he(Date.now()),K({x:ce.touches[0].clientX,y:ce.touches[0].clientY})),U(!0),d({startRow:F,startCol:Z,endRow:F,endCol:Z})},ge=(F,Z)=>{if(!E||!u)return;const ce=Math.min(u.startRow,F),fe=Math.max(u.startRow,F),ae=Math.min(u.startCol,Z),de=Math.max(u.startCol,Z),ye=O(ce,fe,ae,de);ye&&d(f=>f?{startRow:f.startRow,startCol:f.startCol,endRow:F>=f.startRow?ye.maxRow:ye.minRow,endCol:Z>=f.startCol?ye.maxCol:ye.minCol}:null)},B=()=>{if(E&&(U(!1),u&&(n!=null&&n.Boxes))){const F=Math.min(u.startRow,u.endRow),Z=Math.max(u.startRow,u.endRow),ce=Math.min(u.startCol,u.endCol),fe=Math.max(u.startCol,u.endCol),ae=O(F,Z,ce,fe);ae&&d({startRow:ae.minRow,startCol:ae.minCol,endRow:ae.maxRow,endCol:ae.maxCol})}},V=()=>{var F;!q||!((F=n==null?void 0:n.drawer)!=null&&F.Boxes)||!u||ke()},pe=()=>{var F;!ee||!((F=n==null?void 0:n.drawer)!=null&&F.Boxes)||!u||(console.log(u),me())},me=async()=>{var F;if(!(!u||!((F=n==null?void 0:n.drawer)!=null&&F.Boxes)))try{const Z=Math.min(u.startRow,u.endRow),ce=Math.max(u.startRow,u.endRow),fe=Math.min(u.startCol,u.endCol),ae=Math.max(u.startCol,u.endCol),ye=n.drawer.Boxes.flat().filter(I=>I.Row>=Z&&I.Row<=ce&&I.Column>=fe&&I.Column<=ae),f=[],A=[];ye.forEach(I=>{f.push(I.Column.toString()),A.push(I.Row.toString())});const b={ServerName:n.serverName,ServerType:n.serverType,ValueAry:[`SelectColumns=${f.join(",")}`,`SelectRows=${A.join(",")}`],Data:{IP:n.ip,Boxes:n.Boxes}};console.log("  API :",b);const N=await je.request("/api/device/separate_drawer_boxes",{method:"POST",body:JSON.stringify(b)});if(console.log(" API :",N),N.Code===200&&N.Data){if(N.Data.Boxes&&Array.isArray(N.Data.Boxes)&&(n.Boxes=N.Data.Boxes,n.drawer=N.Data,console.log(" "),s)){const I=J=>{J.forEach(X=>{X.GUID===n.GUID&&(console.log(" "),X.drawer=n.drawer),X.contents&&Array.isArray(X.contents)&&I(X.contents),X.components&&Array.isArray(X.components)&&I(X.components)})},L=JSON.parse(JSON.stringify(s));I(L),l(L)}}else console.error(" API :",N),a(`${N.Result||""}`,"error")}catch(Z){console.error(" API :",Z),a("","error")}finally{console.log("",n),console.log("",s),d(null),r()}},ke=async()=>{var F;if(!(!u||!((F=n==null?void 0:n.drawer)!=null&&F.Boxes)))try{const Z=Math.min(u.startRow,u.endRow),ce=Math.max(u.startRow,u.endRow),fe=Math.min(u.startCol,u.endCol),ae=Math.max(u.startCol,u.endCol),ye=n.drawer.Boxes.flat().filter(I=>I.Row>=Z&&I.Row<=ce&&I.Column>=fe&&I.Column<=ae),f=[],A=[];ye.forEach(I=>{f.push(I.Column.toString()),A.push(I.Row.toString())});const b={ServerName:n.serverName,ServerType:n.serverType,ValueAry:[`SelectColumns=${f.join(",")}`,`SelectRows=${A.join(",")}`],Data:{IP:n.ip,Boxes:n.Boxes}};console.log("  API :",b);const N=await je.request("/api/device/combine_drawer_boxes",{method:"POST",body:JSON.stringify(b)});if(console.log(" API :",N),N.Code===200&&N.Data){if(N.Data.Boxes&&Array.isArray(N.Data.Boxes)&&(n.Boxes=N.Data.Boxes,n.drawer=N.Data,console.log(" "),s)){const I=J=>{J.forEach(X=>{X.GUID===n.GUID&&(console.log(" "),X.drawer=n.drawer),X.contents&&Array.isArray(X.contents)&&I(X.contents),X.components&&Array.isArray(X.components)&&I(X.components)})},L=JSON.parse(JSON.stringify(s));I(L),l(L)}}else console.error(" API :",N),a(`${N.Result||""}`,"error")}catch(Z){console.error(" API :",Z),a("","error")}finally{console.log("",n),console.log("",s),d(null),r()}},Se=async()=>{if(n)try{n.name=p;const F={ServerName:n.serverName,ServerType:n.serverType,Data:[n.drawer]};console.log("  API :",F);const Z=await je.request("/api/device/update_epd583_drawers",{method:"POST",body:JSON.stringify(F)});if(console.log("  API :",Z),Z.Code===200){if(console.log(" "),a("","success"),s){const ce=ae=>{ae.forEach(de=>{de.GUID===n.GUID&&(console.log(" "),de.name=n.name),de.contents&&Array.isArray(de.contents)&&ce(de.contents),de.components&&Array.isArray(de.components)&&ce(de.components)})},fe=JSON.parse(JSON.stringify(s));ce(fe),l(fe)}j(!1),x(null),r(),t()}else console.error(" :",Z),a(`${Z.Result||""}`,"error")}catch(F){console.error("  API :",F),a("","error")}},lt=()=>{var A;if(!((A=n==null?void 0:n.drawer)!=null&&A.Boxes)||n.drawer.Boxes.length===0)return o.jsx("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg py-12",children:o.jsxs("div",{className:"text-center",children:[o.jsx(gd,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),o.jsx("div",{className:"text-gray-500 text-lg mb-2",children:c("status.gridDrawNotConfigured")}),o.jsx("div",{className:"text-gray-400 text-sm",children:c("status.noDrugInfo")})]})});const F=n.drawer.Boxes.flat(),Z=b=>{if(b.Slave)return{width:1,height:1};const N=F.filter($=>$.Slave&&$.MasterBox_Row===b.Row&&$.MasterBox_Column===b.Column);if(N.length===0)return{width:1,height:1};const I=[b,...N],L=Math.min(...I.map($=>$.Row)),J=Math.max(...I.map($=>$.Row)),X=Math.min(...I.map($=>$.Column));return{width:Math.max(...I.map($=>$.Column))-X+1,height:J-L+1}},ce=Math.max(...F.map(b=>b.Row+1-1)),fe=Math.max(...F.map(b=>b.Column+1-1)),ae=ce+1,de=fe+1,ye=Array(ae).fill(null).map(()=>Array(de).fill(!1)),f={};return F.forEach(b=>{if(!b.Slave){const N=Z(b);f[`${b.Row},${b.Column}`]=b,b.calculatedWidth=N.width,b.calculatedHeight=N.height}}),F.forEach(b=>{if(!b.Slave&&(b.calculatedWidth>1||b.calculatedHeight>1))for(let N=b.Row;N<b.Row+b.calculatedHeight;N++)for(let I=b.Column;I<b.Column+b.calculatedWidth;I++)(N!==b.Row||I!==b.Column)&&(ye[N][I]=!0)}),o.jsx("div",{className:"rounded-lg",children:o.jsx("table",{className:"w-full",children:o.jsx("tbody",{children:Array.from({length:ae},(b,N)=>o.jsx("tr",{children:Array.from({length:de},(I,L)=>{if(ye[N][L])return null;const J=`${N},${L}`,X=f[J];return X?o.jsx("td",{className:`border border-gray-400 pt-1 pl-1 align-top cursor-pointer select-none ${T(N,L)?"bg-blue-200":"bg-white hover:bg-gray-100"}`,style:{width:`${100/de}%`,minHeight:"40px",height:`${50*X.calculatedHeight}px`,maxHeight:`${50*X.calculatedHeight}px`},colSpan:X.calculatedWidth,rowSpan:X.calculatedHeight,onMouseDown:H=>le(N,L,H),onMouseEnter:()=>ge(N,L),onMouseUp:B,onTouchStart:H=>le(N,L,H),onTouchMove:H=>{if(H.preventDefault(),!E)return;const $=H.touches[0],se=document.elementFromPoint($.clientX,$.clientY),re=se==null?void 0:se.closest("td");if(re){const we=parseInt(re.getAttribute("data-row")||"0"),be=parseInt(re.getAttribute("data-col")||"0");ge(we,be)}},onTouchEnd:B,"data-row":N,"data-col":L,children:o.jsx("div",{className:"h-full flex flex-col",children:X.Code||X.Name||X.ChineseName?o.jsxs(o.Fragment,{children:[X.Code&&o.jsx("div",{className:"text-xs font-mono text-gray-600",children:X.Code}),X.Name&&o.jsx("div",{className:"text-xs font-medium text-gray-900",children:X.Name}),X.ChineseName&&o.jsx("div",{className:"text-xs text-gray-700",children:X.ChineseName})]}):o.jsx("div",{className:"h-full flex justify-center items-center text-xs text-gray-400 italic text-center",children:c("status.notAdded")})})},L):o.jsx("td",{className:`border border-gray-300 p-2 align-top cursor-pointer select-none ${T(N,L)?"border-1 border-blue-500 bg-blue-100":"bg-gray-50 hover:bg-gray-100"}`,style:{width:`${100/de}%`,minWidth:"80px",minHeight:"80px"},onMouseDown:H=>le(N,L,H),onMouseEnter:()=>ge(N,L),onMouseUp:B,onTouchStart:H=>le(N,L,H),onTouchMove:H=>{if(H.preventDefault(),!E)return;const $=H.touches[0],se=document.elementFromPoint($.clientX,$.clientY),re=se==null?void 0:se.closest("td");if(re){const we=parseInt(re.getAttribute("data-row")||"0"),be=parseInt(re.getAttribute("data-col")||"0");ge(we,be)}},onTouchEnd:B,"data-row":N,"data-col":L,children:o.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 text-xs",children:c("status.notAdded")})},L)})},N))})})})};return!e||!n?null:o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:ue}),o.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh"},onClick:F=>F.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(tn,{className:"w-6 h-6 text-gray-600"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:c("modal.gridDrawSettings")})]}),o.jsx("button",{onClick:ue,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(ut,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"flex-1 px-4 py-2 overflow-y-auto",children:[o.jsxs("div",{className:"space-y-4 pt-2",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h3",{className:"text-lg whitespace-nowrap font-medium text-gray-900",children:c("form.drawerName")}),o.jsx("input",{type:"text",value:p,onChange:F=>h(F.target.value),disabled:!0,placeholder:(n==null?void 0:n.name)||c("placeholder.gridDrawName"),className:"px-2 py-1 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors text-base"})]}),o.jsx("div",{className:"space-y-1",children:lt()})]}),o.jsxs("div",{className:"py-2 flex space-x-4",children:[o.jsx("div",{className:"grid grid-cols-1 gap-2 w-[10%]",children:o.jsxs("div",{className:"grid grid-cols-1 gap-2 items-strat",children:[o.jsx("button",{onClick:V,disabled:!q,className:`px-4 py-2 rounded transition-colors ${q?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:c("button.merge")}),o.jsx("button",{onClick:pe,disabled:!ee,className:`px-4 py-2 rounded transition-colors ${ee?"bg-red-600 text-white hover:bg-red-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:c("button.unmerge")})]})}),o.jsx("div",{className:"space-y-2 w-[30%]",children:(()=>{const F=_(),Z=F.find(ce=>!ce.Slave);return Z&&(Z.Code||Z.Name||Z.ChineseName)?o.jsxs("div",{className:"border border-blue-200 rounded-lg p-2 space-y-1 h-full",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-900 mb-1",children:c("form.drugCode")}),o.jsx("div",{className:"text-base text-gray-900",children:Z.Code||"-"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-900  mb-1",children:c("form.drugName")}),o.jsx("div",{className:"text-base text-gray-900",children:Z.Name||"-"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-900 mb-1",children:c("form.chineseName")}),o.jsx("div",{className:"text-base text-gray-900",children:Z.ChineseName||"-"})]})]}):o.jsx("div",{className:"bg-gray-50 border h-full border-gray-200 rounded-lg p-3 text-center",children:o.jsx("div",{className:"text-gray-500 h-full w-full flex justify-center items-center",children:u&&F.length>0?c("status.selectedCellsNoDrug"):c("status.selectCellsForDrug")})})})()}),o.jsxs("div",{className:"w-[60%]",children:[o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"text",value:m,onChange:F=>k(F.target.value),placeholder:c("placeholder.drugSearch"),className:"border rounded px-3 py-1 flex-1 min-w-0 focus:border-blue-500 focus:outline-none transition-colors"}),o.jsxs("select",{value:D,onChange:F=>w(F.target.value),className:"border rounded px-2 py-1 focus:border-blue-500 focus:outline-none transition-colors",title:"",children:[o.jsx("option",{value:"N",children:"N"}),o.jsx("option",{value:"1",children:"1"}),o.jsx("option",{value:"2",children:"2"}),o.jsx("option",{value:"3",children:"3"}),o.jsx("option",{value:"4",children:"4"})]}),o.jsxs("button",{onClick:ie,disabled:Q,className:"bg-blue-600 text-white px-4 py-1.5 rounded hover:bg-blue-700 transition-colors whitespace-nowrap disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[Q&&o.jsx(wt,{className:"w-4 h-4 animate-spin"}),c("button.search")]})]}),o.jsx("div",{className:"bg-white border rounded p-3 min-h-[150px] max-h-[150px] overflow-y-auto",children:Q?o.jsxs("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:[o.jsx(wt,{className:"w-5 h-5 animate-spin mr-2"}),c("status.searching")]}):M.length>0?o.jsx("div",{className:"space-y-1",children:M.map((F,Z)=>o.jsxs("div",{className:"flex items-center justify-between p-1 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:F.NAME}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:F.CHT_NAME}),o.jsx("div",{className:"text-xs text-gray-400 font-mono",children:F.CODE})]}),o.jsx("button",{onClick:()=>P(F),className:"ml-2 p-1 text-green-600 hover:text-green-700 hover:bg-green-50 rounded transition-colors flex-shrink-0",title:c("button.add"),children:o.jsx(xt,{className:"w-4 h-4"})})]},F.GUID||Z))}):o.jsx("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:c(m||D!=="N"?"status.noSearchResults":"status.searchResults")})})]})]}),o.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 border-t border-gray-200",children:[o.jsx("button",{onClick:ue,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:c("button.cancel")}),o.jsx("button",{onClick:oe,className:"px-6 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:c("button.save")})]})]}),o.jsx("div",{className:"fixed inset-0 pointer-events-none",onMouseUp:B,onMouseLeave:B,onTouchEnd:B,onTouchCancel:B})]})]})},Om=()=>{var he;const{addParentContainerModalOpen:e,closeAddParentContainerModal:t,selectedDepartmentForAdd:n,selectedDepartmentType:r,setApiDepartmentData:s,setIsLoadingMedMap:l,showNotification:a,triggerRefresh:i,setSidebarOpen:c}=Ke(),{t:p}=et(),[h,g]=v.useState(null),[x,C]=v.useState(0),[j,E]=v.useState(0),[U,u]=v.useState(!1);v.useEffect(()=>{e&&(g(null),C(0),E(0),u(!1))},[e]),v.useEffect(()=>{h&&(C(h.row),E(h.col))},[h]);const d=()=>{const S=new Set;return n!=null&&n.contents&&n.contents.forEach(K=>{K.type==="parent_container"&&K.gird_position&&S.add(K.gird_position)}),S},m=()=>{const S=d(),K=[];if(S.size===0)return K.push({row:0,col:0}),K;const oe=[];S.forEach(T=>{const[y,_]=T.split(",").map(Number);oe.push({row:y,col:_})});const ue=new Set;return oe.forEach(({row:T,col:y})=>{ue.add(`${T},${y+1}`),ue.add(`${T+1},${y}`),y>0&&ue.add(`${T},${y-1}`),T>0&&ue.add(`${T-1},${y}`)}),ue.forEach(T=>{if(!S.has(T)){const[y,_]=T.split(",").map(Number);y>=0&&_>=0&&K.push({row:y,col:_})}}),S.has("0,1")||K.some(y=>y.row===0&&y.col===1)||K.push({row:0,col:1}),S.has("1,0")||K.some(y=>y.row===1&&y.col===0)||K.push({row:1,col:0}),K.sort((T,y)=>T.row===y.row?T.col-y.col:T.row-y.row)},k=S=>{g(S)},D=S=>{C(S),g({row:S,col:j})},w=S=>{E(S),g({row:x,col:S})},M=h&&!d().has(`${h.row},${h.col}`)&&h.row>=0&&h.col>=0,G=async()=>{if(!(!h||!n||!M)){u(!0);try{const S=`${h.row},${h.col}`,K=await je.addMedMapSection(n.GUID,S);K.Code===200?(a("","success"),t(),c(!1),await Q()):a(`${K.Result||""}`,"error")}catch(S){console.error("Add parent container failed:",S),a("","error")}finally{u(!1)}}},Q=async()=>{if(!r){console.warn(" ");return}console.log(" :",r),l(!0);try{const S=await je.getMedMapByDepartment(r);if(S.Code===200&&S.Data){console.log(" API ");const K=vt.convertMedMapApiToFakeData(S.Data);if(!vt.validateConvertedData(K)){console.error(" "),a("","error");return}s(K),console.log(" ")}else console.error(" API :",S),a("API ","error")}catch(S){console.error(" :",S),a("","error")}finally{l(!1)}},Y=()=>{t()},te=()=>{const S=d(),K=m(),oe=[...S].map(z=>{const[q,ee]=z.split(",").map(Number);return{row:q,col:ee}}).concat(K);oe.length===0&&oe.push({row:0,col:0});const ue=Math.max(...oe.map(z=>z.row)),T=Math.max(...oe.map(z=>z.col)),y=Math.min(...oe.map(z=>z.row)),_=Math.min(...oe.map(z=>z.col)),O=ue-y+1,R=T-_+1;return o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),o.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:o.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${R}, 1fr)`},children:Array.from({length:O*R},(z,q)=>{const ee=Math.floor(q/R)+y,ie=q%R+_,P=`${ee},${ie}`,le=S.has(P),ge=K.some(V=>V.row===ee&&V.col===ie),B=(h==null?void 0:h.row)===ee&&(h==null?void 0:h.col)===ie;return o.jsx("button",{onClick:()=>ge&&k({row:ee,col:ie}),disabled:le||!ge,className:`
                    w-16 h-16 border-2 rounded-lg transition-all duration-200 flex items-center justify-center text-sm font-medium
                    ${le?"bg-red-100 border-red-300 text-red-600 cursor-not-allowed":B?"bg-blue-500 border-blue-600 text-white shadow-lg":ge?"bg-green-100 border-green-300 text-green-700 hover:bg-green-200 hover:border-green-400 cursor-pointer":"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed"}
                  `,title:le?"":ge?"":"",children:le?"":`${ee},${ie}`},P)})})})]})};return!e||!n?null:o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:Y}),o.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh",maxWidth:"800px"},onClick:S=>S.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(xt,{className:"w-6 h-6 text-green-600"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:""})]}),o.jsx("button",{onClick:Y,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(ut,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"flex-1 px-6 py-4 overflow-y-auto",children:o.jsxs("div",{className:"space-y-6",children:[te(),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:" (Row):"}),o.jsx("input",{type:"number",min:"0",value:x,onChange:S=>D(parseInt(S.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:" (Column):"}),o.jsx("input",{type:"number",min:"0",value:j,onChange:S=>w(parseInt(S.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]})]}),h&&o.jsx("div",{className:`text-sm p-2 rounded ${M?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:M?`${h.row},${h.col}`:` ${h.row},${h.col} `})]}),o.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:""}),o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsxs("div",{children:["",(n==null?void 0:n.name)||""]}),o.jsxs("div",{children:["",(n==null?void 0:n.type)||""]}),o.jsxs("div",{children:["",((he=n==null?void 0:n.contents)==null?void 0:he.filter(S=>S.type==="parent_container").length)||0]})]})]})]})}),o.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 border-t border-gray-200",children:[o.jsx("button",{onClick:Y,disabled:U,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p("button.cancel")}),o.jsxs("button",{onClick:G,disabled:!M||U,className:"px-6 py-2 text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[U&&o.jsx(wt,{className:"w-4 h-4 animate-spin"}),o.jsx("span",{children:U?"...":""})]})]})]})]})},qi=[{value:"dispensing_shelves",label:"",icon:o.jsx(wm,{className:"w-5 h-5"}),isShelf:!0},{value:"store_shelves",label:"",icon:o.jsx(dm,{className:"w-5 h-5"}),isShelf:!0},{value:"list_draw",label:"",icon:o.jsx(Gl,{className:"w-5 h-5"}),isShelf:!1},{value:"grid_draw",label:"",icon:o.jsx(gd,{className:"w-5 h-5"}),isShelf:!1}],Um=()=>{var O;const{addShelfDrawContainerModalOpen:e,closeAddShelfDrawContainerModal:t,selectedSubContainerForAdd:n,selectedDepartmentType:r,setApiDepartmentData:s,setIsLoadingMedMap:l,showNotification:a,triggerRefresh:i,setSidebarOpen:c}=Ke(),{t:p}=et(),[h,g]=v.useState("dispensing_shelves"),[x,C]=v.useState("1"),[j,E]=v.useState("1"),[U,u]=v.useState(""),[d,m]=v.useState(null),[k,D]=v.useState(0),[w,M]=v.useState(0),[G,Q]=v.useState(!1);v.useEffect(()=>{e&&(g("dispensing_shelves"),C("1"),E("1"),u(""),m(null),D(0),M(0),Q(!1))},[e]),v.useEffect(()=>{d&&(D(d.row),M(d.col))},[d]);const Y=()=>{const R=new Set;return n!=null&&n.contents&&n.contents.forEach(z=>{z.gird_position&&R.add(z.gird_position)}),R},te=()=>{const R=Y(),z=[];if(R.size===0)return z.push({row:0,col:0}),z;const q=[];R.forEach(ie=>{const[P,le]=ie.split(",").map(Number);q.push({row:P,col:le})});const ee=new Set;return q.forEach(({row:ie,col:P})=>{ee.add(`${ie},${P+1}`),ee.add(`${ie+1},${P}`),P>0&&ee.add(`${ie},${P-1}`),ie>0&&ee.add(`${ie-1},${P}`)}),ee.forEach(ie=>{if(!R.has(ie)){const[P,le]=ie.split(",").map(Number);P>=0&&le>=0&&z.push({row:P,col:le})}}),R.has("0,1")||z.some(P=>P.row===0&&P.col===1)||z.push({row:0,col:1}),R.has("1,0")||z.some(P=>P.row===1&&P.col===0)||z.push({row:1,col:0}),z.sort((ie,P)=>ie.row===P.row?ie.col-P.col:ie.row-P.row)},he=R=>{m(R)},S=R=>{D(R),m({row:R,col:w})},K=R=>{M(R),m({row:k,col:R})},oe=d&&!Y().has(`${d.row},${d.col}`)&&d.row>=0&&d.col>=0,ue=async()=>{if(!(!d||!n||!oe)){Q(!0);try{const R=`${d.row},${d.col}`,z=qi.find(ee=>ee.value===h);let q;z!=null&&z.isShelf?q=await je.addMedMapShelf({Master_GUID:n.GUID,position:R,width:x,height:j,ip_light:U,type:h}):q=await je.addMedMapDrawer({Master_GUID:n.GUID,position:R,width:x,height:j,ip_drawer:U,type:h}),q.Code===200?(a("","success"),t(),c(!1),await T()):a(`${q.Result||""}`,"error")}catch(R){console.error("Add container failed:",R),a("","error")}finally{Q(!1)}}},T=async()=>{if(!r){console.warn(" ");return}console.log(" :",r),l(!0);try{const R=await je.getMedMapByDepartment(r);if(R.Code===200&&R.Data){console.log(" API ");const z=vt.convertMedMapApiToFakeData(R.Data);if(!vt.validateConvertedData(z)){console.error(" "),a("","error");return}s(z),console.log(" ")}else console.error(" API :",R),a("API ","error")}catch(R){console.error(" :",R),a("","error")}finally{l(!1)}},y=()=>{t()},_=()=>{const R=Y(),z=te(),q=[...R].map(V=>{const[pe,me]=V.split(",").map(Number);return{row:pe,col:me}}).concat(z);q.length===0&&q.push({row:0,col:0});const ee=Math.max(...q.map(V=>V.row)),ie=Math.max(...q.map(V=>V.col)),P=Math.min(...q.map(V=>V.row)),le=Math.min(...q.map(V=>V.col)),ge=ee-P+1,B=ie-le+1;return o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),o.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:o.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${B}, 1fr)`},children:Array.from({length:ge*B},(V,pe)=>{const me=Math.floor(pe/B)+P,ke=pe%B+le,Se=`${me},${ke}`,lt=R.has(Se),F=z.some(ce=>ce.row===me&&ce.col===ke),Z=(d==null?void 0:d.row)===me&&(d==null?void 0:d.col)===ke;return o.jsx("button",{onClick:()=>F&&he({row:me,col:ke}),disabled:lt||!F,className:`
                    w-16 h-16 border-2 rounded-lg transition-all duration-200 flex items-center justify-center text-sm font-medium
                    ${lt?"bg-red-100 border-red-300 text-red-600 cursor-not-allowed":Z?"bg-blue-500 border-blue-600 text-white shadow-lg":F?"bg-green-100 border-green-300 text-green-700 hover:bg-green-200 hover:border-green-400 cursor-pointer":"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed"}
                  `,title:lt?"":F?"":"",children:lt?"":`${me},${ke}`},Se)})})})]})};return!e||!n?null:o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:y}),o.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh",maxWidth:"1000px"},onClick:R=>R.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(xt,{className:"w-6 h-6 text-green-600"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"/"})]}),o.jsx("button",{onClick:y,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(ut,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"flex-1 px-6 py-4 overflow-y-auto",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:qi.map(R=>o.jsxs("label",{className:`flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${h===R.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[o.jsx("input",{type:"radio",name:"containerType",value:R.value,checked:h===R.value,onChange:z=>g(z.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 hidden"}),o.jsxs("div",{className:"flex items-center space-x-3",children:[R.icon,o.jsx("span",{className:"font-medium text-gray-900",children:R.label})]})]},R.value))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:""}),o.jsx("input",{type:"number",min:"1",value:x,onChange:R=>C(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:""}),o.jsx("input",{type:"number",min:"1",value:j,onChange:R=>E(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"IP "}),o.jsx("input",{type:"text",value:U,onChange:R=>u(R.target.value),placeholder:" IP ",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]}),_(),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:" (Row):"}),o.jsx("input",{type:"number",min:"0",value:k,onChange:R=>S(parseInt(R.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:" (Column):"}),o.jsx("input",{type:"number",min:"0",value:w,onChange:R=>K(parseInt(R.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]})]}),d&&o.jsx("div",{className:`text-sm p-2 rounded ${oe?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:oe?`${d.row},${d.col}`:` ${d.row},${d.col} `})]}),o.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:""}),o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsxs("div",{children:["",(n==null?void 0:n.name)||""]}),o.jsxs("div",{children:["",(n==null?void 0:n.type)||""]}),o.jsxs("div",{children:["",((O=n==null?void 0:n.contents)==null?void 0:O.length)||0]})]})]})]})}),o.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 border-t border-gray-200",children:[o.jsx("button",{onClick:y,disabled:G,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p("button.cancel")}),o.jsxs("button",{onClick:ue,disabled:!oe||G,className:"px-6 py-2 text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[G&&o.jsx(wt,{className:"w-4 h-4 animate-spin"}),o.jsx("span",{children:G?"...":""})]})]})]})]})},zm=()=>{var he;const{addSubContainerModalOpen:e,closeAddSubContainerModal:t,selectedParentContainerForAdd:n,selectedDepartmentType:r,setApiDepartmentData:s,setIsLoadingMedMap:l,showNotification:a,triggerRefresh:i,setSidebarOpen:c}=Ke(),{t:p}=et(),[h,g]=v.useState(null),[x,C]=v.useState(0),[j,E]=v.useState(0),[U,u]=v.useState(!1);v.useEffect(()=>{e&&(g(null),C(0),E(0),u(!1))},[e]),v.useEffect(()=>{h&&(C(h.row),E(h.col))},[h]);const d=()=>{const S=new Set;return n!=null&&n.contents&&n.contents.forEach(K=>{K.type==="sub_container"&&K.gird_position&&S.add(K.gird_position)}),S},m=()=>{const S=d(),K=[];if(S.size===0)return K.push({row:0,col:0}),K;const oe=[];S.forEach(T=>{const[y,_]=T.split(",").map(Number);oe.push({row:y,col:_})});const ue=new Set;return oe.forEach(({row:T,col:y})=>{ue.add(`${T},${y+1}`),ue.add(`${T+1},${y}`),y>0&&ue.add(`${T},${y-1}`),T>0&&ue.add(`${T-1},${y}`)}),ue.forEach(T=>{if(!S.has(T)){const[y,_]=T.split(",").map(Number);y>=0&&_>=0&&K.push({row:y,col:_})}}),S.has("0,1")||K.some(y=>y.row===0&&y.col===1)||K.push({row:0,col:1}),S.has("1,0")||K.some(y=>y.row===1&&y.col===0)||K.push({row:1,col:0}),K.sort((T,y)=>T.row===y.row?T.col-y.col:T.row-y.row)},k=S=>{g(S)},D=S=>{C(S),g({row:S,col:j})},w=S=>{E(S),g({row:x,col:S})},M=h&&!d().has(`${h.row},${h.col}`)&&h.row>=0&&h.col>=0,G=async()=>{if(!(!h||!n||!M)){u(!0);try{const S=`${h.row},${h.col}`,K=await je.addSubSection(n.GUID,S);K.Code===200?(a("","success"),t(),c(!1),await Q()):a(`${K.Result||""}`,"error")}catch(S){console.error("Add sub container failed:",S),a("","error")}finally{u(!1)}}},Q=async()=>{if(!r){console.warn(" ");return}console.log(" :",r),l(!0);try{const S=await je.getMedMapByDepartment(r);if(S.Code===200&&S.Data){console.log(" API ");const K=vt.convertMedMapApiToFakeData(S.Data);if(!vt.validateConvertedData(K)){console.error(" "),a("","error");return}s(K),console.log(" ")}else console.error(" API :",S),a("API ","error")}catch(S){console.error(" :",S),a("","error")}finally{l(!1)}},Y=()=>{t()},te=()=>{const S=d(),K=m(),oe=[...S].map(z=>{const[q,ee]=z.split(",").map(Number);return{row:q,col:ee}}).concat(K);oe.length===0&&oe.push({row:0,col:0});const ue=Math.max(...oe.map(z=>z.row)),T=Math.max(...oe.map(z=>z.col)),y=Math.min(...oe.map(z=>z.row)),_=Math.min(...oe.map(z=>z.col)),O=ue-y+1,R=T-_+1;return o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),o.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:o.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${R}, 1fr)`},children:Array.from({length:O*R},(z,q)=>{const ee=Math.floor(q/R)+y,ie=q%R+_,P=`${ee},${ie}`,le=S.has(P),ge=K.some(V=>V.row===ee&&V.col===ie),B=(h==null?void 0:h.row)===ee&&(h==null?void 0:h.col)===ie;return o.jsx("button",{onClick:()=>ge&&k({row:ee,col:ie}),disabled:le||!ge,className:`
                    w-16 h-16 border-2 rounded-lg transition-all duration-200 flex items-center justify-center text-sm font-medium
                    ${le?"bg-red-100 border-red-300 text-red-600 cursor-not-allowed":B?"bg-blue-500 border-blue-600 text-white shadow-lg":ge?"bg-green-100 border-green-300 text-green-700 hover:bg-green-200 hover:border-green-400 cursor-pointer":"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed"}
                  `,title:le?"":ge?"":"",children:le?"":`${ee},${ie}`},P)})})})]})};return!e||!n?null:o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:Y}),o.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh",maxWidth:"800px"},onClick:S=>S.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(xt,{className:"w-6 h-6 text-green-600"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:""})]}),o.jsx("button",{onClick:Y,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(ut,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"flex-1 px-6 py-4 overflow-y-auto",children:o.jsxs("div",{className:"space-y-6",children:[te(),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:" (Row):"}),o.jsx("input",{type:"number",min:"0",value:x,onChange:S=>D(parseInt(S.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:" (Column):"}),o.jsx("input",{type:"number",min:"0",value:j,onChange:S=>w(parseInt(S.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]})]}),h&&o.jsx("div",{className:`text-sm p-2 rounded ${M?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:M?`${h.row},${h.col}`:` ${h.row},${h.col} `})]}),o.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:""}),o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsxs("div",{children:["",(n==null?void 0:n.name)||""]}),o.jsxs("div",{children:["",(n==null?void 0:n.type)||""]}),o.jsxs("div",{children:["",((he=n==null?void 0:n.contents)==null?void 0:he.filter(S=>S.type==="sub_container").length)||0]})]})]})]})}),o.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 border-t border-gray-200",children:[o.jsx("button",{onClick:Y,disabled:U,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p("button.cancel")}),o.jsxs("button",{onClick:G,disabled:!M||U,className:"px-6 py-2 text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[U&&o.jsx(wt,{className:"w-4 h-4 animate-spin"}),o.jsx("span",{children:U?"...":""})]})]})]})]})},Bm=({isOpen:e,onClose:t,storeShelf:n})=>{const{showNotification:r,medicineList:s,isLoadingMedicines:l,addStockToShelf:a,selectedStockItemForEdit:i,storeItemModalMode:c,updateStockInShelf:p}=Ke(),[h,g]=v.useState(""),[x,C]=v.useState(""),[j,E]=v.useState(""),[U,u]=v.useState(""),[d,m]=v.useState(""),[k,D]=v.useState(""),[w,M]=v.useState(""),[G,Q]=v.useState(""),[Y,te]=v.useState(""),[he,S]=v.useState(""),[K,oe]=v.useState(null),[ue,T]=v.useState([]),[y,_]=v.useState(""),O=v.useRef(null);v.useEffect(()=>{if(e&&c==="edit"&&i){g(i.code||""),C(i.name||""),E(""),u(i.material_no||""),m(i.lot||"");const P=i.expiry_date||"";if(P){const le=P.split(" ")[0];D(le)}else D("");M(String(i.qty||"")),Q(i.location||""),te(i.led_index||""),S(i.ip||"")}else e&&c==="add"&&(g(""),C(""),E(""),u(""),m(""),D(""),M(""),Q(""),te(""),S(""))},[e,c,i]),v.useEffect(()=>{const P=le=>{O.current&&!O.current.contains(le.target)&&oe(null)};return document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[]);const R=(P,le)=>{if(!le.trim()){T([]);return}const ge=le.toLowerCase(),B=s.filter(V=>{var pe,me,ke,Se;switch(P){case"code":return(pe=V.CODE)==null?void 0:pe.toLowerCase().includes(ge);case"name":return(me=V.NAME)==null?void 0:me.toLowerCase().includes(ge);case"chineseName":return(ke=V.CHT_NAME)==null?void 0:ke.toLowerCase().includes(ge);case"skdiacode":return(Se=V.SKDIACODE)==null?void 0:Se.toLowerCase().includes(ge);default:return!1}});T(B.slice(0,50))},z=(P,le)=>{switch(oe(P),P){case"code":g(le);break;case"name":C(le);break;case"chineseName":E(le);break;case"skdiacode":u(le);break}R(P,le)},q=(P,le)=>{switch(le){case"code":g(P.CODE||""),C(P.NAME||""),E(P.CHT_NAME||""),u(P.SKDIACODE||"");break;case"name":g(P.CODE||""),C(P.NAME||""),E(P.CHT_NAME||""),u(P.SKDIACODE||"");break;case"chineseName":g(P.CODE||""),C(P.NAME||""),E(P.CHT_NAME||""),u(P.SKDIACODE||"");break;case"skdiacode":g(P.CODE||""),C(P.NAME||""),E(P.CHT_NAME||""),u(P.SKDIACODE||"");break}_(P.GUID),oe(null),T([])},ee=async()=>{var le;if(!h||!x){r("","error");return}if(!n||!n.GUID){r("","error");return}let P="";k&&(P=`${k}T00:00:00`);try{if(c==="edit"&&i){const ge={GUID:i.GUID,code:h,device_type:"EPD290",expiry_date:P||"",ip:he||"",led_index:Y||"",location:G||"",lot:d||"",material_no:U||"",name:x,qty:w,shelf_guid:n.GUID},B=await je.updateStock([ge]);B.Code===200?(p(n.GUID,i.GUID,ge),r("","success"),ie()):r(B.Result||"","error")}else{const ge={code:h,device_type:"EPD290",expiry_date:P||"",ip:he||"",led_index:Y||"",location:G||"",lot:d||"",material_no:U||"",name:x,qty:w,shelf_guid:n.GUID},B=await je.addStock([ge]);B.Code===200?(a(n.GUID,{GUID:((le=B.Data)==null?void 0:le.GUID)||`stock_${Date.now()}`,...ge}),r("","success"),ie()):r(B.Result||"","error")}}catch(ge){console.error(":",ge),r(c==="edit"?"":"","error")}},ie=()=>{g(""),C(""),E(""),u(""),m(""),D(""),M(""),Q(""),te(""),S(""),_(""),T([]),oe(null),t()};return e?o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800",children:c==="edit"?"":""}),o.jsx("button",{onClick:ie,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(ut,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-6 space-y-6",children:l?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-blue-500 border-t-transparent"}),o.jsx("p",{className:"mt-2 text-gray-600",children:"..."})]}):s.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("p",{className:"text-gray-600",children:""}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:""})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:""}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"relative",ref:K==="code"?O:null,children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsx("input",{type:"text",value:h,onChange:P=>z("code",P.target.value),onFocus:()=>oe("code"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""}),K==="code"&&ue.length>0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:ue.map(P=>o.jsxs("div",{onClick:()=>q(P,"code"),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer border-b last:border-b-0",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{className:"font-medium text-gray-900",children:P.CODE}),o.jsx("span",{className:"text-gray-600",children:"|"}),o.jsx("span",{className:"text-gray-700",children:P.NAME})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs mt-1",children:[o.jsx("span",{className:"text-gray-600",children:P.CHT_NAME}),o.jsx("span",{className:"text-gray-400",children:"|"}),o.jsxs("span",{className:"text-gray-500",children:[": ",P.SKDIACODE]})]})]},P.GUID))})]}),o.jsxs("div",{className:"relative",ref:K==="name"?O:null,children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsx("input",{type:"text",value:x,onChange:P=>z("name",P.target.value),onFocus:()=>oe("name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""}),K==="name"&&ue.length>0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:ue.map(P=>o.jsxs("div",{onClick:()=>q(P,"name"),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer border-b last:border-b-0",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{className:"font-medium text-gray-900",children:P.CODE}),o.jsx("span",{className:"text-gray-600",children:"|"}),o.jsx("span",{className:"text-gray-700",children:P.NAME})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs mt-1",children:[o.jsx("span",{className:"text-gray-600",children:P.CHT_NAME}),o.jsx("span",{className:"text-gray-400",children:"|"}),o.jsxs("span",{className:"text-gray-500",children:[": ",P.SKDIACODE]})]})]},P.GUID))})]}),o.jsxs("div",{className:"relative",ref:K==="chineseName"?O:null,children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsx("input",{type:"text",value:j,onChange:P=>z("chineseName",P.target.value),onFocus:()=>oe("chineseName"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""}),K==="chineseName"&&ue.length>0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:ue.map(P=>o.jsxs("div",{onClick:()=>q(P,"chineseName"),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer border-b last:border-b-0",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{className:"font-medium text-gray-900",children:P.CODE}),o.jsx("span",{className:"text-gray-600",children:"|"}),o.jsx("span",{className:"text-gray-700",children:P.NAME})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs mt-1",children:[o.jsx("span",{className:"text-gray-600",children:P.CHT_NAME}),o.jsx("span",{className:"text-gray-400",children:"|"}),o.jsxs("span",{className:"text-gray-500",children:[": ",P.SKDIACODE]})]})]},P.GUID))})]}),o.jsxs("div",{className:"relative",ref:K==="skdiacode"?O:null,children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsx("input",{type:"text",value:U,onChange:P=>z("skdiacode",P.target.value),onFocus:()=>oe("skdiacode"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""}),K==="skdiacode"&&ue.length>0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:ue.map(P=>o.jsxs("div",{onClick:()=>q(P,"skdiacode"),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer border-b last:border-b-0",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{className:"font-medium text-gray-900",children:P.CODE}),o.jsx("span",{className:"text-gray-600",children:"|"}),o.jsx("span",{className:"text-gray-700",children:P.NAME})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs mt-1",children:[o.jsx("span",{className:"text-gray-600",children:P.CHT_NAME}),o.jsx("span",{className:"text-gray-400",children:"|"}),o.jsxs("span",{className:"text-gray-500",children:[": ",P.SKDIACODE]})]})]},P.GUID))})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:""}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsx("input",{type:"text",value:d,onChange:P=>m(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsx("input",{type:"date",value:k,onChange:P=>D(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsx("input",{type:"number",value:w,onChange:P=>M(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"",min:"0"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:""}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),o.jsx("input",{type:"text",value:G,onChange:P=>Q(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LED "}),o.jsx("input",{type:"text",value:Y,onChange:P=>te(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:" LED "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" IP"}),o.jsx("input",{type:"text",value:he,onChange:P=>S(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:" IP"})]})]})]})]})}),o.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t flex justify-end space-x-3",children:[o.jsx("button",{onClick:ie,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors",children:""}),o.jsx("button",{onClick:ee,disabled:l||s.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400",children:c==="edit"?"":""})]})]})}):null},Fm=({isOpen:e,onClose:t})=>{const{selectedDepartmentType:n,apiDepartmentData:r,allDepartmentsList:s,showNotification:l,triggerRefresh:a,reloadMedMapData:i}=Ke(),[c,p]=v.useState(null),[h,g]=v.useState(""),[x,C]=v.useState(!1),j=()=>r?r.map(M=>M.name):[],E=()=>!n||!s?[]:s.filter(M=>M["department_type "]===n),U=()=>{const M=j();return E().filter(Q=>!M.includes(Q.name))},u=()=>r?r.map(M=>M.gird_position):[],d=()=>{const M=u(),G=[];for(let Q=0;Q<10;Q++)for(let Y=0;Y<10;Y++){const te=`${Q},${Y}`;M.includes(te)||G.push(te)}return G.slice(0,20)};v.useEffect(()=>{e&&(p(null),g(""))},[e]);const m=async()=>{if(!c){l("","error");return}if(!h){l("","error");return}if(!n){l("","error");return}C(!0);try{const M=await je.addMedMap(c.name,c.type,h);M.Code===200?(l("","success"),await i(),k()):l(M.Result||"","error")}catch(M){console.error(":",M),l("","error")}finally{C(!1)}},k=()=>{p(null),g(""),t()};if(!e)return null;const D=U(),w=d();return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800",children:""}),o.jsx("button",{onClick:k,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(ut,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[n&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm font-medium text-blue-900",children:["",o.jsx("span",{className:"font-bold",children:n})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:""}),D.length===0?o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-gray-600",children:""})}):o.jsx("div",{className:"space-y-2",children:D.map(M=>o.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all ${(c==null?void 0:c.name)===M.name?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:[o.jsx("input",{type:"radio",name:"department",value:M.name,checked:(c==null?void 0:c.name)===M.name,onChange:()=>p(M),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),o.jsxs("div",{className:"ml-3",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.name}),o.jsx("div",{className:"text-xs text-gray-500",children:M.type})]})]},M.name))})]}),c&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:""}),w.length===0?o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-gray-600",children:""})}):o.jsx("div",{className:"grid grid-cols-5 gap-2",children:w.map(M=>{const[G,Q]=M.split(",");return o.jsxs("button",{onClick:()=>g(M),className:`p-3 border-2 rounded-lg text-sm font-medium transition-all ${h===M?"border-blue-500 bg-blue-500 text-white":"border-gray-200 hover:border-blue-300 hover:bg-blue-50 text-gray-700"}`,children:["(",G,",",Q,")"]},M)})})]})]}),o.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t flex justify-end space-x-3",children:[o.jsx("button",{onClick:k,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors",disabled:x,children:""}),o.jsx("button",{onClick:m,disabled:!c||!h||x,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:x?"...":""})]})]})})},Gm=({isOpen:e,onLoginSuccess:t})=>{const{t:n}=et(),[r,s]=v.useState(""),[l,a]=v.useState(""),[i,c]=v.useState(!1),[p,h]=v.useState(!1),[g,x]=v.useState(""),C=async E=>{if(E.preventDefault(),!r.trim()||!l.trim()){x("Please enter both ID and password");return}h(!0),x("");try{const U=await je.login({ID:r.trim(),Password:l});if(U.Code===200&&U.Data){const u={...U.Data,loginTime:new Date().toISOString()};sessionStorage.setItem("user_session",JSON.stringify(u)),t(u)}else x(U.Result||"Login failed")}catch(U){console.error("Login failed:",U),x("Network error. Please try again.")}finally{h(!1)}},j=E=>{E.key==="Enter"&&!p&&C(E)};return e?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900",children:[o.jsx("div",{className:"absolute inset-0 bg-white"}),o.jsxs("div",{className:"relative z-10 w-full max-w-md mx-4",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:n("login.title")}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-4 md:p-6",children:[g&&o.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:o.jsx("p",{className:"text-red-600 text-sm",children:g})}),o.jsxs("form",{onSubmit:C,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"userId",className:"block text-sm font-medium text-gray-700 mb-2",children:n("login.userId")}),o.jsx("input",{id:"userId",type:"text",value:r,onChange:E=>s(E.target.value),onKeyPress:j,placeholder:n("login.userIdPlaceholder"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",disabled:p,autoComplete:"username"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:n("login.password")}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"password",type:i?"text":"password",value:l,onChange:E=>a(E.target.value),onKeyPress:j,placeholder:n("login.passwordPlaceholder"),className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",disabled:p,autoComplete:"current-password"}),o.jsx("button",{type:"button",onClick:()=>c(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:p,children:i?o.jsx(hm,{className:"w-5 h-5"}):o.jsx(gm,{className:"w-5 h-5"})})]})]}),o.jsx("button",{type:"submit",disabled:p||!r.trim()||!l.trim(),className:"w-full flex items-center justify-center px-4 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:p?o.jsxs(o.Fragment,{children:[o.jsx(wt,{className:"w-5 h-5 animate-spin mr-2"}),n("login.loggingIn")]}):o.jsx(o.Fragment,{children:n("login.loginButton")})})]})]})]})]}):null},Hm=({isVisible:e,message:t})=>{const{t:n}=et();return e?o.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),o.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center p-8",children:o.jsxs("div",{className:"bg-white/95 backdrop-blur-sm border border-gray-200/50 rounded-2xl shadow-2xl px-8 py-6 flex flex-col items-center space-y-4 min-w-[280px]",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:o.jsx(Oa,{className:"w-8 h-8 text-blue-600"})}),o.jsx("div",{className:"text-xl font-semibold text-gray-900",children:n("nav.title")})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(wt,{className:"w-8 h-8 text-blue-600 animate-spin"}),o.jsx("div",{className:"text-lg font-medium text-gray-700",children:t||n("status.loadingMedMapData")})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full animate-pulse",style:{width:"100%"}})}),o.jsx("div",{className:"text-sm text-gray-500 text-center max-w-xs",children:n("status.loadingMedMapHint")})]})})]}):null},Vm=({message:e,type:t,isVisible:n,onClose:r,duration:s=3e3})=>{const[l,a]=v.useState(!1);return v.useEffect(()=>{if(n){a(!0);const i=setTimeout(()=>{r()},s);return()=>clearTimeout(i)}else{const i=setTimeout(()=>{a(!1)},300);return()=>clearTimeout(i)}},[n,s,r]),l?o.jsx("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-[9999] transition-all duration-300 ease-in-out ${n?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"}`,children:o.jsxs("div",{className:`flex items-center space-x-3 px-4 py-3 rounded-lg shadow-lg border ${t==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[t==="success"?o.jsx(fm,{className:"w-5 h-5 text-green-600"}):o.jsx(jm,{className:"w-5 h-5 text-red-600"}),o.jsx("span",{className:"text-sm font-medium",children:e}),o.jsx("button",{onClick:r,className:`p-1 rounded-full hover:bg-black/10 transition-colors ${t==="success"?"text-green-600":"text-red-600"}`,children:o.jsx(ut,{className:"w-4 h-4"})})]})}):null};function Wm(){const{selectedDepartmentType:e,viewMode:t,isAuthenticated:n,setIsAuthenticated:r,setCurrentUser:s,isLoadingMedMap:l,notification:a,hideNotification:i,addParentContainerModalOpen:c,closeAddParentContainerModal:p,selectedDepartmentForAdd:h,addStoreItemModalOpen:g,closeAddStoreItemModal:x,selectedStoreShelfForAdd:C,addDepartmentModalOpen:j,closeAddDepartmentModal:E,setMedicineList:U,setIsLoadingMedicines:u,showNotification:d}=Ke();v.useEffect(()=>{(()=>{try{const D=sessionStorage.getItem("user_session");if(D){const w=JSON.parse(D);w.GUID&&w.ID&&w.Name?(s(w),r(!0)):sessionStorage.removeItem("user_session")}}catch(D){console.error("Error checking session:",D),sessionStorage.removeItem("user_session")}})()},[r,s]),v.useEffect(()=>{let k=!0;return(async()=>{if(n){u(!0);try{console.log("...");const w=await je.getMedicineCloud();if(console.log(" API :",w),!k)return;w.Code===200&&w.Data?(U(w.Data),console.log(`  ${w.Data.length} `),d(` ${w.Data.length} `,"success")):(console.warn("API :",w),U([]),d("","error"))}catch(w){if(!k)return;console.error(":",w),U([]),d("","error")}finally{k&&u(!1)}}})(),()=>{k=!1}},[n]);const m=k=>{s(k),r(!0)};return n?o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx(bm,{}),o.jsx(Cm,{}),o.jsx(km,{}),o.jsx("div",{className:"fixed inset-0",children:o.jsx("div",{className:"w-full h-full",children:t==="department"?o.jsx(Dm,{}):o.jsx(Em,{})})}),o.jsx(_m,{}),o.jsx(Am,{}),o.jsx($m,{}),o.jsx(Lm,{}),o.jsx(Om,{}),o.jsx(Um,{}),o.jsx(zm,{}),o.jsx(Bm,{isOpen:g,onClose:x,storeShelf:C}),o.jsx(Fm,{isOpen:j,onClose:E}),o.jsx(Hm,{isVisible:l}),o.jsx(Vm,{message:a.message,type:a.type,isVisible:a.isVisible,onClose:i})]}):o.jsx(Gm,{isOpen:!0,onLoginSuccess:m})}function Xm(){return o.jsx(im,{children:o.jsx(lm,{children:o.jsx(Wm,{})})})}dd(document.getElementById("root")).render(o.jsx(v.StrictMode,{children:o.jsx(Xm,{})}));
